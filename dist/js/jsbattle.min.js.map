{"version":3,"sources":["webpack:///jsbattle.min.js","webpack:///webpack/bootstrap ba58b55b3b45f74a5bd8","webpack:///./app/engine/entry.js","webpack:///./app/engine/Simulation.js","webpack:///./app/engine/Tank.js","webpack:///./app/engine/Bullet.js","webpack:///./app/engine/Battlefield.js","webpack:///./app/engine/EventStore.js","webpack:///./app/engine/CollisionResolver.js","webpack:///./~/SAT/SAT.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./app/engine/AiWrapper.js","webpack:///./app/engine/PerformanceMonitor.js","webpack:///./~/seedrandom/index.js","webpack:///./~/seedrandom/lib/alea.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./~/seedrandom/lib/xor128.js","webpack:///./~/seedrandom/lib/xorwow.js","webpack:///./~/seedrandom/lib/xorshift7.js","webpack:///./~/seedrandom/lib/xor4096.js","webpack:///./~/seedrandom/lib/tychei.js","webpack:///./~/seedrandom/seedrandom.js","webpack:///./app/engine/renderers/Renderer.js","webpack:///./app/engine/renderers/debug/DebugRenderer.js","webpack:///./app/engine/renderers/abstractPixi/AbstractPixiRenderer.js","webpack:///./app/engine/renderers/abstract/AbstractRenderer.js","webpack:///./app/engine/renderers/abstract/AbstractView.js","webpack:///./app/engine/renderers/abstractPixi/AbstractPixiView.js","webpack:///./app/engine/renderers/abstractPixi/AbstractPixiTankView.js","webpack:///./app/engine/renderers/abstractPixi/PixiRendererClockModel.js","webpack:///./~/pixi-packer-parser/index.js","webpack:///./~/resource-loader/lib/index.js","webpack:///./~/resource-loader/lib/Loader.js","webpack:///./~/mini-signals/lib/mini-signals.js","webpack:///./~/parse-uri/index.js","webpack:///./~/resource-loader/lib/async.js","webpack:///./~/resource-loader/lib/Resource.js","webpack:///./~/resource-loader/lib/b64.js","webpack:///./app/engine/renderers/debug/DebugBattlefieldView.js","webpack:///./app/engine/renderers/debug/DebugClockView.js","webpack:///./app/engine/renderers/debug/DebugBulletView.js","webpack:///./app/engine/renderers/abstractPixi/AbstractPixiBulletView.js","webpack:///./app/engine/renderers/debug/DebugTankView.js","webpack:///./app/engine/renderers/bw/BWRenderer.js","webpack:///./app/engine/renderers/bw/BWBattlefieldView.js","webpack:///./app/engine/renderers/bw/BWClockView.js","webpack:///./app/engine/renderers/bw/BWBulletView.js","webpack:///./app/engine/renderers/bw/BWTankView.js","webpack:///./app/engine/renderers/brody/BrodyRenderer.js","webpack:///./app/engine/renderers/brody/BrodyBattlefieldView.js","webpack:///./app/engine/renderers/brody/BrodyClockView.js","webpack:///./app/engine/renderers/brody/BrodyBulletView.js","webpack:///./app/engine/renderers/brody/BrodyTankView.js","webpack:///./app/engine/renderers/brody/BrodySettings.js"],"names":["JsBattle","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Simulation","Renderer","DebugRenderer","BWRenderer","BrodyRenderer","createSimulation","renderer","createRenderer","name","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Tank","Bullet","Battlefield","EventStore","CollisionResolver","AiWrapper","PerformanceMonitor","seedrandom","this","_aiList","_allTankList","_tankList","_bulletList","_explodedTankList","_explodedBulletList","_battlefield","_simulationTimeout","_renderInterval","_simulationStepDuration","_renderStepDuration","_renderer","_isRunning","_collisionResolver","_rngSeed","Date","getTime","_rng","_speedMultiplier","_onSimulationStepCallback","_onRenderStepCallback","_onFinishCallback","_onErrorCallback","_timeElapsed","_timeLimit","_eventStore","_nextTankId","_nextBulletId","_rendererQuality","_perfMon","setSimulationStepDuration","Math","random","value","width","height","setSize","initBatlefield","updateBattlefield","v","isNaN","min","max","callback","push","Number","self","clearInterval","_activateAi","then","result","setInterval","_updateView","clearTimeout","start","_simulationStep","catch","err","console","error","message","onSimulationStep","startTime","_updateModel","_updateAi","_getTanksLeft","stop","processingTime","dt","round","setTimeout","bind","ai","deactivate","aiName","startSlot","getStartSlot","tank","_createTank","randomize","moveTo","x","y","_createAiWrapper","Promise","resolve","reject","promise","done","reduce","chain","activate","simulationStep","bullet","killCount","energy","removeTank","add","type","isShooting","power","handleShoot","_createBullet","j","onSurviveScore","hitTestBullet","removeBullet","quality","qualityLevel","preRender","renderClock","renderTank","get","renderBullet","pop","renderTankStats","postRender","clear","tanksLeft","owner","set","normalizeAngle","a","_id","_name","_maxEnergy","_energy","_x","_y","_lastX","_lastY","_angle","_gunAngle","_radarAngle","_throttle","_actualThrottle","_speed","_turn","_gunTurn","_radarTurn","_wallHit","_enemyHit","_radarRange","_radarFocal","_enemySpot","_bulletsSpot","_gunReloadTime","_gunTimer","_shootingPower","_targetingAlarmTimer","_debugData","_score","_state","_hasBoost","_maxBoost","_boost","_wallDistance","_skin","damage","onDamage","speed","enemy","distance","xPosition","yPosition","isReloading","settings","SKIN","collisionResolver","oldX","oldY","maxSpeed","hasBoost","accelerationFactor","rotation","PI","cos","sin","checkTank","updateTank","scanTanks","scanBullets","scanWalls","enemyData","bulletsData","shift","angle","dx","dy","sqrt","boost","collisions","wall","radar","targetingAlarm","wallDistance","bullets","gun","reloading","_owner","gunAngle","gunLength","_power","_damage","_exploded","_width","_height","_startSlotList","_offsetX","_offsetY","margin","minX","maxX","minY","maxY","temporaryValue","randomIndex","currentIndex","floor","_data","index","event","SAT","_wallList","_tankMap","_bulletMap","_radarBeamMap","battlefield","Box","Vector","toPolygon","tankShape","_getTankShape","pos","bulletShape","_getBulletShape","testCirclePolygon","onWallHit","enemyShape","testCircleCircle","energyBefore","onEnemyHit","onEnemyHitScore","onEnemyKillScore","onBeingRam","radarBeamShape","_getRadarBeamShape","setAngle","radarAngle","enemies","testPolygonCircle","d","closestEnemy","closestDistance","radarRange","onEnemySpot","onTargetingAlarm","spottedBullets","onBulletSpot","_getWallDistance","onWallSpot","distanceNorth","distanceSouth","distanceWest","distanceEast","d1","d2","shape","Circle","exploded","tan","radarFocal","Polygon","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","_typeof","Symbol","iterator","obj","constructor","root","factory","undefined","r","points","setPoints","w","h","Response","flattenPointsOn","normal","MAX_VALUE","len","dot","isSeparatingAxis","aPos","bPos","aPoints","bPoints","axis","response","rangeA","T_ARRAYS","rangeB","offsetV","T_VECTORS","copy","sub","projectedOffset","overlap","option1","option2","absOverlap","abs","reverse","voronoiRegion","line","point","len2","dp","LEFT_VORONOI_REGION","RIGHT_VORONOI_REGION","MIDDLE_VORONOI_REGION","pointInCircle","differenceV","radiusSq","distanceSq","pointInPolygon","poly","TEST_POINT","T_RESPONSE","testPolygonPolygon","b","totalRadius","totalRadiusSq","dist","normalize","scale","polygon","circle","circlePos","radius","radius2","edge","next","prev","overlapN","region","point2","perp","distAbs","aInB","aLen","bLen","other","clone","rotate","project","amt","projectN","reflect","reflectN","getAABB","calcPoints","edges","normals","_recalc","setOffset","offset","translate","calcPoint","p1","p2","e","xMin","yMin","xMax","yMax","webpackPolyfill","deprecate","paths","children","Error","_tank","_aiWorker","_aiProcessingStart","_aiProcessingCheckInterval","_aiProcessingResolveCallback","_aiProcessingRejectCallback","_slowAiChances","_onActivationCallback","_onDectivationCallback","_aiProcessingTimeLimit","_controlData","THROTTLE","BOOST","TURN","RADAR_TURN","GUN_TURN","SHOOT","DEBUG","_onDeactivationCallback","seed","_createWorker","onerror","log","fullName","performanceIssues","tankName","tankId","onmessage","commandEvent","data","_configureTank","_controlTank","warn","postMessage","command","terminate","state","control","input","indexOf","init","setThrottle","setBoost","setTurn","setRadarTurn","setGunTurn","setDebugData","shoot","path","Worker","_stepCounter","_checkLoop","_started","_desiredPerfomance","_actualPerfomance","_perfomanceIndex","_desiredQuality","_quality","_checkInterval","_check","ceil","_updateQuality","lowestQuality","decreaseStep","targetQuality","alea","xor128","xorwow","xorshift7","xor4096","tychei","sr","global","define","Alea","me","mash","Mash","t","s0","s1","s2","f","impl","opts","xg","prng","int32","double","quick","n","toString","charCodeAt","__webpack_amd_options__","XorGen","strseed","z","k","top","bot","X","slice","limit","pool","math","options","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","g","chunks","startdenom","significance","overflow","S","pass","is_math_call","rngname","keylen","s","mask","count","depth","prop","typ","smear","stringseed","out","nodecrypto","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","browser","navigator","plugins","screen","String","fromCharCode","apply","pow","ex","events","msElapsed","msLimit","tankList","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","AbstractPixiRenderer","DebugBattlefieldView","DebugClockView","DebugBulletView","DebugTankView","_AbstractPixiRenderer","_this","_frameCounter","_fpsLabel","_scoreBoard","labelStyle","PIXI","TextStyle","fontFamily","fontSize","fill","Text","stage","addChild","text","alpha","scores","score","sort","msg","toFixed","clock","AbstractRenderer","AbstractPixiView","AbstractPixiTankView","PixiRendererClockModel","PixiPackerParser","_AbstractRenderer","_masterContainer","Container","_tankContainer","_bulletContainer","_hudContainer","_stage","_clockModel","_clockView","_battlefieldView","window","devicePixelRatio","_rendererScale","offsetX","offsetY","rendererSettings","view","_canvas","antialias","backgroundColor","resolution","autoDetectRenderer","_createBattlefieldView","_createClockView","render","canvas","loader","loaders","Loader","after","load","onAssetsLoaded","update","getTankView","isAlive","hudView","getBulletView","AbstractView","_Renderer","_renderModel","_createTankView","_createBulletView","model","map","_model","_view","_isAlive","_AbstractView","_create","removeChild","container","_AbstractPixiView","_hudView","_createHud","body","energyBar","maxEnergy","label","_onEvent","_onShoot","_onDestroy","destroy","_body","_createBody","_gun","_createGun","_radar","_createRadar","_label","_createLabel","_energyBar","_createEnergyBar","_createHudBackground","Sprite","_msElapsed","_msLimit","msTotal","ms","pathWithoutFile","elements","split","join","WaitForAll","allDone","remaining","Resource","resource","TYPE","JSON","meta","version","loadOptions","crossOrigin","loadType","LOAD_TYPE","IMAGE","parentResource","urlForManifest","url","replace","baseUrl","route","spritesheets","progress","waiter","forEach","spritesheet","image","imageUrl","res","texture","baseTexture","textures","sprites","sprite","crop","frame","Rectangle","position","dimension","VERSION","charAt","trim","Texture","utils","TextureCache","default","async","b64","base64","_interopRequireDefault","__esModule","_typeof2","_miniSignals","_miniSignals2","_parseUri","_parseUri2","_async","newObj","hasOwnProperty","_Resource","_Resource2","rgxExtractUrlHash","arguments","concurrency","loading","defaultQueryString","_beforeMiddleware","_afterMiddleware","_resourcesParsing","_boundLoadResource","_loadResource","_queue","queue","pause","resources","onProgress","onError","onLoad","onStart","onComplete","cb","Array","isArray","_prepareUrl","onAfterMiddleware","once","incompleteChildren","_i","isComplete","fullChunk","progressChunk","eachChunk","_i2","pre","fn","use","reset","kill","_onLoadBinding","detach","isLoading","abort","chunk","_tasks","dispatch","resume","parsedUrl","strictMode","protocol","lastIndexOf","hash","exec","substr","dequeue","_this2","_dequeue","eachSeries","_onLoad","_onComplete","_this3","splice","idle","_addMiniSignalBinding","node","_head","_tail","_next","_prev","MiniSignalBinding","thisArg","_fn","_once","_thisArg","MiniSignal","exists","ee","str","o","q","parser","strict","loose","uri","$0","$1","$2","_noop","array","deferNext","onlyOnce","callFn","worker","_insert","insertAtFront","started","drain","item","unshift","process","task","workers","buffer","unsaturated","saturated","empty","paused","running","setExtMap","extname","val","substring","reqType","xhr","useXdr","XDomainRequest","XMLHttpRequest","tempAnchor","_flags","_setFlag","STATUS_FLAGS","DATA_URL","extension","_getExtension","_determineLoadType","xhrType","metadata","UNKNOWN","_boundComplete","complete","_boundOnError","_onError","_boundOnProgress","_onProgress","_boundXhrOnError","_xhrOnError","_boundXhrOnAbort","_xhrOnAbort","_boundXhrOnLoad","_xhrOnLoad","_boundXdrOnTimeout","_xdrOnTimeout","setExtensionLoadType","_loadTypeMap","setExtensionXhrType","_xhrTypeMap","removeEventListener","ontimeout","onprogress","onload","COMPLETE","LOADING","xdr","src","EMPTY_GIF","firstChild","_determineCrossOrigin","_loadElement","AUDIO","_loadSourceElement","VIDEO","XHR","_loadXdr","_loadXhr","_hasFlag","flag","loadElement","Image","document","createElement","skipSource","addEventListener","Audio","isCocoonJS","mimeTypes","mimeType","appendChild","_createSource","_mimeTypes","_determineXhrType","open","XHR_RESPONSE_TYPE","DOCUMENT","responseType","TEXT","send","timeout","mime","source","nodeName","lengthComputable","total","status","statusText","responseText","responseURL","parse","DOMParser","domparser","parseFromString","div","innerHTML","XML","loc","location","href","samePort","port","host","hostname","ext","isDataUrl","slashIndex","queryStart","hashStart","toLowerCase","_getMimeFromXhrType","BUFFER","BLOB","DEFAULT","NONE","gif","png","bmp","jpg","jpeg","tif","tiff","webp","tga","svg","svg+xml","mp3","ogg","wav","mp4","webm","xhtml","html","htm","xml","tmx","tsx","json","txt","ttf","otf","encodeBinary","output","inx","bytebuffer","encodedCharIndexes","jnx","_jnx","_keyStr","background","Graphics","beginFill","lineStyle","drawRect","endFill","setText","AbstractPixiBulletView","_AbstractPixiBulletVi","drawCircle","_AbstractPixiTankView","lineTo","anchor","statusBarBg","BWBattlefieldView","BWClockView","BWBulletView","BWTankView","_bigBoomAnim","_smallBoomAnim","_shakeTimer","fromFrame","_addExplosion","masterContainer","anim","extras","AnimatedSprite","loop","play","_shoot","gunContainer","tankGun","tankRadar","BrodyBattlefieldView","BrodyClockView","BrodyBulletView","BrodyTankView","BrodySettings","_particleContainer","_particleList","_explosionList","_settings","_frameTimer","_fpsInterval","_fps","battlefieldView","configure","particles","ParticleContainer","_addTankExplosion","directionCorrection","throttle","dirtAngle","corner1X","corner1Y","corner2X","corner2Y","_addDirt","_addBulletExplosion","addBulletHole","particle","particleCount","alphaSpeed","lifetime","particleLimit","dropFrames","addCrater","_addSparks","_addGlow","sparks","blendMode","BLEND_MODES","ADD","showGlow","glow","amount","showDirt","_holeList","groundMask","_craterContainer","wallMask","_holesContainer","crater","MULTIPLY","visible","skratchLimit","showCraters","hole","_glow","_lightTimer","_tankGun","enemySpot","_light","skin","stroke","strokeThickness","_particleLimit","_skratchLimit","_showDirt","_showGlow","_showCraters","_dropFrames"],"mappings":"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","file":"jsbattle.min.js","sourcesContent":["var JsBattle =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Simulation = __webpack_require__(1);\n\tvar Renderer = __webpack_require__(22);\n\tvar DebugRenderer = __webpack_require__(23);\n\tvar BWRenderer = __webpack_require__(43);\n\tvar BrodyRenderer = __webpack_require__(48);\n\t\n\tmodule.exports = {\n\t\n\t  createSimulation: function createSimulation(renderer) {\n\t    renderer = renderer ? renderer : new Renderer();\n\t    var sim = new Simulation(renderer);\n\t    return sim;\n\t  },\n\t\n\t  createRenderer: function createRenderer(name) {\n\t    switch (name) {\n\t      case 'debug':\n\t        return new DebugRenderer();\n\t      case 'bw':\n\t        return new BWRenderer();\n\t      case 'brody':\n\t        return new BrodyRenderer();\n\t      default:\n\t        throw \"Unknown rederer \" + name;\n\t    }\n\t  }\n\t};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Tank = __webpack_require__(2);\n\tvar Bullet = __webpack_require__(3);\n\tvar Battlefield = __webpack_require__(4);\n\tvar EventStore = __webpack_require__(5);\n\tvar CollisionResolver = __webpack_require__(6);\n\tvar AiWrapper = __webpack_require__(10);\n\tvar PerformanceMonitor = __webpack_require__(11);\n\tvar seedrandom = __webpack_require__(12);\n\t\n\tmodule.exports = function () {\n\t  function Simulation(renderer) {\n\t    _classCallCheck(this, Simulation);\n\t\n\t    this._aiList = [];\n\t    this._allTankList = [];\n\t    this._tankList = [];\n\t    this._bulletList = [];\n\t    this._explodedTankList = [];\n\t    this._explodedBulletList = [];\n\t    this._battlefield = new Battlefield();\n\t    this._simulationTimeout = null;\n\t    this._renderInterval = null;\n\t    this._simulationStepDuration = 17;\n\t    this._renderStepDuration = 30;\n\t    this._renderer = renderer;\n\t    this._isRunning = false;\n\t    this._collisionResolver = new CollisionResolver();\n\t    this._rngSeed = new Date().getTime();\n\t    this._rng = seedrandom(this._rngSeed);\n\t    this._speedMultiplier = 1;\n\t    this._onSimulationStepCallback = [];\n\t    this._onRenderStepCallback = [];\n\t    this._onFinishCallback = [];\n\t    this._onErrorCallback = [];\n\t    this._timeElapsed = 0;\n\t    this._timeLimit = 30000;\n\t    this._eventStore = new EventStore();\n\t    this._nextTankId = 1;\n\t    this._nextBulletId = 1;\n\t    this._rendererQuality = 'auto';\n\t    this._perfMon = new PerformanceMonitor();\n\t    this._perfMon.setSimulationStepDuration(this._simulationStepDuration / this._speedMultiplier);\n\t    Math.random = this._rng;\n\t  }\n\t\n\t  _createClass(Simulation, [{\n\t    key: \"init\",\n\t    value: function init(width, height) {\n\t      this._battlefield.setSize(width, height);\n\t      this._renderer.initBatlefield(this._battlefield);\n\t      this._collisionResolver.updateBattlefield(this._battlefield);\n\t    }\n\t  }, {\n\t    key: \"setRendererQuality\",\n\t    value: function setRendererQuality(v) {\n\t      if (isNaN(v) && v != 'auto') return;\n\t      if (!isNaN(v)) {\n\t        v = Math.min(1, Math.max(0, v));\n\t      }\n\t      this._rendererQuality = v;\n\t    }\n\t  }, {\n\t    key: \"onStep\",\n\t    value: function onStep(callback) {\n\t      this._onSimulationStepCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"onRender\",\n\t    value: function onRender(callback) {\n\t      this._onRenderStepCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"onFinish\",\n\t    value: function onFinish(callback) {\n\t      this._onFinishCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"onError\",\n\t    value: function onError(callback) {\n\t      this._onErrorCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"setSpeed\",\n\t    value: function setSpeed(v) {\n\t      this._speedMultiplier = Math.max(0.01, Number(v));\n\t      this._perfMon.setSimulationStepDuration(this._simulationStepDuration / this._speedMultiplier);\n\t    }\n\t  }, {\n\t    key: \"start\",\n\t    value: function start() {\n\t      this._isRunning = true;\n\t      var i;\n\t      var self = this;\n\t\n\t      if (this._renderInterval) {\n\t        clearInterval(this._renderInterval);\n\t        this._renderInterval = null;\n\t      }\n\t\n\t      this._activateAi().then(function (result) {\n\t        self._renderInterval = setInterval(function () {\n\t          self._updateView();\n\t        }, self._renderStepDuration);\n\t\n\t        if (self._simulationTimeout) {\n\t          clearTimeout(self._simulationTimeout);\n\t        }\n\t        self._perfMon.start();\n\t        self._simulationStep();\n\t      }).catch(function (err) {\n\t        console.error(err.message);\n\t        console.error(err);\n\t        for (i = 0; i < self._onErrorCallback.length; i++) {\n\t          self._onErrorCallback[i](err.message ? err.message : \"Error during simulation\");\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: \"_simulationStep\",\n\t    value: function _simulationStep() {\n\t      this._perfMon.onSimulationStep();\n\t      var startTime = new Date().getTime();\n\t      var self = this;\n\t      var i;\n\t      this._updateModel();\n\t      this._updateAi().then(function (result) {\n\t        if (self._getTanksLeft() <= 1 || self._timeElapsed == self._timeLimit) {\n\t          self.stop();\n\t          self._updateView();\n\t          for (i = 0; i < self._onFinishCallback.length; i++) {\n\t            self._onFinishCallback[i]();\n\t          }\n\t        }\n\t        if (self._isRunning) {\n\t          var processingTime = new Date().getTime() - startTime;\n\t          var dt = self._simulationStepDuration - processingTime;\n\t          dt = Math.max(1, dt);\n\t          dt /= self._speedMultiplier;\n\t          dt = Math.round(dt);\n\t\n\t          for (i = 0; i < self._onSimulationStepCallback.length; i++) {\n\t            self._onSimulationStepCallback[i]();\n\t          }self._timeElapsed = Math.min(self._timeElapsed + self._simulationStepDuration, self._timeLimit);\n\t          if (dt >= 1) {\n\t            self._simulationTimeout = setTimeout(self._simulationStep.bind(self), dt);\n\t          } else {\n\t            self._simulationStep();\n\t          }\n\t        }\n\t      }).catch(function (err) {\n\t        console.error(err.message);\n\t        console.error(err);\n\t        for (i = 0; i < self._onErrorCallback.length; i++) {\n\t          self._onErrorCallback[i](err.message ? err.message : \"Error during simulation\");\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: \"stop\",\n\t    value: function stop() {\n\t      this._isRunning = false;\n\t      this._perfMon.stop();\n\t      this._renderer.stop();\n\t      if (this._simulationTimeout) {\n\t        clearTimeout(this._simulationTimeout);\n\t        this._simulationTimeout = null;\n\t      }\n\t      if (this._renderInterval) {\n\t        clearInterval(this._renderInterval);\n\t        this._renderInterval = null;\n\t      }\n\t      var tank, ai, i;\n\t      for (i = 0; i < this._aiList.length; i++) {\n\t        ai = this._aiList[i];\n\t        if (!ai) continue;\n\t        ai.deactivate();\n\t      }\n\t    }\n\t  }, {\n\t    key: \"addTank\",\n\t    value: function addTank(aiName) {\n\t      if (!this._battlefield) {\n\t        throw \"Simulation not initialized\";\n\t      }\n\t      var startSlot = this._battlefield.getStartSlot();\n\t      if (!startSlot) {\n\t        throw \"No free space in the battlefield\";\n\t      }\n\t      var tank = this._createTank(aiName);\n\t      tank.randomize();\n\t      tank.moveTo(startSlot.x, startSlot.y);\n\t      this._tankList.push(tank);\n\t      this._allTankList.push(tank);\n\t      if (this._allTankList.length > 2) {\n\t        this._timeLimit += 2000;\n\t      }\n\t\n\t      var ai = this._createAiWrapper(tank);\n\t      this._aiList.push(ai);\n\t\n\t      return ai;\n\t    }\n\t  }, {\n\t    key: \"_activateAi\",\n\t    value: function _activateAi() {\n\t      var self = this;\n\t      return new Promise(function (resolve, reject) {\n\t        var promise = new Promise(function (done, err) {\n\t          done();\n\t        });\n\t\n\t        promise = self._aiList.reduce(function (chain, ai) {\n\t          if (!ai) {\n\t            return chain;\n\t          } else {\n\t            return chain.then(ai.activate.bind(ai, self._rngSeed));\n\t          }\n\t        }, promise);\n\t        promise.then(function () {\n\t          resolve();\n\t        }).catch(function (err) {\n\t          reject(err);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: \"_updateAi\",\n\t    value: function _updateAi() {\n\t      var self = this;\n\t      return new Promise(function (resolve, reject) {\n\t\n\t        var promise = new Promise(function (done, err) {\n\t          done();\n\t        });\n\t\n\t        promise = self._aiList.reduce(function (chain, ai) {\n\t          if (!ai) {\n\t            return chain;\n\t          } else {\n\t            return chain.then(ai.simulationStep.bind(ai));\n\t          }\n\t        }, promise);\n\t        promise.then(function () {\n\t          resolve();\n\t        }).catch(function (err) {\n\t          reject(err);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: \"_updateModel\",\n\t    value: function _updateModel() {\n\t      var i = void 0,\n\t          tank = void 0,\n\t          bullet = void 0,\n\t          ai = void 0;\n\t\n\t      for (i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        tank.simulationStep(this._collisionResolver);\n\t      }\n\t\n\t      var killCount = 0;\n\t      for (i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        if (tank.energy <= 0) {\n\t          killCount++;\n\t          this._tankList[i] = null;\n\t          this._explodedTankList.push(tank);\n\t          this._collisionResolver.removeTank(tank);\n\t          this._eventStore.add(\"tank_\" + tank.id, {\n\t            type: \"destroy\",\n\t            tank: tank\n\t          });\n\t        }\n\t      }\n\t      for (i = 0; i < this._aiList.length; i++) {\n\t        ai = this._aiList[i];\n\t        if (!ai) continue;\n\t        if (ai.tank.energy <= 0) {\n\t          this._aiList[i] = null;\n\t          ai.deactivate();\n\t        }\n\t      }\n\t\n\t      for (i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        if (tank.isShooting) {\n\t          var power = tank.handleShoot();\n\t          bullet = this._createBullet(tank, power);\n\t          this._bulletList.push(bullet);\n\t          this._eventStore.add(\"tank_\" + tank.id, {\n\t            type: \"shoot\",\n\t            tank: tank,\n\t            bullet: bullet\n\t          });\n\t        }\n\t      }\n\t      for (i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        for (var j = 0; j < killCount; j++) {\n\t          tank.onSurviveScore();\n\t        }\n\t      }\n\t      var hitTest = void 0;\n\t      for (i = 0; i < this._bulletList.length; i++) {\n\t        bullet = this._bulletList[i];\n\t        if (!bullet) continue;\n\t        bullet.simulationStep();\n\t        hitTest = this._collisionResolver.hitTestBullet(bullet);\n\t        if (hitTest) {\n\t          this._bulletList[i] = null;\n\t          this._explodedBulletList.push(bullet);\n\t          this._collisionResolver.removeBullet(bullet);\n\t          this._eventStore.add(\"bullet_\" + bullet.id, {\n\t            type: \"explode\",\n\t            bullet: bullet\n\t          });\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: \"_updateView\",\n\t    value: function _updateView() {\n\t      if (this._rendererQuality == 'auto') {\n\t        this._renderer.quality = this._perfMon.qualityLevel;\n\t      } else {\n\t        this._renderer.quality = this._rendererQuality;\n\t      }\n\t      var i = void 0,\n\t          tank = void 0,\n\t          bullet = void 0;\n\t      this._renderer.preRender();\n\t      this._renderer.renderClock(this._timeElapsed, this._timeLimit);\n\t      for (i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        this._renderer.renderTank(tank, this._eventStore.get(\"tank_\" + tank.id));\n\t      }\n\t      for (i = 0; i < this._bulletList.length; i++) {\n\t        bullet = this._bulletList[i];\n\t        if (!bullet) continue;\n\t        this._renderer.renderBullet(bullet, this._eventStore.get(\"bullet_\" + bullet.id));\n\t      }\n\t      while (this._explodedTankList.length) {\n\t        tank = this._explodedTankList.pop();\n\t        this._renderer.renderTank(tank, this._eventStore.get(\"tank_\" + tank.id));\n\t      }\n\t      while (this._explodedBulletList.length) {\n\t        bullet = this._explodedBulletList.pop();\n\t        this._renderer.renderBullet(bullet, this._eventStore.get(\"bullet_\" + bullet.id));\n\t      }\n\t      this._renderer.renderTankStats(this._allTankList);\n\t      this._renderer.postRender();\n\t      for (i = 0; i < this._onRenderStepCallback.length; i++) {\n\t        this._onRenderStepCallback[i]();\n\t      }this._eventStore.clear();\n\t    }\n\t  }, {\n\t    key: \"_getTanksLeft\",\n\t    value: function _getTanksLeft() {\n\t      var tanksLeft = 0;\n\t      var tank;\n\t      for (var i = 0; i < this._tankList.length; i++) {\n\t        tank = this._tankList[i];\n\t        if (!tank) continue;\n\t        tanksLeft++;\n\t      }\n\t      return tanksLeft;\n\t    }\n\t  }, {\n\t    key: \"_createAiWrapper\",\n\t    value: function _createAiWrapper(tank) {\n\t      return new AiWrapper(tank);\n\t    }\n\t  }, {\n\t    key: \"_createTank\",\n\t    value: function _createTank(aiName) {\n\t      var tank = new Tank(aiName, this._nextTankId++);\n\t      return tank;\n\t    }\n\t  }, {\n\t    key: \"_createBullet\",\n\t    value: function _createBullet(owner, power) {\n\t      var bullet = new Bullet(owner, this._nextBulletId++, power);\n\t      return bullet;\n\t    }\n\t  }, {\n\t    key: \"tankList\",\n\t    get: function get() {\n\t      return this._allTankList;\n\t    }\n\t  }, {\n\t    key: \"renderer\",\n\t    get: function get() {\n\t      return this._renderer;\n\t    }\n\t  }, {\n\t    key: \"battlefield\",\n\t    get: function get() {\n\t      return this._battlefield;\n\t    }\n\t  }, {\n\t    key: \"timeElapsed\",\n\t    get: function get() {\n\t      return this._timeElapsed;\n\t    }\n\t  }, {\n\t    key: \"timeLimit\",\n\t    get: function get() {\n\t      return this._timeLimit;\n\t    },\n\t    set: function set(v) {\n\t      this._timeLimit = v;\n\t    }\n\t  }]);\n\t\n\t  return Simulation;\n\t}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction normalizeAngle(a) {\n\t  while (a > 180) {\n\t    a -= 360;\n\t  }while (a < -180) {\n\t    a += 360;\n\t  }return a;\n\t}\n\t\n\tmodule.exports = function () {\n\t  function Tank(name, id) {\n\t    _classCallCheck(this, Tank);\n\t\n\t    this._id = id;\n\t    this._name = name;\n\t    this._maxEnergy = 100;\n\t    this._energy = this._maxEnergy;\n\t    this._x = 0;\n\t    this._y = 0;\n\t    this._lastX = 0;\n\t    this._lastY = 0;\n\t    this._angle = 0;\n\t    this._gunAngle = 0;\n\t    this._radarAngle = 0;\n\t    this._throttle = 0;\n\t    this._actualThrottle = 0;\n\t    this._speed = 0;\n\t    this._turn = 0;\n\t    this._gunTurn = 0;\n\t    this._radarTurn = 0;\n\t    this._wallHit = false;\n\t    this._enemyHit = false;\n\t    this._radarRange = 300;\n\t    this._radarFocal = 6;\n\t    this._enemySpot = null;\n\t    this._bulletsSpot = [];\n\t    this._gunReloadTime = 70;\n\t    this._gunTimer = 0;\n\t    this._shootingPower = 0;\n\t    this._targetingAlarmTimer = 0;\n\t    this._debugData = {};\n\t    this._score = 0;\n\t    this._state = null;\n\t    this._hasBoost = false;\n\t    this._maxBoost = 400;\n\t    this._boost = this._maxBoost;\n\t    this._wallDistance = null;\n\t    this._skin = 'zebra';\n\t  }\n\t\n\t  _createClass(Tank, [{\n\t    key: 'onEnemyHitScore',\n\t    value: function onEnemyHitScore(damage) {\n\t      this._score += damage;\n\t    }\n\t  }, {\n\t    key: 'onEnemyKillScore',\n\t    value: function onEnemyKillScore() {\n\t      this._score += 20;\n\t    }\n\t  }, {\n\t    key: 'onSurviveScore',\n\t    value: function onSurviveScore() {\n\t      this._score += 10;\n\t    }\n\t  }, {\n\t    key: 'setThrottle',\n\t    value: function setThrottle(v) {\n\t      this._throttle = Math.min(1, Math.max(-1, v));\n\t    }\n\t  }, {\n\t    key: 'setTurn',\n\t    value: function setTurn(v) {\n\t      this._turn = Math.min(1, Math.max(-1, v));\n\t    }\n\t  }, {\n\t    key: 'setGunTurn',\n\t    value: function setGunTurn(v) {\n\t      this._gunTurn = Math.min(1, Math.max(-1, v));\n\t    }\n\t  }, {\n\t    key: 'setRadarTurn',\n\t    value: function setRadarTurn(v) {\n\t      this._radarTurn = Math.min(1, Math.max(-1, v));\n\t    }\n\t  }, {\n\t    key: 'setBoost',\n\t    value: function setBoost(v) {\n\t      this._hasBoost = v ? true : false;\n\t    }\n\t  }, {\n\t    key: 'setDebugData',\n\t    value: function setDebugData(v) {\n\t      this._debugData = v;\n\t    }\n\t  }, {\n\t    key: 'onWallHit',\n\t    value: function onWallHit() {\n\t      this._wallHit = true;\n\t      this.onDamage(0.2);\n\t    }\n\t  }, {\n\t    key: 'onEnemyHit',\n\t    value: function onEnemyHit() {\n\t      this._enemyHit = true;\n\t      this.onDamage(0.2);\n\t    }\n\t  }, {\n\t    key: 'onBeingRam',\n\t    value: function onBeingRam(speed) {\n\t      this.onDamage(0.1 + Math.round(speed * 8) * 0.1);\n\t    }\n\t  }, {\n\t    key: 'onEnemySpot',\n\t    value: function onEnemySpot(enemy) {\n\t      this._enemySpot = enemy;\n\t    }\n\t  }, {\n\t    key: 'onBulletSpot',\n\t    value: function onBulletSpot(bullet) {\n\t      this._bulletsSpot.push(bullet);\n\t    }\n\t  }, {\n\t    key: 'onWallSpot',\n\t    value: function onWallSpot(distance) {\n\t      this._wallDistance = distance;\n\t    }\n\t  }, {\n\t    key: 'onTargetingAlarm',\n\t    value: function onTargetingAlarm() {\n\t      this._targetingAlarmTimer = 3;\n\t    }\n\t  }, {\n\t    key: 'onDamage',\n\t    value: function onDamage(damage) {\n\t      this._energy = Math.max(0, this._energy - damage);\n\t    }\n\t  }, {\n\t    key: 'moveTo',\n\t    value: function moveTo(xPosition, yPosition) {\n\t      this._x = xPosition;\n\t      this._y = yPosition;\n\t      this._lastX = xPosition;\n\t      this._lastY = yPosition;\n\t    }\n\t  }, {\n\t    key: 'handleShoot',\n\t    value: function handleShoot() {\n\t      var value = this._shootingPower;\n\t      this._shootingPower = 0;\n\t      return value;\n\t    }\n\t  }, {\n\t    key: 'shoot',\n\t    value: function shoot(value) {\n\t      value = Math.max(0.1, Math.min(1, value));\n\t      if (!this.isReloading) {\n\t        this._gunTimer = Math.round(value * this._gunReloadTime);\n\t        this._shootingPower = value;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'randomize',\n\t    value: function randomize() {\n\t      this._angle = Math.round(360 * Math.random()) - 180;\n\t    }\n\t  }, {\n\t    key: 'init',\n\t    value: function init(settings) {\n\t      if (settings && settings.SKIN) {\n\t        this._skin = settings.SKIN;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'simulationStep',\n\t    value: function simulationStep(collisionResolver) {\n\t      var self = this;\n\t\n\t      if (self._energy == 0) {\n\t        return;\n\t      }\n\t\n\t      if (self._hasBoost && self._boost > 0) {\n\t        self._boost--;\n\t      }\n\t\n\t      var oldX = self._x;\n\t      var oldY = self._y;\n\t\n\t      var maxSpeed = self._throttle * (self.hasBoost ? 4 : 2);\n\t      var accelerationFactor = self.hasBoost ? 10 : 20;\n\t      self._actualThrottle += (maxSpeed - self._actualThrottle) / accelerationFactor;\n\t\n\t      var v = self._actualThrottle;\n\t      var rotation = self._angle * (Math.PI / 180);\n\t      self._x += v * Math.cos(rotation);\n\t      self._y += v * Math.sin(rotation);\n\t      self._wallHit = false;\n\t      self._enemyHit = false;\n\t      var hitTest = !collisionResolver.checkTank(self);\n\t      if (hitTest) {\n\t        self._x = oldX;\n\t        self._y = oldY;\n\t        self._actualThrottle = 0;\n\t      }\n\t\n\t      self._angle += 2 * self._turn;\n\t      self._radarAngle += 6 * self._radarTurn;\n\t      self._gunAngle += 3 * self._gunTurn;\n\t\n\t      self._angle = normalizeAngle(self._angle);\n\t      self._radarAngle = normalizeAngle(self._radarAngle);\n\t      self._gunAngle = normalizeAngle(self._gunAngle);\n\t      collisionResolver.updateTank(self);\n\t\n\t      self._enemySpot = null;\n\t      self._wallDistance = null;\n\t      self._targetingAlarmTimer = Math.max(0, self._targetingAlarmTimer - 1);\n\t      collisionResolver.scanTanks(self);\n\t      collisionResolver.scanBullets(self);\n\t      collisionResolver.scanWalls(self);\n\t\n\t      if (self._gunTimer > 0) {\n\t        self._gunTimer--;\n\t      }\n\t\n\t      var enemyData = null;\n\t      var bulletsData = [];\n\t      while (self._bulletsSpot.length) {\n\t        var bullet = self._bulletsSpot.shift();\n\t        bulletsData.push({\n\t          id: bullet.id,\n\t          x: bullet.x,\n\t          y: bullet.y,\n\t          angle: bullet.angle,\n\t          speed: bullet.speed,\n\t          damage: bullet.damage\n\t        });\n\t      }\n\t\n\t      if (self._enemySpot) {\n\t        enemyData = {\n\t          id: self._enemySpot.id,\n\t          x: self._enemySpot.x,\n\t          y: self._enemySpot.y,\n\t          angle: self._enemySpot.angle,\n\t          speed: self._enemySpot.speed,\n\t          energy: self._enemySpot.energy\n\t        };\n\t      }\n\t\n\t      var dx = self._x - self._lastX;\n\t      var dy = self._y - self._lastY;\n\t      self._speed = Math.sqrt(dx * dx + dy * dy);\n\t\n\t      self._lastX = self._x;\n\t      self._lastY = self._y;\n\t\n\t      self._state = {\n\t        x: self._x,\n\t        y: self._y,\n\t        angle: self._angle,\n\t        energy: self._energy,\n\t        boost: self._boost,\n\t        collisions: {\n\t          wall: self._wallHit,\n\t          enemy: self._enemyHit\n\t        },\n\t        radar: {\n\t          angle: self._radarAngle,\n\t          targetingAlarm: self.targetingAlarm,\n\t          wallDistance: self._wallDistance,\n\t          enemy: enemyData,\n\t          bullets: bulletsData\n\t        },\n\t        gun: {\n\t          angle: self._gunAngle,\n\t          reloading: self.isReloading\n\t        }\n\t      };\n\t    }\n\t  }, {\n\t    key: 'id',\n\t    get: function get() {\n\t      return this._id;\n\t    }\n\t  }, {\n\t    key: 'skin',\n\t    get: function get() {\n\t      return this._skin;\n\t    }\n\t  }, {\n\t    key: 'state',\n\t    get: function get() {\n\t      return this._state;\n\t    }\n\t  }, {\n\t    key: 'energy',\n\t    get: function get() {\n\t      return this._energy;\n\t    }\n\t  }, {\n\t    key: 'score',\n\t    get: function get() {\n\t      return this._score;\n\t    }\n\t  }, {\n\t    key: 'maxEnergy',\n\t    get: function get() {\n\t      return this._maxEnergy;\n\t    }\n\t  }, {\n\t    key: 'radarRange',\n\t    get: function get() {\n\t      return this._radarRange;\n\t    }\n\t  }, {\n\t    key: 'radarFocal',\n\t    get: function get() {\n\t      return this._radarFocal;\n\t    }\n\t  }, {\n\t    key: 'name',\n\t    get: function get() {\n\t      return this._name;\n\t    }\n\t  }, {\n\t    key: 'fullName',\n\t    get: function get() {\n\t      return this._name + \" #\" + this._id;\n\t    }\n\t  }, {\n\t    key: 'x',\n\t    get: function get() {\n\t      return this._x;\n\t    }\n\t  }, {\n\t    key: 'y',\n\t    get: function get() {\n\t      return this._y;\n\t    }\n\t  }, {\n\t    key: 'speed',\n\t    get: function get() {\n\t      return this._speed;\n\t    }\n\t  }, {\n\t    key: 'gunLength',\n\t    get: function get() {\n\t      return 25;\n\t    }\n\t  }, {\n\t    key: 'angle',\n\t    get: function get() {\n\t      return this._angle;\n\t    }\n\t  }, {\n\t    key: 'throttle',\n\t    get: function get() {\n\t      return this._throttle;\n\t    }\n\t  }, {\n\t    key: 'hasBoost',\n\t    get: function get() {\n\t      return this._hasBoost && this._boost > 0;\n\t    }\n\t  }, {\n\t    key: 'boost',\n\t    get: function get() {\n\t      return this._boost;\n\t    }\n\t  }, {\n\t    key: 'maxBoost',\n\t    get: function get() {\n\t      return this._maxBoost;\n\t    }\n\t  }, {\n\t    key: 'gunAngle',\n\t    get: function get() {\n\t      return this._gunAngle;\n\t    }\n\t  }, {\n\t    key: 'radarAngle',\n\t    get: function get() {\n\t      return this._radarAngle;\n\t    }\n\t  }, {\n\t    key: 'enemySpot',\n\t    get: function get() {\n\t      return this._enemySpot;\n\t    }\n\t  }, {\n\t    key: 'targetingAlarm',\n\t    get: function get() {\n\t      return this._targetingAlarmTimer > 0;\n\t    }\n\t  }, {\n\t    key: 'debugData',\n\t    get: function get() {\n\t      return this._debugData;\n\t    }\n\t  }, {\n\t    key: 'isShooting',\n\t    get: function get() {\n\t      return this._shootingPower > 0;\n\t    }\n\t  }, {\n\t    key: 'shootingPower',\n\t    get: function get() {\n\t      return this._shootingPower;\n\t    }\n\t  }, {\n\t    key: 'isReloading',\n\t    get: function get() {\n\t      return this._gunTimer > 0;\n\t    }\n\t  }]);\n\t\n\t  return Tank;\n\t}();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function Bullet(owner, id, power) {\n\t    _classCallCheck(this, Bullet);\n\t\n\t    this._id = id;\n\t    this._owner = owner;\n\t    this._angle = owner.angle + owner.gunAngle;\n\t    while (this._angle > 180) {\n\t      this._angle -= 360;\n\t    }while (this._angle < -180) {\n\t      this._angle += 360;\n\t    }this._x = owner.x + owner.gunLength * Math.cos(this._angle * (Math.PI / 180));\n\t    this._y = owner.y + owner.gunLength * Math.sin(this._angle * (Math.PI / 180));\n\t    this._speed = 4;\n\t    this._power = power;\n\t    this._damage = Math.round(1000 * power + 300 * power * power) * 0.01;\n\t    this._exploded = false;\n\t  }\n\t\n\t  _createClass(Bullet, [{\n\t    key: 'onWallHit',\n\t    value: function onWallHit() {\n\t      this._exploded = true;\n\t    }\n\t  }, {\n\t    key: 'onEnemyHit',\n\t    value: function onEnemyHit(enemy) {\n\t      this._exploded = true;\n\t      enemy.onDamage(this._damage);\n\t    }\n\t  }, {\n\t    key: 'simulationStep',\n\t    value: function simulationStep() {\n\t      this._x += this._speed * Math.cos(this._angle * (Math.PI / 180));\n\t      this._y += this._speed * Math.sin(this._angle * (Math.PI / 180));\n\t    }\n\t  }, {\n\t    key: 'id',\n\t    get: function get() {\n\t      return this._id;\n\t    }\n\t  }, {\n\t    key: 'x',\n\t    get: function get() {\n\t      return this._x;\n\t    }\n\t  }, {\n\t    key: 'y',\n\t    get: function get() {\n\t      return this._y;\n\t    }\n\t  }, {\n\t    key: 'angle',\n\t    get: function get() {\n\t      return this._angle;\n\t    }\n\t  }, {\n\t    key: 'speed',\n\t    get: function get() {\n\t      return this._speed;\n\t    }\n\t  }, {\n\t    key: 'damage',\n\t    get: function get() {\n\t      return this._damage;\n\t    }\n\t  }, {\n\t    key: 'power',\n\t    get: function get() {\n\t      return this._power;\n\t    }\n\t  }, {\n\t    key: 'owner',\n\t    get: function get() {\n\t      return this._owner;\n\t    }\n\t  }, {\n\t    key: 'exploded',\n\t    get: function get() {\n\t      return this._exploded;\n\t    }\n\t  }]);\n\t\n\t  return Bullet;\n\t}();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function Battlefield(width, height) {\n\t    _classCallCheck(this, Battlefield);\n\t\n\t    this._width = null;\n\t    this._height = null;\n\t    this._startSlotList = [];\n\t    this._offsetX = Math.round(Math.random() * 10000 - 5000);\n\t    this._offsetY = Math.round(Math.random() * 10000 - 5000);\n\t  }\n\t\n\t  _createClass(Battlefield, [{\n\t    key: 'setSize',\n\t    value: function setSize(width, height) {\n\t      this._width = width - this.margin * 2;\n\t      this._height = height - this.margin * 2;\n\t\n\t      // generate list of start slots\n\t      this._startSlotList = [];\n\t      var slotSize = 90;\n\t      for (var x = this.minX + slotSize; x < this.maxX - slotSize; x += slotSize) {\n\t        for (var y = this.minY + slotSize; y < this.maxY - slotSize; y += slotSize) {\n\t          this._startSlotList.push({ x: x, y: y });\n\t        }\n\t      }\n\t      // shuffle start slots\n\t      var currentIndex = this._startSlotList.length,\n\t          temporaryValue,\n\t          randomIndex;\n\t      while (0 !== currentIndex) {\n\t        randomIndex = Math.floor(Math.random() * currentIndex);\n\t        currentIndex -= 1;\n\t        temporaryValue = this._startSlotList[currentIndex];\n\t        this._startSlotList[currentIndex] = this._startSlotList[randomIndex];\n\t        this._startSlotList[randomIndex] = temporaryValue;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getStartSlot',\n\t    value: function getStartSlot() {\n\t      if (this._startSlotList.length) {\n\t        return this._startSlotList.pop();\n\t      }\n\t      return null;\n\t    }\n\t  }, {\n\t    key: 'width',\n\t    get: function get() {\n\t      return this._width;\n\t    }\n\t  }, {\n\t    key: 'height',\n\t    get: function get() {\n\t      return this._height;\n\t    }\n\t  }, {\n\t    key: 'margin',\n\t    get: function get() {\n\t      return 25;\n\t    }\n\t  }, {\n\t    key: 'minX',\n\t    get: function get() {\n\t      return this._offsetX + this.margin;\n\t    }\n\t  }, {\n\t    key: 'minY',\n\t    get: function get() {\n\t      return this._offsetY + this.margin;\n\t    }\n\t  }, {\n\t    key: 'maxX',\n\t    get: function get() {\n\t      return this._offsetX + this._width + this.margin;\n\t    }\n\t  }, {\n\t    key: 'maxY',\n\t    get: function get() {\n\t      return this._offsetY + this._height + this.margin;\n\t    }\n\t  }, {\n\t    key: 'offsetX',\n\t    get: function get() {\n\t      return this._offsetX;\n\t    }\n\t  }, {\n\t    key: 'offsetY',\n\t    get: function get() {\n\t      return this._offsetY;\n\t    }\n\t  }]);\n\t\n\t  return Battlefield;\n\t}();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function EventStore() {\n\t    _classCallCheck(this, EventStore);\n\t\n\t    this._data = [];\n\t  }\n\t\n\t  _createClass(EventStore, [{\n\t    key: 'add',\n\t    value: function add(index, event) {\n\t      if (!this._data[index]) {\n\t        this._data[index] = [];\n\t      }\n\t      this._data[index].push(event);\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(index) {\n\t      if (!this._data[index]) {\n\t        this._data[index] = [];\n\t      }\n\t      return this._data[index];\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear(index) {\n\t      this._data = [];\n\t    }\n\t  }]);\n\t\n\t  return EventStore;\n\t}();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SAT = __webpack_require__(7);\n\t\n\tmodule.exports = function () {\n\t  function CollisionResolver() {\n\t    _classCallCheck(this, CollisionResolver);\n\t\n\t    this._wallList = [];\n\t    this._tankMap = [];\n\t    this._bulletMap = [];\n\t    this._radarBeamMap = [];\n\t    this._battlefield = null;\n\t  }\n\t\n\t  _createClass(CollisionResolver, [{\n\t    key: 'updateBattlefield',\n\t    value: function updateBattlefield(battlefield) {\n\t      this._battlefield = {\n\t        minX: battlefield.minX,\n\t        minY: battlefield.minY,\n\t        maxX: battlefield.maxX,\n\t        maxY: battlefield.maxY\n\t      };\n\t      var wall;\n\t      wall = new SAT.Box(new SAT.Vector(battlefield.minX - 10, battlefield.minY), 10, battlefield.height).toPolygon();\n\t      this._wallList.push(wall);\n\t      wall = new SAT.Box(new SAT.Vector(battlefield.minX, battlefield.minY - 10), battlefield.width, 10).toPolygon();\n\t      this._wallList.push(wall);\n\t      wall = new SAT.Box(new SAT.Vector(battlefield.maxX, battlefield.minY), 10, battlefield.height).toPolygon();\n\t      this._wallList.push(wall);\n\t      wall = new SAT.Box(new SAT.Vector(battlefield.minX, battlefield.maxY), battlefield.width, 10).toPolygon();\n\t      this._wallList.push(wall);\n\t    }\n\t  }, {\n\t    key: 'updateTank',\n\t    value: function updateTank(tank) {\n\t      var tankShape = this._getTankShape(tank);\n\t      tankShape.pos.x = tank.x;\n\t      tankShape.pos.y = tank.y;\n\t    }\n\t  }, {\n\t    key: 'removeBullet',\n\t    value: function removeBullet(bullet) {\n\t      this._bulletMap[bullet.id] = null;\n\t    }\n\t  }, {\n\t    key: 'removeTank',\n\t    value: function removeTank(tank) {\n\t      this._tankMap[tank.id] = null;\n\t      this._radarBeamMap[tank.id] = null;\n\t    }\n\t  }, {\n\t    key: 'hitTestBullet',\n\t    value: function hitTestBullet(bullet) {\n\t      var bulletShape = this._getBulletShape(bullet);\n\t      var tankShape = bullet.owner.energy ? this._getTankShape(bullet.owner) : null;\n\t\n\t      bulletShape.pos.x = bullet.x;\n\t      bulletShape.pos.y = bullet.y;\n\t\n\t      var i;\n\t      var hitTest;\n\t      var wall;\n\t      for (i in this._wallList) {\n\t        wall = this._wallList[i];\n\t        hitTest = SAT.testCirclePolygon(bulletShape, wall);\n\t        if (hitTest) {\n\t          bullet.onWallHit();\n\t          return true;\n\t        }\n\t      }\n\t      var enemyShape;\n\t      for (i in this._tankMap) {\n\t        enemyShape = this._tankMap[i];\n\t        if (!enemyShape) continue;\n\t        if (enemyShape == tankShape) {\n\t          continue;\n\t        }\n\t        hitTest = SAT.testCircleCircle(bulletShape, enemyShape);\n\t        if (hitTest) {\n\t          var energyBefore = enemyShape.tank.energy;\n\t          bullet.onEnemyHit(enemyShape.tank);\n\t          bullet.owner.onEnemyHitScore(energyBefore - enemyShape.tank.energy);\n\t          if (enemyShape.tank.energy == 0) {\n\t            bullet.owner.onEnemyKillScore();\n\t          }\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: 'checkTank',\n\t    value: function checkTank(tank) {\n\t      var tankShape = this._getTankShape(tank);\n\t\n\t      tankShape.pos.x = tank.x;\n\t      tankShape.pos.y = tank.y;\n\t\n\t      var i;\n\t      var hitTest;\n\t      var wall;\n\t      for (i in this._wallList) {\n\t        wall = this._wallList[i];\n\t        hitTest = SAT.testCirclePolygon(tankShape, wall);\n\t        if (hitTest) {\n\t          tank.onWallHit();\n\t          return false;\n\t        }\n\t      }\n\t      var enemyShape;\n\t      for (i in this._tankMap) {\n\t        enemyShape = this._tankMap[i];\n\t        if (!enemyShape) continue;\n\t        if (enemyShape == tankShape) {\n\t          continue;\n\t        }\n\t        hitTest = SAT.testCircleCircle(tankShape, enemyShape);\n\t        if (hitTest) {\n\t          var energyBefore = enemyShape.tank.energy;\n\t          tank.onEnemyHit();\n\t          enemyShape.tank.onBeingRam(tank.speed);\n\t          tank.onEnemyHitScore(energyBefore - enemyShape.tank.energy);\n\t          return false;\n\t        }\n\t      }\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'scanTanks',\n\t    value: function scanTanks(tank) {\n\t      var radarBeamShape = this._getRadarBeamShape(tank);\n\t      var tankShape = this._getTankShape(tank);\n\t      radarBeamShape.setAngle((tank.angle + tank.radarAngle) * Math.PI / 180);\n\t      radarBeamShape.pos.x = tank.x;\n\t      radarBeamShape.pos.y = tank.y;\n\t\n\t      var i;\n\t      var enemyShape;\n\t      var hitTest;\n\t      var enemies = [];\n\t\n\t      for (i in this._tankMap) {\n\t        enemyShape = this._tankMap[i];\n\t        if (!enemyShape) continue;\n\t        if (enemyShape == tankShape) {\n\t          continue;\n\t        }\n\t        hitTest = SAT.testPolygonCircle(radarBeamShape, enemyShape);\n\t        if (hitTest) {\n\t          enemies.push(enemyShape.tank);\n\t        }\n\t      }\n\t      if (enemies.length == 0) {\n\t        return false;\n\t      }\n\t      var closestEnemy = null;\n\t      var closestDistance = tank.radarRange;\n\t      var d, dx, dy;\n\t      for (i in enemies) {\n\t        dx = enemies[i].x - tank.x;\n\t        dy = enemies[i].y - tank.y;\n\t        d = Math.sqrt(dx * dx + dy * dy);\n\t        if (!closestEnemy || d < closestDistance) {\n\t          closestEnemy = enemies[i];\n\t          closestDistance = d;\n\t        }\n\t      }\n\t      tank.onEnemySpot(closestEnemy);\n\t      closestEnemy.onTargetingAlarm();\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'scanBullets',\n\t    value: function scanBullets(tank) {\n\t      var radarBeamShape = this._getRadarBeamShape(tank);\n\t      var tankShape = this._getTankShape(tank);\n\t      radarBeamShape.setAngle((tank.angle + tank.radarAngle) * Math.PI / 180);\n\t      radarBeamShape.pos.x = tank.x;\n\t      radarBeamShape.pos.y = tank.y;\n\t\n\t      var i;\n\t      var hitTest;\n\t      var bulletShape;\n\t      var spottedBullets = false;\n\t\n\t      for (i in this._bulletMap) {\n\t        bulletShape = this._bulletMap[i];\n\t        if (!bulletShape) continue;\n\t        if (bulletShape.bullet.owner == tank) continue;\n\t        hitTest = SAT.testCirclePolygon(bulletShape, radarBeamShape);\n\t        if (hitTest) {\n\t          tank.onBulletSpot(bulletShape.bullet);\n\t          spottedBullets = true;\n\t        }\n\t      }\n\t\n\t      return spottedBullets;\n\t    }\n\t  }, {\n\t    key: 'scanWalls',\n\t    value: function scanWalls(tank) {\n\t      var distance = this._getWallDistance(tank);\n\t      if (distance < tank.radarRange) {\n\t        tank.onWallSpot(distance);\n\t        return true;\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: '_getWallDistance',\n\t    value: function _getWallDistance(tank) {\n\t      var angle = tank.angle + tank.radarAngle;\n\t      while (angle > 180) {\n\t        angle -= 360;\n\t      }while (angle < -180) {\n\t        angle += 360;\n\t      }var distanceNorth = tank.y - this._battlefield.minY;\n\t      var distanceSouth = this._battlefield.maxY - tank.y;\n\t      var distanceWest = tank.x - this._battlefield.minX;\n\t      var distanceEast = this._battlefield.maxX - tank.x;\n\t\n\t      if (angle == -180 || angle == 180) {\n\t        // W\n\t        return distanceWest;\n\t      } else if (angle == 0) {\n\t        // E\n\t        return distanceEast;\n\t      } else if (angle == -90) {\n\t        // N\n\t        return distanceNorth;\n\t      } else if (angle == 90) {\n\t        // S\n\t        return distanceSouth;\n\t      }\n\t\n\t      var d1, d2;\n\t\n\t      if (angle > -180 && angle < -90) {\n\t        // NW\n\t        d1 = distanceWest / Math.cos((angle + 180) * (Math.PI / 180));\n\t        d2 = distanceNorth / Math.sin((angle + 180) * (Math.PI / 180));\n\t      } else if (angle > -90 && angle < 0) {\n\t        // NE\n\t        d1 = distanceEast / Math.cos(-angle * (Math.PI / 180));\n\t        d2 = distanceNorth / Math.sin(-angle * (Math.PI / 180));\n\t      } else if (angle > 0 && angle < 90) {\n\t        // SE\n\t        d1 = distanceEast / Math.cos(angle * (Math.PI / 180));\n\t        d2 = distanceSouth / Math.sin(angle * (Math.PI / 180));\n\t      } else {\n\t        // SW\n\t        d1 = distanceWest / Math.cos((180 - angle) * (Math.PI / 180));\n\t        d2 = distanceSouth / Math.sin((180 - angle) * (Math.PI / 180));\n\t      }\n\t\n\t      return Math.min(d1, d2);\n\t    }\n\t  }, {\n\t    key: '_getTankShape',\n\t    value: function _getTankShape(tank) {\n\t      if (!this._tankMap[tank.id]) {\n\t        if (tank.energy == 0) {\n\t          throw \"Cannot create shape for destroyed tank\";\n\t        }\n\t        var shape = new SAT.Circle(new SAT.Vector(tank.x, tank.y), 18);\n\t        this._tankMap[tank.id] = shape;\n\t        shape.tank = tank;\n\t      }\n\t      return this._tankMap[tank.id];\n\t    }\n\t  }, {\n\t    key: '_getBulletShape',\n\t    value: function _getBulletShape(bullet) {\n\t      if (!this._bulletMap[bullet.id]) {\n\t        if (bullet.exploded) {\n\t          throw \"Cannot create shape for exploded bullet\";\n\t        }\n\t        var shape = new SAT.Circle(new SAT.Vector(bullet.x, bullet.y), 3);\n\t        this._bulletMap[bullet.id] = shape;\n\t        shape.bullet = bullet;\n\t      }\n\t      return this._bulletMap[bullet.id];\n\t    }\n\t  }, {\n\t    key: '_getRadarBeamShape',\n\t    value: function _getRadarBeamShape(tank) {\n\t      if (!this._radarBeamMap[tank.id]) {\n\t        if (tank.energy == 0) {\n\t          throw \"Cannot create radar beam shape for destroyed tank\";\n\t        }\n\t        var width = tank.radarRange * Math.tan(tank.radarFocal * (Math.PI / 180)) / 2;\n\t        var shape = new SAT.Polygon(new SAT.Vector(tank.x, tank.y), [new SAT.Vector(0, 3), new SAT.Vector(0, -3), new SAT.Vector(tank.radarRange, -width), new SAT.Vector(tank.radarRange, width)]);\n\t\n\t        this._radarBeamMap[tank.id] = shape;\n\t        shape.tank = tank;\n\t      }\n\t      return this._radarBeamMap[tank.id];\n\t    }\n\t  }]);\n\t\n\t  return CollisionResolver;\n\t}();\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// Version 0.6.0 - Copyright 2012 - 2016 -  Jim Riecken <jimr@jimr.ca>\n\t//\n\t// Released under the MIT License - https://github.com/jriecken/sat-js\n\t//\n\t// A simple library for determining intersections of circles and\n\t// polygons using the Separating Axis Theorem.\n\t/** @preserve SAT.js - Version 0.6.0 - Copyright 2012 - 2016 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */\n\t\n\t/*global define: false, module: false*/\n\t/*jshint shadow:true, sub:true, forin:true, noarg:true, noempty:true, \n\t  eqeqeq:true, bitwise:true, strict:true, undef:true, \n\t  curly:true, browser:true */\n\t\n\t// Create a UMD wrapper for SAT. Works in:\n\t//\n\t//  - Plain browser via global SAT variable\n\t//  - AMD loader (like require.js)\n\t//  - Node.js\n\t//\n\t// The quoted properties all over the place are used so that the Closure Compiler\n\t// does not mangle the exposed API in advanced mode.\n\t/**\n\t * @param {*} root - The global scope\n\t * @param {Function} factory - Factory that creates SAT module\n\t */\n\t(function (root, factory) {\n\t  \"use strict\";\n\t\n\t  if (\"function\" === 'function' && __webpack_require__(9)['amd']) {\n\t    !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (( false ? 'undefined' : _typeof(exports)) === 'object') {\n\t    module['exports'] = factory();\n\t  } else {\n\t    root['SAT'] = factory();\n\t  }\n\t})(undefined, function () {\n\t  \"use strict\";\n\t\n\t  var SAT = {};\n\t\n\t  //\n\t  // ## Vector\n\t  //\n\t  // Represents a vector in two dimensions with `x` and `y` properties.\n\t\n\t\n\t  // Create a new Vector, optionally passing in the `x` and `y` coordinates. If\n\t  // a coordinate is not specified, it will be set to `0`\n\t  /** \n\t   * @param {?number=} x The x position.\n\t   * @param {?number=} y The y position.\n\t   * @constructor\n\t   */\n\t  function Vector(x, y) {\n\t    this['x'] = x || 0;\n\t    this['y'] = y || 0;\n\t  }\n\t  SAT['Vector'] = Vector;\n\t  // Alias `Vector` as `V`\n\t  SAT['V'] = Vector;\n\t\n\t  // Copy the values of another Vector into this one.\n\t  /**\n\t   * @param {Vector} other The other Vector.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['copy'] = Vector.prototype.copy = function (other) {\n\t    this['x'] = other['x'];\n\t    this['y'] = other['y'];\n\t    return this;\n\t  };\n\t\n\t  // Create a new vector with the same coordinates as this on.\n\t  /**\n\t   * @return {Vector} The new cloned vector\n\t   */\n\t  Vector.prototype['clone'] = Vector.prototype.clone = function () {\n\t    return new Vector(this['x'], this['y']);\n\t  };\n\t\n\t  // Change this vector to be perpendicular to what it was before. (Effectively\n\t  // roatates it 90 degrees in a clockwise direction)\n\t  /**\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['perp'] = Vector.prototype.perp = function () {\n\t    var x = this['x'];\n\t    this['x'] = this['y'];\n\t    this['y'] = -x;\n\t    return this;\n\t  };\n\t\n\t  // Rotate this vector (counter-clockwise) by the specified angle (in radians).\n\t  /**\n\t   * @param {number} angle The angle to rotate (in radians)\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['rotate'] = Vector.prototype.rotate = function (angle) {\n\t    var x = this['x'];\n\t    var y = this['y'];\n\t    this['x'] = x * Math.cos(angle) - y * Math.sin(angle);\n\t    this['y'] = x * Math.sin(angle) + y * Math.cos(angle);\n\t    return this;\n\t  };\n\t\n\t  // Reverse this vector.\n\t  /**\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['reverse'] = Vector.prototype.reverse = function () {\n\t    this['x'] = -this['x'];\n\t    this['y'] = -this['y'];\n\t    return this;\n\t  };\n\t\n\t  // Normalize this vector.  (make it have length of `1`)\n\t  /**\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['normalize'] = Vector.prototype.normalize = function () {\n\t    var d = this.len();\n\t    if (d > 0) {\n\t      this['x'] = this['x'] / d;\n\t      this['y'] = this['y'] / d;\n\t    }\n\t    return this;\n\t  };\n\t\n\t  // Add another vector to this one.\n\t  /**\n\t   * @param {Vector} other The other Vector.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['add'] = Vector.prototype.add = function (other) {\n\t    this['x'] += other['x'];\n\t    this['y'] += other['y'];\n\t    return this;\n\t  };\n\t\n\t  // Subtract another vector from this one.\n\t  /**\n\t   * @param {Vector} other The other Vector.\n\t   * @return {Vector} This for chaiing.\n\t   */\n\t  Vector.prototype['sub'] = Vector.prototype.sub = function (other) {\n\t    this['x'] -= other['x'];\n\t    this['y'] -= other['y'];\n\t    return this;\n\t  };\n\t\n\t  // Scale this vector. An independant scaling factor can be provided\n\t  // for each axis, or a single scaling factor that will scale both `x` and `y`.\n\t  /**\n\t   * @param {number} x The scaling factor in the x direction.\n\t   * @param {?number=} y The scaling factor in the y direction.  If this\n\t   *   is not specified, the x scaling factor will be used.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['scale'] = Vector.prototype.scale = function (x, y) {\n\t    this['x'] *= x;\n\t    this['y'] *= y || x;\n\t    return this;\n\t  };\n\t\n\t  // Project this vector on to another vector.\n\t  /**\n\t   * @param {Vector} other The vector to project onto.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['project'] = Vector.prototype.project = function (other) {\n\t    var amt = this.dot(other) / other.len2();\n\t    this['x'] = amt * other['x'];\n\t    this['y'] = amt * other['y'];\n\t    return this;\n\t  };\n\t\n\t  // Project this vector onto a vector of unit length. This is slightly more efficient\n\t  // than `project` when dealing with unit vectors.\n\t  /**\n\t   * @param {Vector} other The unit vector to project onto.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['projectN'] = Vector.prototype.projectN = function (other) {\n\t    var amt = this.dot(other);\n\t    this['x'] = amt * other['x'];\n\t    this['y'] = amt * other['y'];\n\t    return this;\n\t  };\n\t\n\t  // Reflect this vector on an arbitrary axis.\n\t  /**\n\t   * @param {Vector} axis The vector representing the axis.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['reflect'] = Vector.prototype.reflect = function (axis) {\n\t    var x = this['x'];\n\t    var y = this['y'];\n\t    this.project(axis).scale(2);\n\t    this['x'] -= x;\n\t    this['y'] -= y;\n\t    return this;\n\t  };\n\t\n\t  // Reflect this vector on an arbitrary axis (represented by a unit vector). This is\n\t  // slightly more efficient than `reflect` when dealing with an axis that is a unit vector.\n\t  /**\n\t   * @param {Vector} axis The unit vector representing the axis.\n\t   * @return {Vector} This for chaining.\n\t   */\n\t  Vector.prototype['reflectN'] = Vector.prototype.reflectN = function (axis) {\n\t    var x = this['x'];\n\t    var y = this['y'];\n\t    this.projectN(axis).scale(2);\n\t    this['x'] -= x;\n\t    this['y'] -= y;\n\t    return this;\n\t  };\n\t\n\t  // Get the dot product of this vector and another.\n\t  /**\n\t   * @param {Vector}  other The vector to dot this one against.\n\t   * @return {number} The dot product.\n\t   */\n\t  Vector.prototype['dot'] = Vector.prototype.dot = function (other) {\n\t    return this['x'] * other['x'] + this['y'] * other['y'];\n\t  };\n\t\n\t  // Get the squared length of this vector.\n\t  /**\n\t   * @return {number} The length^2 of this vector.\n\t   */\n\t  Vector.prototype['len2'] = Vector.prototype.len2 = function () {\n\t    return this.dot(this);\n\t  };\n\t\n\t  // Get the length of this vector.\n\t  /**\n\t   * @return {number} The length of this vector.\n\t   */\n\t  Vector.prototype['len'] = Vector.prototype.len = function () {\n\t    return Math.sqrt(this.len2());\n\t  };\n\t\n\t  // ## Circle\n\t  //\n\t  // Represents a circle with a position and a radius.\n\t\n\t  // Create a new circle, optionally passing in a position and/or radius. If no position\n\t  // is given, the circle will be at `(0,0)`. If no radius is provided, the circle will\n\t  // have a radius of `0`.\n\t  /**\n\t   * @param {Vector=} pos A vector representing the position of the center of the circle\n\t   * @param {?number=} r The radius of the circle\n\t   * @constructor\n\t   */\n\t  function Circle(pos, r) {\n\t    this['pos'] = pos || new Vector();\n\t    this['r'] = r || 0;\n\t  }\n\t  SAT['Circle'] = Circle;\n\t\n\t  // Compute the axis-aligned bounding box (AABB) of this Circle.\n\t  //\n\t  // Note: Returns a _new_ `Polygon` each time you call this.\n\t  /**\n\t   * @return {Polygon} The AABB\n\t   */\n\t  Circle.prototype['getAABB'] = Circle.prototype.getAABB = function () {\n\t    var r = this['r'];\n\t    var corner = this[\"pos\"].clone().sub(new Vector(r, r));\n\t    return new Box(corner, r * 2, r * 2).toPolygon();\n\t  };\n\t\n\t  // ## Polygon\n\t  //\n\t  // Represents a *convex* polygon with any number of points (specified in counter-clockwise order)\n\t  //\n\t  // Note: Do _not_ manually change the `points`, `angle`, or `offset` properties. Use the\n\t  // provided setters. Otherwise the calculated properties will not be updated correctly.\n\t  //\n\t  // `pos` can be changed directly.\n\t\n\t  // Create a new polygon, passing in a position vector, and an array of points (represented\n\t  // by vectors relative to the position vector). If no position is passed in, the position\n\t  // of the polygon will be `(0,0)`.\n\t  /**\n\t   * @param {Vector=} pos A vector representing the origin of the polygon. (all other\n\t   *   points are relative to this one)\n\t   * @param {Array.<Vector>=} points An array of vectors representing the points in the polygon,\n\t   *   in counter-clockwise order.\n\t   * @constructor\n\t   */\n\t  function Polygon(pos, points) {\n\t    this['pos'] = pos || new Vector();\n\t    this['angle'] = 0;\n\t    this['offset'] = new Vector();\n\t    this.setPoints(points || []);\n\t  }\n\t  SAT['Polygon'] = Polygon;\n\t\n\t  // Set the points of the polygon.\n\t  //\n\t  // Note: The points are counter-clockwise *with respect to the coordinate system*.\n\t  // If you directly draw the points on a screen that has the origin at the top-left corner\n\t  // it will _appear_ visually that the points are being specified clockwise. This is just\n\t  // because of the inversion of the Y-axis when being displayed.\n\t  /**\n\t   * @param {Array.<Vector>=} points An array of vectors representing the points in the polygon,\n\t   *   in counter-clockwise order.\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype['setPoints'] = Polygon.prototype.setPoints = function (points) {\n\t    // Only re-allocate if this is a new polygon or the number of points has changed.\n\t    var lengthChanged = !this['points'] || this['points'].length !== points.length;\n\t    if (lengthChanged) {\n\t      var i;\n\t      var calcPoints = this['calcPoints'] = [];\n\t      var edges = this['edges'] = [];\n\t      var normals = this['normals'] = [];\n\t      // Allocate the vector arrays for the calculated properties\n\t      for (i = 0; i < points.length; i++) {\n\t        calcPoints.push(new Vector());\n\t        edges.push(new Vector());\n\t        normals.push(new Vector());\n\t      }\n\t    }\n\t    this['points'] = points;\n\t    this._recalc();\n\t    return this;\n\t  };\n\t\n\t  // Set the current rotation angle of the polygon.\n\t  /**\n\t   * @param {number} angle The current rotation angle (in radians).\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype['setAngle'] = Polygon.prototype.setAngle = function (angle) {\n\t    this['angle'] = angle;\n\t    this._recalc();\n\t    return this;\n\t  };\n\t\n\t  // Set the current offset to apply to the `points` before applying the `angle` rotation.\n\t  /**\n\t   * @param {Vector} offset The new offset vector.\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype['setOffset'] = Polygon.prototype.setOffset = function (offset) {\n\t    this['offset'] = offset;\n\t    this._recalc();\n\t    return this;\n\t  };\n\t\n\t  // Rotates this polygon counter-clockwise around the origin of *its local coordinate system* (i.e. `pos`).\n\t  //\n\t  // Note: This changes the **original** points (so any `angle` will be applied on top of this rotation).\n\t  /**\n\t   * @param {number} angle The angle to rotate (in radians)\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype['rotate'] = Polygon.prototype.rotate = function (angle) {\n\t    var points = this['points'];\n\t    var len = points.length;\n\t    for (var i = 0; i < len; i++) {\n\t      points[i].rotate(angle);\n\t    }\n\t    this._recalc();\n\t    return this;\n\t  };\n\t\n\t  // Translates the points of this polygon by a specified amount relative to the origin of *its own coordinate\n\t  // system* (i.e. `pos`).\n\t  //\n\t  // This is most useful to change the \"center point\" of a polygon. If you just want to move the whole polygon, change\n\t  // the coordinates of `pos`.\n\t  //\n\t  // Note: This changes the **original** points (so any `offset` will be applied on top of this translation)\n\t  /**\n\t   * @param {number} x The horizontal amount to translate.\n\t   * @param {number} y The vertical amount to translate.\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype['translate'] = Polygon.prototype.translate = function (x, y) {\n\t    var points = this['points'];\n\t    var len = points.length;\n\t    for (var i = 0; i < len; i++) {\n\t      points[i].x += x;\n\t      points[i].y += y;\n\t    }\n\t    this._recalc();\n\t    return this;\n\t  };\n\t\n\t  // Computes the calculated collision polygon. Applies the `angle` and `offset` to the original points then recalculates the\n\t  // edges and normals of the collision polygon.\n\t  /**\n\t   * @return {Polygon} This for chaining.\n\t   */\n\t  Polygon.prototype._recalc = function () {\n\t    // Calculated points - this is what is used for underlying collisions and takes into account\n\t    // the angle/offset set on the polygon.\n\t    var calcPoints = this['calcPoints'];\n\t    // The edges here are the direction of the `n`th edge of the polygon, relative to\n\t    // the `n`th point. If you want to draw a given edge from the edge value, you must\n\t    // first translate to the position of the starting point.\n\t    var edges = this['edges'];\n\t    // The normals here are the direction of the normal for the `n`th edge of the polygon, relative\n\t    // to the position of the `n`th point. If you want to draw an edge normal, you must first\n\t    // translate to the position of the starting point.\n\t    var normals = this['normals'];\n\t    // Copy the original points array and apply the offset/angle\n\t    var points = this['points'];\n\t    var offset = this['offset'];\n\t    var angle = this['angle'];\n\t    var len = points.length;\n\t    var i;\n\t    for (i = 0; i < len; i++) {\n\t      var calcPoint = calcPoints[i].copy(points[i]);\n\t      calcPoint.x += offset.x;\n\t      calcPoint.y += offset.y;\n\t      if (angle !== 0) {\n\t        calcPoint.rotate(angle);\n\t      }\n\t    }\n\t    // Calculate the edges/normals\n\t    for (i = 0; i < len; i++) {\n\t      var p1 = calcPoints[i];\n\t      var p2 = i < len - 1 ? calcPoints[i + 1] : calcPoints[0];\n\t      var e = edges[i].copy(p2).sub(p1);\n\t      normals[i].copy(e).perp().normalize();\n\t    }\n\t    return this;\n\t  };\n\t\n\t  // Compute the axis-aligned bounding box. Any current state\n\t  // (translations/rotations) will be applied before constructing the AABB.\n\t  //\n\t  // Note: Returns a _new_ `Polygon` each time you call this.\n\t  /**\n\t   * @return {Polygon} The AABB\n\t   */\n\t  Polygon.prototype[\"getAABB\"] = Polygon.prototype.getAABB = function () {\n\t    var points = this[\"calcPoints\"];\n\t    var len = points.length;\n\t    var xMin = points[0][\"x\"];\n\t    var yMin = points[0][\"y\"];\n\t    var xMax = points[0][\"x\"];\n\t    var yMax = points[0][\"y\"];\n\t    for (var i = 1; i < len; i++) {\n\t      var point = points[i];\n\t      if (point[\"x\"] < xMin) {\n\t        xMin = point[\"x\"];\n\t      } else if (point[\"x\"] > xMax) {\n\t        xMax = point[\"x\"];\n\t      }\n\t      if (point[\"y\"] < yMin) {\n\t        yMin = point[\"y\"];\n\t      } else if (point[\"y\"] > yMax) {\n\t        yMax = point[\"y\"];\n\t      }\n\t    }\n\t    return new Box(this[\"pos\"].clone().add(new Vector(xMin, yMin)), xMax - xMin, yMax - yMin).toPolygon();\n\t  };\n\t\n\t  // ## Box\n\t  //\n\t  // Represents an axis-aligned box, with a width and height.\n\t\n\t\n\t  // Create a new box, with the specified position, width, and height. If no position\n\t  // is given, the position will be `(0,0)`. If no width or height are given, they will\n\t  // be set to `0`.\n\t  /**\n\t   * @param {Vector=} pos A vector representing the bottom-left of the box (i.e. the smallest x and smallest y value).\n\t   * @param {?number=} w The width of the box.\n\t   * @param {?number=} h The height of the box.\n\t   * @constructor\n\t   */\n\t  function Box(pos, w, h) {\n\t    this['pos'] = pos || new Vector();\n\t    this['w'] = w || 0;\n\t    this['h'] = h || 0;\n\t  }\n\t  SAT['Box'] = Box;\n\t\n\t  // Returns a polygon whose edges are the same as this box.\n\t  /**\n\t   * @return {Polygon} A new Polygon that represents this box.\n\t   */\n\t  Box.prototype['toPolygon'] = Box.prototype.toPolygon = function () {\n\t    var pos = this['pos'];\n\t    var w = this['w'];\n\t    var h = this['h'];\n\t    return new Polygon(new Vector(pos['x'], pos['y']), [new Vector(), new Vector(w, 0), new Vector(w, h), new Vector(0, h)]);\n\t  };\n\t\n\t  // ## Response\n\t  //\n\t  // An object representing the result of an intersection. Contains:\n\t  //  - The two objects participating in the intersection\n\t  //  - The vector representing the minimum change necessary to extract the first object\n\t  //    from the second one (as well as a unit vector in that direction and the magnitude\n\t  //    of the overlap)\n\t  //  - Whether the first object is entirely inside the second, and vice versa.\n\t  /**\n\t   * @constructor\n\t   */\n\t  function Response() {\n\t    this['a'] = null;\n\t    this['b'] = null;\n\t    this['overlapN'] = new Vector();\n\t    this['overlapV'] = new Vector();\n\t    this.clear();\n\t  }\n\t  SAT['Response'] = Response;\n\t\n\t  // Set some values of the response back to their defaults.  Call this between tests if\n\t  // you are going to reuse a single Response object for multiple intersection tests (recommented\n\t  // as it will avoid allcating extra memory)\n\t  /**\n\t   * @return {Response} This for chaining\n\t   */\n\t  Response.prototype['clear'] = Response.prototype.clear = function () {\n\t    this['aInB'] = true;\n\t    this['bInA'] = true;\n\t    this['overlap'] = Number.MAX_VALUE;\n\t    return this;\n\t  };\n\t\n\t  // ## Object Pools\n\t\n\t  // A pool of `Vector` objects that are used in calculations to avoid\n\t  // allocating memory.\n\t  /**\n\t   * @type {Array.<Vector>}\n\t   */\n\t  var T_VECTORS = [];\n\t  for (var i = 0; i < 10; i++) {\n\t    T_VECTORS.push(new Vector());\n\t  }\n\t\n\t  // A pool of arrays of numbers used in calculations to avoid allocating\n\t  // memory.\n\t  /**\n\t   * @type {Array.<Array.<number>>}\n\t   */\n\t  var T_ARRAYS = [];\n\t  for (var i = 0; i < 5; i++) {\n\t    T_ARRAYS.push([]);\n\t  }\n\t\n\t  // Temporary response used for polygon hit detection.\n\t  /**\n\t   * @type {Response}\n\t   */\n\t  var T_RESPONSE = new Response();\n\t\n\t  // Tiny \"point\" polygon used for polygon hit detection.\n\t  /**\n\t   * @type {Polygon}\n\t   */\n\t  var TEST_POINT = new Box(new Vector(), 0.000001, 0.000001).toPolygon();\n\t\n\t  // ## Helper Functions\n\t\n\t  // Flattens the specified array of points onto a unit vector axis,\n\t  // resulting in a one dimensional range of the minimum and\n\t  // maximum value on that axis.\n\t  /**\n\t   * @param {Array.<Vector>} points The points to flatten.\n\t   * @param {Vector} normal The unit vector axis to flatten on.\n\t   * @param {Array.<number>} result An array.  After calling this function,\n\t   *   result[0] will be the minimum value,\n\t   *   result[1] will be the maximum value.\n\t   */\n\t  function flattenPointsOn(points, normal, result) {\n\t    var min = Number.MAX_VALUE;\n\t    var max = -Number.MAX_VALUE;\n\t    var len = points.length;\n\t    for (var i = 0; i < len; i++) {\n\t      // The magnitude of the projection of the point onto the normal\n\t      var dot = points[i].dot(normal);\n\t      if (dot < min) {\n\t        min = dot;\n\t      }\n\t      if (dot > max) {\n\t        max = dot;\n\t      }\n\t    }\n\t    result[0] = min;result[1] = max;\n\t  }\n\t\n\t  // Check whether two convex polygons are separated by the specified\n\t  // axis (must be a unit vector).\n\t  /**\n\t   * @param {Vector} aPos The position of the first polygon.\n\t   * @param {Vector} bPos The position of the second polygon.\n\t   * @param {Array.<Vector>} aPoints The points in the first polygon.\n\t   * @param {Array.<Vector>} bPoints The points in the second polygon.\n\t   * @param {Vector} axis The axis (unit sized) to test against.  The points of both polygons\n\t   *   will be projected onto this axis.\n\t   * @param {Response=} response A Response object (optional) which will be populated\n\t   *   if the axis is not a separating axis.\n\t   * @return {boolean} true if it is a separating axis, false otherwise.  If false,\n\t   *   and a response is passed in, information about how much overlap and\n\t   *   the direction of the overlap will be populated.\n\t   */\n\t  function isSeparatingAxis(aPos, bPos, aPoints, bPoints, axis, response) {\n\t    var rangeA = T_ARRAYS.pop();\n\t    var rangeB = T_ARRAYS.pop();\n\t    // The magnitude of the offset between the two polygons\n\t    var offsetV = T_VECTORS.pop().copy(bPos).sub(aPos);\n\t    var projectedOffset = offsetV.dot(axis);\n\t    // Project the polygons onto the axis.\n\t    flattenPointsOn(aPoints, axis, rangeA);\n\t    flattenPointsOn(bPoints, axis, rangeB);\n\t    // Move B's range to its position relative to A.\n\t    rangeB[0] += projectedOffset;\n\t    rangeB[1] += projectedOffset;\n\t    // Check if there is a gap. If there is, this is a separating axis and we can stop\n\t    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\n\t      T_VECTORS.push(offsetV);\n\t      T_ARRAYS.push(rangeA);\n\t      T_ARRAYS.push(rangeB);\n\t      return true;\n\t    }\n\t    // This is not a separating axis. If we're calculating a response, calculate the overlap.\n\t    if (response) {\n\t      var overlap = 0;\n\t      // A starts further left than B\n\t      if (rangeA[0] < rangeB[0]) {\n\t        response['aInB'] = false;\n\t        // A ends before B does. We have to pull A out of B\n\t        if (rangeA[1] < rangeB[1]) {\n\t          overlap = rangeA[1] - rangeB[0];\n\t          response['bInA'] = false;\n\t          // B is fully inside A.  Pick the shortest way out.\n\t        } else {\n\t          var option1 = rangeA[1] - rangeB[0];\n\t          var option2 = rangeB[1] - rangeA[0];\n\t          overlap = option1 < option2 ? option1 : -option2;\n\t        }\n\t        // B starts further left than A\n\t      } else {\n\t        response['bInA'] = false;\n\t        // B ends before A ends. We have to push A out of B\n\t        if (rangeA[1] > rangeB[1]) {\n\t          overlap = rangeA[0] - rangeB[1];\n\t          response['aInB'] = false;\n\t          // A is fully inside B.  Pick the shortest way out.\n\t        } else {\n\t          var option1 = rangeA[1] - rangeB[0];\n\t          var option2 = rangeB[1] - rangeA[0];\n\t          overlap = option1 < option2 ? option1 : -option2;\n\t        }\n\t      }\n\t      // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\n\t      var absOverlap = Math.abs(overlap);\n\t      if (absOverlap < response['overlap']) {\n\t        response['overlap'] = absOverlap;\n\t        response['overlapN'].copy(axis);\n\t        if (overlap < 0) {\n\t          response['overlapN'].reverse();\n\t        }\n\t      }\n\t    }\n\t    T_VECTORS.push(offsetV);\n\t    T_ARRAYS.push(rangeA);\n\t    T_ARRAYS.push(rangeB);\n\t    return false;\n\t  }\n\t  SAT['isSeparatingAxis'] = isSeparatingAxis;\n\t\n\t  // Calculates which Voronoi region a point is on a line segment.\n\t  // It is assumed that both the line and the point are relative to `(0,0)`\n\t  //\n\t  //            |       (0)      |\n\t  //     (-1)  [S]--------------[E]  (1)\n\t  //            |       (0)      |\n\t  /**\n\t   * @param {Vector} line The line segment.\n\t   * @param {Vector} point The point.\n\t   * @return  {number} LEFT_VORONOI_REGION (-1) if it is the left region,\n\t   *          MIDDLE_VORONOI_REGION (0) if it is the middle region,\n\t   *          RIGHT_VORONOI_REGION (1) if it is the right region.\n\t   */\n\t  function voronoiRegion(line, point) {\n\t    var len2 = line.len2();\n\t    var dp = point.dot(line);\n\t    // If the point is beyond the start of the line, it is in the\n\t    // left voronoi region.\n\t    if (dp < 0) {\n\t      return LEFT_VORONOI_REGION;\n\t    }\n\t    // If the point is beyond the end of the line, it is in the\n\t    // right voronoi region.\n\t    else if (dp > len2) {\n\t        return RIGHT_VORONOI_REGION;\n\t      }\n\t      // Otherwise, it's in the middle one.\n\t      else {\n\t          return MIDDLE_VORONOI_REGION;\n\t        }\n\t  }\n\t  // Constants for Voronoi regions\n\t  /**\n\t   * @const\n\t   */\n\t  var LEFT_VORONOI_REGION = -1;\n\t  /**\n\t   * @const\n\t   */\n\t  var MIDDLE_VORONOI_REGION = 0;\n\t  /**\n\t   * @const\n\t   */\n\t  var RIGHT_VORONOI_REGION = 1;\n\t\n\t  // ## Collision Tests\n\t\n\t  // Check if a point is inside a circle.\n\t  /**\n\t   * @param {Vector} p The point to test.\n\t   * @param {Circle} c The circle to test.\n\t   * @return {boolean} true if the point is inside the circle, false if it is not.\n\t   */\n\t  function pointInCircle(p, c) {\n\t    var differenceV = T_VECTORS.pop().copy(p).sub(c['pos']);\n\t    var radiusSq = c['r'] * c['r'];\n\t    var distanceSq = differenceV.len2();\n\t    T_VECTORS.push(differenceV);\n\t    // If the distance between is smaller than the radius then the point is inside the circle.\n\t    return distanceSq <= radiusSq;\n\t  }\n\t  SAT['pointInCircle'] = pointInCircle;\n\t\n\t  // Check if a point is inside a convex polygon.\n\t  /**\n\t   * @param {Vector} p The point to test.\n\t   * @param {Polygon} poly The polygon to test.\n\t   * @return {boolean} true if the point is inside the polygon, false if it is not.\n\t   */\n\t  function pointInPolygon(p, poly) {\n\t    TEST_POINT['pos'].copy(p);\n\t    T_RESPONSE.clear();\n\t    var result = testPolygonPolygon(TEST_POINT, poly, T_RESPONSE);\n\t    if (result) {\n\t      result = T_RESPONSE['aInB'];\n\t    }\n\t    return result;\n\t  }\n\t  SAT['pointInPolygon'] = pointInPolygon;\n\t\n\t  // Check if two circles collide.\n\t  /**\n\t   * @param {Circle} a The first circle.\n\t   * @param {Circle} b The second circle.\n\t   * @param {Response=} response Response object (optional) that will be populated if\n\t   *   the circles intersect.\n\t   * @return {boolean} true if the circles intersect, false if they don't. \n\t   */\n\t  function testCircleCircle(a, b, response) {\n\t    // Check if the distance between the centers of the two\n\t    // circles is greater than their combined radius.\n\t    var differenceV = T_VECTORS.pop().copy(b['pos']).sub(a['pos']);\n\t    var totalRadius = a['r'] + b['r'];\n\t    var totalRadiusSq = totalRadius * totalRadius;\n\t    var distanceSq = differenceV.len2();\n\t    // If the distance is bigger than the combined radius, they don't intersect.\n\t    if (distanceSq > totalRadiusSq) {\n\t      T_VECTORS.push(differenceV);\n\t      return false;\n\t    }\n\t    // They intersect.  If we're calculating a response, calculate the overlap.\n\t    if (response) {\n\t      var dist = Math.sqrt(distanceSq);\n\t      response['a'] = a;\n\t      response['b'] = b;\n\t      response['overlap'] = totalRadius - dist;\n\t      response['overlapN'].copy(differenceV.normalize());\n\t      response['overlapV'].copy(differenceV).scale(response['overlap']);\n\t      response['aInB'] = a['r'] <= b['r'] && dist <= b['r'] - a['r'];\n\t      response['bInA'] = b['r'] <= a['r'] && dist <= a['r'] - b['r'];\n\t    }\n\t    T_VECTORS.push(differenceV);\n\t    return true;\n\t  }\n\t  SAT['testCircleCircle'] = testCircleCircle;\n\t\n\t  // Check if a polygon and a circle collide.\n\t  /**\n\t   * @param {Polygon} polygon The polygon.\n\t   * @param {Circle} circle The circle.\n\t   * @param {Response=} response Response object (optional) that will be populated if\n\t   *   they interset.\n\t   * @return {boolean} true if they intersect, false if they don't.\n\t   */\n\t  function testPolygonCircle(polygon, circle, response) {\n\t    // Get the position of the circle relative to the polygon.\n\t    var circlePos = T_VECTORS.pop().copy(circle['pos']).sub(polygon['pos']);\n\t    var radius = circle['r'];\n\t    var radius2 = radius * radius;\n\t    var points = polygon['calcPoints'];\n\t    var len = points.length;\n\t    var edge = T_VECTORS.pop();\n\t    var point = T_VECTORS.pop();\n\t\n\t    // For each edge in the polygon:\n\t    for (var i = 0; i < len; i++) {\n\t      var next = i === len - 1 ? 0 : i + 1;\n\t      var prev = i === 0 ? len - 1 : i - 1;\n\t      var overlap = 0;\n\t      var overlapN = null;\n\t\n\t      // Get the edge.\n\t      edge.copy(polygon['edges'][i]);\n\t      // Calculate the center of the circle relative to the starting point of the edge.\n\t      point.copy(circlePos).sub(points[i]);\n\t\n\t      // If the distance between the center of the circle and the point\n\t      // is bigger than the radius, the polygon is definitely not fully in\n\t      // the circle.\n\t      if (response && point.len2() > radius2) {\n\t        response['aInB'] = false;\n\t      }\n\t\n\t      // Calculate which Voronoi region the center of the circle is in.\n\t      var region = voronoiRegion(edge, point);\n\t      // If it's the left region:\n\t      if (region === LEFT_VORONOI_REGION) {\n\t        // We need to make sure we're in the RIGHT_VORONOI_REGION of the previous edge.\n\t        edge.copy(polygon['edges'][prev]);\n\t        // Calculate the center of the circle relative the starting point of the previous edge\n\t        var point2 = T_VECTORS.pop().copy(circlePos).sub(points[prev]);\n\t        region = voronoiRegion(edge, point2);\n\t        if (region === RIGHT_VORONOI_REGION) {\n\t          // It's in the region we want.  Check if the circle intersects the point.\n\t          var dist = point.len();\n\t          if (dist > radius) {\n\t            // No intersection\n\t            T_VECTORS.push(circlePos);\n\t            T_VECTORS.push(edge);\n\t            T_VECTORS.push(point);\n\t            T_VECTORS.push(point2);\n\t            return false;\n\t          } else if (response) {\n\t            // It intersects, calculate the overlap.\n\t            response['bInA'] = false;\n\t            overlapN = point.normalize();\n\t            overlap = radius - dist;\n\t          }\n\t        }\n\t        T_VECTORS.push(point2);\n\t        // If it's the right region:\n\t      } else if (region === RIGHT_VORONOI_REGION) {\n\t        // We need to make sure we're in the left region on the next edge\n\t        edge.copy(polygon['edges'][next]);\n\t        // Calculate the center of the circle relative to the starting point of the next edge.\n\t        point.copy(circlePos).sub(points[next]);\n\t        region = voronoiRegion(edge, point);\n\t        if (region === LEFT_VORONOI_REGION) {\n\t          // It's in the region we want.  Check if the circle intersects the point.\n\t          var dist = point.len();\n\t          if (dist > radius) {\n\t            // No intersection\n\t            T_VECTORS.push(circlePos);\n\t            T_VECTORS.push(edge);\n\t            T_VECTORS.push(point);\n\t            return false;\n\t          } else if (response) {\n\t            // It intersects, calculate the overlap.\n\t            response['bInA'] = false;\n\t            overlapN = point.normalize();\n\t            overlap = radius - dist;\n\t          }\n\t        }\n\t        // Otherwise, it's the middle region:\n\t      } else {\n\t        // Need to check if the circle is intersecting the edge,\n\t        // Change the edge into its \"edge normal\".\n\t        var normal = edge.perp().normalize();\n\t        // Find the perpendicular distance between the center of the \n\t        // circle and the edge.\n\t        var dist = point.dot(normal);\n\t        var distAbs = Math.abs(dist);\n\t        // If the circle is on the outside of the edge, there is no intersection.\n\t        if (dist > 0 && distAbs > radius) {\n\t          // No intersection\n\t          T_VECTORS.push(circlePos);\n\t          T_VECTORS.push(normal);\n\t          T_VECTORS.push(point);\n\t          return false;\n\t        } else if (response) {\n\t          // It intersects, calculate the overlap.\n\t          overlapN = normal;\n\t          overlap = radius - dist;\n\t          // If the center of the circle is on the outside of the edge, or part of the\n\t          // circle is on the outside, the circle is not fully inside the polygon.\n\t          if (dist >= 0 || overlap < 2 * radius) {\n\t            response['bInA'] = false;\n\t          }\n\t        }\n\t      }\n\t\n\t      // If this is the smallest overlap we've seen, keep it. \n\t      // (overlapN may be null if the circle was in the wrong Voronoi region).\n\t      if (overlapN && response && Math.abs(overlap) < Math.abs(response['overlap'])) {\n\t        response['overlap'] = overlap;\n\t        response['overlapN'].copy(overlapN);\n\t      }\n\t    }\n\t\n\t    // Calculate the final overlap vector - based on the smallest overlap.\n\t    if (response) {\n\t      response['a'] = polygon;\n\t      response['b'] = circle;\n\t      response['overlapV'].copy(response['overlapN']).scale(response['overlap']);\n\t    }\n\t    T_VECTORS.push(circlePos);\n\t    T_VECTORS.push(edge);\n\t    T_VECTORS.push(point);\n\t    return true;\n\t  }\n\t  SAT['testPolygonCircle'] = testPolygonCircle;\n\t\n\t  // Check if a circle and a polygon collide.\n\t  //\n\t  // **NOTE:** This is slightly less efficient than polygonCircle as it just\n\t  // runs polygonCircle and reverses everything at the end.\n\t  /**\n\t   * @param {Circle} circle The circle.\n\t   * @param {Polygon} polygon The polygon.\n\t   * @param {Response=} response Response object (optional) that will be populated if\n\t   *   they interset.\n\t   * @return {boolean} true if they intersect, false if they don't.\n\t   */\n\t  function testCirclePolygon(circle, polygon, response) {\n\t    // Test the polygon against the circle.\n\t    var result = testPolygonCircle(polygon, circle, response);\n\t    if (result && response) {\n\t      // Swap A and B in the response.\n\t      var a = response['a'];\n\t      var aInB = response['aInB'];\n\t      response['overlapN'].reverse();\n\t      response['overlapV'].reverse();\n\t      response['a'] = response['b'];\n\t      response['b'] = a;\n\t      response['aInB'] = response['bInA'];\n\t      response['bInA'] = aInB;\n\t    }\n\t    return result;\n\t  }\n\t  SAT['testCirclePolygon'] = testCirclePolygon;\n\t\n\t  // Checks whether polygons collide.\n\t  /**\n\t   * @param {Polygon} a The first polygon.\n\t   * @param {Polygon} b The second polygon.\n\t   * @param {Response=} response Response object (optional) that will be populated if\n\t   *   they interset.\n\t   * @return {boolean} true if they intersect, false if they don't.\n\t   */\n\t  function testPolygonPolygon(a, b, response) {\n\t    var aPoints = a['calcPoints'];\n\t    var aLen = aPoints.length;\n\t    var bPoints = b['calcPoints'];\n\t    var bLen = bPoints.length;\n\t    // If any of the edge normals of A is a separating axis, no intersection.\n\t    for (var i = 0; i < aLen; i++) {\n\t      if (isSeparatingAxis(a['pos'], b['pos'], aPoints, bPoints, a['normals'][i], response)) {\n\t        return false;\n\t      }\n\t    }\n\t    // If any of the edge normals of B is a separating axis, no intersection.\n\t    for (var i = 0; i < bLen; i++) {\n\t      if (isSeparatingAxis(a['pos'], b['pos'], aPoints, bPoints, b['normals'][i], response)) {\n\t        return false;\n\t      }\n\t    }\n\t    // Since none of the edge normals of A or B are a separating axis, there is an intersection\n\t    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\n\t    // final overlap vector.\n\t    if (response) {\n\t      response['a'] = a;\n\t      response['b'] = b;\n\t      response['overlapV'].copy(response['overlapN']).scale(response['overlap']);\n\t    }\n\t    return true;\n\t  }\n\t  SAT['testPolygonPolygon'] = testPolygonPolygon;\n\t\n\t  return SAT;\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t\tif (!module.webpackPolyfill) {\n\t\t\tmodule.deprecate = function () {};\n\t\t\tmodule.paths = [];\n\t\t\t// module.parent = undefined by default\n\t\t\tmodule.children = [];\n\t\t\tmodule.webpackPolyfill = 1;\n\t\t}\n\t\treturn module;\n\t};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function AiWrapper(tank) {\n\t    _classCallCheck(this, AiWrapper);\n\t\n\t    this._tank = tank;\n\t    this._aiWorker = null;\n\t    this._aiProcessingStart = 0;\n\t    this._aiProcessingCheckInterval = null;\n\t    this._aiProcessingResolveCallback = null;\n\t    this._aiProcessingRejectCallback = null;\n\t    this._slowAiChances = 10;\n\t    this._onActivationCallback = [];\n\t    this._onDectivationCallback = [];\n\t    this._aiProcessingTimeLimit = 3000;\n\t\n\t    this._controlData = {\n\t      THROTTLE: 0,\n\t      BOOST: 0,\n\t      TURN: 0,\n\t      RADAR_TURN: 0,\n\t      GUN_TURN: 0,\n\t      SHOOT: 0,\n\t      DEBUG: {}\n\t    };\n\t  }\n\t\n\t  _createClass(AiWrapper, [{\n\t    key: \"setProcessingLimit\",\n\t    value: function setProcessingLimit(v) {\n\t      this._aiProcessingTimeLimit = v;\n\t    }\n\t  }, {\n\t    key: \"onActivation\",\n\t    value: function onActivation(callback) {\n\t      this._onActivationCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"onDectivation\",\n\t    value: function onDectivation(callback) {\n\t      this._onDeactivationCallback.push(callback);\n\t    }\n\t  }, {\n\t    key: \"activate\",\n\t    value: function activate(seed) {\n\t      var self = this;\n\t      return new Promise(function (resolve, reject) {\n\t\n\t        self._aiWorker = self._createWorker(\"js/tanks/\" + self._tank.name + \".tank.js\");\n\t        self._aiWorker.onerror = function (err) {\n\t          console.log(err);\n\t          if (self._aiProcessingRejectCallback) {\n\t            self._aiProcessingRejectCallback({\n\t              message: \"Web Worker of '\" + self._tank.fullName + \"' returned an error: \" + (err.message ? err.message : 'unknown'),\n\t              performanceIssues: false,\n\t              tankName: self._tank.name,\n\t              tankId: self._tank.id\n\t            });\n\t            self._aiProcessingResolveCallback = null;\n\t            self._aiProcessingRejectCallback = null;\n\t          }\n\t        };\n\t\n\t        if (self._aiProcessingCheckInterval) {\n\t          clearInterval(self._aiProcessingCheckInterval);\n\t          self._aiProcessingCheckInterval = null;\n\t        }\n\t\n\t        self._aiProcessingCheckInterval = setInterval(function () {\n\t          if (self._aiProcessingRejectCallback) {\n\t            var now = new Date().getTime();\n\t            var dt = now - self._aiProcessingStart;\n\t            if (dt > self._aiProcessingTimeLimit) {\n\t              clearInterval(self._aiProcessingCheckInterval);\n\t              self._aiProcessingCheckInterval = null;\n\t              self._aiProcessingRejectCallback({\n\t                message: \"Simulation cannot be continued because \" + self._tank.name + \" #\" + self._tank.id + \" does not respond\",\n\t                performanceIssues: true,\n\t                tankName: self._tank.name,\n\t                tankId: self._tank.id\n\t              });\n\t            }\n\t          }\n\t        }, Math.max(50, Math.round(self._aiProcessingTimeLimit / 2)));\n\t\n\t        self._aiWorker.onmessage = function (commandEvent) {\n\t\n\t          var value = commandEvent.data;\n\t\n\t          if (self._aiProcessingResolveCallback) {\n\t            if (value.type == 'init') {\n\t              self._configureTank(value.settings ? value.settings : {});\n\t              for (var i = 0; i < self._onActivationCallback.length; i++) {\n\t                self._onActivationCallback[i].bind(self)();\n\t              }\n\t            } else {\n\t              self._controlTank(value);\n\t            }\n\t\n\t            var now = new Date().getTime();\n\t            var dt = now - self._aiProcessingStart;\n\t            if (dt > 50 && value.type != 'init') {\n\t              self._slowAiChances--;\n\t              console.warn(\"Execution of AI for tank \" + self._tank.name + \" #\" + self._tank.id + \" takes too long. If problem repeats, AI will be terminated.\");\n\t              if (self._slowAiChances <= 0) {\n\t                self._aiProcessingRejectCallback({\n\t                  message: \"Simulation cannot be continued because \" + self._tank.name + \" #\" + self._tank.id + \" has performance issues\",\n\t                  performanceIssues: true,\n\t                  tankName: self._tank.name,\n\t                  tankId: self._tank.id\n\t                });\n\t                self._aiProcessingResolveCallback = null;\n\t                self._aiProcessingRejectCallback = null;\n\t                return;\n\t              }\n\t            }\n\t\n\t            self._aiProcessingResolveCallback();\n\t            self._aiProcessingResolveCallback = null;\n\t            self._aiProcessingRejectCallback = null;\n\t          }\n\t        };\n\t        self._aiProcessingStart = new Date().getTime();\n\t        self._aiProcessingResolveCallback = resolve;\n\t        self._aiProcessingRejectCallback = reject;\n\t        self._aiWorker.postMessage({\n\t          command: 'init',\n\t          seed: seed + \":\" + self._tank.id,\n\t          settings: {\n\t            SKIN: 'zebra'\n\t          }\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: \"deactivate\",\n\t    value: function deactivate() {\n\t      if (this._aiWorker) {\n\t        this._aiWorker.terminate();\n\t        this._aiWorker = null;\n\t      }\n\t\n\t      if (this._aiProcessingCheckInterval) {\n\t        clearInterval(this._aiProcessingCheckInterval);\n\t        this._aiProcessingCheckInterval = null;\n\t      }\n\t      for (var i = 0; i < this._onDectivationCallback.length; i++) {\n\t        this._onDectivationCallback[i].bind(this)();\n\t      }\n\t    }\n\t  }, {\n\t    key: \"simulationStep\",\n\t    value: function simulationStep() {\n\t      var self = this;\n\t      return new Promise(function (resolve, reject) {\n\t        if (self._aiWorker && self._tank.energy == 0) {\n\t          self._aiWorker.terminate();\n\t          self._aiWorker = null;\n\t          resolve();\n\t          return;\n\t        }\n\t\n\t        self._aiProcessingStart = new Date().getTime();\n\t        self._aiProcessingResolveCallback = resolve;\n\t        self._aiProcessingRejectCallback = reject;\n\t        self._aiWorker.postMessage({\n\t          command: 'update',\n\t          state: self._tank.state,\n\t          control: self._controlData\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: \"_configureTank\",\n\t    value: function _configureTank(input) {\n\t      var settings = {};\n\t\n\t      var skinList = ['zebra', 'forest', 'black', 'tiger', 'desert', 'lava', 'ocean'];\n\t      if (skinList.indexOf(input.SKIN) != -1) {\n\t        settings.SKIN = input.SKIN;\n\t      }\n\t      this._tank.init(settings);\n\t    }\n\t  }, {\n\t    key: \"_controlTank\",\n\t    value: function _controlTank(value) {\n\t      var self = this;\n\t      self._controlData.THROTTLE = Number(value.THROTTLE);\n\t      self._controlData.TURN = Number(value.TURN);\n\t      self._controlData.GUN_TURN = Number(value.GUN_TURN);\n\t      self._controlData.RADAR_TURN = Number(value.RADAR_TURN);\n\t      self._controlData.SHOOT = Number(value.SHOOT);\n\t      self._controlData.DEBUG = value.DEBUG;\n\t      self._controlData.BOOST = value.BOOST ? 1 : 0;\n\t\n\t      self._controlData.THROTTLE = isNaN(self._controlData.THROTTLE) ? 0 : self._controlData.THROTTLE;\n\t      self._controlData.TURN = isNaN(self._controlData.TURN) ? 0 : self._controlData.TURN;\n\t      self._controlData.GUN_TURN = isNaN(self._controlData.GUN_TURN) ? 0 : self._controlData.GUN_TURN;\n\t      self._controlData.RADAR_TURN = isNaN(self._controlData.RADAR_TURN) ? 0 : self._controlData.RADAR_TURN;\n\t      self._controlData.SHOOT = isNaN(self._controlData.SHOOT) ? 0 : self._controlData.SHOOT;\n\t\n\t      self._controlData.THROTTLE = Math.min(1, Math.max(-1, Number(self._controlData.THROTTLE)));\n\t      self._controlData.TURN = Math.min(1, Math.max(-1, Number(self._controlData.TURN)));\n\t      self._controlData.GUN_TURN = Math.min(1, Math.max(-1, Number(self._controlData.GUN_TURN)));\n\t      self._controlData.RADAR_TURN = Math.min(1, Math.max(-1, Number(self._controlData.RADAR_TURN)));\n\t      self._controlData.SHOOT = Math.min(1, Math.max(0, Number(self._controlData.SHOOT)));\n\t\n\t      self._tank.setThrottle(self._controlData.THROTTLE);\n\t      self._tank.setBoost(self._controlData.BOOST);\n\t      self._tank.setTurn(self._controlData.TURN);\n\t      self._tank.setRadarTurn(self._controlData.RADAR_TURN);\n\t      self._tank.setGunTurn(self._controlData.GUN_TURN);\n\t      self._tank.setDebugData(self._controlData.DEBUG);\n\t      if (self._controlData.SHOOT) {\n\t        self._tank.shoot(self._controlData.SHOOT);\n\t      }\n\t      self._controlData.SHOOT = 0;\n\t    }\n\t  }, {\n\t    key: \"_createWorker\",\n\t    value: function _createWorker(path) {\n\t      return new Worker(path);\n\t    }\n\t  }, {\n\t    key: \"tank\",\n\t    get: function get() {\n\t      return this._tank;\n\t    }\n\t  }, {\n\t    key: \"worker\",\n\t    get: function get() {\n\t      return this._aiWorker;\n\t    }\n\t  }]);\n\t\n\t  return AiWrapper;\n\t}();\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function PerformanceMonitor() {\n\t    _classCallCheck(this, PerformanceMonitor);\n\t\n\t    this._simulationStepDuration = 30;\n\t    this._stepCounter = 0;\n\t    this._checkLoop = 0;\n\t    this._started = false;\n\t    this._desiredPerfomance = Math.floor(1000 / this._simulationStepDuration);\n\t    this._actualPerfomance = this._desiredPerfomance;\n\t    this._perfomanceIndex = 1;\n\t    this._desiredQuality = 1;\n\t    this._quality = this._desiredQuality;\n\t    this._checkInterval = 500;\n\t  }\n\t\n\t  _createClass(PerformanceMonitor, [{\n\t    key: 'start',\n\t    value: function start() {\n\t      this._started = true;\n\t      var self = this;\n\t      this._checkLoop = setInterval(function () {\n\t        self._check();\n\t      }, this._checkInterval);\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      this._started = false;\n\t      if (this._checkLoop) {\n\t        clearInterval(this._checkLoop);\n\t        this._checkLoop = null;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setSimulationStepDuration',\n\t    value: function setSimulationStepDuration(v) {\n\t      if (v != this._simulationStepDuration) {\n\t        this._quality = this._desiredQuality;\n\t      }\n\t      this._simulationStepDuration = v;\n\t      this._desiredPerfomance = Math.floor(1000 / v);\n\t    }\n\t  }, {\n\t    key: 'onSimulationStep',\n\t    value: function onSimulationStep() {\n\t      if (this._started) {\n\t        this._stepCounter++;\n\t      }\n\t    }\n\t  }, {\n\t    key: '_check',\n\t    value: function _check() {\n\t      this._actualPerfomance = Math.ceil(this._stepCounter * (1000 / this._checkInterval));\n\t      this._stepCounter = 0;\n\t      var index = this._desiredPerfomance ? this._actualPerfomance / this._desiredPerfomance : 1;\n\t      this._perfomanceIndex = (this._perfomanceIndex + index) / 2;\n\t      this._updateQuality();\n\t    }\n\t  }, {\n\t    key: '_updateQuality',\n\t    value: function _updateQuality() {\n\t      var lowestQuality = 2.5 * this._perfomanceIndex - 1.25;\n\t      lowestQuality = Math.max(0, Math.min(1, lowestQuality));\n\t      var decreaseStep = -0.5 * this._perfomanceIndex + 0.45;\n\t\n\t      if (this._perfomanceIndex > 1) {\n\t        this._desiredQuality += 0.1;\n\t      } else {\n\t        this._desiredQuality -= decreaseStep;\n\t      }\n\t\n\t      this._desiredQuality = Math.max(0, Math.min(1, this._desiredQuality));\n\t\n\t      var targetQuality = Math.max(lowestQuality, this._desiredQuality);\n\t\n\t      this._desiredQuality = (this._desiredQuality + targetQuality) / 2;\n\t      if (this._desiredQuality < this._quality) {\n\t        this._quality = this._desiredQuality;\n\t      } else {\n\t        this._quality = (this._desiredQuality + 9 * this._quality) / 10;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'started',\n\t    get: function get() {\n\t      return this._started;\n\t    }\n\t  }, {\n\t    key: 'desiredPerfomance',\n\t    get: function get() {\n\t      return this._desiredPerfomance;\n\t    }\n\t  }, {\n\t    key: 'actualPerfomance',\n\t    get: function get() {\n\t      return this._actualPerfomance;\n\t    }\n\t  }, {\n\t    key: 'qualityLevel',\n\t    get: function get() {\n\t      return this._quality;\n\t    }\n\t  }]);\n\t\n\t  return PerformanceMonitor;\n\t}();\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// A library of seedable RNGs implemented in Javascript.\n\t//\n\t// Usage:\n\t//\n\t// var seedrandom = require('seedrandom');\n\t// var random = seedrandom(1); // or any seed.\n\t// var x = random();       // 0 <= x < 1.  Every bit is random.\n\t// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\t\n\t// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n\t// Period: ~2^116\n\t// Reported to pass all BigCrush tests.\n\tvar alea = __webpack_require__(13);\n\t\n\t// xor128, a pure xor-shift generator by George Marsaglia.\n\t// Period: 2^128-1.\n\t// Reported to fail: MatrixRank and LinearComp.\n\tvar xor128 = __webpack_require__(15);\n\t\n\t// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n\t// Period: 2^192-2^32\n\t// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\n\tvar xorwow = __webpack_require__(16);\n\t\n\t// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n\t// a different approach: it adds robustness by allowing more shifts\n\t// than Marsaglia's original three.  It is a 7-shift generator\n\t// with 256 bits, that passes BigCrush with no systmatic failures.\n\t// Period 2^256-1.\n\t// No systematic BigCrush failures reported.\n\tvar xorshift7 = __webpack_require__(17);\n\t\n\t// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n\t// very long period that also adds a Weyl generator. It also passes\n\t// BigCrush with no systematic failures.  Its long period may\n\t// be useful if you have many generators and need to avoid\n\t// collisions.\n\t// Period: 2^4128-2^32.\n\t// No systematic BigCrush failures reported.\n\tvar xor4096 = __webpack_require__(18);\n\t\n\t// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n\t// number generator derived from ChaCha, a modern stream cipher.\n\t// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\t// Period: ~2^127\n\t// No systematic BigCrush failures reported.\n\tvar tychei = __webpack_require__(19);\n\t\n\t// The original ARC4-based prng included in this library.\n\t// Period: ~2^1600\n\tvar sr = __webpack_require__(20);\n\t\n\tsr.alea = alea;\n\tsr.xor128 = xor128;\n\tsr.xorwow = xorwow;\n\tsr.xorshift7 = xorshift7;\n\tsr.xor4096 = xor4096;\n\tsr.tychei = tychei;\n\t\n\tmodule.exports = sr;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n\t// http://baagoe.com/en/RandomMusings/javascript/\n\t// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n\t// Original work is under MIT license -\n\t\n\t// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a copy\n\t// of this software and associated documentation files (the \"Software\"), to deal\n\t// in the Software without restriction, including without limitation the rights\n\t// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t// copies of the Software, and to permit persons to whom the Software is\n\t// furnished to do so, subject to the following conditions:\n\t// \n\t// The above copyright notice and this permission notice shall be included in\n\t// all copies or substantial portions of the Software.\n\t// \n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\t// THE SOFTWARE.\n\t\n\t\n\t(function (global, module, define) {\n\t\n\t  function Alea(seed) {\n\t    var me = this,\n\t        mash = Mash();\n\t\n\t    me.next = function () {\n\t      var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n\t      me.s0 = me.s1;\n\t      me.s1 = me.s2;\n\t      return me.s2 = t - (me.c = t | 0);\n\t    };\n\t\n\t    // Apply the seeding algorithm from Baagoe.\n\t    me.c = 1;\n\t    me.s0 = mash(' ');\n\t    me.s1 = mash(' ');\n\t    me.s2 = mash(' ');\n\t    me.s0 -= mash(seed);\n\t    if (me.s0 < 0) {\n\t      me.s0 += 1;\n\t    }\n\t    me.s1 -= mash(seed);\n\t    if (me.s1 < 0) {\n\t      me.s1 += 1;\n\t    }\n\t    me.s2 -= mash(seed);\n\t    if (me.s2 < 0) {\n\t      me.s2 += 1;\n\t    }\n\t    mash = null;\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.c = f.c;\n\t    t.s0 = f.s0;\n\t    t.s1 = f.s1;\n\t    t.s2 = f.s2;\n\t    return t;\n\t  }\n\t\n\t  function impl(seed, opts) {\n\t    var xg = new Alea(seed),\n\t        state = opts && opts.state,\n\t        prng = xg.next;\n\t    prng.int32 = function () {\n\t      return xg.next() * 0x100000000 | 0;\n\t    };\n\t    prng.double = function () {\n\t      return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n\t    };\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  function Mash() {\n\t    var n = 0xefc8249d;\n\t\n\t    var mash = function mash(data) {\n\t      data = data.toString();\n\t      for (var i = 0; i < data.length; i++) {\n\t        n += data.charCodeAt(i);\n\t        var h = 0.02519603282416938 * n;\n\t        n = h >>> 0;\n\t        h -= n;\n\t        h *= n;\n\t        n = h >>> 0;\n\t        h -= n;\n\t        n += h * 0x100000000; // 2^32\n\t      }\n\t      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n\t    };\n\t\n\t    return mash;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.alea = impl;\n\t  }\n\t})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A Javascript implementaion of the \"xor128\" prng algorithm by\n\t// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\t\n\t(function (global, module, define) {\n\t\n\t  function XorGen(seed) {\n\t    var me = this,\n\t        strseed = '';\n\t\n\t    me.x = 0;\n\t    me.y = 0;\n\t    me.z = 0;\n\t    me.w = 0;\n\t\n\t    // Set up generator function.\n\t    me.next = function () {\n\t      var t = me.x ^ me.x << 11;\n\t      me.x = me.y;\n\t      me.y = me.z;\n\t      me.z = me.w;\n\t      return me.w ^= me.w >>> 19 ^ t ^ t >>> 8;\n\t    };\n\t\n\t    if (seed === (seed | 0)) {\n\t      // Integer seed.\n\t      me.x = seed;\n\t    } else {\n\t      // String seed.\n\t      strseed += seed;\n\t    }\n\t\n\t    // Mix in string seed, then discard an initial batch of 64 values.\n\t    for (var k = 0; k < strseed.length + 64; k++) {\n\t      me.x ^= strseed.charCodeAt(k) | 0;\n\t      me.next();\n\t    }\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.x = f.x;\n\t    t.y = f.y;\n\t    t.z = f.z;\n\t    t.w = f.w;\n\t    return t;\n\t  }\n\t\n\t  function impl(seed, opts) {\n\t    var xg = new XorGen(seed),\n\t        state = opts && opts.state,\n\t        prng = function prng() {\n\t      return (xg.next() >>> 0) / 0x100000000;\n\t    };\n\t    prng.double = function () {\n\t      do {\n\t        var top = xg.next() >>> 11,\n\t            bot = (xg.next() >>> 0) / 0x100000000,\n\t            result = (top + bot) / (1 << 21);\n\t      } while (result === 0);\n\t      return result;\n\t    };\n\t    prng.int32 = xg.next;\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.xor128 = impl;\n\t  }\n\t})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A Javascript implementaion of the \"xorwow\" prng algorithm by\n\t// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\t\n\t(function (global, module, define) {\n\t\n\t  function XorGen(seed) {\n\t    var me = this,\n\t        strseed = '';\n\t\n\t    // Set up generator function.\n\t    me.next = function () {\n\t      var t = me.x ^ me.x >>> 2;\n\t      me.x = me.y;me.y = me.z;me.z = me.w;me.w = me.v;\n\t      return (me.d = me.d + 362437 | 0) + (me.v = me.v ^ me.v << 4 ^ (t ^ t << 1)) | 0;\n\t    };\n\t\n\t    me.x = 0;\n\t    me.y = 0;\n\t    me.z = 0;\n\t    me.w = 0;\n\t    me.v = 0;\n\t\n\t    if (seed === (seed | 0)) {\n\t      // Integer seed.\n\t      me.x = seed;\n\t    } else {\n\t      // String seed.\n\t      strseed += seed;\n\t    }\n\t\n\t    // Mix in string seed, then discard an initial batch of 64 values.\n\t    for (var k = 0; k < strseed.length + 64; k++) {\n\t      me.x ^= strseed.charCodeAt(k) | 0;\n\t      if (k == strseed.length) {\n\t        me.d = me.x << 10 ^ me.x >>> 4;\n\t      }\n\t      me.next();\n\t    }\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.x = f.x;\n\t    t.y = f.y;\n\t    t.z = f.z;\n\t    t.w = f.w;\n\t    t.v = f.v;\n\t    t.d = f.d;\n\t    return t;\n\t  }\n\t\n\t  function impl(seed, opts) {\n\t    var xg = new XorGen(seed),\n\t        state = opts && opts.state,\n\t        prng = function prng() {\n\t      return (xg.next() >>> 0) / 0x100000000;\n\t    };\n\t    prng.double = function () {\n\t      do {\n\t        var top = xg.next() >>> 11,\n\t            bot = (xg.next() >>> 0) / 0x100000000,\n\t            result = (top + bot) / (1 << 21);\n\t      } while (result === 0);\n\t      return result;\n\t    };\n\t    prng.int32 = xg.next;\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.xorwow = impl;\n\t  }\n\t})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A Javascript implementaion of the \"xorshift7\" algorithm by\n\t// Franois Panneton and Pierre L'ecuyer:\n\t// \"On the Xorgshift Random Number Generators\"\n\t// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\t\n\t(function (global, module, define) {\n\t\n\t  function XorGen(seed) {\n\t    var me = this;\n\t\n\t    // Set up generator function.\n\t    me.next = function () {\n\t      // Update xor generator.\n\t      var X = me.x,\n\t          i = me.i,\n\t          t,\n\t          v,\n\t          w;\n\t      t = X[i];t ^= t >>> 7;v = t ^ t << 24;\n\t      t = X[i + 1 & 7];v ^= t ^ t >>> 10;\n\t      t = X[i + 3 & 7];v ^= t ^ t >>> 3;\n\t      t = X[i + 4 & 7];v ^= t ^ t << 7;\n\t      t = X[i + 7 & 7];t = t ^ t << 13;v ^= t ^ t << 9;\n\t      X[i] = v;\n\t      me.i = i + 1 & 7;\n\t      return v;\n\t    };\n\t\n\t    function init(me, seed) {\n\t      var j,\n\t          w,\n\t          X = [];\n\t\n\t      if (seed === (seed | 0)) {\n\t        // Seed state array using a 32-bit integer.\n\t        w = X[0] = seed;\n\t      } else {\n\t        // Seed state using a string.\n\t        seed = '' + seed;\n\t        for (j = 0; j < seed.length; ++j) {\n\t          X[j & 7] = X[j & 7] << 15 ^ seed.charCodeAt(j) + X[j + 1 & 7] << 13;\n\t        }\n\t      }\n\t      // Enforce an array length of 8, not all zeroes.\n\t      while (X.length < 8) {\n\t        X.push(0);\n\t      }for (j = 0; j < 8 && X[j] === 0; ++j) {}\n\t      if (j == 8) w = X[7] = -1;else w = X[j];\n\t\n\t      me.x = X;\n\t      me.i = 0;\n\t\n\t      // Discard an initial 256 values.\n\t      for (j = 256; j > 0; --j) {\n\t        me.next();\n\t      }\n\t    }\n\t\n\t    init(me, seed);\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.x = f.x.slice();\n\t    t.i = f.i;\n\t    return t;\n\t  }\n\t\n\t  function impl(seed, opts) {\n\t    if (seed == null) seed = +new Date();\n\t    var xg = new XorGen(seed),\n\t        state = opts && opts.state,\n\t        prng = function prng() {\n\t      return (xg.next() >>> 0) / 0x100000000;\n\t    };\n\t    prng.double = function () {\n\t      do {\n\t        var top = xg.next() >>> 11,\n\t            bot = (xg.next() >>> 0) / 0x100000000,\n\t            result = (top + bot) / (1 << 21);\n\t      } while (result === 0);\n\t      return result;\n\t    };\n\t    prng.int32 = xg.next;\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if (state.x) copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.xorshift7 = impl;\n\t  }\n\t})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n\t//\n\t// This fast non-cryptographic random number generator is designed for\n\t// use in Monte-Carlo algorithms. It combines a long-period xorshift\n\t// generator with a Weyl generator, and it passes all common batteries\n\t// of stasticial tests for randomness while consuming only a few nanoseconds\n\t// for each prng generated.  For background on the generator, see Brent's\n\t// paper: \"Some long-period random number generators using shifts and xors.\"\n\t// http://arxiv.org/pdf/1004.3115v1.pdf\n\t//\n\t// Usage:\n\t//\n\t// var xor4096 = require('xor4096');\n\t// random = xor4096(1);                        // Seed with int32 or string.\n\t// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n\t// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n\t//\n\t// For nonzero numeric keys, this impelementation provides a sequence\n\t// identical to that by Brent's xorgens 3 implementaion in C.  This\n\t// implementation also provides for initalizing the generator with\n\t// string seeds, or for saving and restoring the state of the generator.\n\t//\n\t// On Chrome, this prng benchmarks about 2.1 times slower than\n\t// Javascript's built-in Math.random().\n\t\n\t(function (global, module, define) {\n\t\n\t  function XorGen(seed) {\n\t    var me = this;\n\t\n\t    // Set up generator function.\n\t    me.next = function () {\n\t      var w = me.w,\n\t          X = me.X,\n\t          i = me.i,\n\t          t,\n\t          v;\n\t      // Update Weyl generator.\n\t      me.w = w = w + 0x61c88647 | 0;\n\t      // Update xor generator.\n\t      v = X[i + 34 & 127];\n\t      t = X[i = i + 1 & 127];\n\t      v ^= v << 13;\n\t      t ^= t << 17;\n\t      v ^= v >>> 15;\n\t      t ^= t >>> 12;\n\t      // Update Xor generator array state.\n\t      v = X[i] = v ^ t;\n\t      me.i = i;\n\t      // Result is the combination.\n\t      return v + (w ^ w >>> 16) | 0;\n\t    };\n\t\n\t    function init(me, seed) {\n\t      var t,\n\t          v,\n\t          i,\n\t          j,\n\t          w,\n\t          X = [],\n\t          limit = 128;\n\t      if (seed === (seed | 0)) {\n\t        // Numeric seeds initialize v, which is used to generates X.\n\t        v = seed;\n\t        seed = null;\n\t      } else {\n\t        // String seeds are mixed into v and X one character at a time.\n\t        seed = seed + '\\0';\n\t        v = 0;\n\t        limit = Math.max(limit, seed.length);\n\t      }\n\t      // Initialize circular array and weyl value.\n\t      for (i = 0, j = -32; j < limit; ++j) {\n\t        // Put the unicode characters into the array, and shuffle them.\n\t        if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n\t        // After 32 shuffles, take v as the starting w value.\n\t        if (j === 0) w = v;\n\t        v ^= v << 10;\n\t        v ^= v >>> 15;\n\t        v ^= v << 4;\n\t        v ^= v >>> 13;\n\t        if (j >= 0) {\n\t          w = w + 0x61c88647 | 0; // Weyl.\n\t          t = X[j & 127] ^= v + w; // Combine xor and weyl to init array.\n\t          i = 0 == t ? i + 1 : 0; // Count zeroes.\n\t        }\n\t      }\n\t      // We have detected all zeroes; make the key nonzero.\n\t      if (i >= 128) {\n\t        X[(seed && seed.length || 0) & 127] = -1;\n\t      }\n\t      // Run the generator 512 times to further mix the state before using it.\n\t      // Factoring this as a function slows the main generator, so it is just\n\t      // unrolled here.  The weyl generator is not advanced while warming up.\n\t      i = 127;\n\t      for (j = 4 * 128; j > 0; --j) {\n\t        v = X[i + 34 & 127];\n\t        t = X[i = i + 1 & 127];\n\t        v ^= v << 13;\n\t        t ^= t << 17;\n\t        v ^= v >>> 15;\n\t        t ^= t >>> 12;\n\t        X[i] = v ^ t;\n\t      }\n\t      // Storing state as object members is faster than using closure variables.\n\t      me.w = w;\n\t      me.X = X;\n\t      me.i = i;\n\t    }\n\t\n\t    init(me, seed);\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.i = f.i;\n\t    t.w = f.w;\n\t    t.X = f.X.slice();\n\t    return t;\n\t  };\n\t\n\t  function impl(seed, opts) {\n\t    if (seed == null) seed = +new Date();\n\t    var xg = new XorGen(seed),\n\t        state = opts && opts.state,\n\t        prng = function prng() {\n\t      return (xg.next() >>> 0) / 0x100000000;\n\t    };\n\t    prng.double = function () {\n\t      do {\n\t        var top = xg.next() >>> 11,\n\t            bot = (xg.next() >>> 0) / 0x100000000,\n\t            result = (top + bot) / (1 << 21);\n\t      } while (result === 0);\n\t      return result;\n\t    };\n\t    prng.int32 = xg.next;\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if (state.X) copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.xor4096 = impl;\n\t  }\n\t})(undefined, // window object or global\n\t( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n\t// Samuel Neves and Filipe Araujo.\n\t// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\t\n\t(function (global, module, define) {\n\t\n\t  function XorGen(seed) {\n\t    var me = this,\n\t        strseed = '';\n\t\n\t    // Set up generator function.\n\t    me.next = function () {\n\t      var b = me.b,\n\t          c = me.c,\n\t          d = me.d,\n\t          a = me.a;\n\t      b = b << 25 ^ b >>> 7 ^ c;\n\t      c = c - d | 0;\n\t      d = d << 24 ^ d >>> 8 ^ a;\n\t      a = a - b | 0;\n\t      me.b = b = b << 20 ^ b >>> 12 ^ c;\n\t      me.c = c = c - d | 0;\n\t      me.d = d << 16 ^ c >>> 16 ^ a;\n\t      return me.a = a - b | 0;\n\t    };\n\t\n\t    /* The following is non-inverted tyche, which has better internal\n\t     * bit diffusion, but which is about 25% slower than tyche-i in JS.\n\t    me.next = function() {\n\t      var a = me.a, b = me.b, c = me.c, d = me.d;\n\t      a = (me.a + me.b | 0) >>> 0;\n\t      d = me.d ^ a; d = d << 16 ^ d >>> 16;\n\t      c = me.c + d | 0;\n\t      b = me.b ^ c; b = b << 12 ^ d >>> 20;\n\t      me.a = a = a + b | 0;\n\t      d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n\t      me.c = c = c + d | 0;\n\t      b = b ^ c;\n\t      return me.b = (b << 7 ^ b >>> 25);\n\t    }\n\t    */\n\t\n\t    me.a = 0;\n\t    me.b = 0;\n\t    me.c = 2654435769 | 0;\n\t    me.d = 1367130551;\n\t\n\t    if (seed === Math.floor(seed)) {\n\t      // Integer seed.\n\t      me.a = seed / 0x100000000 | 0;\n\t      me.b = seed | 0;\n\t    } else {\n\t      // String seed.\n\t      strseed += seed;\n\t    }\n\t\n\t    // Mix in string seed, then discard an initial batch of 64 values.\n\t    for (var k = 0; k < strseed.length + 20; k++) {\n\t      me.b ^= strseed.charCodeAt(k) | 0;\n\t      me.next();\n\t    }\n\t  }\n\t\n\t  function copy(f, t) {\n\t    t.a = f.a;\n\t    t.b = f.b;\n\t    t.c = f.c;\n\t    t.d = f.d;\n\t    return t;\n\t  };\n\t\n\t  function impl(seed, opts) {\n\t    var xg = new XorGen(seed),\n\t        state = opts && opts.state,\n\t        prng = function prng() {\n\t      return (xg.next() >>> 0) / 0x100000000;\n\t    };\n\t    prng.double = function () {\n\t      do {\n\t        var top = xg.next() >>> 11,\n\t            bot = (xg.next() >>> 0) / 0x100000000,\n\t            result = (top + bot) / (1 << 21);\n\t      } while (result === 0);\n\t      return result;\n\t    };\n\t    prng.int32 = xg.next;\n\t    prng.quick = prng;\n\t    if (state) {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n\t      prng.state = function () {\n\t        return copy(xg, {});\n\t      };\n\t    }\n\t    return prng;\n\t  }\n\t\n\t  if (module && module.exports) {\n\t    module.exports = impl;\n\t  } else if (__webpack_require__(9) && __webpack_require__(14)) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return impl;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.tychei = impl;\n\t  }\n\t})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n\t__webpack_require__(9) // present with an AMD loader\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t/*\n\tCopyright 2014 David Bau.\n\t\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the\n\t\"Software\"), to deal in the Software without restriction, including\n\twithout limitation the rights to use, copy, modify, merge, publish,\n\tdistribute, sublicense, and/or sell copies of the Software, and to\n\tpermit persons to whom the Software is furnished to do so, subject to\n\tthe following conditions:\n\t\n\tThe above copyright notice and this permission notice shall be\n\tincluded in all copies or substantial portions of the Software.\n\t\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\tEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\tMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n\tIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n\tCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n\tTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n\tSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t*/\n\t\n\t(function (pool, math) {\n\t  //\n\t  // The following constants are related to IEEE 754 limits.\n\t  //\n\t  var global = this,\n\t      width = 256,\n\t      // each RC4 output is 0 <= x < 256\n\t  chunks = 6,\n\t      // at least six RC4 outputs for each double\n\t  digits = 52,\n\t      // there are 52 significant digits in a double\n\t  rngname = 'random',\n\t      // rngname: name for Math.random and Math.seedrandom\n\t  startdenom = math.pow(width, chunks),\n\t      significance = math.pow(2, digits),\n\t      overflow = significance * 2,\n\t      mask = width - 1,\n\t      nodecrypto; // node.js crypto module, initialized at the bottom.\n\t\n\t  //\n\t  // seedrandom()\n\t  // This is the seedrandom function described above.\n\t  //\n\t  function seedrandom(seed, options, callback) {\n\t    var key = [];\n\t    options = options == true ? { entropy: true } : options || {};\n\t\n\t    // Flatten the seed string or build one from local entropy if needed.\n\t    var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed == null ? autoseed() : seed, 3), key);\n\t\n\t    // Use the seed to initialize an ARC4 generator.\n\t    var arc4 = new ARC4(key);\n\t\n\t    // This function returns a random double in [0, 1) that contains\n\t    // randomness in every bit of the mantissa of the IEEE 754 value.\n\t    var prng = function prng() {\n\t      var n = arc4.g(chunks),\n\t          // Start with a numerator n < 2 ^ 48\n\t      d = startdenom,\n\t          //   and denominator d = 2 ^ 48.\n\t      x = 0; //   and no 'extra last byte'.\n\t      while (n < significance) {\n\t        // Fill up all significant digits by\n\t        n = (n + x) * width; //   shifting numerator and\n\t        d *= width; //   denominator and generating a\n\t        x = arc4.g(1); //   new least-significant-byte.\n\t      }\n\t      while (n >= overflow) {\n\t        // To avoid rounding up, before adding\n\t        n /= 2; //   last byte, shift everything\n\t        d /= 2; //   right using integer math until\n\t        x >>>= 1; //   we have exactly the desired bits.\n\t      }\n\t      return (n + x) / d; // Form the number within [0, 1).\n\t    };\n\t\n\t    prng.int32 = function () {\n\t      return arc4.g(4) | 0;\n\t    };\n\t    prng.quick = function () {\n\t      return arc4.g(4) / 0x100000000;\n\t    };\n\t    prng.double = prng;\n\t\n\t    // Mix the randomness into accumulated entropy.\n\t    mixkey(tostring(arc4.S), pool);\n\t\n\t    // Calling convention: what to return as a function of prng, seed, is_math.\n\t    return (options.pass || callback || function (prng, seed, is_math_call, state) {\n\t      if (state) {\n\t        // Load the arc4 state from the given state if it has an S array.\n\t        if (state.S) {\n\t          copy(state, arc4);\n\t        }\n\t        // Only provide the .state method if requested via options.state.\n\t        prng.state = function () {\n\t          return copy(arc4, {});\n\t        };\n\t      }\n\t\n\t      // If called as a method of Math (Math.seedrandom()), mutate\n\t      // Math.random because that is how seedrandom.js has worked since v1.0.\n\t      if (is_math_call) {\n\t        math[rngname] = prng;return seed;\n\t      }\n\t\n\t      // Otherwise, it is a newer calling convention, so return the\n\t      // prng directly.\n\t      else return prng;\n\t    })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n\t  }\n\t  math['seed' + rngname] = seedrandom;\n\t\n\t  //\n\t  // ARC4\n\t  //\n\t  // An ARC4 implementation.  The constructor takes a key in the form of\n\t  // an array of at most (width) integers that should be 0 <= x < (width).\n\t  //\n\t  // The g(count) method returns a pseudorandom integer that concatenates\n\t  // the next (count) outputs from ARC4.  Its return value is a number x\n\t  // that is in the range 0 <= x < (width ^ count).\n\t  //\n\t  function ARC4(key) {\n\t    var t,\n\t        keylen = key.length,\n\t        me = this,\n\t        i = 0,\n\t        j = me.i = me.j = 0,\n\t        s = me.S = [];\n\t\n\t    // The empty key [] is treated as [0].\n\t    if (!keylen) {\n\t      key = [keylen++];\n\t    }\n\t\n\t    // Set up S using the standard key scheduling algorithm.\n\t    while (i < width) {\n\t      s[i] = i++;\n\t    }\n\t    for (i = 0; i < width; i++) {\n\t      s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n\t      s[j] = t;\n\t    }\n\t\n\t    // The \"g\" method returns the next (count) outputs as one number.\n\t    (me.g = function (count) {\n\t      // Using instance members instead of closure state nearly doubles speed.\n\t      var t,\n\t          r = 0,\n\t          i = me.i,\n\t          j = me.j,\n\t          s = me.S;\n\t      while (count--) {\n\t        t = s[i = mask & i + 1];\n\t        r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n\t      }\n\t      me.i = i;me.j = j;\n\t      return r;\n\t      // For robust unpredictability, the function call below automatically\n\t      // discards an initial batch of values.  This is called RC4-drop[256].\n\t      // See http://google.com/search?q=rsa+fluhrer+response&btnI\n\t    })(width);\n\t  }\n\t\n\t  //\n\t  // copy()\n\t  // Copies internal state of ARC4 to or from a plain object.\n\t  //\n\t  function copy(f, t) {\n\t    t.i = f.i;\n\t    t.j = f.j;\n\t    t.S = f.S.slice();\n\t    return t;\n\t  };\n\t\n\t  //\n\t  // flatten()\n\t  // Converts an object tree to nested arrays of strings.\n\t  //\n\t  function flatten(obj, depth) {\n\t    var result = [],\n\t        typ = typeof obj === 'undefined' ? 'undefined' : _typeof(obj),\n\t        prop;\n\t    if (depth && typ == 'object') {\n\t      for (prop in obj) {\n\t        try {\n\t          result.push(flatten(obj[prop], depth - 1));\n\t        } catch (e) {}\n\t      }\n\t    }\n\t    return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n\t  }\n\t\n\t  //\n\t  // mixkey()\n\t  // Mixes a string seed into a key that is an array of integers, and\n\t  // returns a shortened string seed that is equivalent to the result key.\n\t  //\n\t  function mixkey(seed, key) {\n\t    var stringseed = seed + '',\n\t        smear,\n\t        j = 0;\n\t    while (j < stringseed.length) {\n\t      key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n\t    }\n\t    return tostring(key);\n\t  }\n\t\n\t  //\n\t  // autoseed()\n\t  // Returns an object for autoseeding, using window.crypto and Node crypto\n\t  // module if available.\n\t  //\n\t  function autoseed() {\n\t    try {\n\t      var out;\n\t      if (nodecrypto && (out = nodecrypto.randomBytes)) {\n\t        // The use of 'out' to remember randomBytes makes tight minified code.\n\t        out = out(width);\n\t      } else {\n\t        out = new Uint8Array(width);\n\t        (global.crypto || global.msCrypto).getRandomValues(out);\n\t      }\n\t      return tostring(out);\n\t    } catch (e) {\n\t      var browser = global.navigator,\n\t          plugins = browser && browser.plugins;\n\t      return [+new Date(), global, plugins, global.screen, tostring(pool)];\n\t    }\n\t  }\n\t\n\t  //\n\t  // tostring()\n\t  // Converts an array of charcodes to a string\n\t  //\n\t  function tostring(a) {\n\t    return String.fromCharCode.apply(0, a);\n\t  }\n\t\n\t  //\n\t  // When seedrandom.js is loaded, we immediately mix a few bits\n\t  // from the built-in RNG into the entropy pool.  Because we do\n\t  // not want to interfere with deterministic PRNG state later,\n\t  // seedrandom will not call math.random on its own again after\n\t  // initialization.\n\t  //\n\t  mixkey(math.random(), pool);\n\t\n\t  //\n\t  // Nodejs and AMD support: export the implementation as a module using\n\t  // either convention.\n\t  //\n\t  if (( false ? 'undefined' : _typeof(module)) == 'object' && module.exports) {\n\t    module.exports = seedrandom;\n\t    // When in node.js, try using crypto package for autoseeding.\n\t    try {\n\t      nodecrypto = __webpack_require__(21);\n\t    } catch (ex) {}\n\t  } else if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return seedrandom;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  }\n\t\n\t  // End anonymous scope, and pass initial values.\n\t})([], // pool: entropy pool starts empty\n\tMath // math: package containing random, pow, and seedrandom\n\t);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)(module)))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function Renderer() {\n\t    _classCallCheck(this, Renderer);\n\t  }\n\t\n\t  _createClass(Renderer, [{\n\t    key: 'initBatlefield',\n\t    value: function initBatlefield(battlefield) {}\n\t  }, {\n\t    key: 'preRender',\n\t    value: function preRender() {}\n\t  }, {\n\t    key: 'postRender',\n\t    value: function postRender() {}\n\t  }, {\n\t    key: 'renderTank',\n\t    value: function renderTank(tank, events) {}\n\t  }, {\n\t    key: 'renderClock',\n\t    value: function renderClock(msElapsed, msLimit) {}\n\t  }, {\n\t    key: 'renderTankStats',\n\t    value: function renderTankStats(tankList) {}\n\t  }, {\n\t    key: 'renderBullet',\n\t    value: function renderBullet(bullet, events) {}\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {}\n\t  }, {\n\t    key: 'quality',\n\t    get: function get() {\n\t      return 1;\n\t    },\n\t    set: function set(v) {}\n\t  }]);\n\t\n\t  return Renderer;\n\t}();\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiRenderer = __webpack_require__(24);\n\tvar DebugBattlefieldView = __webpack_require__(38);\n\tvar DebugClockView = __webpack_require__(39);\n\tvar DebugBulletView = __webpack_require__(40);\n\tvar DebugTankView = __webpack_require__(42);\n\t\n\tmodule.exports = function (_AbstractPixiRenderer) {\n\t  _inherits(DebugRenderer, _AbstractPixiRenderer);\n\t\n\t  function DebugRenderer() {\n\t    _classCallCheck(this, DebugRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (DebugRenderer.__proto__ || Object.getPrototypeOf(DebugRenderer)).call(this));\n\t\n\t    _this._frameCounter = 0;\n\t    _this._fpsLabel = null;\n\t    _this._scoreBoard = null;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(DebugRenderer, [{\n\t    key: \"initBatlefield\",\n\t    value: function initBatlefield(battlefield) {\n\t      _get(DebugRenderer.prototype.__proto__ || Object.getPrototypeOf(DebugRenderer.prototype), \"initBatlefield\", this).call(this, battlefield);\n\t\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 12,\n\t        fill: '#00ff00'\n\t      });\n\t\n\t      this._fpsLabel = new PIXI.Text(\"FPS\", labelStyle);\n\t      this._fpsLabel.x = 100;\n\t      this._fpsLabel.y = 5;\n\t      this.stage.addChild(this._fpsLabel);\n\t\n\t      var self = this;\n\t      setInterval(function () {\n\t        self._fpsLabel.text = \"FPS: \" + self._frameCounter;\n\t        self._frameCounter = 0;\n\t      }, 1000);\n\t\n\t      labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 12,\n\t        fill: '#00ff00'\n\t      });\n\t\n\t      this._scoreBoard = new PIXI.Text(\"scores\", labelStyle);\n\t      this._scoreBoard.x = battlefield.margin + 2;\n\t      this._scoreBoard.y = battlefield.margin + 2;\n\t      this._scoreBoard.alpha = 0.5;\n\t      this.stage.addChild(this._scoreBoard);\n\t    }\n\t  }, {\n\t    key: \"renderTankStats\",\n\t    value: function renderTankStats(tankList) {\n\t      _get(DebugRenderer.prototype.__proto__ || Object.getPrototypeOf(DebugRenderer.prototype), \"renderTankStats\", this).call(this, tankList);\n\t      var scores = [];\n\t      var i;\n\t      for (i = 0; i < tankList.length; i++) {\n\t        scores.push({\n\t          name: tankList[i].fullName,\n\t          energy: tankList[i].energy,\n\t          value: tankList[i].score\n\t        });\n\t      }\n\t      scores.sort(function (a, b) {\n\t        if (a.value < b.value) return 1;\n\t        if (a.value > b.value) return -1;\n\t        return 0;\n\t      });\n\t      var msg = \"\";\n\t      for (i = 0; i < scores.length; i++) {\n\t        msg += scores[i].value.toFixed(3) + \" - \" + scores[i].name + (scores[i].energy == 0 ? \" [X]\" : \"\") + \"\\n\";\n\t      }\n\t      this._scoreBoard.text = msg;\n\t    }\n\t  }, {\n\t    key: \"postRender\",\n\t    value: function postRender() {\n\t      _get(DebugRenderer.prototype.__proto__ || Object.getPrototypeOf(DebugRenderer.prototype), \"postRender\", this).call(this);\n\t      this._frameCounter++;\n\t    }\n\t  }, {\n\t    key: \"_createBattlefieldView\",\n\t    value: function _createBattlefieldView(battlefield) {\n\t      return new DebugBattlefieldView(battlefield);\n\t    }\n\t  }, {\n\t    key: \"_createClockView\",\n\t    value: function _createClockView(clock) {\n\t      return new DebugClockView(clock);\n\t    }\n\t  }, {\n\t    key: \"_createBulletView\",\n\t    value: function _createBulletView(bullet) {\n\t      return new DebugBulletView(bullet);\n\t    }\n\t  }, {\n\t    key: \"_createTankView\",\n\t    value: function _createTankView(tank) {\n\t      return new DebugTankView(tank);\n\t    }\n\t  }]);\n\t\n\t  return DebugRenderer;\n\t}(AbstractPixiRenderer);\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractRenderer = __webpack_require__(25);\n\tvar AbstractPixiView = __webpack_require__(27);\n\tvar AbstractPixiTankView = __webpack_require__(28);\n\tvar PixiRendererClockModel = __webpack_require__(29);\n\tvar PixiPackerParser = __webpack_require__(30);\n\t\n\tmodule.exports = function (_AbstractRenderer) {\n\t  _inherits(AbstractPixiRenderer, _AbstractRenderer);\n\t\n\t  function AbstractPixiRenderer(name) {\n\t    _classCallCheck(this, AbstractPixiRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (AbstractPixiRenderer.__proto__ || Object.getPrototypeOf(AbstractPixiRenderer)).call(this));\n\t\n\t    _this._name = name;\n\t\n\t    if (!PIXI) {\n\t      throw \"Pixi.js is required!\";\n\t    }\n\t    _this._masterContainer = new PIXI.Container();\n\t    _this._tankContainer = new PIXI.Container();\n\t    _this._bulletContainer = new PIXI.Container();\n\t    _this._hudContainer = new PIXI.Container();\n\t    _this._masterContainer.addChild(_this._tankContainer);\n\t    _this._masterContainer.addChild(_this._bulletContainer);\n\t    _this._masterContainer.addChild(_this._hudContainer);\n\t    _this._renderer = null;\n\t    _this._stage = null;\n\t    _this._clockModel = new PixiRendererClockModel();\n\t    _this._clockView = null;\n\t    _this._battlefieldView = null;\n\t    if (window.devicePixelRatio >= 2) {\n\t      _this._rendererScale = 2;\n\t    } else {\n\t      _this._rendererScale = 1;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(AbstractPixiRenderer, [{\n\t    key: \"initBatlefield\",\n\t    value: function initBatlefield(battlefield) {\n\t      _get(AbstractPixiRenderer.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiRenderer.prototype), \"initBatlefield\", this).call(this, battlefield);\n\t      this._masterContainer.x = -this.offsetX;\n\t      this._masterContainer.y = -this.offsetY;\n\t\n\t      var rendererSettings = {\n\t        view: this._canvas,\n\t        antialias: false,\n\t        backgroundColor: 0xffffff,\n\t        resolution: window.devicePixelRatio\n\t      };\n\t\n\t      this._renderer = new PIXI.autoDetectRenderer(battlefield.width + 2 * battlefield.margin, battlefield.height + 2 * battlefield.margin, rendererSettings);\n\t      this._stage = new PIXI.Container();\n\t\n\t      this._battlefieldView = this._createBattlefieldView(battlefield);\n\t      this._clockView = this._createClockView(this._clockModel);\n\t\n\t      this._stage.addChild(this._battlefieldView.view);\n\t      this._stage.addChild(this._masterContainer);\n\t      this._stage.addChild(this._clockView.view);\n\t\n\t      this._renderer.render(this._stage);\n\t    }\n\t  }, {\n\t    key: \"init\",\n\t    value: function init(canvas) {\n\t      this._canvas = canvas;\n\t    }\n\t  }, {\n\t    key: \"loadAssets\",\n\t    value: function loadAssets(done) {\n\t      if (!this._name) {\n\t        done();\n\t        return;\n\t      }\n\t      var loader = new PIXI.loaders.Loader();\n\t      loader.after(PixiPackerParser(PIXI));\n\t      var resolution = this._rendererScale == 2 ? \"retina\" : \"web\";\n\t      loader.add(\"img/game_\" + this._name + \"_\" + resolution + \".json\");\n\t      var self = this;\n\t      loader.load(function () {\n\t        self.onAssetsLoaded();\n\t        done();\n\t      });\n\t    }\n\t  }, {\n\t    key: \"onAssetsLoaded\",\n\t    value: function onAssetsLoaded() {}\n\t  }, {\n\t    key: \"preRender\",\n\t    value: function preRender() {\n\t      this._battlefieldView.update();\n\t    }\n\t  }, {\n\t    key: \"renderTank\",\n\t    value: function renderTank(tank, events) {\n\t      _get(AbstractPixiRenderer.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiRenderer.prototype), \"renderTank\", this).call(this, tank, events);\n\t      var view = this.getTankView(tank.id);\n\t      if (!view.parent && view.isAlive) {\n\t        this._tankContainer.addChild(view.view);\n\t        this._hudContainer.addChild(view.hudView);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"renderBullet\",\n\t    value: function renderBullet(bullet, events) {\n\t      _get(AbstractPixiRenderer.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiRenderer.prototype), \"renderBullet\", this).call(this, bullet, events);\n\t      var view = this.getBulletView(bullet.id);\n\t      if (!view.parent && view.isAlive) {\n\t        this._bulletContainer.addChild(view.view);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"renderClock\",\n\t    value: function renderClock(msElapsed, msLimit) {\n\t      this._clockModel.update(msElapsed, msLimit);\n\t      this._clockView.update();\n\t    }\n\t  }, {\n\t    key: \"postRender\",\n\t    value: function postRender() {\n\t      _get(AbstractPixiRenderer.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiRenderer.prototype), \"postRender\", this).call(this);\n\t      this._renderer.render(this._stage);\n\t    }\n\t  }, {\n\t    key: \"_createTankView\",\n\t    value: function _createTankView(tank) {\n\t      return new AbstractPixiTankView(tank);\n\t    }\n\t  }, {\n\t    key: \"_createBulletView\",\n\t    value: function _createBulletView(bullet) {\n\t      return new AbstractPixiView(bullet);\n\t    }\n\t  }, {\n\t    key: \"_createBattlefieldView\",\n\t    value: function _createBattlefieldView(battlefield) {\n\t      return new AbstractPixiView(battlefield);\n\t    }\n\t  }, {\n\t    key: \"_createClockView\",\n\t    value: function _createClockView(clock) {\n\t      return new AbstractPixiView(clock);\n\t    }\n\t  }, {\n\t    key: \"stage\",\n\t    get: function get() {\n\t      return this._stage;\n\t    }\n\t  }, {\n\t    key: \"battlefieldView\",\n\t    get: function get() {\n\t      return this._battlefieldView;\n\t    }\n\t  }, {\n\t    key: \"masterContainer\",\n\t    get: function get() {\n\t      return this._masterContainer;\n\t    }\n\t  }]);\n\t\n\t  return AbstractPixiRenderer;\n\t}(AbstractRenderer);\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Renderer = __webpack_require__(22);\n\tvar AbstractView = __webpack_require__(26);\n\t\n\tmodule.exports = function (_Renderer) {\n\t  _inherits(AbstractRenderer, _Renderer);\n\t\n\t  function AbstractRenderer() {\n\t    _classCallCheck(this, AbstractRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (AbstractRenderer.__proto__ || Object.getPrototypeOf(AbstractRenderer)).call(this));\n\t\n\t    _this._tankMap = [];\n\t    _this._bulletMap = [];\n\t    _this._offsetX = 0;\n\t    _this._offsetY = 0;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(AbstractRenderer, [{\n\t    key: \"initBatlefield\",\n\t    value: function initBatlefield(battlefield) {\n\t      this._offsetX = battlefield.offsetX;\n\t      this._offsetY = battlefield.offsetY;\n\t    }\n\t  }, {\n\t    key: \"renderTank\",\n\t    value: function renderTank(tank, events) {\n\t      this._renderModel(tank, events, this._tankMap, this._createTankView);\n\t    }\n\t  }, {\n\t    key: \"renderBullet\",\n\t    value: function renderBullet(bullet, events) {\n\t      this._renderModel(bullet, events, this._bulletMap, this._createBulletView);\n\t    }\n\t  }, {\n\t    key: \"getBulletView\",\n\t    value: function getBulletView(id) {\n\t      return this._bulletMap[id];\n\t    }\n\t  }, {\n\t    key: \"getTankView\",\n\t    value: function getTankView(id) {\n\t      return this._tankMap[id];\n\t    }\n\t  }, {\n\t    key: \"_renderModel\",\n\t    value: function _renderModel(model, events, map, factory) {\n\t      var view = null;\n\t      if (map[model.id]) {\n\t        view = map[model.id];\n\t      } else {\n\t        view = factory(model);\n\t        map[model.id] = view;\n\t      }\n\t      view.update(events);\n\t      return view;\n\t    }\n\t  }, {\n\t    key: \"_createTankView\",\n\t    value: function _createTankView(tank) {\n\t      return new AbstractView(tank);\n\t    }\n\t  }, {\n\t    key: \"_createBulletView\",\n\t    value: function _createBulletView(bullet) {\n\t      return new AbstractView(bullet);\n\t    }\n\t  }, {\n\t    key: \"offsetX\",\n\t    get: function get() {\n\t      return this._offsetX;\n\t    }\n\t  }, {\n\t    key: \"offsetY\",\n\t    get: function get() {\n\t      return this._offsetY;\n\t    }\n\t  }]);\n\t\n\t  return AbstractRenderer;\n\t}(Renderer);\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function AbstractView(model) {\n\t    _classCallCheck(this, AbstractView);\n\t\n\t    this._model = model;\n\t    this._view = null;\n\t    this._isAlive = true;\n\t  }\n\t\n\t  _createClass(AbstractView, [{\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._isAlive = false;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {}\n\t  }, {\n\t    key: 'isAlive',\n\t    get: function get() {\n\t      return this._isAlive;\n\t    }\n\t  }, {\n\t    key: 'model',\n\t    get: function get() {\n\t      return this._model;\n\t    }\n\t  }, {\n\t    key: 'view',\n\t    get: function get() {\n\t      return this._view;\n\t    }\n\t  }]);\n\t\n\t  return AbstractView;\n\t}();\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractView = __webpack_require__(26);\n\t\n\tmodule.exports = function (_AbstractView) {\n\t  _inherits(AbstractPixiView, _AbstractView);\n\t\n\t  function AbstractPixiView(model) {\n\t    _classCallCheck(this, AbstractPixiView);\n\t\n\t    var _this = _possibleConstructorReturn(this, (AbstractPixiView.__proto__ || Object.getPrototypeOf(AbstractPixiView)).call(this, model));\n\t\n\t    _this._model = model;\n\t    _this._view = new PIXI.Container();\n\t    _this._create(_this._view);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(AbstractPixiView, [{\n\t    key: \"update\",\n\t    value: function update(events) {\n\t      _get(AbstractPixiView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiView.prototype), \"update\", this).call(this, events);\n\t      if (this._model.x !== undefined) {\n\t        this._view.x = this._model.x;\n\t      }\n\t      if (this._model.y !== undefined) {\n\t        this._view.y = this._model.y;\n\t      }\n\t      if (this._model.angle !== undefined) {\n\t        this._view.rotation = this._model.angle * (Math.PI / 180);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"destroy\",\n\t    value: function destroy() {\n\t      _get(AbstractPixiView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiView.prototype), \"destroy\", this).call(this);\n\t      if (this.view.parent) {\n\t        this.view.parent.removeChild(this.view);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"_create\",\n\t    value: function _create(container) {}\n\t  }]);\n\t\n\t  return AbstractPixiView;\n\t}(AbstractView);\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(AbstractPixiTankView, _AbstractPixiView);\n\t\n\t  function AbstractPixiTankView(model) {\n\t    _classCallCheck(this, AbstractPixiTankView);\n\t\n\t    var _this = _possibleConstructorReturn(this, (AbstractPixiTankView.__proto__ || Object.getPrototypeOf(AbstractPixiTankView)).call(this, model));\n\t\n\t    _this._hudView = new PIXI.Container();\n\t    _this._createHud(_this._hudView);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(AbstractPixiTankView, [{\n\t    key: 'update',\n\t    value: function update(events) {\n\t      _get(AbstractPixiTankView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiTankView.prototype), 'update', this).call(this, events);\n\t      this.view.rotation = 0;\n\t      this.body.rotation = this.model.angle * (Math.PI / 180);\n\t      this.gun.rotation = (this.model.angle + this.model.gunAngle) * (Math.PI / 180);\n\t      this.radar.rotation = (this.model.angle + this.model.radarAngle) * (Math.PI / 180);\n\t      this.energyBar.scale.x = this.model.energy / this.model.maxEnergy;\n\t      this.label.text = this.model.fullName;\n\t\n\t      this.hudView.x = this.view.x;\n\t      this.hudView.y = this.view.y;\n\t\n\t      for (var i = 0; i < events.length; i++) {\n\t        this._onEvent(events[i]);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_onEvent',\n\t    value: function _onEvent(event) {\n\t      switch (event.type) {\n\t        case 'shoot':\n\t          this._onShoot(event);\n\t          break;\n\t        case 'destroy':\n\t          this._onDestroy(event);\n\t          break;\n\t      }\n\t    }\n\t  }, {\n\t    key: '_onShoot',\n\t    value: function _onShoot(event) {}\n\t  }, {\n\t    key: '_onDestroy',\n\t    value: function _onDestroy(event) {\n\t      this.destroy();\n\t    }\n\t  }, {\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      _get(AbstractPixiTankView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiTankView.prototype), '_create', this).call(this, container);\n\t      this._body = this._createBody();\n\t      this._gun = this._createGun();\n\t      this._radar = this._createRadar();\n\t      container.addChild(this._body);\n\t      container.addChild(this._gun);\n\t      container.addChild(this._radar);\n\t    }\n\t  }, {\n\t    key: '_createHud',\n\t    value: function _createHud(container) {\n\t      this._label = this._createLabel();\n\t      this._energyBar = this._createEnergyBar();\n\t      container.addChild(this._createHudBackground());\n\t      container.addChild(this._energyBar);\n\t      container.addChild(this._label);\n\t    }\n\t  }, {\n\t    key: '_createBody',\n\t    value: function _createBody() {\n\t      return new PIXI.Sprite();\n\t    }\n\t  }, {\n\t    key: '_createGun',\n\t    value: function _createGun() {\n\t      return new PIXI.Sprite();\n\t    }\n\t  }, {\n\t    key: '_createRadar',\n\t    value: function _createRadar() {\n\t      return new PIXI.Sprite();\n\t    }\n\t  }, {\n\t    key: '_createHudBackground',\n\t    value: function _createHudBackground() {\n\t      return new PIXI.Sprite();\n\t    }\n\t  }, {\n\t    key: '_createEnergyBar',\n\t    value: function _createEnergyBar() {\n\t      return new PIXI.Sprite();\n\t    }\n\t  }, {\n\t    key: '_createLabel',\n\t    value: function _createLabel() {\n\t      return new PIXI.Text();\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      _get(AbstractPixiTankView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiTankView.prototype), 'destroy', this).call(this);\n\t      if (this.hudView.parent) {\n\t        this.hudView.parent.removeChild(this.hudView);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'body',\n\t    get: function get() {\n\t      return this._body;\n\t    }\n\t  }, {\n\t    key: 'hudView',\n\t    get: function get() {\n\t      return this._hudView;\n\t    }\n\t  }, {\n\t    key: 'gun',\n\t    get: function get() {\n\t      return this._gun;\n\t    }\n\t  }, {\n\t    key: 'radar',\n\t    get: function get() {\n\t      return this._radar;\n\t    }\n\t  }, {\n\t    key: 'label',\n\t    get: function get() {\n\t      return this._label;\n\t    }\n\t  }, {\n\t    key: 'energyBar',\n\t    get: function get() {\n\t      return this._energyBar;\n\t    }\n\t  }]);\n\t\n\t  return AbstractPixiTankView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function PixiRendererClockModel() {\n\t    _classCallCheck(this, PixiRendererClockModel);\n\t  }\n\t\n\t  _createClass(PixiRendererClockModel, [{\n\t    key: \"construct\",\n\t    value: function construct() {\n\t      this._msElapsed = 0;\n\t      this._msLimit = 0;\n\t    }\n\t  }, {\n\t    key: \"update\",\n\t    value: function update(msElapsed, msLimit) {\n\t      this._msElapsed = msElapsed;\n\t      this._msLimit = msLimit;\n\t    }\n\t  }, {\n\t    key: \"msElapsed\",\n\t    get: function get() {\n\t      return this._msElapsed;\n\t    }\n\t  }, {\n\t    key: \"msLimit\",\n\t    get: function get() {\n\t      return this._msLimit;\n\t    }\n\t  }, {\n\t    key: \"text\",\n\t    get: function get() {\n\t      var msTotal = Math.max(0, this._msLimit - this._msElapsed);\n\t      var s = Math.floor(msTotal / 1000);\n\t      var ms = msTotal % 1000;\n\t      s = s.toString();\n\t      while (s.length < 2) {\n\t        s = \"0\" + s;\n\t      }ms = ms.toString();\n\t      while (ms.length < 3) {\n\t        ms = \"0\" + ms;\n\t      }return \"0:\" + s + \".\" + ms;\n\t    }\n\t  }]);\n\t\n\t  return PixiRendererClockModel;\n\t}();\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Resource = __webpack_require__(31).Resource;\n\t\n\tfunction pathWithoutFile(path) {\n\t    var elements = path.split(\"/\");\n\t    elements.pop(); // remove filename\n\t    return elements.join(\"/\");\n\t}\n\t\n\t// Simple \"wait for all\" helper class\n\tfunction WaitForAll(count, allDone) {\n\t    var remaining = count;\n\t\n\t    this.done = function () {\n\t        remaining--;\n\t        if (remaining === 0) {\n\t            allDone();\n\t        }\n\t    };\n\t}\n\t\n\tmodule.exports = function (PIXI) {\n\t    return function (resource, next) {\n\t        // skip if no data, its not json, or it isn't a pixi-packer manifest\n\t        if (!resource.data || resource.type !== Resource.TYPE.JSON || !resource.data.meta || resource.data.meta.type !== \"pixi-packer\") {\n\t            return next();\n\t        }\n\t\n\t        if (resource.data.meta.version > 1) {\n\t            throw new Error(\"pixi-packer manifest version \" + resource.data.meta.version + \" not supported\");\n\t        }\n\t\n\t        var loader = this;\n\t\n\t        var loadOptions = {\n\t            crossOrigin: resource.crossOrigin,\n\t            loadType: Resource.LOAD_TYPE.IMAGE,\n\t            parentResource: resource\n\t        };\n\t\n\t        var urlForManifest = resource.url.replace(loader.baseUrl, \"\");\n\t        var route = pathWithoutFile(urlForManifest);\n\t\n\t        var resolution = resource.data.resolution;\n\t\n\t        if (resource.data.spritesheets.length && loader.progress === 100) {\n\t            // This is a temporary workaround until a solution for https://github.com/englercj/resource-loader/pull/32 is found\n\t            loader.progress = 0;\n\t        }\n\t\n\t        // Load all spritesheets\n\t        var waiter = new WaitForAll(resource.data.spritesheets.length, next);\n\t        resource.data.spritesheets.forEach(function (spritesheet) {\n\t            var name = spritesheet.image;\n\t            var imageUrl = route + \"/\" + spritesheet.image;\n\t            loader.add(name, imageUrl, loadOptions, function (res) {\n\t                res.texture.baseTexture.resolution = resolution;\n\t                res.texture.baseTexture.update();\n\t                res.textures = {};\n\t                spritesheet.sprites.forEach(function (sprite) {\n\t                    var frame = new PIXI.Rectangle(sprite.position.x / resolution, sprite.position.y / resolution, sprite.dimension.w / resolution, sprite.dimension.h / resolution);\n\t\n\t                    var crop;\n\t                    if (Number(PIXI.VERSION.charAt(0)) >= 4) {\n\t                        crop = new PIXI.Rectangle(0, 0, sprite.dimension.w / resolution, sprite.dimension.h / resolution);\n\t                    } else {\n\t                        crop = frame.clone();\n\t                    }\n\t\n\t                    var trim = null;\n\t\n\t                    //  Check to see if the sprite is trimmed\n\t                    if (sprite.trim) {\n\t                        if (Number(PIXI.VERSION.charAt(0)) >= 4) {\n\t                            trim = new PIXI.Rectangle(sprite.trim.x / resolution, sprite.trim.y / resolution, sprite.trim.w / resolution, sprite.trim.h / resolution);\n\t\n\t                            frame.width = sprite.trim.w / resolution;\n\t                            frame.height = sprite.trim.h / resolution;\n\t                        } else {\n\t                            trim = new PIXI.Rectangle(sprite.trim.x / resolution, sprite.trim.y / resolution, frame.width, frame.height);\n\t\n\t                            crop.width = sprite.trim.w / resolution;\n\t                            crop.height = sprite.trim.h / resolution;\n\t                        }\n\t                    }\n\t\n\t                    res.textures[sprite.name] = new PIXI.Texture(res.texture.baseTexture, frame, crop, trim, false);\n\t\n\t                    // lets also add the frame to pixi's global cache for fromFrame and fromImage functions\n\t                    PIXI.utils.TextureCache[sprite.name] = res.textures[sprite.name];\n\t                });\n\t                waiter.done();\n\t            });\n\t        });\n\t    };\n\t};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// import Loader from './Loader';\n\t// import Resource from './Resource';\n\t// import * as async from './async';\n\t// import * as b64 from './b64';\n\t\n\t/* eslint-disable no-undef */\n\t\n\tvar Loader = __webpack_require__(32).default;\n\tvar Resource = __webpack_require__(36).default;\n\tvar async = __webpack_require__(35);\n\tvar b64 = __webpack_require__(37);\n\t\n\tLoader.Resource = Resource;\n\tLoader.async = async;\n\tLoader.base64 = b64;\n\t\n\t// export manually, and also as default\n\tmodule.exports = Loader;\n\t// export default Loader;\n\tmodule.exports.default = Loader;\n\t//# sourceMappingURL=index.js.map\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.__esModule = true;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n\t    return typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n\t} : function (obj) {\n\t    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n\t};\n\t\n\tvar _miniSignals = __webpack_require__(33);\n\t\n\tvar _miniSignals2 = _interopRequireDefault(_miniSignals);\n\t\n\tvar _parseUri = __webpack_require__(34);\n\t\n\tvar _parseUri2 = _interopRequireDefault(_parseUri);\n\t\n\tvar _async = __webpack_require__(35);\n\t\n\tvar async = _interopRequireWildcard(_async);\n\t\n\tvar _Resource = __webpack_require__(36);\n\t\n\tvar _Resource2 = _interopRequireDefault(_Resource);\n\t\n\tfunction _interopRequireWildcard(obj) {\n\t    if (obj && obj.__esModule) {\n\t        return obj;\n\t    } else {\n\t        var newObj = {};if (obj != null) {\n\t            for (var key in obj) {\n\t                if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t            }\n\t        }newObj.default = obj;return newObj;\n\t    }\n\t}\n\t\n\tfunction _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\t\n\tfunction _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t        throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t}\n\t\n\t// some constants\n\tvar MAX_PROGRESS = 100;\n\tvar rgxExtractUrlHash = /(#[\\w-]+)?$/;\n\t\n\t/**\n\t * Manages the state and loading of multiple resources to load.\n\t *\n\t * @class\n\t */\n\t\n\tvar Loader = function () {\n\t    /**\n\t     * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n\t     * @param {number} [concurrency=10] - The number of resources to load concurrently.\n\t     */\n\t    function Loader() {\n\t        var _this = this;\n\t\n\t        var baseUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\t        var concurrency = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\n\t        _classCallCheck(this, Loader);\n\t\n\t        /**\n\t         * The base url for all resources loaded by this loader.\n\t         *\n\t         * @member {string}\n\t         */\n\t        this.baseUrl = baseUrl;\n\t\n\t        /**\n\t         * The progress percent of the loader going through the queue.\n\t         *\n\t         * @member {number}\n\t         */\n\t        this.progress = 0;\n\t\n\t        /**\n\t         * Loading state of the loader, true if it is currently loading resources.\n\t         *\n\t         * @member {boolean}\n\t         */\n\t        this.loading = false;\n\t\n\t        /**\n\t         * A querystring to append to every URL added to the loader.\n\t         *\n\t         * This should be a valid query string *without* the question-mark (`?`). The loader will\n\t         * also *not* escape values for you. Make sure to escape your parameters with\n\t         * [`encodeURIComponent`](https://mdn.io/encodeURIComponent) before assigning this property.\n\t         *\n\t         * @example\n\t         * const loader = new Loader();\n\t         *\n\t         * loader.defaultQueryString = 'user=me&password=secret';\n\t         *\n\t         * // This will request 'image.png?user=me&password=secret'\n\t         * loader.add('image.png').load();\n\t         *\n\t         * loader.reset();\n\t         *\n\t         * // This will request 'image.png?v=1&user=me&password=secret'\n\t         * loader.add('iamge.png?v=1').load();\n\t         */\n\t        this.defaultQueryString = '';\n\t\n\t        /**\n\t         * The middleware to run before loading each resource.\n\t         *\n\t         * @member {function[]}\n\t         */\n\t        this._beforeMiddleware = [];\n\t\n\t        /**\n\t         * The middleware to run after loading each resource.\n\t         *\n\t         * @member {function[]}\n\t         */\n\t        this._afterMiddleware = [];\n\t\n\t        /**\n\t         * The tracks the resources we are currently completing parsing for.\n\t         *\n\t         * @member {Resource[]}\n\t         */\n\t        this._resourcesParsing = [];\n\t\n\t        /**\n\t         * The `_loadResource` function bound with this object context.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         * @param {Resource} r - The resource to load\n\t         * @param {Function} d - The dequeue function\n\t         * @return {undefined}\n\t         */\n\t        this._boundLoadResource = function (r, d) {\n\t            return _this._loadResource(r, d);\n\t        };\n\t\n\t        /**\n\t         * The resources waiting to be loaded.\n\t         *\n\t         * @private\n\t         * @member {Resource[]}\n\t         */\n\t        this._queue = async.queue(this._boundLoadResource, concurrency);\n\t\n\t        this._queue.pause();\n\t\n\t        /**\n\t         * All the resources for this loader keyed by name.\n\t         *\n\t         * @member {object<string, Resource>}\n\t         */\n\t        this.resources = {};\n\t\n\t        /**\n\t         * Dispatched once per loaded or errored resource.\n\t         *\n\t         * The callback looks like {@link Loader.OnProgressSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onProgress = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched once per errored resource.\n\t         *\n\t         * The callback looks like {@link Loader.OnErrorSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onError = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched once per loaded resource.\n\t         *\n\t         * The callback looks like {@link Loader.OnLoadSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onLoad = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched when the loader begins to process the queue.\n\t         *\n\t         * The callback looks like {@link Loader.OnStartSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onStart = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched when the queued resources all load.\n\t         *\n\t         * The callback looks like {@link Loader.OnCompleteSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onComplete = new _miniSignals2.default();\n\t\n\t        /**\n\t         * When the progress changes the loader and resource are disaptched.\n\t         *\n\t         * @memberof Loader\n\t         * @callback OnProgressSignal\n\t         * @param {Loader} loader - The loader the progress is advancing on.\n\t         * @param {Resource} resource - The resource that has completed or failed to cause the progress to advance.\n\t         */\n\t\n\t        /**\n\t         * When an error occurrs the loader and resource are disaptched.\n\t         *\n\t         * @memberof Loader\n\t         * @callback OnErrorSignal\n\t         * @param {Loader} loader - The loader the error happened in.\n\t         * @param {Resource} resource - The resource that caused the error.\n\t         */\n\t\n\t        /**\n\t         * When a load completes the loader and resource are disaptched.\n\t         *\n\t         * @memberof Loader\n\t         * @callback OnLoadSignal\n\t         * @param {Loader} loader - The loader that laoded the resource.\n\t         * @param {Resource} resource - The resource that has completed loading.\n\t         */\n\t\n\t        /**\n\t         * When the loader starts loading resources it dispatches this callback.\n\t         *\n\t         * @memberof Loader\n\t         * @callback OnStartSignal\n\t         * @param {Loader} loader - The loader that has started loading resources.\n\t         */\n\t\n\t        /**\n\t         * When the loader completes loading resources it dispatches this callback.\n\t         *\n\t         * @memberof Loader\n\t         * @callback OnCompleteSignal\n\t         * @param {Loader} loader - The loader that has finished loading resources.\n\t         */\n\t    }\n\t\n\t    /**\n\t     * Adds a resource (or multiple resources) to the loader queue.\n\t     *\n\t     * This function can take a wide variety of different parameters. The only thing that is always\n\t     * required the url to load. All the following will work:\n\t     *\n\t     * ```js\n\t     * loader\n\t     *     // normal param syntax\n\t     *     .add('key', 'http://...', function () {})\n\t     *     .add('http://...', function () {})\n\t     *     .add('http://...')\n\t     *\n\t     *     // object syntax\n\t     *     .add({\n\t     *         name: 'key2',\n\t     *         url: 'http://...'\n\t     *     }, function () {})\n\t     *     .add({\n\t     *         url: 'http://...'\n\t     *     }, function () {})\n\t     *     .add({\n\t     *         name: 'key3',\n\t     *         url: 'http://...'\n\t     *         onComplete: function () {}\n\t     *     })\n\t     *     .add({\n\t     *         url: 'https://...',\n\t     *         onComplete: function () {},\n\t     *         crossOrigin: true\n\t     *     })\n\t     *\n\t     *     // you can also pass an array of objects or urls or both\n\t     *     .add([\n\t     *         { name: 'key4', url: 'http://...', onComplete: function () {} },\n\t     *         { url: 'http://...', onComplete: function () {} },\n\t     *         'http://...'\n\t     *     ])\n\t     *\n\t     *     // and you can use both params and options\n\t     *     .add('key', 'http://...', { crossOrigin: true }, function () {})\n\t     *     .add('http://...', { crossOrigin: true }, function () {});\n\t     * ```\n\t     *\n\t     * @param {string} [name] - The name of the resource to load, if not passed the url is used.\n\t     * @param {string} [url] - The url for this resource, relative to the baseUrl of this loader.\n\t     * @param {object} [options] - The options for the load.\n\t     * @param {boolean} [options.crossOrigin] - Is this request cross-origin? Default is to determine automatically.\n\t     * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource be loaded?\n\t     * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How should\n\t     *      the data being loaded be interpreted when using XHR?\n\t     * @param {object} [options.metadata] - Extra configuration for middleware and the Resource object.\n\t     * @param {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [options.metadata.loadElement=null] - The\n\t     *      element to use for loading, instead of creating one.\n\t     * @param {boolean} [options.metadata.skipSource=false] - Skips adding source(s) to the load element. This\n\t     *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n\t     * @param {function} [cb] - Function to call when this specific resource completes loading.\n\t     * @return {Loader} Returns itself.\n\t     */\n\t\n\t    Loader.prototype.add = function add(name, url, options, cb) {\n\t        // special case of an array of objects or urls\n\t        if (Array.isArray(name)) {\n\t            for (var i = 0; i < name.length; ++i) {\n\t                this.add(name[i]);\n\t            }\n\t\n\t            return this;\n\t        }\n\t\n\t        // if an object is passed instead of params\n\t        if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n\t            cb = url || name.callback || name.onComplete;\n\t            options = name;\n\t            url = name.url;\n\t            name = name.name || name.key || name.url;\n\t        }\n\t\n\t        // case where no name is passed shift all args over by one.\n\t        if (typeof url !== 'string') {\n\t            cb = options;\n\t            options = url;\n\t            url = name;\n\t        }\n\t\n\t        // now that we shifted make sure we have a proper url.\n\t        if (typeof url !== 'string') {\n\t            throw new Error('No url passed to add resource to loader.');\n\t        }\n\t\n\t        // options are optional so people might pass a function and no options\n\t        if (typeof options === 'function') {\n\t            cb = options;\n\t            options = null;\n\t        }\n\t\n\t        // if loading already you can only add resources that have a parent.\n\t        if (this.loading && (!options || !options.parentResource)) {\n\t            throw new Error('Cannot add resources while the loader is running.');\n\t        }\n\t\n\t        // check if resource already exists.\n\t        if (this.resources[name]) {\n\t            throw new Error('Resource named \"' + name + '\" already exists.');\n\t        }\n\t\n\t        // add base url if this isn't an absolute url\n\t        url = this._prepareUrl(url);\n\t\n\t        // create the store the resource\n\t        this.resources[name] = new _Resource2.default(name, url, options);\n\t\n\t        if (typeof cb === 'function') {\n\t            this.resources[name].onAfterMiddleware.once(cb);\n\t        }\n\t\n\t        // if actively loading, make sure to adjust progress chunks for that parent and its children\n\t        if (this.loading) {\n\t            var parent = options.parentResource;\n\t            var incompleteChildren = [];\n\t\n\t            for (var _i = 0; _i < parent.children.length; ++_i) {\n\t                if (!parent.children[_i].isComplete) {\n\t                    incompleteChildren.push(parent.children[_i]);\n\t                }\n\t            }\n\t\n\t            var fullChunk = parent.progressChunk * (incompleteChildren.length + 1); // +1 for parent\n\t            var eachChunk = fullChunk / (incompleteChildren.length + 2); // +2 for parent & new child\n\t\n\t            parent.children.push(this.resources[name]);\n\t            parent.progressChunk = eachChunk;\n\t\n\t            for (var _i2 = 0; _i2 < incompleteChildren.length; ++_i2) {\n\t                incompleteChildren[_i2].progressChunk = eachChunk;\n\t            }\n\t\n\t            this.resources[name].progressChunk = eachChunk;\n\t        }\n\t\n\t        // add the resource to the queue\n\t        this._queue.push(this.resources[name]);\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Sets up a middleware function that will run *before* the\n\t     * resource is loaded.\n\t     *\n\t     * @method before\n\t     * @param {function} fn - The middleware function to register.\n\t     * @return {Loader} Returns itself.\n\t     */\n\t\n\t    Loader.prototype.pre = function pre(fn) {\n\t        this._beforeMiddleware.push(fn);\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Sets up a middleware function that will run *after* the\n\t     * resource is loaded.\n\t     *\n\t     * @alias use\n\t     * @method after\n\t     * @param {function} fn - The middleware function to register.\n\t     * @return {Loader} Returns itself.\n\t     */\n\t\n\t    Loader.prototype.use = function use(fn) {\n\t        this._afterMiddleware.push(fn);\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Resets the queue of the loader to prepare for a new load.\n\t     *\n\t     * @return {Loader} Returns itself.\n\t     */\n\t\n\t    Loader.prototype.reset = function reset() {\n\t        this.progress = 0;\n\t        this.loading = false;\n\t\n\t        this._queue.kill();\n\t        this._queue.pause();\n\t\n\t        // abort all resource loads\n\t        for (var k in this.resources) {\n\t            var res = this.resources[k];\n\t\n\t            if (res._onLoadBinding) {\n\t                res._onLoadBinding.detach();\n\t            }\n\t\n\t            if (res.isLoading) {\n\t                res.abort();\n\t            }\n\t        }\n\t\n\t        this.resources = {};\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Starts loading the queued resources.\n\t     *\n\t     * @param {function} [cb] - Optional callback that will be bound to the `complete` event.\n\t     * @return {Loader} Returns itself.\n\t     */\n\t\n\t    Loader.prototype.load = function load(cb) {\n\t        // register complete callback if they pass one\n\t        if (typeof cb === 'function') {\n\t            this.onComplete.once(cb);\n\t        }\n\t\n\t        // if the queue has already started we are done here\n\t        if (this.loading) {\n\t            return this;\n\t        }\n\t\n\t        // distribute progress chunks\n\t        var chunk = 100 / this._queue._tasks.length;\n\t\n\t        for (var i = 0; i < this._queue._tasks.length; ++i) {\n\t            this._queue._tasks[i].data.progressChunk = chunk;\n\t        }\n\t\n\t        // update loading state\n\t        this.loading = true;\n\t\n\t        // notify of start\n\t        this.onStart.dispatch(this);\n\t\n\t        // start loading\n\t        this._queue.resume();\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Prepares a url for usage based on the configuration of this object\n\t     *\n\t     * @private\n\t     * @param {string} url - The url to prepare.\n\t     * @return {string} The prepared url.\n\t     */\n\t\n\t    Loader.prototype._prepareUrl = function _prepareUrl(url) {\n\t        var parsedUrl = (0, _parseUri2.default)(url, { strictMode: true });\n\t        var result = void 0;\n\t\n\t        // absolute url, just use it as is.\n\t        if (parsedUrl.protocol || !parsedUrl.path || url.indexOf('//') === 0) {\n\t            result = url;\n\t        }\n\t        // if baseUrl doesn't end in slash and url doesn't start with slash, then add a slash inbetween\n\t        else if (this.baseUrl.length && this.baseUrl.lastIndexOf('/') !== this.baseUrl.length - 1 && url.charAt(0) !== '/') {\n\t                result = this.baseUrl + '/' + url;\n\t            } else {\n\t                result = this.baseUrl + url;\n\t            }\n\t\n\t        // if we need to add a default querystring, there is a bit more work\n\t        if (this.defaultQueryString) {\n\t            var hash = rgxExtractUrlHash.exec(result)[0];\n\t\n\t            result = result.substr(0, result.length - hash.length);\n\t\n\t            if (result.indexOf('?') !== -1) {\n\t                result += '&' + this.defaultQueryString;\n\t            } else {\n\t                result += '?' + this.defaultQueryString;\n\t            }\n\t\n\t            result += hash;\n\t        }\n\t\n\t        return result;\n\t    };\n\t\n\t    /**\n\t     * Loads a single resource.\n\t     *\n\t     * @private\n\t     * @param {Resource} resource - The resource to load.\n\t     * @param {function} dequeue - The function to call when we need to dequeue this item.\n\t     */\n\t\n\t    Loader.prototype._loadResource = function _loadResource(resource, dequeue) {\n\t        var _this2 = this;\n\t\n\t        resource._dequeue = dequeue;\n\t\n\t        // run before middleware\n\t        async.eachSeries(this._beforeMiddleware, function (fn, next) {\n\t            fn.call(_this2, resource, function () {\n\t                // if the before middleware marks the resource as complete,\n\t                // break and don't process any more before middleware\n\t                next(resource.isComplete ? {} : null);\n\t            });\n\t        }, function () {\n\t            if (resource.isComplete) {\n\t                _this2._onLoad(resource);\n\t            } else {\n\t                resource._onLoadBinding = resource.onComplete.once(_this2._onLoad, _this2);\n\t                resource.load();\n\t            }\n\t        }, true);\n\t    };\n\t\n\t    /**\n\t     * Called once each resource has loaded.\n\t     *\n\t     * @private\n\t     */\n\t\n\t    Loader.prototype._onComplete = function _onComplete() {\n\t        this.loading = false;\n\t\n\t        this.onComplete.dispatch(this, this.resources);\n\t    };\n\t\n\t    /**\n\t     * Called each time a resources is loaded.\n\t     *\n\t     * @private\n\t     * @param {Resource} resource - The resource that was loaded\n\t     */\n\t\n\t    Loader.prototype._onLoad = function _onLoad(resource) {\n\t        var _this3 = this;\n\t\n\t        resource._onLoadBinding = null;\n\t\n\t        // remove this resource from the async queue, and add it to our list of resources that are being parsed\n\t        this._resourcesParsing.push(resource);\n\t        resource._dequeue();\n\t\n\t        // run all the after middleware for this resource\n\t        async.eachSeries(this._afterMiddleware, function (fn, next) {\n\t            fn.call(_this3, resource, next);\n\t        }, function () {\n\t            resource.onAfterMiddleware.dispatch(resource);\n\t\n\t            _this3.progress += resource.progressChunk;\n\t            _this3.onProgress.dispatch(_this3, resource);\n\t\n\t            if (resource.error) {\n\t                _this3.onError.dispatch(resource.error, _this3, resource);\n\t            } else {\n\t                _this3.onLoad.dispatch(_this3, resource);\n\t            }\n\t\n\t            _this3._resourcesParsing.splice(_this3._resourcesParsing.indexOf(resource), 1);\n\t\n\t            // do completion check\n\t            if (_this3._queue.idle() && _this3._resourcesParsing.length === 0) {\n\t                _this3.progress = MAX_PROGRESS;\n\t                _this3._onComplete();\n\t            }\n\t        }, true);\n\t    };\n\t\n\t    return Loader;\n\t}();\n\t\n\texports.default = Loader;\n\t//# sourceMappingURL=Loader.js.map\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ('value' in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n\t    }\n\t  }return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n\t  };\n\t}();\n\t\n\tfunction _classCallCheck(instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError('Cannot call a class as a function');\n\t  }\n\t}\n\t\n\tvar MiniSignalBinding = function () {\n\t  function MiniSignalBinding(fn, once, thisArg) {\n\t    if (once === undefined) once = false;\n\t\n\t    _classCallCheck(this, MiniSignalBinding);\n\t\n\t    this._fn = fn;\n\t    this._once = once;\n\t    this._thisArg = thisArg;\n\t    this._next = this._prev = this._owner = null;\n\t  }\n\t\n\t  _createClass(MiniSignalBinding, [{\n\t    key: 'detach',\n\t    value: function detach() {\n\t      if (this._owner === null) return false;\n\t      this._owner.detach(this);\n\t      return true;\n\t    }\n\t  }]);\n\t\n\t  return MiniSignalBinding;\n\t}();\n\t\n\tfunction _addMiniSignalBinding(self, node) {\n\t  if (!self._head) {\n\t    self._head = node;\n\t    self._tail = node;\n\t  } else {\n\t    self._tail._next = node;\n\t    node._prev = self._tail;\n\t    self._tail = node;\n\t  }\n\t\n\t  node._owner = self;\n\t\n\t  return node;\n\t}\n\t\n\tvar MiniSignal = function () {\n\t  function MiniSignal() {\n\t    _classCallCheck(this, MiniSignal);\n\t\n\t    this._head = this._tail = undefined;\n\t  }\n\t\n\t  _createClass(MiniSignal, [{\n\t    key: 'handlers',\n\t    value: function handlers() {\n\t      var exists = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t\n\t      var node = this._head;\n\t\n\t      if (exists) return !!node;\n\t\n\t      var ee = [];\n\t\n\t      while (node) {\n\t        ee.push(node);\n\t        node = node._next;\n\t      }\n\t\n\t      return ee;\n\t    }\n\t  }, {\n\t    key: 'has',\n\t    value: function has(node) {\n\t      if (!(node instanceof MiniSignalBinding)) {\n\t        throw new Error('MiniSignal#has(): First arg must be a MiniSignalBinding object.');\n\t      }\n\t\n\t      return node._owner === this;\n\t    }\n\t  }, {\n\t    key: 'dispatch',\n\t    value: function dispatch() {\n\t      var node = this._head;\n\t\n\t      if (!node) return false;\n\t\n\t      while (node) {\n\t        if (node._once) this.detach(node);\n\t        node._fn.apply(node._thisArg, arguments);\n\t        node = node._next;\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add(fn) {\n\t      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t      if (typeof fn !== 'function') {\n\t        throw new Error('MiniSignal#add(): First arg must be a Function.');\n\t      }\n\t      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, false, thisArg));\n\t    }\n\t  }, {\n\t    key: 'once',\n\t    value: function once(fn) {\n\t      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t      if (typeof fn !== 'function') {\n\t        throw new Error('MiniSignal#once(): First arg must be a Function.');\n\t      }\n\t      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, true, thisArg));\n\t    }\n\t  }, {\n\t    key: 'detach',\n\t    value: function detach(node) {\n\t      if (!(node instanceof MiniSignalBinding)) {\n\t        throw new Error('MiniSignal#detach(): First arg must be a MiniSignalBinding object.');\n\t      }\n\t      if (node._owner !== this) return this;\n\t\n\t      if (node._prev) node._prev._next = node._next;\n\t      if (node._next) node._next._prev = node._prev;\n\t\n\t      if (node === this._head) {\n\t        this._head = node._next;\n\t        if (node._next === null) {\n\t          this._tail = null;\n\t        }\n\t      } else if (node === this._tail) {\n\t        this._tail = node._prev;\n\t        this._tail._next = null;\n\t      }\n\t\n\t      node._owner = null;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'detachAll',\n\t    value: function detachAll() {\n\t      var node = this._head;\n\t      if (!node) return this;\n\t\n\t      this._head = this._tail = null;\n\t\n\t      while (node) {\n\t        node._owner = null;\n\t        node = node._next;\n\t      }\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return MiniSignal;\n\t}();\n\t\n\tMiniSignal.MiniSignalBinding = MiniSignalBinding;\n\t\n\texports['default'] = MiniSignal;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function parseURI(str, opts) {\n\t  opts = opts || {};\n\t\n\t  var o = {\n\t    key: ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'],\n\t    q: {\n\t      name: 'queryKey',\n\t      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t    },\n\t    parser: {\n\t      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t      loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t    }\n\t  };\n\t\n\t  var m = o.parser[opts.strictMode ? 'strict' : 'loose'].exec(str);\n\t  var uri = {};\n\t  var i = 14;\n\t\n\t  while (i--) {\n\t    uri[o.key[i]] = m[i] || '';\n\t  }uri[o.q.name] = {};\n\t  uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n\t    if ($1) uri[o.q.name][$1] = $2;\n\t  });\n\t\n\t  return uri;\n\t};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.eachSeries = eachSeries;\n\texports.queue = queue;\n\t/**\n\t * Smaller version of the async library constructs.\n\t *\n\t */\n\tfunction _noop() {} /* empty */\n\t\n\t/**\n\t * Iterates an array in series.\n\t *\n\t * @param {Array.<*>} array - Array to iterate.\n\t * @param {function} iterator - Function to call for each element.\n\t * @param {function} callback - Function to call when done, or on error.\n\t * @param {boolean} [deferNext=false] - Break synchronous each loop by calling next with a setTimeout of 1.\n\t */\n\tfunction eachSeries(array, iterator, callback, deferNext) {\n\t    var i = 0;\n\t    var len = array.length;\n\t\n\t    (function next(err) {\n\t        if (err || i === len) {\n\t            if (callback) {\n\t                callback(err);\n\t            }\n\t\n\t            return;\n\t        }\n\t\n\t        if (deferNext) {\n\t            setTimeout(function () {\n\t                iterator(array[i++], next);\n\t            }, 1);\n\t        } else {\n\t            iterator(array[i++], next);\n\t        }\n\t    })();\n\t}\n\t\n\t/**\n\t * Ensures a function is only called once.\n\t *\n\t * @param {function} fn - The function to wrap.\n\t * @return {function} The wrapping function.\n\t */\n\tfunction onlyOnce(fn) {\n\t    return function onceWrapper() {\n\t        if (fn === null) {\n\t            throw new Error('Callback was already called.');\n\t        }\n\t\n\t        var callFn = fn;\n\t\n\t        fn = null;\n\t        callFn.apply(this, arguments);\n\t    };\n\t}\n\t\n\t/**\n\t * Async queue implementation,\n\t *\n\t * @param {function} worker - The worker function to call for each task.\n\t * @param {number} concurrency - How many workers to run in parrallel.\n\t * @return {*} The async queue object.\n\t */\n\tfunction queue(worker, concurrency) {\n\t    if (concurrency == null) {\n\t        // eslint-disable-line no-eq-null,eqeqeq\n\t        concurrency = 1;\n\t    } else if (concurrency === 0) {\n\t        throw new Error('Concurrency must not be zero');\n\t    }\n\t\n\t    var workers = 0;\n\t    var q = {\n\t        _tasks: [],\n\t        concurrency: concurrency,\n\t        saturated: _noop,\n\t        unsaturated: _noop,\n\t        buffer: concurrency / 4,\n\t        empty: _noop,\n\t        drain: _noop,\n\t        error: _noop,\n\t        started: false,\n\t        paused: false,\n\t        push: function push(data, callback) {\n\t            _insert(data, false, callback);\n\t        },\n\t        kill: function kill() {\n\t            workers = 0;\n\t            q.drain = _noop;\n\t            q.started = false;\n\t            q._tasks = [];\n\t        },\n\t        unshift: function unshift(data, callback) {\n\t            _insert(data, true, callback);\n\t        },\n\t        process: function process() {\n\t            while (!q.paused && workers < q.concurrency && q._tasks.length) {\n\t                var task = q._tasks.shift();\n\t\n\t                if (q._tasks.length === 0) {\n\t                    q.empty();\n\t                }\n\t\n\t                workers += 1;\n\t\n\t                if (workers === q.concurrency) {\n\t                    q.saturated();\n\t                }\n\t\n\t                worker(task.data, onlyOnce(_next(task)));\n\t            }\n\t        },\n\t        length: function length() {\n\t            return q._tasks.length;\n\t        },\n\t        running: function running() {\n\t            return workers;\n\t        },\n\t        idle: function idle() {\n\t            return q._tasks.length + workers === 0;\n\t        },\n\t        pause: function pause() {\n\t            if (q.paused === true) {\n\t                return;\n\t            }\n\t\n\t            q.paused = true;\n\t        },\n\t        resume: function resume() {\n\t            if (q.paused === false) {\n\t                return;\n\t            }\n\t\n\t            q.paused = false;\n\t\n\t            // Need to call q.process once per concurrent\n\t            // worker to preserve full concurrency after pause\n\t            for (var w = 1; w <= q.concurrency; w++) {\n\t                q.process();\n\t            }\n\t        }\n\t    };\n\t\n\t    function _insert(data, insertAtFront, callback) {\n\t        if (callback != null && typeof callback !== 'function') {\n\t            // eslint-disable-line no-eq-null,eqeqeq\n\t            throw new Error('task callback must be a function');\n\t        }\n\t\n\t        q.started = true;\n\t\n\t        if (data == null && q.idle()) {\n\t            // eslint-disable-line no-eq-null,eqeqeq\n\t            // call drain immediately if there are no tasks\n\t            setTimeout(function () {\n\t                return q.drain();\n\t            }, 1);\n\t\n\t            return;\n\t        }\n\t\n\t        var item = {\n\t            data: data,\n\t            callback: typeof callback === 'function' ? callback : _noop\n\t        };\n\t\n\t        if (insertAtFront) {\n\t            q._tasks.unshift(item);\n\t        } else {\n\t            q._tasks.push(item);\n\t        }\n\t\n\t        setTimeout(function () {\n\t            return q.process();\n\t        }, 1);\n\t    }\n\t\n\t    function _next(task) {\n\t        return function next() {\n\t            workers -= 1;\n\t\n\t            task.callback.apply(task, arguments);\n\t\n\t            if (arguments[0] != null) {\n\t                // eslint-disable-line no-eq-null,eqeqeq\n\t                q.error(arguments[0], task.data);\n\t            }\n\t\n\t            if (workers <= q.concurrency - q.buffer) {\n\t                q.unsaturated();\n\t            }\n\t\n\t            if (q.idle()) {\n\t                q.drain();\n\t            }\n\t\n\t            q.process();\n\t        };\n\t    }\n\t\n\t    return q;\n\t}\n\t//# sourceMappingURL=async.js.map\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _createClass = function () {\n\t    function defineProperties(target, props) {\n\t        for (var i = 0; i < props.length; i++) {\n\t            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n\t        }\n\t    }return function (Constructor, protoProps, staticProps) {\n\t        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n\t    };\n\t}();\n\t\n\tvar _parseUri = __webpack_require__(34);\n\t\n\tvar _parseUri2 = _interopRequireDefault(_parseUri);\n\t\n\tvar _miniSignals = __webpack_require__(33);\n\t\n\tvar _miniSignals2 = _interopRequireDefault(_miniSignals);\n\t\n\tfunction _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\t\n\tfunction _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t        throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t}\n\t\n\t// tests is CORS is supported in XHR, if not we need to use XDR\n\tvar useXdr = !!(window.XDomainRequest && !('withCredentials' in new XMLHttpRequest()));\n\tvar tempAnchor = null;\n\t\n\t// some status constants\n\tvar STATUS_NONE = 0;\n\tvar STATUS_OK = 200;\n\tvar STATUS_EMPTY = 204;\n\tvar STATUS_IE_BUG_EMPTY = 1223;\n\tvar STATUS_TYPE_OK = 2;\n\t\n\t// noop\n\tfunction _noop() {} /* empty */\n\t\n\t/**\n\t * Manages the state and loading of a resource and all child resources.\n\t *\n\t * @class\n\t */\n\t\n\tvar Resource = function () {\n\t    /**\n\t     * Sets the load type to be used for a specific extension.\n\t     *\n\t     * @static\n\t     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n\t     * @param {Resource.LOAD_TYPE} loadType - The load type to set it to.\n\t     */\n\t    Resource.setExtensionLoadType = function setExtensionLoadType(extname, loadType) {\n\t        setExtMap(Resource._loadTypeMap, extname, loadType);\n\t    };\n\t\n\t    /**\n\t     * Sets the load type to be used for a specific extension.\n\t     *\n\t     * @static\n\t     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n\t     * @param {Resource.XHR_RESPONSE_TYPE} xhrType - The xhr type to set it to.\n\t     */\n\t\n\t    Resource.setExtensionXhrType = function setExtensionXhrType(extname, xhrType) {\n\t        setExtMap(Resource._xhrTypeMap, extname, xhrType);\n\t    };\n\t\n\t    /**\n\t     * @param {string} name - The name of the resource to load.\n\t     * @param {string|string[]} url - The url for this resource, for audio/video loads you can pass\n\t     *      an array of sources.\n\t     * @param {object} [options] - The options for the load.\n\t     * @param {string|boolean} [options.crossOrigin] - Is this request cross-origin? Default is to\n\t     *      determine automatically.\n\t     * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource\n\t     *      be loaded?\n\t     * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How\n\t     *      should the data being loaded be interpreted when using XHR?\n\t     * @param {object} [options.metadata] - Extra configuration for middleware and the Resource object.\n\t     * @param {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [options.metadata.loadElement=null] - The\n\t     *      element to use for loading, instead of creating one.\n\t     * @param {boolean} [options.metadata.skipSource=false] - Skips adding source(s) to the load element. This\n\t     *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n\t     * @param {string|string[]} [options.metadata.mimeType] - The mime type to use for the source element of a video/audio\n\t     *      elment. If the urls are an array, you can pass this as an array as well where each index is the mime type to\n\t     *      use for the corresponding url index.\n\t     */\n\t\n\t    function Resource(name, url, options) {\n\t        _classCallCheck(this, Resource);\n\t\n\t        if (typeof name !== 'string' || typeof url !== 'string') {\n\t            throw new Error('Both name and url are required for constructing a resource.');\n\t        }\n\t\n\t        options = options || {};\n\t\n\t        /**\n\t         * The state flags of this resource.\n\t         *\n\t         * @member {number}\n\t         */\n\t        this._flags = 0;\n\t\n\t        // set data url flag, needs to be set early for some _determineX checks to work.\n\t        this._setFlag(Resource.STATUS_FLAGS.DATA_URL, url.indexOf('data:') === 0);\n\t\n\t        /**\n\t         * The name of this resource.\n\t         *\n\t         * @member {string}\n\t         * @readonly\n\t         */\n\t        this.name = name;\n\t\n\t        /**\n\t         * The url used to load this resource.\n\t         *\n\t         * @member {string}\n\t         * @readonly\n\t         */\n\t        this.url = url;\n\t\n\t        /**\n\t         * The extension used to load this resource.\n\t         *\n\t         * @member {string}\n\t         * @readonly\n\t         */\n\t        this.extension = this._getExtension();\n\t\n\t        /**\n\t         * The data that was loaded by the resource.\n\t         *\n\t         * @member {any}\n\t         */\n\t        this.data = null;\n\t\n\t        /**\n\t         * Is this request cross-origin? If unset, determined automatically.\n\t         *\n\t         * @member {string}\n\t         */\n\t        this.crossOrigin = options.crossOrigin === true ? 'anonymous' : options.crossOrigin;\n\t\n\t        /**\n\t         * The method of loading to use for this resource.\n\t         *\n\t         * @member {Resource.LOAD_TYPE}\n\t         */\n\t        this.loadType = options.loadType || this._determineLoadType();\n\t\n\t        /**\n\t         * The type used to load the resource via XHR. If unset, determined automatically.\n\t         *\n\t         * @member {string}\n\t         */\n\t        this.xhrType = options.xhrType;\n\t\n\t        /**\n\t         * Extra info for middleware, and controlling specifics about how the resource loads.\n\t         *\n\t         * Note that if you pass in a `loadElement`, the Resource class takes ownership of it.\n\t         * Meaning it will modify it as it sees fit.\n\t         *\n\t         * @member {object}\n\t         * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The\n\t         *  element to use for loading, instead of creating one.\n\t         * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This\n\t         *  is useful if you want to pass in a `loadElement` that you already added load sources\n\t         *  to.\n\t         */\n\t        this.metadata = options.metadata || {};\n\t\n\t        /**\n\t         * The error that occurred while loading (if any).\n\t         *\n\t         * @member {Error}\n\t         * @readonly\n\t         */\n\t        this.error = null;\n\t\n\t        /**\n\t         * The XHR object that was used to load this resource. This is only set\n\t         * when `loadType` is `Resource.LOAD_TYPE.XHR`.\n\t         *\n\t         * @member {XMLHttpRequest}\n\t         * @readonly\n\t         */\n\t        this.xhr = null;\n\t\n\t        /**\n\t         * The child resources this resource owns.\n\t         *\n\t         * @member {Resource[]}\n\t         * @readonly\n\t         */\n\t        this.children = [];\n\t\n\t        /**\n\t         * The resource type.\n\t         *\n\t         * @member {Resource.TYPE}\n\t         * @readonly\n\t         */\n\t        this.type = Resource.TYPE.UNKNOWN;\n\t\n\t        /**\n\t         * The progress chunk owned by this resource.\n\t         *\n\t         * @member {number}\n\t         * @readonly\n\t         */\n\t        this.progressChunk = 0;\n\t\n\t        /**\n\t         * The `dequeue` method that will be used a storage place for the async queue dequeue method\n\t         * used privately by the loader.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         */\n\t        this._dequeue = _noop;\n\t\n\t        /**\n\t         * Used a storage place for the on load binding used privately by the loader.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         */\n\t        this._onLoadBinding = null;\n\t\n\t        /**\n\t         * The `complete` function bound to this resource's context.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         */\n\t        this._boundComplete = this.complete.bind(this);\n\t\n\t        /**\n\t         * The `_onError` function bound to this resource's context.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         */\n\t        this._boundOnError = this._onError.bind(this);\n\t\n\t        /**\n\t         * The `_onProgress` function bound to this resource's context.\n\t         *\n\t         * @private\n\t         * @member {function}\n\t         */\n\t        this._boundOnProgress = this._onProgress.bind(this);\n\t\n\t        // xhr callbacks\n\t        this._boundXhrOnError = this._xhrOnError.bind(this);\n\t        this._boundXhrOnAbort = this._xhrOnAbort.bind(this);\n\t        this._boundXhrOnLoad = this._xhrOnLoad.bind(this);\n\t        this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this);\n\t\n\t        /**\n\t         * Dispatched when the resource beings to load.\n\t         *\n\t         * The callback looks like {@link Resource.OnStartSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onStart = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched each time progress of this resource load updates.\n\t         * Not all resources types and loader systems can support this event\n\t         * so sometimes it may not be available. If the resource\n\t         * is being loaded on a modern browser, using XHR, and the remote server\n\t         * properly sets Content-Length headers, then this will be available.\n\t         *\n\t         * The callback looks like {@link Resource.OnProgressSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onProgress = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched once this resource has loaded, if there was an error it will\n\t         * be in the `error` property.\n\t         *\n\t         * The callback looks like {@link Resource.OnCompleteSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onComplete = new _miniSignals2.default();\n\t\n\t        /**\n\t         * Dispatched after this resource has had all the *after* middleware run on it.\n\t         *\n\t         * The callback looks like {@link Resource.OnCompleteSignal}.\n\t         *\n\t         * @member {Signal}\n\t         */\n\t        this.onAfterMiddleware = new _miniSignals2.default();\n\t\n\t        /**\n\t         * When the resource starts to load.\n\t         *\n\t         * @memberof Resource\n\t         * @callback OnStartSignal\n\t         * @param {Resource} resource - The resource that the event happened on.\n\t         */\n\t\n\t        /**\n\t         * When the resource reports loading progress.\n\t         *\n\t         * @memberof Resource\n\t         * @callback OnProgressSignal\n\t         * @param {Resource} resource - The resource that the event happened on.\n\t         * @param {number} percentage - The progress of the load in the range [0, 1].\n\t         */\n\t\n\t        /**\n\t         * When the resource finishes loading.\n\t         *\n\t         * @memberof Resource\n\t         * @callback OnCompleteSignal\n\t         * @param {Resource} resource - The resource that the event happened on.\n\t         */\n\t    }\n\t\n\t    /**\n\t     * Stores whether or not this url is a data url.\n\t     *\n\t     * @member {boolean}\n\t     * @readonly\n\t     */\n\t\n\t    /**\n\t     * Marks the resource as complete.\n\t     *\n\t     */\n\t    Resource.prototype.complete = function complete() {\n\t        // TODO: Clean this up in a wrapper or something...gross....\n\t        if (this.data && this.data.removeEventListener) {\n\t            this.data.removeEventListener('error', this._boundOnError, false);\n\t            this.data.removeEventListener('load', this._boundComplete, false);\n\t            this.data.removeEventListener('progress', this._boundOnProgress, false);\n\t            this.data.removeEventListener('canplaythrough', this._boundComplete, false);\n\t        }\n\t\n\t        if (this.xhr) {\n\t            if (this.xhr.removeEventListener) {\n\t                this.xhr.removeEventListener('error', this._boundXhrOnError, false);\n\t                this.xhr.removeEventListener('abort', this._boundXhrOnAbort, false);\n\t                this.xhr.removeEventListener('progress', this._boundOnProgress, false);\n\t                this.xhr.removeEventListener('load', this._boundXhrOnLoad, false);\n\t            } else {\n\t                this.xhr.onerror = null;\n\t                this.xhr.ontimeout = null;\n\t                this.xhr.onprogress = null;\n\t                this.xhr.onload = null;\n\t            }\n\t        }\n\t\n\t        if (this.isComplete) {\n\t            throw new Error('Complete called again for an already completed resource.');\n\t        }\n\t\n\t        this._setFlag(Resource.STATUS_FLAGS.COMPLETE, true);\n\t        this._setFlag(Resource.STATUS_FLAGS.LOADING, false);\n\t\n\t        this.onComplete.dispatch(this);\n\t    };\n\t\n\t    /**\n\t     * Aborts the loading of this resource, with an optional message.\n\t     *\n\t     * @param {string} message - The message to use for the error\n\t     */\n\t\n\t    Resource.prototype.abort = function abort(message) {\n\t        // abort can be called multiple times, ignore subsequent calls.\n\t        if (this.error) {\n\t            return;\n\t        }\n\t\n\t        // store error\n\t        this.error = new Error(message);\n\t\n\t        // abort the actual loading\n\t        if (this.xhr) {\n\t            this.xhr.abort();\n\t        } else if (this.xdr) {\n\t            this.xdr.abort();\n\t        } else if (this.data) {\n\t            // single source\n\t            if (this.data.src) {\n\t                this.data.src = Resource.EMPTY_GIF;\n\t            }\n\t            // multi-source\n\t            else {\n\t                    while (this.data.firstChild) {\n\t                        this.data.removeChild(this.data.firstChild);\n\t                    }\n\t                }\n\t        }\n\t\n\t        // done now.\n\t        this.complete();\n\t    };\n\t\n\t    /**\n\t     * Kicks off loading of this resource. This method is asynchronous.\n\t     *\n\t     * @param {function} [cb] - Optional callback to call once the resource is loaded.\n\t     */\n\t\n\t    Resource.prototype.load = function load(cb) {\n\t        var _this = this;\n\t\n\t        if (this.isLoading) {\n\t            return;\n\t        }\n\t\n\t        if (this.isComplete) {\n\t            if (cb) {\n\t                setTimeout(function () {\n\t                    return cb(_this);\n\t                }, 1);\n\t            }\n\t\n\t            return;\n\t        } else if (cb) {\n\t            this.onComplete.once(cb);\n\t        }\n\t\n\t        this._setFlag(Resource.STATUS_FLAGS.LOADING, true);\n\t\n\t        this.onStart.dispatch(this);\n\t\n\t        // if unset, determine the value\n\t        if (this.crossOrigin === false || typeof this.crossOrigin !== 'string') {\n\t            this.crossOrigin = this._determineCrossOrigin(this.url);\n\t        }\n\t\n\t        switch (this.loadType) {\n\t            case Resource.LOAD_TYPE.IMAGE:\n\t                this.type = Resource.TYPE.IMAGE;\n\t                this._loadElement('image');\n\t                break;\n\t\n\t            case Resource.LOAD_TYPE.AUDIO:\n\t                this.type = Resource.TYPE.AUDIO;\n\t                this._loadSourceElement('audio');\n\t                break;\n\t\n\t            case Resource.LOAD_TYPE.VIDEO:\n\t                this.type = Resource.TYPE.VIDEO;\n\t                this._loadSourceElement('video');\n\t                break;\n\t\n\t            case Resource.LOAD_TYPE.XHR:\n\t            /* falls through */\n\t            default:\n\t                if (useXdr && this.crossOrigin) {\n\t                    this._loadXdr();\n\t                } else {\n\t                    this._loadXhr();\n\t                }\n\t                break;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Checks if the flag is set.\n\t     *\n\t     * @private\n\t     * @param {number} flag - The flag to check.\n\t     * @return {boolean} True if the flag is set.\n\t     */\n\t\n\t    Resource.prototype._hasFlag = function _hasFlag(flag) {\n\t        return !!(this._flags & flag);\n\t    };\n\t\n\t    /**\n\t     * (Un)Sets the flag.\n\t     *\n\t     * @private\n\t     * @param {number} flag - The flag to (un)set.\n\t     * @param {boolean} value - Whether to set or (un)set the flag.\n\t     */\n\t\n\t    Resource.prototype._setFlag = function _setFlag(flag, value) {\n\t        this._flags = value ? this._flags | flag : this._flags & ~flag;\n\t    };\n\t\n\t    /**\n\t     * Loads this resources using an element that has a single source,\n\t     * like an HTMLImageElement.\n\t     *\n\t     * @private\n\t     * @param {string} type - The type of element to use.\n\t     */\n\t\n\t    Resource.prototype._loadElement = function _loadElement(type) {\n\t        if (this.metadata.loadElement) {\n\t            this.data = this.metadata.loadElement;\n\t        } else if (type === 'image' && typeof window.Image !== 'undefined') {\n\t            this.data = new Image();\n\t        } else {\n\t            this.data = document.createElement(type);\n\t        }\n\t\n\t        if (this.crossOrigin) {\n\t            this.data.crossOrigin = this.crossOrigin;\n\t        }\n\t\n\t        if (!this.metadata.skipSource) {\n\t            this.data.src = this.url;\n\t        }\n\t\n\t        this.data.addEventListener('error', this._boundOnError, false);\n\t        this.data.addEventListener('load', this._boundComplete, false);\n\t        this.data.addEventListener('progress', this._boundOnProgress, false);\n\t    };\n\t\n\t    /**\n\t     * Loads this resources using an element that has multiple sources,\n\t     * like an HTMLAudioElement or HTMLVideoElement.\n\t     *\n\t     * @private\n\t     * @param {string} type - The type of element to use.\n\t     */\n\t\n\t    Resource.prototype._loadSourceElement = function _loadSourceElement(type) {\n\t        if (this.metadata.loadElement) {\n\t            this.data = this.metadata.loadElement;\n\t        } else if (type === 'audio' && typeof window.Audio !== 'undefined') {\n\t            this.data = new Audio();\n\t        } else {\n\t            this.data = document.createElement(type);\n\t        }\n\t\n\t        if (this.data === null) {\n\t            this.abort('Unsupported element: ' + type);\n\t\n\t            return;\n\t        }\n\t\n\t        if (!this.metadata.skipSource) {\n\t            // support for CocoonJS Canvas+ runtime, lacks document.createElement('source')\n\t            if (navigator.isCocoonJS) {\n\t                this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;\n\t            } else if (Array.isArray(this.url)) {\n\t                var mimeTypes = this.metadata.mimeType;\n\t\n\t                for (var i = 0; i < this.url.length; ++i) {\n\t                    this.data.appendChild(this._createSource(type, this.url[i], Array.isArray(mimeTypes) ? mimeTypes[i] : mimeTypes));\n\t                }\n\t            } else {\n\t                var _mimeTypes = this.metadata.mimeType;\n\t\n\t                this.data.appendChild(this._createSource(type, this.url, Array.isArray(_mimeTypes) ? _mimeTypes[0] : _mimeTypes));\n\t            }\n\t        }\n\t\n\t        this.data.addEventListener('error', this._boundOnError, false);\n\t        this.data.addEventListener('load', this._boundComplete, false);\n\t        this.data.addEventListener('progress', this._boundOnProgress, false);\n\t        this.data.addEventListener('canplaythrough', this._boundComplete, false);\n\t\n\t        this.data.load();\n\t    };\n\t\n\t    /**\n\t     * Loads this resources using an XMLHttpRequest.\n\t     *\n\t     * @private\n\t     */\n\t\n\t    Resource.prototype._loadXhr = function _loadXhr() {\n\t        // if unset, determine the value\n\t        if (typeof this.xhrType !== 'string') {\n\t            this.xhrType = this._determineXhrType();\n\t        }\n\t\n\t        var xhr = this.xhr = new XMLHttpRequest();\n\t\n\t        // set the request type and url\n\t        xhr.open('GET', this.url, true);\n\t\n\t        // load json as text and parse it ourselves. We do this because some browsers\n\t        // *cough* safari *cough* can't deal with it.\n\t        if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON || this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n\t            xhr.responseType = Resource.XHR_RESPONSE_TYPE.TEXT;\n\t        } else {\n\t            xhr.responseType = this.xhrType;\n\t        }\n\t\n\t        xhr.addEventListener('error', this._boundXhrOnError, false);\n\t        xhr.addEventListener('abort', this._boundXhrOnAbort, false);\n\t        xhr.addEventListener('progress', this._boundOnProgress, false);\n\t        xhr.addEventListener('load', this._boundXhrOnLoad, false);\n\t\n\t        xhr.send();\n\t    };\n\t\n\t    /**\n\t     * Loads this resources using an XDomainRequest. This is here because we need to support IE9 (gross).\n\t     *\n\t     * @private\n\t     */\n\t\n\t    Resource.prototype._loadXdr = function _loadXdr() {\n\t        // if unset, determine the value\n\t        if (typeof this.xhrType !== 'string') {\n\t            this.xhrType = this._determineXhrType();\n\t        }\n\t\n\t        var xdr = this.xhr = new XDomainRequest();\n\t\n\t        // XDomainRequest has a few quirks. Occasionally it will abort requests\n\t        // A way to avoid this is to make sure ALL callbacks are set even if not used\n\t        // More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n\t        xdr.timeout = 5000;\n\t\n\t        xdr.onerror = this._boundXhrOnError;\n\t        xdr.ontimeout = this._boundXdrOnTimeout;\n\t        xdr.onprogress = this._boundOnProgress;\n\t        xdr.onload = this._boundXhrOnLoad;\n\t\n\t        xdr.open('GET', this.url, true);\n\t\n\t        // Note: The xdr.send() call is wrapped in a timeout to prevent an\n\t        // issue with the interface where some requests are lost if multiple\n\t        // XDomainRequests are being sent at the same time.\n\t        // Some info here: https://github.com/photonstorm/phaser/issues/1248\n\t        setTimeout(function () {\n\t            return xdr.send();\n\t        }, 1);\n\t    };\n\t\n\t    /**\n\t     * Creates a source used in loading via an element.\n\t     *\n\t     * @private\n\t     * @param {string} type - The element type (video or audio).\n\t     * @param {string} url - The source URL to load from.\n\t     * @param {string} [mime] - The mime type of the video\n\t     * @return {HTMLSourceElement} The source element.\n\t     */\n\t\n\t    Resource.prototype._createSource = function _createSource(type, url, mime) {\n\t        if (!mime) {\n\t            mime = type + '/' + this._getExtension(url);\n\t        }\n\t\n\t        var source = document.createElement('source');\n\t\n\t        source.src = url;\n\t        source.type = mime;\n\t\n\t        return source;\n\t    };\n\t\n\t    /**\n\t     * Called if a load errors out.\n\t     *\n\t     * @param {Event} event - The error event from the element that emits it.\n\t     * @private\n\t     */\n\t\n\t    Resource.prototype._onError = function _onError(event) {\n\t        this.abort('Failed to load element using: ' + event.target.nodeName);\n\t    };\n\t\n\t    /**\n\t     * Called if a load progress event fires for xhr/xdr.\n\t     *\n\t     * @private\n\t     * @param {XMLHttpRequestProgressEvent|Event} event - Progress event.\n\t     */\n\t\n\t    Resource.prototype._onProgress = function _onProgress(event) {\n\t        if (event && event.lengthComputable) {\n\t            this.onProgress.dispatch(this, event.loaded / event.total);\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Called if an error event fires for xhr/xdr.\n\t     *\n\t     * @private\n\t     * @param {XMLHttpRequestErrorEvent|Event} event - Error event.\n\t     */\n\t\n\t    Resource.prototype._xhrOnError = function _xhrOnError() {\n\t        var xhr = this.xhr;\n\t\n\t        this.abort(reqType(xhr) + ' Request failed. Status: ' + xhr.status + ', text: \"' + xhr.statusText + '\"');\n\t    };\n\t\n\t    /**\n\t     * Called if an abort event fires for xhr.\n\t     *\n\t     * @private\n\t     * @param {XMLHttpRequestAbortEvent} event - Abort Event\n\t     */\n\t\n\t    Resource.prototype._xhrOnAbort = function _xhrOnAbort() {\n\t        this.abort(reqType(this.xhr) + ' Request was aborted by the user.');\n\t    };\n\t\n\t    /**\n\t     * Called if a timeout event fires for xdr.\n\t     *\n\t     * @private\n\t     * @param {Event} event - Timeout event.\n\t     */\n\t\n\t    Resource.prototype._xdrOnTimeout = function _xdrOnTimeout() {\n\t        this.abort(reqType(this.xhr) + ' Request timed out.');\n\t    };\n\t\n\t    /**\n\t     * Called when data successfully loads from an xhr/xdr request.\n\t     *\n\t     * @private\n\t     * @param {XMLHttpRequestLoadEvent|Event} event - Load event\n\t     */\n\t\n\t    Resource.prototype._xhrOnLoad = function _xhrOnLoad() {\n\t        var xhr = this.xhr;\n\t        var text = '';\n\t        var status = typeof xhr.status === 'undefined' ? STATUS_OK : xhr.status; // XDR has no `.status`, assume 200.\n\t\n\t        // responseText is accessible only if responseType is '' or 'text' and on older browsers\n\t        if (xhr.responseType === '' || xhr.responseType === 'text' || typeof xhr.responseType === 'undefined') {\n\t            text = xhr.responseText;\n\t        }\n\t\n\t        // status can be 0 when using the `file://` protocol so we also check if a response is set.\n\t        // If it has a response, we assume 200; otherwise a 0 status code with no contents is an aborted request.\n\t        if (status === STATUS_NONE && text.length > 0) {\n\t            status = STATUS_OK;\n\t        }\n\t        // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n\t        else if (status === STATUS_IE_BUG_EMPTY) {\n\t                status = STATUS_EMPTY;\n\t            }\n\t\n\t        var statusType = status / 100 | 0;\n\t\n\t        if (statusType === STATUS_TYPE_OK) {\n\t            // if text, just return it\n\t            if (this.xhrType === Resource.XHR_RESPONSE_TYPE.TEXT) {\n\t                this.data = text;\n\t                this.type = Resource.TYPE.TEXT;\n\t            }\n\t            // if json, parse into json object\n\t            else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON) {\n\t                    try {\n\t                        this.data = JSON.parse(text);\n\t                        this.type = Resource.TYPE.JSON;\n\t                    } catch (e) {\n\t                        this.abort('Error trying to parse loaded json: ' + e);\n\t\n\t                        return;\n\t                    }\n\t                }\n\t                // if xml, parse into an xml document or div element\n\t                else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n\t                        try {\n\t                            if (window.DOMParser) {\n\t                                var domparser = new DOMParser();\n\t\n\t                                this.data = domparser.parseFromString(text, 'text/xml');\n\t                            } else {\n\t                                var div = document.createElement('div');\n\t\n\t                                div.innerHTML = text;\n\t\n\t                                this.data = div;\n\t                            }\n\t\n\t                            this.type = Resource.TYPE.XML;\n\t                        } catch (e) {\n\t                            this.abort('Error trying to parse loaded xml: ' + e);\n\t\n\t                            return;\n\t                        }\n\t                    }\n\t                    // other types just return the response\n\t                    else {\n\t                            this.data = xhr.response || text;\n\t                        }\n\t        } else {\n\t            this.abort('[' + xhr.status + '] ' + xhr.statusText + ': ' + xhr.responseURL);\n\t\n\t            return;\n\t        }\n\t\n\t        this.complete();\n\t    };\n\t\n\t    /**\n\t     * Sets the `crossOrigin` property for this resource based on if the url\n\t     * for this resource is cross-origin. If crossOrigin was manually set, this\n\t     * function does nothing.\n\t     *\n\t     * @private\n\t     * @param {string} url - The url to test.\n\t     * @param {object} [loc=window.location] - The location object to test against.\n\t     * @return {string} The crossOrigin value to use (or empty string for none).\n\t     */\n\t\n\t    Resource.prototype._determineCrossOrigin = function _determineCrossOrigin(url, loc) {\n\t        // data: and javascript: urls are considered same-origin\n\t        if (url.indexOf('data:') === 0) {\n\t            return '';\n\t        }\n\t\n\t        // default is window.location\n\t        loc = loc || window.location;\n\t\n\t        if (!tempAnchor) {\n\t            tempAnchor = document.createElement('a');\n\t        }\n\t\n\t        // let the browser determine the full href for the url of this resource and then\n\t        // parse with the node url lib, we can't use the properties of the anchor element\n\t        // because they don't work in IE9 :(\n\t        tempAnchor.href = url;\n\t        url = (0, _parseUri2.default)(tempAnchor.href, { strictMode: true });\n\t\n\t        var samePort = !url.port && loc.port === '' || url.port === loc.port;\n\t        var protocol = url.protocol ? url.protocol + ':' : '';\n\t\n\t        // if cross origin\n\t        if (url.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\n\t            return 'anonymous';\n\t        }\n\t\n\t        return '';\n\t    };\n\t\n\t    /**\n\t     * Determines the responseType of an XHR request based on the extension of the\n\t     * resource being loaded.\n\t     *\n\t     * @private\n\t     * @return {Resource.XHR_RESPONSE_TYPE} The responseType to use.\n\t     */\n\t\n\t    Resource.prototype._determineXhrType = function _determineXhrType() {\n\t        return Resource._xhrTypeMap[this.extension] || Resource.XHR_RESPONSE_TYPE.TEXT;\n\t    };\n\t\n\t    /**\n\t     * Determines the loadType of a resource based on the extension of the\n\t     * resource being loaded.\n\t     *\n\t     * @private\n\t     * @return {Resource.LOAD_TYPE} The loadType to use.\n\t     */\n\t\n\t    Resource.prototype._determineLoadType = function _determineLoadType() {\n\t        return Resource._loadTypeMap[this.extension] || Resource.LOAD_TYPE.XHR;\n\t    };\n\t\n\t    /**\n\t     * Extracts the extension (sans '.') of the file being loaded by the resource.\n\t     *\n\t     * @private\n\t     * @return {string} The extension.\n\t     */\n\t\n\t    Resource.prototype._getExtension = function _getExtension() {\n\t        var url = this.url;\n\t        var ext = '';\n\t\n\t        if (this.isDataUrl) {\n\t            var slashIndex = url.indexOf('/');\n\t\n\t            ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\n\t        } else {\n\t            var queryStart = url.indexOf('?');\n\t            var hashStart = url.indexOf('#');\n\t            var index = Math.min(queryStart > -1 ? queryStart : url.length, hashStart > -1 ? hashStart : url.length);\n\t\n\t            url = url.substring(0, index);\n\t            ext = url.substring(url.lastIndexOf('.') + 1);\n\t        }\n\t\n\t        return ext.toLowerCase();\n\t    };\n\t\n\t    /**\n\t     * Determines the mime type of an XHR request based on the responseType of\n\t     * resource being loaded.\n\t     *\n\t     * @private\n\t     * @param {Resource.XHR_RESPONSE_TYPE} type - The type to get a mime type for.\n\t     * @return {string} The mime type to use.\n\t     */\n\t\n\t    Resource.prototype._getMimeFromXhrType = function _getMimeFromXhrType(type) {\n\t        switch (type) {\n\t            case Resource.XHR_RESPONSE_TYPE.BUFFER:\n\t                return 'application/octet-binary';\n\t\n\t            case Resource.XHR_RESPONSE_TYPE.BLOB:\n\t                return 'application/blob';\n\t\n\t            case Resource.XHR_RESPONSE_TYPE.DOCUMENT:\n\t                return 'application/xml';\n\t\n\t            case Resource.XHR_RESPONSE_TYPE.JSON:\n\t                return 'application/json';\n\t\n\t            case Resource.XHR_RESPONSE_TYPE.DEFAULT:\n\t            case Resource.XHR_RESPONSE_TYPE.TEXT:\n\t            /* falls through */\n\t            default:\n\t                return 'text/plain';\n\t\n\t        }\n\t    };\n\t\n\t    _createClass(Resource, [{\n\t        key: 'isDataUrl',\n\t        get: function get() {\n\t            return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL);\n\t        }\n\t\n\t        /**\n\t         * Describes if this resource has finished loading. Is true when the resource has completely\n\t         * loaded.\n\t         *\n\t         * @member {boolean}\n\t         * @readonly\n\t         */\n\t\n\t    }, {\n\t        key: 'isComplete',\n\t        get: function get() {\n\t            return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE);\n\t        }\n\t\n\t        /**\n\t         * Describes if this resource is currently loading. Is true when the resource starts loading,\n\t         * and is false again when complete.\n\t         *\n\t         * @member {boolean}\n\t         * @readonly\n\t         */\n\t\n\t    }, {\n\t        key: 'isLoading',\n\t        get: function get() {\n\t            return this._hasFlag(Resource.STATUS_FLAGS.LOADING);\n\t        }\n\t    }]);\n\t\n\t    return Resource;\n\t}();\n\t\n\t/**\n\t * The types of resources a resource could represent.\n\t *\n\t * @static\n\t * @readonly\n\t * @enum {number}\n\t */\n\t\n\texports.default = Resource;\n\tResource.STATUS_FLAGS = {\n\t    NONE: 0,\n\t    DATA_URL: 1 << 0,\n\t    COMPLETE: 1 << 1,\n\t    LOADING: 1 << 2\n\t};\n\t\n\t/**\n\t * The types of resources a resource could represent.\n\t *\n\t * @static\n\t * @readonly\n\t * @enum {number}\n\t */\n\tResource.TYPE = {\n\t    UNKNOWN: 0,\n\t    JSON: 1,\n\t    XML: 2,\n\t    IMAGE: 3,\n\t    AUDIO: 4,\n\t    VIDEO: 5,\n\t    TEXT: 6\n\t};\n\t\n\t/**\n\t * The types of loading a resource can use.\n\t *\n\t * @static\n\t * @readonly\n\t * @enum {number}\n\t */\n\tResource.LOAD_TYPE = {\n\t    /** Uses XMLHttpRequest to load the resource. */\n\t    XHR: 1,\n\t    /** Uses an `Image` object to load the resource. */\n\t    IMAGE: 2,\n\t    /** Uses an `Audio` object to load the resource. */\n\t    AUDIO: 3,\n\t    /** Uses a `Video` object to load the resource. */\n\t    VIDEO: 4\n\t};\n\t\n\t/**\n\t * The XHR ready states, used internally.\n\t *\n\t * @static\n\t * @readonly\n\t * @enum {string}\n\t */\n\tResource.XHR_RESPONSE_TYPE = {\n\t    /** string */\n\t    DEFAULT: 'text',\n\t    /** ArrayBuffer */\n\t    BUFFER: 'arraybuffer',\n\t    /** Blob */\n\t    BLOB: 'blob',\n\t    /** Document */\n\t    DOCUMENT: 'document',\n\t    /** Object */\n\t    JSON: 'json',\n\t    /** String */\n\t    TEXT: 'text'\n\t};\n\t\n\tResource._loadTypeMap = {\n\t    // images\n\t    gif: Resource.LOAD_TYPE.IMAGE,\n\t    png: Resource.LOAD_TYPE.IMAGE,\n\t    bmp: Resource.LOAD_TYPE.IMAGE,\n\t    jpg: Resource.LOAD_TYPE.IMAGE,\n\t    jpeg: Resource.LOAD_TYPE.IMAGE,\n\t    tif: Resource.LOAD_TYPE.IMAGE,\n\t    tiff: Resource.LOAD_TYPE.IMAGE,\n\t    webp: Resource.LOAD_TYPE.IMAGE,\n\t    tga: Resource.LOAD_TYPE.IMAGE,\n\t    svg: Resource.LOAD_TYPE.IMAGE,\n\t    'svg+xml': Resource.LOAD_TYPE.IMAGE, // for SVG data urls\n\t\n\t    // audio\n\t    mp3: Resource.LOAD_TYPE.AUDIO,\n\t    ogg: Resource.LOAD_TYPE.AUDIO,\n\t    wav: Resource.LOAD_TYPE.AUDIO,\n\t\n\t    // videos\n\t    mp4: Resource.LOAD_TYPE.VIDEO,\n\t    webm: Resource.LOAD_TYPE.VIDEO\n\t};\n\t\n\tResource._xhrTypeMap = {\n\t    // xml\n\t    xhtml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t    html: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t    htm: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t    xml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t    tmx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t    svg: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t\n\t    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n\t    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n\t    // this should probably be fine.\n\t    tsx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\t\n\t    // images\n\t    gif: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    png: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    bmp: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    jpg: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    jpeg: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    tif: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    tiff: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    webp: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t    tga: Resource.XHR_RESPONSE_TYPE.BLOB,\n\t\n\t    // json\n\t    json: Resource.XHR_RESPONSE_TYPE.JSON,\n\t\n\t    // text\n\t    text: Resource.XHR_RESPONSE_TYPE.TEXT,\n\t    txt: Resource.XHR_RESPONSE_TYPE.TEXT,\n\t\n\t    // fonts\n\t    ttf: Resource.XHR_RESPONSE_TYPE.BUFFER,\n\t    otf: Resource.XHR_RESPONSE_TYPE.BUFFER\n\t};\n\t\n\t// We can't set the `src` attribute to empty string, so on abort we set it to this 1px transparent gif\n\tResource.EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n\t\n\t/**\n\t * Quick helper to set a value on one of the extension maps. Ensures there is no\n\t * dot at the start of the extension.\n\t *\n\t * @ignore\n\t * @param {object} map - The map to set on.\n\t * @param {string} extname - The extension (or key) to set.\n\t * @param {number} val - The value to set.\n\t */\n\tfunction setExtMap(map, extname, val) {\n\t    if (extname && extname.indexOf('.') === 0) {\n\t        extname = extname.substring(1);\n\t    }\n\t\n\t    if (!extname) {\n\t        return;\n\t    }\n\t\n\t    map[extname] = val;\n\t}\n\t\n\t/**\n\t * Quick helper to get string xhr type.\n\t *\n\t * @ignore\n\t * @param {XMLHttpRequest|XDomainRequest} xhr - The request to check.\n\t * @return {string} The type.\n\t */\n\tfunction reqType(xhr) {\n\t    return xhr.toString().replace('object ', '');\n\t}\n\t//# sourceMappingURL=Resource.js.map\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.encodeBinary = encodeBinary;\n\tvar _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t\n\tfunction encodeBinary(input) {\n\t    var output = '';\n\t    var inx = 0;\n\t\n\t    while (inx < input.length) {\n\t        // Fill byte buffer array\n\t        var bytebuffer = [0, 0, 0];\n\t        var encodedCharIndexes = [0, 0, 0, 0];\n\t\n\t        for (var jnx = 0; jnx < bytebuffer.length; ++jnx) {\n\t            if (inx < input.length) {\n\t                // throw away high-order byte, as documented at:\n\t                // https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data\n\t                bytebuffer[jnx] = input.charCodeAt(inx++) & 0xff;\n\t            } else {\n\t                bytebuffer[jnx] = 0;\n\t            }\n\t        }\n\t\n\t        // Get each encoded character, 6 bits at a time\n\t        // index 1: first 6 bits\n\t        encodedCharIndexes[0] = bytebuffer[0] >> 2;\n\t\n\t        // index 2: second 6 bits (2 least significant bits from input byte 1 + 4 most significant bits from byte 2)\n\t        encodedCharIndexes[1] = (bytebuffer[0] & 0x3) << 4 | bytebuffer[1] >> 4;\n\t\n\t        // index 3: third 6 bits (4 least significant bits from input byte 2 + 2 most significant bits from byte 3)\n\t        encodedCharIndexes[2] = (bytebuffer[1] & 0x0f) << 2 | bytebuffer[2] >> 6;\n\t\n\t        // index 3: forth 6 bits (6 least significant bits from input byte 3)\n\t        encodedCharIndexes[3] = bytebuffer[2] & 0x3f;\n\t\n\t        // Determine whether padding happened, and adjust accordingly\n\t        var paddingBytes = inx - (input.length - 1);\n\t\n\t        switch (paddingBytes) {\n\t            case 2:\n\t                // Set last 2 characters to padding char\n\t                encodedCharIndexes[3] = 64;\n\t                encodedCharIndexes[2] = 64;\n\t                break;\n\t\n\t            case 1:\n\t                // Set last character to padding char\n\t                encodedCharIndexes[3] = 64;\n\t                break;\n\t\n\t            default:\n\t                break; // No padding - proceed\n\t        }\n\t\n\t        // Now we will grab each appropriate character out of our keystring\n\t        // based on our index array and append it to the output string\n\t        for (var _jnx = 0; _jnx < encodedCharIndexes.length; ++_jnx) {\n\t            output += _keyStr.charAt(encodedCharIndexes[_jnx]);\n\t        }\n\t    }\n\t\n\t    return output;\n\t}\n\t//# sourceMappingURL=b64.js.map\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(DebugBattlefieldView, _AbstractPixiView);\n\t\n\t  function DebugBattlefieldView() {\n\t    _classCallCheck(this, DebugBattlefieldView);\n\t\n\t    return _possibleConstructorReturn(this, (DebugBattlefieldView.__proto__ || Object.getPrototypeOf(DebugBattlefieldView)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(DebugBattlefieldView, [{\n\t    key: \"_create\",\n\t    value: function _create(container) {\n\t      var background = new PIXI.Graphics();\n\t      background.beginFill(0x000000);\n\t      background.lineStyle(1, 0xffff00, 0.8);\n\t      background.drawRect(0, 0, this.model.width + 2 * this.model.margin, this.model.height + 2 * this.model.margin);\n\t      background.endFill();\n\t      container.addChild(background);\n\t      background = new PIXI.Graphics();\n\t      background.beginFill(0x000000);\n\t      background.lineStyle(1, 0xffff00, 0.8);\n\t      background.drawRect(this.model.margin, this.model.margin, this.model.width, this.model.height);\n\t      background.endFill();\n\t      container.addChild(background);\n\t    }\n\t  }, {\n\t    key: \"update\",\n\t    value: function update(events) {}\n\t  }]);\n\t\n\t  return DebugBattlefieldView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(DebugClockView, _AbstractPixiView);\n\t\n\t  function DebugClockView(model) {\n\t    _classCallCheck(this, DebugClockView);\n\t\n\t    return _possibleConstructorReturn(this, (DebugClockView.__proto__ || Object.getPrototypeOf(DebugClockView)).call(this, model));\n\t  }\n\t\n\t  _createClass(DebugClockView, [{\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 12,\n\t        fill: '#00ff00'\n\t      });\n\t\n\t      this._label = new PIXI.Text(\"clock\", labelStyle);\n\t      this._label.x = 5;\n\t      this._label.y = 5;\n\t      container.addChild(this._label);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {\n\t      this._label.setText(this.model.text);\n\t    }\n\t  }]);\n\t\n\t  return DebugClockView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiBulletView = __webpack_require__(41);\n\t\n\tmodule.exports = function (_AbstractPixiBulletVi) {\n\t  _inherits(DebugBulletView, _AbstractPixiBulletVi);\n\t\n\t  function DebugBulletView(model) {\n\t    _classCallCheck(this, DebugBulletView);\n\t\n\t    return _possibleConstructorReturn(this, (DebugBulletView.__proto__ || Object.getPrototypeOf(DebugBulletView)).call(this, model));\n\t  }\n\t\n\t  _createClass(DebugBulletView, [{\n\t    key: \"_create\",\n\t    value: function _create(container) {\n\t      var bullet = new PIXI.Graphics();\n\t      bullet.beginFill(0x00ff00, 0.5);\n\t      bullet.drawCircle(0, 0, 5);\n\t      bullet.endFill();\n\t      container.addChild(bullet);\n\t    }\n\t  }]);\n\t\n\t  return DebugBulletView;\n\t}(AbstractPixiBulletView);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(AbstractPixiBulletView, _AbstractPixiView);\n\t\n\t  function AbstractPixiBulletView(model) {\n\t    _classCallCheck(this, AbstractPixiBulletView);\n\t\n\t    return _possibleConstructorReturn(this, (AbstractPixiBulletView.__proto__ || Object.getPrototypeOf(AbstractPixiBulletView)).call(this, model));\n\t  }\n\t\n\t  _createClass(AbstractPixiBulletView, [{\n\t    key: \"update\",\n\t    value: function update(events) {\n\t      _get(AbstractPixiBulletView.prototype.__proto__ || Object.getPrototypeOf(AbstractPixiBulletView.prototype), \"update\", this).call(this, events);\n\t      this.view.scale.x = this.view.scale.y = this.model.power * 0.7 + 0.3;\n\t      if (this.model.exploded) {\n\t        this.destroy();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return AbstractPixiBulletView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiTankView = __webpack_require__(28);\n\t\n\tmodule.exports = function (_AbstractPixiTankView) {\n\t  _inherits(DebugTankView, _AbstractPixiTankView);\n\t\n\t  function DebugTankView(model) {\n\t    _classCallCheck(this, DebugTankView);\n\t\n\t    return _possibleConstructorReturn(this, (DebugTankView.__proto__ || Object.getPrototypeOf(DebugTankView)).call(this, model));\n\t  }\n\t\n\t  _createClass(DebugTankView, [{\n\t    key: '_createBody',\n\t    value: function _createBody() {\n\t      var body = new PIXI.Graphics();\n\t      body.lineStyle(1, 0xffff00, 0.8);\n\t      body.beginFill(0x00ff00, 0.5);\n\t      body.drawRect(-15, -15, 30, 30);\n\t      body.endFill();\n\t      return body;\n\t    }\n\t  }, {\n\t    key: '_createGun',\n\t    value: function _createGun() {\n\t      var body = new PIXI.Graphics();\n\t      body.beginFill(0x00ff00, 0.5);\n\t      body.lineStyle(1, 0xffff00, 0.8);\n\t      body.drawCircle(0, 0, 10);\n\t      body.drawRect(0, -3, 30, 6);\n\t      body.endFill();\n\t      return body;\n\t    }\n\t  }, {\n\t    key: '_createRadar',\n\t    value: function _createRadar() {\n\t      var body = new PIXI.Graphics();\n\t      body.beginFill(0x00ff00, 0.5);\n\t      body.lineStyle(1, 0xffff00, 0.8);\n\t      body.drawRect(-3, -10, 6, 20);\n\t      body.endFill();\n\t      body.lineStyle();\n\t      body.beginFill(0xaaffaa, 0.1);\n\t      body.moveTo(0, -3);\n\t      var radarRange = 300;\n\t      var radarFocal = 6;\n\t      var width = radarRange * Math.tan(radarFocal * (Math.PI / 180)) / 2;\n\t      body.lineTo(radarRange, -width);\n\t      body.lineTo(radarRange, width);\n\t      body.lineTo(0, 3);\n\t      return body;\n\t    }\n\t  }, {\n\t    key: '_createLabel',\n\t    value: function _createLabel() {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 12,\n\t        fill: 0x00ff00\n\t      });\n\t      var label = new PIXI.Text(\"\", labelStyle);\n\t      label.anchor.set(0.5, 0.5);\n\t      label.x = 0;\n\t      label.y = -40;\n\t      return label;\n\t    }\n\t  }, {\n\t    key: '_createHudBackground',\n\t    value: function _createHudBackground() {\n\t      var statusBarBg = new PIXI.Graphics();\n\t      statusBarBg.beginFill(0x000000, 1);\n\t      statusBarBg.lineStyle(1, 0xffff00, 0.8);\n\t      statusBarBg.drawRect(-26, -3, 52, 6);\n\t      statusBarBg.y = -30;\n\t      return statusBarBg;\n\t    }\n\t  }, {\n\t    key: '_createEnergyBar',\n\t    value: function _createEnergyBar() {\n\t      var energyBar = new PIXI.Graphics();\n\t      energyBar.beginFill(0x00ff00, 1);\n\t      energyBar.drawRect(0, -2, 50, 4);\n\t      energyBar.x = -25;\n\t      energyBar.y = -30;\n\t      return energyBar;\n\t    }\n\t  }]);\n\t\n\t  return DebugTankView;\n\t}(AbstractPixiTankView);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiRenderer = __webpack_require__(24);\n\tvar BWBattlefieldView = __webpack_require__(44);\n\tvar BWClockView = __webpack_require__(45);\n\tvar BWBulletView = __webpack_require__(46);\n\tvar BWTankView = __webpack_require__(47);\n\t\n\tmodule.exports = function (_AbstractPixiRenderer) {\n\t  _inherits(BWRenderer, _AbstractPixiRenderer);\n\t\n\t  function BWRenderer() {\n\t    _classCallCheck(this, BWRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BWRenderer.__proto__ || Object.getPrototypeOf(BWRenderer)).call(this, 'bw'));\n\t\n\t    _this._bigBoomAnim = [];\n\t    _this._smallBoomAnim = [];\n\t    _this._shakeTimer = 0;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BWRenderer, [{\n\t    key: \"onAssetsLoaded\",\n\t    value: function onAssetsLoaded() {\n\t      for (var i = 0; i <= 9; i++) {\n\t        this._bigBoomAnim.push(PIXI.Texture.fromFrame('big_boom_00' + i));\n\t        this._smallBoomAnim.push(PIXI.Texture.fromFrame('small_boom_00' + i));\n\t      }\n\t    }\n\t  }, {\n\t    key: \"initBatlefield\",\n\t    value: function initBatlefield(battlefield) {\n\t      _get(BWRenderer.prototype.__proto__ || Object.getPrototypeOf(BWRenderer.prototype), \"initBatlefield\", this).call(this, battlefield);\n\t    }\n\t  }, {\n\t    key: \"renderTank\",\n\t    value: function renderTank(tank, events) {\n\t      _get(BWRenderer.prototype.__proto__ || Object.getPrototypeOf(BWRenderer.prototype), \"renderTank\", this).call(this, tank, events);\n\t      if (tank.energy == 0) {\n\t        this._shakeTimer = 10;\n\t        this._addExplosion(tank.x, tank.y, this._bigBoomAnim);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"renderBullet\",\n\t    value: function renderBullet(bullet, events) {\n\t      _get(BWRenderer.prototype.__proto__ || Object.getPrototypeOf(BWRenderer.prototype), \"renderBullet\", this).call(this, bullet, events);\n\t      if (bullet.exploded) {\n\t        this._addExplosion(bullet.x, bullet.y, this._smallBoomAnim);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"postRender\",\n\t    value: function postRender() {\n\t      _get(BWRenderer.prototype.__proto__ || Object.getPrototypeOf(BWRenderer.prototype), \"postRender\", this).call(this);\n\t      if (this._shakeTimer > 0) {\n\t        this._shakeTimer--;\n\t        this.masterContainer.x = Math.random() * 10 - 5 - this.offsetX;\n\t        this.masterContainer.y = Math.random() * 10 - 5 - this.offsetY;\n\t      } else {\n\t        this.masterContainer.x = -this.offsetX;\n\t        this.masterContainer.y = -this.offsetY;\n\t      }\n\t    }\n\t  }, {\n\t    key: \"_createBattlefieldView\",\n\t    value: function _createBattlefieldView(battlefield) {\n\t      return new BWBattlefieldView(battlefield);\n\t    }\n\t  }, {\n\t    key: \"_createClockView\",\n\t    value: function _createClockView(clock) {\n\t      return new BWClockView(clock);\n\t    }\n\t  }, {\n\t    key: \"_createBulletView\",\n\t    value: function _createBulletView(bullet) {\n\t      return new BWBulletView(bullet);\n\t    }\n\t  }, {\n\t    key: \"_createTankView\",\n\t    value: function _createTankView(tank) {\n\t      return new BWTankView(tank);\n\t    }\n\t  }, {\n\t    key: \"_addExplosion\",\n\t    value: function _addExplosion(x, y, type) {\n\t      var anim = new PIXI.extras.AnimatedSprite(type);\n\t      anim.anchor.set(0.5);\n\t      this.masterContainer.addChild(anim);\n\t      anim.x = x;\n\t      anim.y = y;\n\t      anim.loop = false;\n\t      anim.onComplete = function () {\n\t        this.stop();\n\t        this.parent.removeChild(this);\n\t      };\n\t      anim.play();\n\t    }\n\t  }]);\n\t\n\t  return BWRenderer;\n\t}(AbstractPixiRenderer);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(BWBattlefieldView, _AbstractPixiView);\n\t\n\t  function BWBattlefieldView() {\n\t    _classCallCheck(this, BWBattlefieldView);\n\t\n\t    return _possibleConstructorReturn(this, (BWBattlefieldView.__proto__ || Object.getPrototypeOf(BWBattlefieldView)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(BWBattlefieldView, [{\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var background = PIXI.Sprite.fromFrame('battlefield');\n\t      container.addChild(background);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {}\n\t  }]);\n\t\n\t  return BWBattlefieldView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(BWClockView, _AbstractPixiView);\n\t\n\t  function BWClockView(model) {\n\t    _classCallCheck(this, BWClockView);\n\t\n\t    return _possibleConstructorReturn(this, (BWClockView.__proto__ || Object.getPrototypeOf(BWClockView)).call(this, model));\n\t  }\n\t\n\t  _createClass(BWClockView, [{\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 15,\n\t        fill: '#000000'\n\t      });\n\t\n\t      this._label = new PIXI.Text(\"clock\", labelStyle);\n\t      this._label.x = 10;\n\t      this._label.y = 600 - 20;\n\t      container.addChild(this._label);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {\n\t      this._label.setText(this.model.text);\n\t    }\n\t  }]);\n\t\n\t  return BWClockView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiBulletView = __webpack_require__(41);\n\t\n\tmodule.exports = function (_AbstractPixiBulletVi) {\n\t  _inherits(BWBulletView, _AbstractPixiBulletVi);\n\t\n\t  function BWBulletView(model) {\n\t    _classCallCheck(this, BWBulletView);\n\t\n\t    return _possibleConstructorReturn(this, (BWBulletView.__proto__ || Object.getPrototypeOf(BWBulletView)).call(this, model));\n\t  }\n\t\n\t  _createClass(BWBulletView, [{\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var bullet = PIXI.Sprite.fromFrame('bullet');\n\t      bullet.anchor.set(0.5);\n\t      container.addChild(bullet);\n\t    }\n\t  }]);\n\t\n\t  return BWBulletView;\n\t}(AbstractPixiBulletView);\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiTankView = __webpack_require__(28);\n\t\n\tmodule.exports = function (_AbstractPixiTankView) {\n\t  _inherits(BWTankView, _AbstractPixiTankView);\n\t\n\t  function BWTankView(model) {\n\t    _classCallCheck(this, BWTankView);\n\t\n\t    return _possibleConstructorReturn(this, (BWTankView.__proto__ || Object.getPrototypeOf(BWTankView)).call(this, model));\n\t  }\n\t\n\t  _createClass(BWTankView, [{\n\t    key: 'update',\n\t    value: function update(events) {\n\t      _get(BWTankView.prototype.__proto__ || Object.getPrototypeOf(BWTankView.prototype), 'update', this).call(this, events);\n\t      this._shoot.alpha = this.model.isShooting ? 1 : this._shoot.alpha * 0.7;\n\t    }\n\t  }, {\n\t    key: '_createBody',\n\t    value: function _createBody() {\n\t      var body = PIXI.Sprite.fromFrame('tank_body');\n\t      body.anchor.set(0.5);\n\t      return body;\n\t    }\n\t  }, {\n\t    key: '_createGun',\n\t    value: function _createGun() {\n\t      var gunContainer = new PIXI.Container();\n\t\n\t      var tankGun = PIXI.Sprite.fromFrame('tank_gun');\n\t      tankGun.anchor.set(0.3, 0.5);\n\t      gunContainer.addChild(tankGun);\n\t\n\t      this._shoot = PIXI.Sprite.fromFrame('tank_shoot');\n\t      this._shoot.anchor.set(-1.2, 0.5);\n\t      this._shoot.alpha = 0;\n\t      gunContainer.addChild(this._shoot);\n\t\n\t      return gunContainer;\n\t    }\n\t  }, {\n\t    key: '_createRadar',\n\t    value: function _createRadar() {\n\t      var tankRadar = PIXI.Sprite.fromFrame('tank_radar');\n\t      tankRadar.anchor.set(0.5);\n\t      return tankRadar;\n\t    }\n\t  }, {\n\t    key: '_createLabel',\n\t    value: function _createLabel() {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 12,\n\t        fill: 0x000000\n\t      });\n\t      var label = new PIXI.Text(\"\", labelStyle);\n\t      label.anchor.set(0.5, 0.5);\n\t      label.x = 0;\n\t      label.y = -40;\n\t      return label;\n\t    }\n\t  }, {\n\t    key: '_createHudBackground',\n\t    value: function _createHudBackground() {\n\t      var statusBarBg = new PIXI.Graphics();\n\t      statusBarBg.beginFill(0x000000, 1);\n\t      statusBarBg.drawRect(-26, -3, 52, 6);\n\t      statusBarBg.y = -30;\n\t      return statusBarBg;\n\t    }\n\t  }, {\n\t    key: '_createEnergyBar',\n\t    value: function _createEnergyBar() {\n\t      var energyBar = new PIXI.Graphics();\n\t      energyBar.beginFill(0xff0000, 1);\n\t      energyBar.drawRect(0, -2, 50, 4);\n\t      energyBar.x = -25;\n\t      energyBar.y = -30;\n\t      return energyBar;\n\t    }\n\t  }]);\n\t\n\t  return BWTankView;\n\t}(AbstractPixiTankView);\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiRenderer = __webpack_require__(24);\n\tvar BrodyBattlefieldView = __webpack_require__(49);\n\tvar BrodyClockView = __webpack_require__(50);\n\tvar BrodyBulletView = __webpack_require__(51);\n\tvar BrodyTankView = __webpack_require__(52);\n\tvar BrodySettings = __webpack_require__(53);\n\t\n\tmodule.exports = function (_AbstractPixiRenderer) {\n\t  _inherits(BrodyRenderer, _AbstractPixiRenderer);\n\t\n\t  function BrodyRenderer() {\n\t    _classCallCheck(this, BrodyRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BrodyRenderer.__proto__ || Object.getPrototypeOf(BrodyRenderer)).call(this, 'brody'));\n\t\n\t    _this._bigBoomAnim = [];\n\t    _this._shakeTimer = 0;\n\t    _this._particleContainer = null;\n\t    _this._particleList = [];\n\t    _this._explosionList = [];\n\t    _this._settings = new BrodySettings();\n\t    _this._masterContainer.addChild(_this._bulletContainer);\n\t    _this._frameTimer = 0;\n\t    _this._frameCounter = 0;\n\t    _this._fpsInterval = null;\n\t    _this._fps = 30;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BrodyRenderer, [{\n\t    key: \"onAssetsLoaded\",\n\t    value: function onAssetsLoaded() {\n\t      var i;\n\t      for (i = 0; i <= 22; i++) {\n\t        this._bigBoomAnim.push(PIXI.Texture.fromFrame('big_boom_0' + (i < 10 ? \"0\" + i : i)));\n\t      }\n\t    }\n\t  }, {\n\t    key: \"initBatlefield\",\n\t    value: function initBatlefield(battlefield) {\n\t      _get(BrodyRenderer.prototype.__proto__ || Object.getPrototypeOf(BrodyRenderer.prototype), \"initBatlefield\", this).call(this, battlefield);\n\t      this.battlefieldView.configure(this._settings);\n\t      this._particleContainer = new PIXI.particles.ParticleContainer(1000, {\n\t        position: true,\n\t        rotation: true,\n\t        alpha: true\n\t      });\n\t      this._masterContainer.addChild(this._particleContainer);\n\t      this._masterContainer.addChild(this._hudContainer);\n\t\n\t      var self = this;\n\t      this._fpsInterval = setInterval(function () {\n\t        self._fps = self._frameCounter;\n\t        self._frameCounter = 0;\n\t      }, 1000);\n\t    }\n\t  }, {\n\t    key: \"renderTank\",\n\t    value: function renderTank(tank, events) {\n\t      _get(BrodyRenderer.prototype.__proto__ || Object.getPrototypeOf(BrodyRenderer.prototype), \"renderTank\", this).call(this, tank, events);\n\t      var i;\n\t      for (i in events) {\n\t        if (events[i].type == 'destroy') {\n\t          this._shakeTimer = 10;\n\t          this._addTankExplosion(tank);\n\t          break;\n\t        }\n\t      }\n\t\n\t      var directionCorrection = tank.throttle > 0 ? 180 : 0;\n\t      var dirtAngle = (tank.angle + directionCorrection) * (Math.PI / 180);\n\t      if (tank.speed > 1) {\n\t        var corner1X = tank.x + 20 * Math.cos(dirtAngle - Math.PI / 4) + 7 * Math.cos(dirtAngle);\n\t        var corner1Y = tank.y + 20 * Math.sin(dirtAngle - Math.PI / 4) + 7 * Math.sin(dirtAngle);\n\t        var corner2X = tank.x + 20 * Math.cos(dirtAngle + Math.PI / 4) + 7 * Math.cos(dirtAngle);\n\t        var corner2Y = tank.y + 20 * Math.sin(dirtAngle + Math.PI / 4) + 7 * Math.sin(dirtAngle);\n\t\n\t        this._addDirt(corner1X, corner1Y);\n\t        this._addDirt(corner2X, corner2Y);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"renderBullet\",\n\t    value: function renderBullet(bullet, events) {\n\t      _get(BrodyRenderer.prototype.__proto__ || Object.getPrototypeOf(BrodyRenderer.prototype), \"renderBullet\", this).call(this, bullet, events);\n\t      var view = this.getBulletView(bullet.id);\n\t      view.configure(this._settings);\n\t      if (bullet.exploded) {\n\t        this._addBulletExplosion(bullet);\n\t        this.battlefieldView.addBulletHole(bullet.x, bullet.y, bullet.power);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"preRender\",\n\t    value: function preRender() {\n\t      _get(BrodyRenderer.prototype.__proto__ || Object.getPrototypeOf(BrodyRenderer.prototype), \"preRender\", this).call(this);\n\t      var particle;\n\t      var particleCount = 0;\n\t      var i;\n\t      for (i = this._particleList.length - 1; i >= 0; i--) {\n\t        particle = this._particleList[i];\n\t        if (!particle) {\n\t          continue;\n\t        }\n\t\n\t        particle.x += particle.speed * particle.rotation * Math.cos(particle.rotation);\n\t        particle.y += particle.speed * particle.rotation * Math.sin(particle.rotation);\n\t        particle.alpha = Math.max(0, particle.alpha - particle.alphaSpeed);\n\t\n\t        particle.lifetime--;\n\t        if (particle.lifetime <= 0 || particleCount > this._settings.particleLimit) {\n\t          particle.parent.removeChild(particle);\n\t          this._particleList[i] = null;\n\t        } else {\n\t          particleCount++;\n\t        }\n\t      }\n\t      for (i = 0; i < this._explosionList.length; i++) {\n\t        if (!this._explosionList[i]) continue;\n\t        this._explosionList[i].alpha *= 0.7;\n\t        if (this._explosionList[i].alpha < 0.01) {\n\t          this._explosionList[i].parent.removeChild(this._explosionList[i]);\n\t          this._explosionList[i] = null;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: \"postRender\",\n\t    value: function postRender() {\n\t      this._frameTimer++;\n\t      this._frameCounter++;\n\t      if (this._frameTimer % this._settings.dropFrames == 0) {\n\t        _get(BrodyRenderer.prototype.__proto__ || Object.getPrototypeOf(BrodyRenderer.prototype), \"postRender\", this).call(this);\n\t      }\n\t      if (this._shakeTimer > 0) {\n\t        this._shakeTimer--;\n\t        this.masterContainer.x = Math.random() * 10 - 5 - this.offsetX;\n\t        this.masterContainer.y = Math.random() * 10 - 5 - this.offsetY;\n\t        this._battlefieldView.view.x = Math.random() * 10 - 5;\n\t        this._battlefieldView.view.y = Math.random() * 10 - 5;\n\t      } else {\n\t        this.masterContainer.x = -this.offsetX;\n\t        this.masterContainer.y = -this.offsetY;\n\t        this._battlefieldView.view.x = 0;\n\t        this._battlefieldView.view.y = 0;\n\t      }\n\t    }\n\t  }, {\n\t    key: \"stop\",\n\t    value: function stop() {\n\t      if (this._fpsInterval) {\n\t        clearInterval(this._fpsInterval);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"_addTankExplosion\",\n\t    value: function _addTankExplosion(tank) {\n\t      this._addExplosion(tank.x, tank.y, this._bigBoomAnim);\n\t      this.battlefieldView.addCrater(tank.x, tank.y);\n\t      this._addSparks(tank.x, tank.y, 300);\n\t    }\n\t  }, {\n\t    key: \"_addBulletExplosion\",\n\t    value: function _addBulletExplosion(bullet) {\n\t      this._addGlow(bullet.x, bullet.y, 0.3 + 0.6 * bullet.power);\n\t      var sparks = 5 + 40 * bullet.power;\n\t      this._addSparks(bullet.x, bullet.y, sparks);\n\t    }\n\t  }, {\n\t    key: \"_createBattlefieldView\",\n\t    value: function _createBattlefieldView(battlefield) {\n\t      return new BrodyBattlefieldView(battlefield);\n\t    }\n\t  }, {\n\t    key: \"_createClockView\",\n\t    value: function _createClockView(clock) {\n\t      return new BrodyClockView(clock);\n\t    }\n\t  }, {\n\t    key: \"_createBulletView\",\n\t    value: function _createBulletView(bullet) {\n\t      return new BrodyBulletView(bullet);\n\t    }\n\t  }, {\n\t    key: \"_createTankView\",\n\t    value: function _createTankView(tank) {\n\t      return new BrodyTankView(tank);\n\t    }\n\t  }, {\n\t    key: \"_addExplosion\",\n\t    value: function _addExplosion(x, y, type) {\n\t      this._addGlow(x, y, 5);\n\t\n\t      var anim = new PIXI.extras.AnimatedSprite(type);\n\t      anim.anchor.set(0.5);\n\t      this.masterContainer.addChild(anim);\n\t      anim.x = x;\n\t      anim.y = y;\n\t      anim.loop = false;\n\t      anim.blendMode = PIXI.BLEND_MODES.ADD;\n\t      anim.onComplete = function () {\n\t        this.stop();\n\t        this.parent.removeChild(this);\n\t      };\n\t      anim.play();\n\t    }\n\t  }, {\n\t    key: \"_addGlow\",\n\t    value: function _addGlow(x, y, scale) {\n\t      if (!this._settings.showGlow) return;\n\t      var glow = PIXI.Sprite.fromFrame('glow');\n\t      glow.anchor.set(0.5);\n\t      glow.scale.x = glow.scale.y = scale;\n\t      glow.alpha = 0.4;\n\t      glow.blendMode = PIXI.BLEND_MODES.ADD;\n\t      glow.x = x;\n\t      glow.y = y;\n\t      this.masterContainer.addChild(glow);\n\t      this._explosionList.push(glow);\n\t    }\n\t  }, {\n\t    key: \"_addSparks\",\n\t    value: function _addSparks(x, y, amount) {\n\t      amount = Math.ceil(amount * this._settings.quality);\n\t      for (var i = 0; i < amount; i++) {\n\t        var particle = PIXI.Sprite.fromFrame('spark');\n\t        particle.x = x;\n\t        particle.y = y;\n\t        particle.alphaSpeed = 0;\n\t        particle.anchor.set(0.5);\n\t        particle.speed = 1 + Math.random() * 2;\n\t        particle.rotation = Math.random() * 2 * Math.PI;\n\t        particle.lifetime = 5 + Math.random() * 5;\n\t        this._particleContainer.addChild(particle);\n\t        this._particleList.push(particle);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"_addDirt\",\n\t    value: function _addDirt(x, y) {\n\t      if (!this._settings.showDirt) return;\n\t      for (var i = 0; i < 5; i++) {\n\t        var index = Math.floor(Math.random() * 3);\n\t        var particle = PIXI.Sprite.fromFrame('dirt_' + index);\n\t        particle.x = x + Math.random() * 4 - 2;\n\t        particle.y = y + Math.random() * 4 - 2;\n\t        particle.anchor.set(0.5);\n\t        particle.speed = 0;\n\t        particle.alphaSpeed = 0.02 + Math.random() * 0.02;\n\t        particle.rotation = 0;\n\t        particle.alpha = 0.1 + 0.4 * Math.random();\n\t        particle.lifetime = 25;\n\t        particle.scale.x = particle.scale.y = 0.5 + 2 * Math.random();\n\t        this._particleContainer.addChild(particle);\n\t        this._particleList.push(particle);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"quality\",\n\t    get: function get() {\n\t      return this._settings.quality;\n\t    },\n\t    set: function set(v) {\n\t      this._settings.quality = v;\n\t    }\n\t  }]);\n\t\n\t  return BrodyRenderer;\n\t}(AbstractPixiRenderer);\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(BrodyBattlefieldView, _AbstractPixiView);\n\t\n\t  function BrodyBattlefieldView(model) {\n\t    _classCallCheck(this, BrodyBattlefieldView);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BrodyBattlefieldView.__proto__ || Object.getPrototypeOf(BrodyBattlefieldView)).call(this, model));\n\t\n\t    _this._holeList = [];\n\t    _this._settings = null;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BrodyBattlefieldView, [{\n\t    key: 'configure',\n\t    value: function configure(settings) {\n\t      this._settings = settings;\n\t    }\n\t  }, {\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var background = PIXI.Sprite.fromFrame('battlefield');\n\t      container.addChild(background);\n\t\n\t      var groundMask = new PIXI.Graphics();\n\t      groundMask.beginFill(0x0000ff, 1);\n\t      groundMask.moveTo(25, 25);\n\t      groundMask.lineTo(900 - 25, 25);\n\t      groundMask.lineTo(900 - 25, 600 - 25);\n\t      groundMask.lineTo(90, 600 - 25);\n\t      groundMask.lineTo(90, 600 - 35);\n\t      groundMask.lineTo(25, 600 - 35);\n\t      groundMask.lineTo(25, 25);\n\t      groundMask.endFill();\n\t      this._craterContainer = new PIXI.Container();\n\t      this._craterContainer.mask = groundMask;\n\t      container.addChild(this._craterContainer);\n\t      container.addChild(groundMask);\n\t\n\t      var wallMask = new PIXI.Graphics();\n\t      wallMask.beginFill(0x0000ff, 0.4);\n\t      wallMask.moveTo(15, 15);\n\t      wallMask.lineTo(900 - 15, 15);\n\t      wallMask.lineTo(900 - 15, 600 - 15);\n\t      wallMask.lineTo(80, 600 - 15);\n\t      wallMask.lineTo(80, 600 - 25);\n\t      wallMask.lineTo(15, 600 - 25);\n\t      wallMask.lineTo(15, 15);\n\t      wallMask.lineTo(25, 25);\n\t      wallMask.lineTo(25, 600 - 25);\n\t      wallMask.lineTo(80, 600 - 25);\n\t      wallMask.lineTo(80, 600 - 25);\n\t      wallMask.lineTo(900 - 25, 600 - 25);\n\t      wallMask.lineTo(900 - 25, 25);\n\t      wallMask.lineTo(25, 25);\n\t      wallMask.endFill();\n\t      this._holesContainer = new PIXI.Container();\n\t      this._holesContainer.mask = wallMask;\n\t      container.addChild(this._holesContainer);\n\t      container.addChild(wallMask);\n\t    }\n\t  }, {\n\t    key: 'addCrater',\n\t    value: function addCrater(x, y) {\n\t      var crater = PIXI.Sprite.fromFrame('crater');\n\t      crater.anchor.set(0.5);\n\t      crater.x = x - this.model.offsetX;\n\t      crater.y = y - this.model.offsetY;\n\t      crater.blendMode = PIXI.BLEND_MODES.MULTIPLY;\n\t      crater.alpha = 0.8;\n\t      this._craterContainer.addChild(crater);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      _get(BrodyBattlefieldView.prototype.__proto__ || Object.getPrototypeOf(BrodyBattlefieldView.prototype), 'update', this).call(this);\n\t      this._holesContainer.visible = this._settings.skratchLimit > 0;\n\t      this._craterContainer.visible = this._settings.showCraters;\n\t    }\n\t  }, {\n\t    key: 'addBulletHole',\n\t    value: function addBulletHole(x, y, power) {\n\t      var rotation = 0;\n\t      if (Math.abs(y - this.model.maxY) < 10) {\n\t        y = this.model.maxY + 3 + Math.random() * 3;\n\t      } else if (Math.abs(y - this.model.minY) < 10) {\n\t        y = this.model.minY - 3 - Math.random() * 3;\n\t      } else if (Math.abs(x - this.model.maxX) < 10) {\n\t        x = this.model.maxX + 3 + Math.random() * 3;\n\t        rotation = Math.PI / 2;\n\t      } else if (Math.abs(x - this.model.minX) < 10) {\n\t        x = this.model.minX - 3 - Math.random() * 3;\n\t        rotation = Math.PI / 2;\n\t      } else {\n\t        return;\n\t      }\n\t\n\t      var hole = PIXI.Sprite.fromFrame('hole');\n\t      hole.anchor.set(0.5);\n\t      hole.x = x - this.model.offsetX;\n\t      hole.y = y - this.model.offsetY;\n\t      hole.rotation = rotation;\n\t      hole.scale.x = hole.scale.y = 0.7 + 0.5 * power;\n\t      this._holesContainer.addChild(hole);\n\t      this._holeList.push(hole);\n\t      var limit = this._settings ? this._settings.skratchLimit : 20;\n\t      while (this._holeList.length > limit) {\n\t        hole = this._holeList.shift();\n\t        hole.parent.removeChild(hole);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BrodyBattlefieldView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiView = __webpack_require__(27);\n\t\n\tmodule.exports = function (_AbstractPixiView) {\n\t  _inherits(BrodyClockView, _AbstractPixiView);\n\t\n\t  function BrodyClockView(model) {\n\t    _classCallCheck(this, BrodyClockView);\n\t\n\t    return _possibleConstructorReturn(this, (BrodyClockView.__proto__ || Object.getPrototypeOf(BrodyClockView)).call(this, model));\n\t  }\n\t\n\t  _createClass(BrodyClockView, [{\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 15,\n\t        fill: '#000000'\n\t      });\n\t\n\t      this._label = new PIXI.Text(\"clock\", labelStyle);\n\t      this._label.x = 10;\n\t      this._label.y = 600 - 20;\n\t      container.addChild(this._label);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {\n\t      this._label.setText(this.model.text);\n\t    }\n\t  }]);\n\t\n\t  return BrodyClockView;\n\t}(AbstractPixiView);\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiBulletView = __webpack_require__(41);\n\t\n\tmodule.exports = function (_AbstractPixiBulletVi) {\n\t  _inherits(BrodyBulletView, _AbstractPixiBulletVi);\n\t\n\t  function BrodyBulletView(model, settings) {\n\t    _classCallCheck(this, BrodyBulletView);\n\t\n\t    return _possibleConstructorReturn(this, (BrodyBulletView.__proto__ || Object.getPrototypeOf(BrodyBulletView)).call(this, model));\n\t  }\n\t\n\t  _createClass(BrodyBulletView, [{\n\t    key: 'configure',\n\t    value: function configure(settings) {\n\t      this._settings = settings;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(events) {\n\t      _get(BrodyBulletView.prototype.__proto__ || Object.getPrototypeOf(BrodyBulletView.prototype), 'update', this).call(this, events);\n\t      this._glow.visible = this._settings && this._settings.showGlow;\n\t    }\n\t  }, {\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      var bullet = PIXI.Sprite.fromFrame('bullet');\n\t      bullet.anchor.set(0.5);\n\t      var glow = PIXI.Sprite.fromFrame('glow');\n\t      glow.anchor.set(0.5);\n\t      glow.blendMode = PIXI.BLEND_MODES.ADD;\n\t      glow.alpha = 0.1;\n\t      this._glow = glow;\n\t      container.addChild(glow);\n\t      container.addChild(bullet);\n\t    }\n\t  }]);\n\t\n\t  return BrodyBulletView;\n\t}(AbstractPixiBulletView);\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* globals PIXI */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AbstractPixiTankView = __webpack_require__(28);\n\t\n\tmodule.exports = function (_AbstractPixiTankView) {\n\t  _inherits(BrodyTankView, _AbstractPixiTankView);\n\t\n\t  function BrodyTankView(model) {\n\t    _classCallCheck(this, BrodyTankView);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BrodyTankView.__proto__ || Object.getPrototypeOf(BrodyTankView)).call(this, model));\n\t\n\t    _this._lightTimer = 0;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BrodyTankView, [{\n\t    key: 'update',\n\t    value: function update(events) {\n\t      _get(BrodyTankView.prototype.__proto__ || Object.getPrototypeOf(BrodyTankView.prototype), 'update', this).call(this, events);\n\t      this._shoot.alpha = this._shoot.alpha * 0.8;\n\t      this._tankGun.x = this._tankGun.x * 0.8;\n\t      this.radar.rotation = (-this.model.gunAngle + this._model.radarAngle) * (Math.PI / 180);\n\t\n\t      this._lightTimer = this.model.enemySpot ? this._lightTimer + 1 : 0;\n\t\n\t      this._light.alpha = -Math.cos(this._lightTimer * 0.25) * 0.5 + 0.5;\n\t    }\n\t  }, {\n\t    key: '_onShoot',\n\t    value: function _onShoot(event) {\n\t      _get(BrodyTankView.prototype.__proto__ || Object.getPrototypeOf(BrodyTankView.prototype), '_onShoot', this).call(this, event);\n\t      this._tankGun.x = -1 - 3 * event.bullet.power;\n\t      this._shoot.alpha = 1;\n\t    }\n\t  }, {\n\t    key: '_create',\n\t    value: function _create(container) {\n\t      _get(BrodyTankView.prototype.__proto__ || Object.getPrototypeOf(BrodyTankView.prototype), '_create', this).call(this, container);\n\t      this._tankGun.addChild(this.radar);\n\t    }\n\t  }, {\n\t    key: '_createBody',\n\t    value: function _createBody() {\n\t      var body = PIXI.Sprite.fromFrame('tank_body_' + this.model.skin);\n\t      body.anchor.set(0.3, 0.5);\n\t      return body;\n\t    }\n\t  }, {\n\t    key: '_createGun',\n\t    value: function _createGun() {\n\t      var gunContainer = new PIXI.Container();\n\t\n\t      var tankGun = PIXI.Sprite.fromFrame('tank_gun_' + this.model.skin);\n\t      tankGun.anchor.set(0.3, 0.5);\n\t      gunContainer.addChild(tankGun);\n\t      this._tankGun = tankGun;\n\t\n\t      this._shoot = PIXI.Sprite.fromFrame('tank_shoot');\n\t      this._shoot.anchor.set(0.3, 0.5);\n\t      this._shoot.alpha = 0;\n\t\n\t      this._light = PIXI.Sprite.fromFrame('tank_light');\n\t      this._light.anchor.set(0.3, 0.5);\n\t      this._light.alpha = 0;\n\t\n\t      gunContainer.addChild(this._shoot);\n\t      gunContainer.addChild(this._light);\n\t\n\t      return gunContainer;\n\t    }\n\t  }, {\n\t    key: '_createRadar',\n\t    value: function _createRadar() {\n\t      var tankRadar = PIXI.Sprite.fromFrame('tank_radar_' + this.model.skin);\n\t      tankRadar.anchor.set(0.2, 0.5);\n\t      tankRadar.x = -5;\n\t      return tankRadar;\n\t    }\n\t  }, {\n\t    key: '_createLabel',\n\t    value: function _createLabel() {\n\t      var labelStyle = new PIXI.TextStyle({\n\t        fontFamily: 'Arial',\n\t        fontSize: 10,\n\t        stroke: 0x000000,\n\t        strokeThickness: 2,\n\t        fill: 0xffffbb\n\t      });\n\t      var label = new PIXI.Text(\"\", labelStyle);\n\t      label.anchor.set(0.5, 0.5);\n\t      label.x = 0;\n\t      label.y = -40;\n\t      return label;\n\t    }\n\t  }, {\n\t    key: '_createHudBackground',\n\t    value: function _createHudBackground() {\n\t      var statusBarBg = new PIXI.Graphics();\n\t      statusBarBg.beginFill(0x000000, 1);\n\t      statusBarBg.drawRect(-26, -3, 52, 6);\n\t      statusBarBg.y = -30;\n\t      return statusBarBg;\n\t    }\n\t  }, {\n\t    key: '_createEnergyBar',\n\t    value: function _createEnergyBar() {\n\t      var energyBar = new PIXI.Graphics();\n\t      energyBar.beginFill(0xffff99, 1);\n\t      energyBar.drawRect(0, -2, 50, 4);\n\t      energyBar.x = -25;\n\t      energyBar.y = -30;\n\t      return energyBar;\n\t    }\n\t  }]);\n\t\n\t  return BrodyTankView;\n\t}(AbstractPixiTankView);\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function () {\n\t  function BrodySettings(model) {\n\t    _classCallCheck(this, BrodySettings);\n\t\n\t    this._particleLimit = 1000;\n\t    this._skratchLimit = 100;\n\t    this._showDirt = true;\n\t    this._showGlow = true;\n\t    this._showCraters = true;\n\t    this._dropFrames = 1;\n\t    this._quality = 1;\n\t    this.quality = this._quality;\n\t  }\n\t\n\t  _createClass(BrodySettings, [{\n\t    key: 'dropFrames',\n\t    get: function get() {\n\t      return this._dropFrames;\n\t    }\n\t  }, {\n\t    key: 'particleLimit',\n\t    get: function get() {\n\t      return this._particleLimit;\n\t    }\n\t  }, {\n\t    key: 'skratchLimit',\n\t    get: function get() {\n\t      return this._skratchLimit;\n\t    }\n\t  }, {\n\t    key: 'showDirt',\n\t    get: function get() {\n\t      return this._showDirt;\n\t    }\n\t  }, {\n\t    key: 'showGlow',\n\t    get: function get() {\n\t      return this._showGlow;\n\t    }\n\t  }, {\n\t    key: 'showCraters',\n\t    get: function get() {\n\t      return this._showCraters;\n\t    }\n\t  }, {\n\t    key: 'quality',\n\t    get: function get() {\n\t      return this._quality;\n\t    },\n\t    set: function set(v) {\n\t      v = Math.min(1, Math.max(0, v));\n\t      this._quality = v;\n\t      this._particleLimit = Math.round(1000 * v * v);\n\t      this._skratchLimit = Math.round(100 * v);\n\t      this._showDirt = v > 0.2;\n\t      this._showGlow = v > 0.5;\n\t      this._showCraters = v > 0.1;\n\t      if (v > 0.3) {\n\t        this._dropFrames = 1;\n\t      } else if (v > 0.2) {\n\t        this._dropFrames = 2;\n\t      } else if (v > 0.1) {\n\t        this._dropFrames = 3;\n\t      } else {\n\t        this._dropFrames = 4;\n\t      }\n\t      this._quality = v;\n\t    }\n\t  }]);\n\t\n\t  return BrodySettings;\n\t}();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// jsbattle.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba58b55b3b45f74a5bd8","'use strict';\n\nvar Simulation = require(\"./Simulation.js\");\nvar Renderer = require(\"./renderers/Renderer.js\");\nvar DebugRenderer = require(\"./renderers/debug/DebugRenderer.js\");\nvar BWRenderer = require(\"./renderers/bw/BWRenderer.js\");\nvar BrodyRenderer = require(\"./renderers/brody/BrodyRenderer.js\");\n\n\nmodule.exports  = {\n\n  createSimulation: function(renderer) {\n    renderer = renderer ? renderer : new Renderer();\n    var sim = new Simulation(renderer);\n    return sim;\n  },\n\n  createRenderer: function(name) {\n    switch(name) {\n      case 'debug':   return new DebugRenderer();\n      case 'bw':      return new BWRenderer();\n      case 'brody':      return new BrodyRenderer();\n      default:        throw \"Unknown rederer \" + name;\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/entry.js","'use strict';\n\nvar Tank = require(\"./Tank.js\");\nvar Bullet = require(\"./Bullet.js\");\nvar Battlefield = require(\"./Battlefield.js\");\nvar EventStore = require(\"./EventStore.js\");\nvar CollisionResolver = require(\"./CollisionResolver.js\");\nvar AiWrapper = require(\"./AiWrapper.js\");\nvar PerformanceMonitor = require(\"./PerformanceMonitor.js\");\nvar seedrandom = require(\"seedrandom\");\n\n\nmodule.exports = class Simulation {\n\n  constructor(renderer) {\n    this._aiList = [];\n    this._allTankList = [];\n    this._tankList = [];\n    this._bulletList = [];\n    this._explodedTankList = [];\n    this._explodedBulletList = [];\n    this._battlefield = new Battlefield();\n    this._simulationTimeout = null;\n    this._renderInterval = null;\n    this._simulationStepDuration = 17;\n    this._renderStepDuration = 30;\n    this._renderer = renderer;\n    this._isRunning = false;\n    this._collisionResolver = new CollisionResolver();\n    this._rngSeed = (new Date()).getTime();\n    this._rng = seedrandom(this._rngSeed);\n    this._speedMultiplier = 1;\n    this._onSimulationStepCallback = [];\n    this._onRenderStepCallback = [];\n    this._onFinishCallback = [];\n    this._onErrorCallback = [];\n    this._timeElapsed = 0;\n    this._timeLimit = 30000;\n    this._eventStore = new EventStore();\n    this._nextTankId = 1;\n    this._nextBulletId = 1;\n    this._rendererQuality = 'auto';\n    this._perfMon = new PerformanceMonitor();\n    this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier);\n    Math.random = this._rng;\n  }\n\n  init(width, height) {\n    this._battlefield.setSize(width, height);\n    this._renderer.initBatlefield(this._battlefield);\n    this._collisionResolver.updateBattlefield(this._battlefield);\n  }\n\n  setRendererQuality(v) {\n    if(isNaN(v) && v != 'auto') return;\n    if(!isNaN(v)) {\n      v = Math.min(1, Math.max(0, v));\n    }\n    this._rendererQuality = v;\n  }\n\n  get tankList() {\n    return this._allTankList;\n  }\n\n  onStep(callback) {\n    this._onSimulationStepCallback.push(callback);\n  }\n\n  onRender(callback) {\n    this._onRenderStepCallback.push(callback);\n  }\n\n  onFinish(callback) {\n    this._onFinishCallback.push(callback);\n  }\n\n  onError(callback) {\n    this._onErrorCallback.push(callback);\n  }\n\n  get renderer() {\n    return this._renderer;\n  }\n\n  get battlefield() {\n    return this._battlefield;\n  }\n\n  get timeElapsed() {\n    return this._timeElapsed;\n  }\n\n  get timeLimit() {\n    return this._timeLimit;\n  }\n\n  set timeLimit(v) {\n    this._timeLimit = v;\n  }\n\n\n  setSpeed(v) {\n    this._speedMultiplier = Math.max(0.01, Number(v));\n    this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier);\n  }\n\n  start() {\n    this._isRunning = true;\n    var i;\n    var self = this;\n\n    if(this._renderInterval) {\n      clearInterval(this._renderInterval);\n      this._renderInterval = null;\n    }\n\n    this._activateAi()\n      .then(function(result) {\n        self._renderInterval = setInterval(function () {\n          self._updateView();\n        }, self._renderStepDuration);\n\n        if(self._simulationTimeout) {\n          clearTimeout(self._simulationTimeout);\n        }\n        self._perfMon.start();\n        self._simulationStep();\n      })\n      .catch(function(err) {\n        console.error(err.message);\n        console.error(err);\n        for(i=0; i < self._onErrorCallback.length; i++) self._onErrorCallback[i](err.message ? err.message : \"Error during simulation\");\n      });\n  }\n\n  _simulationStep() {\n    this._perfMon.onSimulationStep();\n    var startTime = (new Date()).getTime();\n    var self = this;\n    var i;\n    this._updateModel();\n    this._updateAi()\n      .then(function(result) {\n        if(self._getTanksLeft() <= 1 || self._timeElapsed == self._timeLimit) {\n          self.stop();\n          self._updateView();\n          for(i=0; i < self._onFinishCallback.length; i++) self._onFinishCallback[i]();\n        }\n        if(self._isRunning) {\n          var processingTime = (new Date()).getTime() - startTime;\n          var dt = self._simulationStepDuration - processingTime;\n          dt = Math.max(1, dt);\n          dt /= self._speedMultiplier;\n          dt = Math.round(dt);\n\n          for(i=0; i < self._onSimulationStepCallback.length; i++) self._onSimulationStepCallback[i]();\n          self._timeElapsed = Math.min(self._timeElapsed + self._simulationStepDuration, self._timeLimit);\n          if(dt >= 1) {\n            self._simulationTimeout = setTimeout(self._simulationStep.bind(self), dt);\n          } else {\n            self._simulationStep();\n          }\n\n        }\n\n      })\n      .catch(function(err) {\n        console.error(err.message);\n        console.error(err);\n        for(i=0; i < self._onErrorCallback.length; i++) self._onErrorCallback[i](err.message ? err.message : \"Error during simulation\");\n      });\n  }\n\n  stop() {\n    this._isRunning = false;\n    this._perfMon.stop();\n    this._renderer.stop();\n    if(this._simulationTimeout) {\n      clearTimeout(this._simulationTimeout);\n      this._simulationTimeout = null;\n    }\n    if(this._renderInterval) {\n      clearInterval(this._renderInterval);\n      this._renderInterval = null;\n    }\n    var tank, ai, i;\n    for(i=0; i < this._aiList.length; i++) {\n      ai = this._aiList[i];\n      if(!ai) continue;\n      ai.deactivate();\n    }\n\n  }\n\n  addTank(aiName) {\n    if(!this._battlefield) {\n      throw \"Simulation not initialized\";\n    }\n    var startSlot = this._battlefield.getStartSlot();\n    if(!startSlot) {\n      throw \"No free space in the battlefield\";\n    }\n    var tank = this._createTank(aiName);\n    tank.randomize();\n    tank.moveTo(startSlot.x, startSlot.y);\n    this._tankList.push(tank);\n    this._allTankList.push(tank);\n    if(this._allTankList.length > 2) {\n      this._timeLimit += 2000;\n    }\n\n    var ai = this._createAiWrapper(tank);\n    this._aiList.push(ai);\n    \n    return ai;\n  }\n\n  _activateAi() {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      var promise = new Promise(function(done, err) { done(); });\n\n      promise = self._aiList.reduce(function (chain, ai) {\n        if(!ai) {\n          return chain;\n        } else {\n          return chain.then(ai.activate.bind(ai, self._rngSeed));\n        }\n      }, promise);\n      promise\n        .then(function() {\n          resolve();\n        })\n        .catch(function(err) {\n          reject(err);\n        });\n    });\n  }\n\n  _updateAi() {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n\n      var promise = new Promise(function(done, err) { done(); });\n\n      promise = self._aiList.reduce(function (chain, ai) {\n      \tif(!ai) {\n        \treturn chain;\n        } else {\n        \treturn chain.then(ai.simulationStep.bind(ai));\n        }\n      }, promise);\n      promise\n        .then(function() {\n          resolve();\n        })\n        .catch(function(err) {\n          reject(err);\n        });\n    });\n  }\n\n  _updateModel() {\n    let i, tank, bullet, ai;\n\n    for(i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      tank.simulationStep(this._collisionResolver);\n    }\n\n    var killCount = 0;\n    for(i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      if(tank.energy <= 0) {\n        killCount++;\n        this._tankList[i] = null;\n        this._explodedTankList.push(tank);\n        this._collisionResolver.removeTank(tank);\n        this._eventStore.add(\"tank_\" + tank.id, {\n          type: \"destroy\",\n          tank: tank\n        });\n      }\n    }\n    for(i=0; i < this._aiList.length; i++) {\n      ai = this._aiList[i];\n      if(!ai) continue;\n      if(ai.tank.energy <= 0) {\n        this._aiList[i] = null;\n        ai.deactivate();\n      }\n    }\n\n    for(i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      if(tank.isShooting) {\n        var power = tank.handleShoot();\n        bullet = this._createBullet(tank, power);\n        this._bulletList.push(bullet);\n        this._eventStore.add(\"tank_\" + tank.id, {\n          type: \"shoot\",\n          tank: tank,\n          bullet: bullet\n        });\n      }\n    }\n    for(i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      for(var j=0; j < killCount; j++) {\n        tank.onSurviveScore();\n      }\n    }\n    let hitTest;\n    for(i=0; i < this._bulletList.length; i++) {\n      bullet = this._bulletList[i];\n      if(!bullet) continue;\n      bullet.simulationStep();\n      hitTest = this._collisionResolver.hitTestBullet(bullet);\n      if(hitTest) {\n        this._bulletList[i] = null;\n        this._explodedBulletList.push(bullet);\n        this._collisionResolver.removeBullet(bullet);\n        this._eventStore.add(\"bullet_\" + bullet.id, {\n          type: \"explode\",\n          bullet: bullet\n        });\n      }\n    }\n  }\n\n  _updateView() {\n    if(this._rendererQuality == 'auto') {\n      this._renderer.quality = this._perfMon.qualityLevel;\n    } else {\n      this._renderer.quality = this._rendererQuality;\n    }\n    let i, tank, bullet;\n    this._renderer.preRender();\n    this._renderer.renderClock(this._timeElapsed, this._timeLimit);\n    for(i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      this._renderer.renderTank(tank, this._eventStore.get(\"tank_\" + tank.id));\n    }\n    for(i=0; i < this._bulletList.length; i++) {\n      bullet = this._bulletList[i];\n      if(!bullet) continue;\n      this._renderer.renderBullet(bullet, this._eventStore.get(\"bullet_\" + bullet.id));\n    }\n    while(this._explodedTankList.length) {\n      tank = this._explodedTankList.pop();\n      this._renderer.renderTank(tank, this._eventStore.get(\"tank_\" + tank.id));\n    }\n    while(this._explodedBulletList.length) {\n      bullet = this._explodedBulletList.pop();\n      this._renderer.renderBullet(bullet, this._eventStore.get(\"bullet_\" + bullet.id));\n    }\n    this._renderer.renderTankStats(this._allTankList);\n    this._renderer.postRender();\n    for(i=0; i < this._onRenderStepCallback.length; i++) this._onRenderStepCallback[i]();\n    this._eventStore.clear();\n  }\n\n  _getTanksLeft() {\n    var tanksLeft = 0;\n    var tank;\n    for(var i=0; i < this._tankList.length; i++) {\n      tank = this._tankList[i];\n      if(!tank) continue;\n      tanksLeft++;\n    }\n    return tanksLeft;\n  }\n\n  _createAiWrapper(tank) {\n    return new AiWrapper(tank);\n  }\n\n  _createTank(aiName) {\n    var tank = new Tank(aiName, this._nextTankId++);\n    return tank;\n  }\n\n  _createBullet(owner, power) {\n    var bullet = new Bullet(owner, this._nextBulletId++, power);\n    return bullet;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/Simulation.js","'use strict';\n\nfunction normalizeAngle(a) {\n  while(a > 180) a -= 360;\n  while(a < -180) a += 360;\n  return a;\n}\n\nmodule.exports = class Tank {\n\n  constructor(name, id) {\n    this._id = id;\n    this._name = name;\n    this._maxEnergy = 100;\n    this._energy = this._maxEnergy;\n    this._x = 0;\n    this._y = 0;\n    this._lastX = 0;\n    this._lastY = 0;\n    this._angle = 0;\n    this._gunAngle = 0;\n    this._radarAngle = 0;\n    this._throttle = 0;\n    this._actualThrottle = 0;\n    this._speed = 0;\n    this._turn = 0;\n    this._gunTurn = 0;\n    this._radarTurn = 0;\n    this._wallHit = false;\n    this._enemyHit = false;\n    this._radarRange = 300;\n    this._radarFocal = 6;\n    this._enemySpot = null;\n    this._bulletsSpot = [];\n    this._gunReloadTime = 70;\n    this._gunTimer = 0;\n    this._shootingPower = 0;\n    this._targetingAlarmTimer = 0;\n    this._debugData = {};\n    this._score = 0;\n    this._state = null;\n    this._hasBoost = false;\n    this._maxBoost = 400;\n    this._boost = this._maxBoost;\n    this._wallDistance = null;\n    this._skin = 'zebra';\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get skin() {\n    return this._skin;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  get energy() {\n    return this._energy;\n  }\n\n  get score() {\n    return this._score;\n  }\n\n  onEnemyHitScore(damage) {\n    this._score += damage;\n  }\n\n  onEnemyKillScore() {\n    this._score += 20;\n  }\n\n  onSurviveScore() {\n    this._score += 10;\n  }\n\n  get maxEnergy() {\n    return this._maxEnergy;\n  }\n\n  get radarRange() {\n    return this._radarRange;\n  }\n\n  get radarFocal() {\n    return this._radarFocal;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get fullName() {\n    return this._name + \" #\" + this._id;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  get speed() {\n    return this._speed;\n  }\n\n  get gunLength() {\n    return 25;\n  }\n\n  get angle() {\n    return this._angle;\n  }\n\n  get throttle() {\n    return this._throttle;\n  }\n\n  get hasBoost() {\n    return (this._hasBoost && this._boost > 0);\n  }\n\n  get boost() {\n    return this._boost;\n  }\n\n  get maxBoost() {\n    return this._maxBoost;\n  }\n\n  get gunAngle() {\n    return this._gunAngle;\n  }\n\n  get radarAngle() {\n    return this._radarAngle;\n  }\n\n  get enemySpot() {\n    return this._enemySpot;\n  }\n\n  setThrottle(v) {\n    this._throttle = Math.min(1, Math.max(-1, v));\n  }\n\n  setTurn(v) {\n    this._turn = Math.min(1, Math.max(-1, v));\n  }\n\n  setGunTurn(v) {\n    this._gunTurn = Math.min(1, Math.max(-1, v));\n  }\n\n  setRadarTurn(v) {\n    this._radarTurn = Math.min(1, Math.max(-1, v));\n  }\n\n  setBoost(v) {\n    this._hasBoost = v ? true : false;\n  }\n\n  setDebugData(v) {\n    this._debugData = v;\n  }\n\n  onWallHit() {\n    this._wallHit = true;\n    this.onDamage(0.2);\n  }\n\n  onEnemyHit() {\n    this._enemyHit = true;\n    this.onDamage(0.2);\n  }\n\n  onBeingRam(speed) {\n    this.onDamage(0.1 + Math.round(speed*8)*0.1);\n  }\n\n  onEnemySpot(enemy) {\n    this._enemySpot = enemy;\n  }\n\n  onBulletSpot(bullet) {\n    this._bulletsSpot.push(bullet);\n  }\n\n  onWallSpot(distance) {\n    this._wallDistance = distance;\n  }\n\n  onTargetingAlarm() {\n    this._targetingAlarmTimer = 3;\n  }\n\n  get targetingAlarm() {\n    return this._targetingAlarmTimer > 0;\n  }\n\n  onDamage(damage) {\n    this._energy = Math.max(0, this._energy - damage);\n  }\n\n  moveTo(xPosition, yPosition) {\n    this._x = xPosition;\n    this._y = yPosition;\n    this._lastX = xPosition;\n    this._lastY = yPosition;\n  }\n\n  get debugData() {\n    return this._debugData;\n  }\n\n  get isShooting() {\n    return this._shootingPower > 0;\n  }\n\n  get shootingPower() {\n    return this._shootingPower;\n  }\n\n  handleShoot() {\n    var value = this._shootingPower;\n    this._shootingPower = 0;\n    return value;\n  }\n\n  get isReloading() {\n    return this._gunTimer > 0;\n  }\n\n  shoot(value) {\n    value = Math.max(0.1, Math.min(1, value));\n    if(!this.isReloading) {\n      this._gunTimer = Math.round(value*this._gunReloadTime);\n      this._shootingPower = value;\n    }\n  }\n\n  randomize() {\n    this._angle = Math.round(360*Math.random())-180;\n  }\n\n  init(settings) {\n    if(settings && settings.SKIN) {\n      this._skin = settings.SKIN;\n    }\n  }\n\n  simulationStep(collisionResolver) {\n    var self = this;\n\n    if(self._energy == 0) {\n      return;\n    }\n\n    if(self._hasBoost && self._boost > 0) {\n      self._boost--;\n    }\n\n    var oldX = self._x;\n    var oldY = self._y;\n\n    var maxSpeed = self._throttle * (self.hasBoost ? 4 : 2);\n    var accelerationFactor = (self.hasBoost ? 10 : 20);\n    self._actualThrottle += (maxSpeed - self._actualThrottle)/accelerationFactor;\n\n    var v = self._actualThrottle;\n    var rotation = self._angle*(Math.PI/180);\n    self._x += v*Math.cos(rotation);\n    self._y += v*Math.sin(rotation);\n    self._wallHit = false;\n    self._enemyHit = false;\n    var hitTest = !collisionResolver.checkTank(self);\n    if(hitTest) {\n      self._x = oldX;\n      self._y = oldY;\n      self._actualThrottle = 0;\n    }\n\n    self._angle += 2*self._turn;\n    self._radarAngle += 6*self._radarTurn;\n    self._gunAngle += 3*self._gunTurn;\n\n    self._angle = normalizeAngle(self._angle);\n    self._radarAngle = normalizeAngle(self._radarAngle);\n    self._gunAngle = normalizeAngle(self._gunAngle);\n    collisionResolver.updateTank(self);\n\n    self._enemySpot = null;\n    self._wallDistance = null;\n    self._targetingAlarmTimer = Math.max(0, self._targetingAlarmTimer-1);\n    collisionResolver.scanTanks(self);\n    collisionResolver.scanBullets(self);\n    collisionResolver.scanWalls(self);\n\n    if(self._gunTimer > 0) {\n      self._gunTimer--;\n    }\n\n    var enemyData = null;\n    var bulletsData = [];\n    while(self._bulletsSpot.length) {\n      var bullet = self._bulletsSpot.shift();\n      bulletsData.push({\n        id: bullet.id,\n        x: bullet.x,\n        y: bullet.y,\n        angle: bullet.angle,\n        speed: bullet.speed,\n        damage: bullet.damage\n      });\n    }\n\n    if(self._enemySpot) {\n      enemyData = {\n        id: self._enemySpot.id,\n        x: self._enemySpot.x,\n        y: self._enemySpot.y,\n        angle: self._enemySpot.angle,\n        speed: self._enemySpot.speed,\n        energy: self._enemySpot.energy,\n      };\n    }\n\n    var dx = self._x - self._lastX;\n    var dy = self._y - self._lastY;\n    self._speed = Math.sqrt(dx*dx + dy*dy);\n\n    self._lastX = self._x;\n    self._lastY = self._y;\n\n    self._state = {\n      x: self._x,\n      y: self._y,\n      angle: self._angle,\n      energy: self._energy,\n      boost: self._boost,\n      collisions: {\n        wall: self._wallHit,\n        enemy: self._enemyHit\n      },\n      radar: {\n        angle: self._radarAngle,\n        targetingAlarm: self.targetingAlarm,\n        wallDistance: self._wallDistance,\n        enemy: enemyData,\n        bullets: bulletsData\n      },\n      gun: {\n        angle: self._gunAngle,\n        reloading: self.isReloading\n      }\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/Tank.js","'use strict';\n\nmodule.exports = class Bullet {\n\n  constructor(owner, id, power) {\n    this._id = id;\n    this._owner = owner;\n    this._angle = owner.angle + owner.gunAngle;\n    while(this._angle > 180) this._angle -= 360;\n    while(this._angle < -180) this._angle += 360;\n    this._x = owner.x + owner.gunLength*Math.cos(this._angle*(Math.PI/180));\n    this._y = owner.y + owner.gunLength*Math.sin(this._angle*(Math.PI/180));\n    this._speed = 4;\n    this._power = power;\n    this._damage = Math.round(1000 * power + 300 * power * power) * 0.01;\n    this._exploded = false;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  get angle() {\n    return this._angle;\n  }\n\n  get speed() {\n    return this._speed;\n  }\n\n  get damage() {\n    return this._damage;\n  }\n\n  get power() {\n    return this._power;\n  }\n  get owner() {\n    return this._owner;\n  }\n\n  get exploded() {\n    return this._exploded;\n  }\n\n  onWallHit() {\n    this._exploded = true;\n  }\n\n  onEnemyHit(enemy) {\n    this._exploded = true;\n    enemy.onDamage(this._damage);\n  }\n\n  simulationStep() {\n    this._x += this._speed*Math.cos(this._angle*(Math.PI/180));\n    this._y += this._speed*Math.sin(this._angle*(Math.PI/180));\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/Bullet.js","'use strict';\n\nmodule.exports = class Battlefield {\n\n  constructor(width, height) {\n    this._width = null;\n    this._height = null;\n    this._startSlotList = [];\n    this._offsetX = Math.round(Math.random()*10000-5000);\n    this._offsetY = Math.round(Math.random()*10000-5000);\n  }\n\n  setSize(width, height) {\n    this._width = width-this.margin*2;\n    this._height = height-this.margin*2;\n\n    // generate list of start slots\n    this._startSlotList = [];\n    var slotSize = 90;\n    for(var x = this.minX + slotSize; x < this.maxX - slotSize; x += slotSize) {\n      for(var y = this.minY + slotSize; y < this.maxY - slotSize; y += slotSize) {\n        this._startSlotList.push({x: x, y: y});\n      }\n    }\n    // shuffle start slots\n    var currentIndex = this._startSlotList.length, temporaryValue, randomIndex;\n    while (0 !== currentIndex) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n      temporaryValue = this._startSlotList[currentIndex];\n      this._startSlotList[currentIndex] = this._startSlotList[randomIndex];\n      this._startSlotList[randomIndex] = temporaryValue;\n    }\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  get margin() {\n    return 25;\n  }\n\n  get minX() {\n    return this._offsetX + this.margin;\n  }\n\n  get minY() {\n    return this._offsetY + this.margin;\n  }\n\n  get maxX() {\n    return this._offsetX + this._width + this.margin;\n  }\n\n  get maxY() {\n    return this._offsetY + this._height + this.margin;\n  }\n\n  get offsetX() {\n    return this._offsetX;\n  }\n\n  get offsetY() {\n    return this._offsetY;\n  }\n\n  getStartSlot() {\n    if(this._startSlotList.length) {\n      return this._startSlotList.pop();\n    }\n    return null;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/Battlefield.js","'use strict';\n\nmodule.exports = class EventStore {\n\n  constructor() {\n    this._data = [];\n  }\n\n  add(index, event) {\n    if(!this._data[index]) {\n      this._data[index] = [];\n    }\n    this._data[index].push(event);\n  }\n\n  get(index) {\n    if(!this._data[index]) {\n      this._data[index] = [];\n    }\n    return this._data[index];\n  }\n\n  clear(index) {\n    this._data = [];  \n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/EventStore.js","'use strict';\n\nvar SAT = require('SAT');\n\nmodule.exports = class CollisionResolver {\n\n  constructor() {\n    this._wallList = [];\n    this._tankMap = [];\n    this._bulletMap = [];\n    this._radarBeamMap = [];\n    this._battlefield = null;\n  }\n\n  updateBattlefield(battlefield) {\n    this._battlefield = {\n      minX: battlefield.minX,\n      minY: battlefield.minY,\n      maxX: battlefield.maxX,\n      maxY: battlefield.maxY\n    };\n    var wall;\n    wall = (new SAT.Box(new SAT.Vector(battlefield.minX-10, battlefield.minY), 10, battlefield.height)).toPolygon();\n    this._wallList.push(wall);\n    wall = (new SAT.Box(new SAT.Vector(battlefield.minX, battlefield.minY-10), battlefield.width, 10)).toPolygon();\n    this._wallList.push(wall);\n    wall = (new SAT.Box(new SAT.Vector(battlefield.maxX, battlefield.minY), 10, battlefield.height)).toPolygon();\n    this._wallList.push(wall);\n    wall = (new SAT.Box(new SAT.Vector(battlefield.minX, battlefield.maxY), battlefield.width, 10)).toPolygon();\n    this._wallList.push(wall);\n  }\n\n  updateTank(tank) {\n    var tankShape =  this._getTankShape(tank);\n    tankShape.pos.x = tank.x;\n    tankShape.pos.y = tank.y;\n  }\n\n  removeBullet(bullet) {\n    this._bulletMap[bullet.id] = null;\n  }\n\n\n  removeTank(tank) {\n    this._tankMap[tank.id] = null;\n    this._radarBeamMap[tank.id] = null;\n  }\n\n  hitTestBullet(bullet) {\n    var bulletShape =  this._getBulletShape(bullet);\n    var tankShape =  bullet.owner.energy ? this._getTankShape(bullet.owner) : null;\n\n    bulletShape.pos.x = bullet.x;\n    bulletShape.pos.y = bullet.y;\n\n    var i;\n    var hitTest;\n    var wall;\n    for(i in this._wallList ) {\n      wall = this._wallList[i];\n      hitTest = SAT.testCirclePolygon(bulletShape, wall);\n      if(hitTest) {\n        bullet.onWallHit();\n        return true;\n      }\n    }\n    var enemyShape;\n    for(i in this._tankMap ) {\n      enemyShape = this._tankMap[i];\n      if(!enemyShape) continue;\n      if(enemyShape == tankShape) {\n        continue;\n      }\n      hitTest = SAT.testCircleCircle(bulletShape, enemyShape);\n      if(hitTest) {\n        var energyBefore = enemyShape.tank.energy;\n        bullet.onEnemyHit(enemyShape.tank);\n        bullet.owner.onEnemyHitScore(energyBefore - enemyShape.tank.energy);\n        if(enemyShape.tank.energy == 0) {\n          bullet.owner.onEnemyKillScore();\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  checkTank(tank) {\n    var tankShape =  this._getTankShape(tank);\n\n    tankShape.pos.x = tank.x;\n    tankShape.pos.y = tank.y;\n\n    var i;\n    var hitTest;\n    var wall;\n    for(i in this._wallList ) {\n      wall = this._wallList[i];\n      hitTest = SAT.testCirclePolygon(tankShape, wall);\n      if(hitTest) {\n        tank.onWallHit();\n        return false;\n      }\n    }\n    var enemyShape;\n    for(i in this._tankMap ) {\n      enemyShape = this._tankMap[i];\n      if(!enemyShape) continue;\n      if(enemyShape == tankShape) {\n        continue;\n      }\n      hitTest = SAT.testCircleCircle(tankShape, enemyShape);\n      if(hitTest) {\n        var energyBefore = enemyShape.tank.energy;\n        tank.onEnemyHit();\n        enemyShape.tank.onBeingRam(tank.speed);\n        tank.onEnemyHitScore(energyBefore - enemyShape.tank.energy);\n        return false;\n      }\n    }\n    return true;\n  }\n\n  scanTanks(tank) {\n    var radarBeamShape =  this._getRadarBeamShape(tank);\n    var tankShape =  this._getTankShape(tank);\n    radarBeamShape.setAngle((tank.angle + tank.radarAngle)*Math.PI/180);\n    radarBeamShape.pos.x = tank.x;\n    radarBeamShape.pos.y = tank.y;\n\n    var i;\n    var enemyShape;\n    var hitTest;\n    var enemies = [];\n\n    for(i in this._tankMap ) {\n      enemyShape = this._tankMap[i];\n      if(!enemyShape) continue;\n      if(enemyShape == tankShape) {\n        continue;\n      }\n      hitTest = SAT.testPolygonCircle(radarBeamShape, enemyShape);\n      if(hitTest) {\n        enemies.push(enemyShape.tank);\n      }\n    }\n    if(enemies.length == 0) {\n      return false;\n    }\n    var closestEnemy = null;\n    var closestDistance = tank.radarRange;\n    var d, dx, dy;\n    for(i in enemies ) {\n      dx = enemies[i].x - tank.x;\n      dy = enemies[i].y - tank.y;\n      d = Math.sqrt(dx*dx + dy*dy);\n      if(!closestEnemy || d < closestDistance) {\n        closestEnemy = enemies[i];\n        closestDistance = d;\n      }\n    }\n    tank.onEnemySpot(closestEnemy);\n    closestEnemy.onTargetingAlarm();\n\n    return true;\n  }\n\n  scanBullets(tank) {\n    var radarBeamShape =  this._getRadarBeamShape(tank);\n    var tankShape =  this._getTankShape(tank);\n    radarBeamShape.setAngle((tank.angle + tank.radarAngle)*Math.PI/180);\n    radarBeamShape.pos.x = tank.x;\n    radarBeamShape.pos.y = tank.y;\n\n    var i;\n    var hitTest;\n    var bulletShape;\n    var spottedBullets = false;\n\n    for(i in this._bulletMap) {\n      bulletShape = this._bulletMap[i];\n      if(!bulletShape) continue;\n      if(bulletShape.bullet.owner == tank) continue;\n      hitTest = SAT.testCirclePolygon(bulletShape, radarBeamShape);\n      if(hitTest) {\n        tank.onBulletSpot(bulletShape.bullet);\n        spottedBullets = true;\n      }\n    }\n\n    return spottedBullets;\n  }\n\n\n  scanWalls(tank) {\n    var distance = this._getWallDistance(tank);\n    if(distance < tank.radarRange) {\n      tank.onWallSpot(distance);\n      return true;\n    }\n    return false;\n  }\n\n  _getWallDistance(tank) {\n    var angle = tank.angle + tank.radarAngle;\n    while(angle > 180) angle -= 360;\n    while(angle < -180) angle += 360;\n\n    var distanceNorth = tank.y - this._battlefield.minY;\n    var distanceSouth = this._battlefield.maxY - tank.y;\n    var distanceWest = tank.x - this._battlefield.minX;\n    var distanceEast = this._battlefield.maxX - tank.x;\n\n    if(angle == -180 || angle == 180) { // W\n      return distanceWest;\n    } else if(angle == 0) { // E\n      return distanceEast;\n    } else if(angle == -90) { // N\n      return distanceNorth;\n    } else if(angle == 90) { // S\n      return  distanceSouth;\n    }\n\n    var d1, d2;\n\n    if(angle > -180 && angle < -90) { // NW\n      d1 = distanceWest / Math.cos((angle+180)*(Math.PI/180));\n      d2 = distanceNorth / Math.sin((angle+180)*(Math.PI/180));\n    } else if(angle > -90 && angle < 0) { // NE\n      d1 = distanceEast / Math.cos((-angle)*(Math.PI/180));\n      d2 = distanceNorth / Math.sin((-angle)*(Math.PI/180));\n    } else if(angle > 0 && angle < 90) { // SE\n      d1 = distanceEast / Math.cos((angle)*(Math.PI/180));\n      d2 = distanceSouth / Math.sin((angle)*(Math.PI/180));\n    } else { // SW\n      d1 = distanceWest / Math.cos((180-angle)*(Math.PI/180));\n      d2 = distanceSouth / Math.sin((180-angle)*(Math.PI/180));\n    }\n\n    return Math.min(d1, d2);\n  }\n\n  _getTankShape(tank) {\n    if(!this._tankMap[tank.id]) {\n      if(tank.energy == 0) {\n        throw \"Cannot create shape for destroyed tank\";\n      }\n      var shape = new SAT.Circle(new SAT.Vector(tank.x,tank.y), 18);\n      this._tankMap[tank.id] = shape;\n      shape.tank = tank;\n    }\n    return this._tankMap[tank.id];\n  }\n\n  _getBulletShape(bullet) {\n    if(!this._bulletMap[bullet.id]) {\n      if(bullet.exploded) {\n        throw \"Cannot create shape for exploded bullet\";\n      }\n      var shape = new SAT.Circle(new SAT.Vector(bullet.x,bullet.y), 3);\n      this._bulletMap[bullet.id] = shape;\n      shape.bullet = bullet;\n    }\n    return this._bulletMap[bullet.id];\n  }\n\n  _getRadarBeamShape(tank) {\n    if(!this._radarBeamMap[tank.id]) {\n      if(tank.energy == 0) {\n        throw \"Cannot create radar beam shape for destroyed tank\";\n      }\n      var width = tank.radarRange * Math.tan(tank.radarFocal*(Math.PI/180))/2;\n      var shape = new SAT.Polygon(new SAT.Vector(tank.x, tank.y), [\n        new SAT.Vector(0, 3),\n        new SAT.Vector(0, -3),\n        new SAT.Vector(tank.radarRange,-width),\n        new SAT.Vector(tank.radarRange,width)\n      ]);\n\n      this._radarBeamMap[tank.id] = shape;\n      shape.tank = tank;\n    }\n    return this._radarBeamMap[tank.id];\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/CollisionResolver.js","// Version 0.6.0 - Copyright 2012 - 2016 -  Jim Riecken <jimr@jimr.ca>\n//\n// Released under the MIT License - https://github.com/jriecken/sat-js\n//\n// A simple library for determining intersections of circles and\n// polygons using the Separating Axis Theorem.\n/** @preserve SAT.js - Version 0.6.0 - Copyright 2012 - 2016 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */\n\n/*global define: false, module: false*/\n/*jshint shadow:true, sub:true, forin:true, noarg:true, noempty:true, \n  eqeqeq:true, bitwise:true, strict:true, undef:true, \n  curly:true, browser:true */\n\n// Create a UMD wrapper for SAT. Works in:\n//\n//  - Plain browser via global SAT variable\n//  - AMD loader (like require.js)\n//  - Node.js\n//\n// The quoted properties all over the place are used so that the Closure Compiler\n// does not mangle the exposed API in advanced mode.\n/**\n * @param {*} root - The global scope\n * @param {Function} factory - Factory that creates SAT module\n */\n(function (root, factory) {\n  \"use strict\";\n  if (typeof define === 'function' && define['amd']) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module['exports'] = factory();\n  } else {\n    root['SAT'] = factory();\n  }\n}(this, function () {\n  \"use strict\";\n\n  var SAT = {};\n\n  //\n  // ## Vector\n  //\n  // Represents a vector in two dimensions with `x` and `y` properties.\n\n\n  // Create a new Vector, optionally passing in the `x` and `y` coordinates. If\n  // a coordinate is not specified, it will be set to `0`\n  /** \n   * @param {?number=} x The x position.\n   * @param {?number=} y The y position.\n   * @constructor\n   */\n  function Vector(x, y) {\n    this['x'] = x || 0;\n    this['y'] = y || 0;\n  }\n  SAT['Vector'] = Vector;\n  // Alias `Vector` as `V`\n  SAT['V'] = Vector;\n\n\n  // Copy the values of another Vector into this one.\n  /**\n   * @param {Vector} other The other Vector.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['copy'] = Vector.prototype.copy = function(other) {\n    this['x'] = other['x'];\n    this['y'] = other['y'];\n    return this;\n  };\n\n  // Create a new vector with the same coordinates as this on.\n  /**\n   * @return {Vector} The new cloned vector\n   */\n  Vector.prototype['clone'] = Vector.prototype.clone = function() {\n    return new Vector(this['x'], this['y']);\n  };\n\n  // Change this vector to be perpendicular to what it was before. (Effectively\n  // roatates it 90 degrees in a clockwise direction)\n  /**\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['perp'] = Vector.prototype.perp = function() {\n    var x = this['x'];\n    this['x'] = this['y'];\n    this['y'] = -x;\n    return this;\n  };\n\n  // Rotate this vector (counter-clockwise) by the specified angle (in radians).\n  /**\n   * @param {number} angle The angle to rotate (in radians)\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['rotate'] = Vector.prototype.rotate = function (angle) {\n    var x = this['x'];\n    var y = this['y'];\n    this['x'] = x * Math.cos(angle) - y * Math.sin(angle);\n    this['y'] = x * Math.sin(angle) + y * Math.cos(angle);\n    return this;\n  };\n\n  // Reverse this vector.\n  /**\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['reverse'] = Vector.prototype.reverse = function() {\n    this['x'] = -this['x'];\n    this['y'] = -this['y'];\n    return this;\n  };\n  \n\n  // Normalize this vector.  (make it have length of `1`)\n  /**\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['normalize'] = Vector.prototype.normalize = function() {\n    var d = this.len();\n    if(d > 0) {\n      this['x'] = this['x'] / d;\n      this['y'] = this['y'] / d;\n    }\n    return this;\n  };\n  \n  // Add another vector to this one.\n  /**\n   * @param {Vector} other The other Vector.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['add'] = Vector.prototype.add = function(other) {\n    this['x'] += other['x'];\n    this['y'] += other['y'];\n    return this;\n  };\n  \n  // Subtract another vector from this one.\n  /**\n   * @param {Vector} other The other Vector.\n   * @return {Vector} This for chaiing.\n   */\n  Vector.prototype['sub'] = Vector.prototype.sub = function(other) {\n    this['x'] -= other['x'];\n    this['y'] -= other['y'];\n    return this;\n  };\n  \n  // Scale this vector. An independant scaling factor can be provided\n  // for each axis, or a single scaling factor that will scale both `x` and `y`.\n  /**\n   * @param {number} x The scaling factor in the x direction.\n   * @param {?number=} y The scaling factor in the y direction.  If this\n   *   is not specified, the x scaling factor will be used.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['scale'] = Vector.prototype.scale = function(x,y) {\n    this['x'] *= x;\n    this['y'] *= y || x;\n    return this; \n  };\n  \n  // Project this vector on to another vector.\n  /**\n   * @param {Vector} other The vector to project onto.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['project'] = Vector.prototype.project = function(other) {\n    var amt = this.dot(other) / other.len2();\n    this['x'] = amt * other['x'];\n    this['y'] = amt * other['y'];\n    return this;\n  };\n  \n  // Project this vector onto a vector of unit length. This is slightly more efficient\n  // than `project` when dealing with unit vectors.\n  /**\n   * @param {Vector} other The unit vector to project onto.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['projectN'] = Vector.prototype.projectN = function(other) {\n    var amt = this.dot(other);\n    this['x'] = amt * other['x'];\n    this['y'] = amt * other['y'];\n    return this;\n  };\n  \n  // Reflect this vector on an arbitrary axis.\n  /**\n   * @param {Vector} axis The vector representing the axis.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['reflect'] = Vector.prototype.reflect = function(axis) {\n    var x = this['x'];\n    var y = this['y'];\n    this.project(axis).scale(2);\n    this['x'] -= x;\n    this['y'] -= y;\n    return this;\n  };\n  \n  // Reflect this vector on an arbitrary axis (represented by a unit vector). This is\n  // slightly more efficient than `reflect` when dealing with an axis that is a unit vector.\n  /**\n   * @param {Vector} axis The unit vector representing the axis.\n   * @return {Vector} This for chaining.\n   */\n  Vector.prototype['reflectN'] = Vector.prototype.reflectN = function(axis) {\n    var x = this['x'];\n    var y = this['y'];\n    this.projectN(axis).scale(2);\n    this['x'] -= x;\n    this['y'] -= y;\n    return this;\n  };\n  \n  // Get the dot product of this vector and another.\n  /**\n   * @param {Vector}  other The vector to dot this one against.\n   * @return {number} The dot product.\n   */\n  Vector.prototype['dot'] = Vector.prototype.dot = function(other) {\n    return this['x'] * other['x'] + this['y'] * other['y'];\n  };\n  \n  // Get the squared length of this vector.\n  /**\n   * @return {number} The length^2 of this vector.\n   */\n  Vector.prototype['len2'] = Vector.prototype.len2 = function() {\n    return this.dot(this);\n  };\n  \n  // Get the length of this vector.\n  /**\n   * @return {number} The length of this vector.\n   */\n  Vector.prototype['len'] = Vector.prototype.len = function() {\n    return Math.sqrt(this.len2());\n  };\n  \n  // ## Circle\n  //\n  // Represents a circle with a position and a radius.\n\n  // Create a new circle, optionally passing in a position and/or radius. If no position\n  // is given, the circle will be at `(0,0)`. If no radius is provided, the circle will\n  // have a radius of `0`.\n  /**\n   * @param {Vector=} pos A vector representing the position of the center of the circle\n   * @param {?number=} r The radius of the circle\n   * @constructor\n   */\n  function Circle(pos, r) {\n    this['pos'] = pos || new Vector();\n    this['r'] = r || 0;\n  }\n  SAT['Circle'] = Circle;\n  \n  // Compute the axis-aligned bounding box (AABB) of this Circle.\n  //\n  // Note: Returns a _new_ `Polygon` each time you call this.\n  /**\n   * @return {Polygon} The AABB\n   */\n  Circle.prototype['getAABB'] = Circle.prototype.getAABB = function() {\n    var r = this['r'];\n    var corner = this[\"pos\"].clone().sub(new Vector(r, r));\n    return new Box(corner, r*2, r*2).toPolygon();\n  };\n\n  // ## Polygon\n  //\n  // Represents a *convex* polygon with any number of points (specified in counter-clockwise order)\n  //\n  // Note: Do _not_ manually change the `points`, `angle`, or `offset` properties. Use the\n  // provided setters. Otherwise the calculated properties will not be updated correctly.\n  //\n  // `pos` can be changed directly.\n\n  // Create a new polygon, passing in a position vector, and an array of points (represented\n  // by vectors relative to the position vector). If no position is passed in, the position\n  // of the polygon will be `(0,0)`.\n  /**\n   * @param {Vector=} pos A vector representing the origin of the polygon. (all other\n   *   points are relative to this one)\n   * @param {Array.<Vector>=} points An array of vectors representing the points in the polygon,\n   *   in counter-clockwise order.\n   * @constructor\n   */\n  function Polygon(pos, points) {\n    this['pos'] = pos || new Vector();\n    this['angle'] = 0;\n    this['offset'] = new Vector();\n    this.setPoints(points || []);\n  }\n  SAT['Polygon'] = Polygon;\n  \n  // Set the points of the polygon.\n  //\n  // Note: The points are counter-clockwise *with respect to the coordinate system*.\n  // If you directly draw the points on a screen that has the origin at the top-left corner\n  // it will _appear_ visually that the points are being specified clockwise. This is just\n  // because of the inversion of the Y-axis when being displayed.\n  /**\n   * @param {Array.<Vector>=} points An array of vectors representing the points in the polygon,\n   *   in counter-clockwise order.\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype['setPoints'] = Polygon.prototype.setPoints = function(points) {\n    // Only re-allocate if this is a new polygon or the number of points has changed.\n    var lengthChanged = !this['points'] || this['points'].length !== points.length;\n    if (lengthChanged) {\n      var i;\n      var calcPoints = this['calcPoints'] = [];\n      var edges = this['edges'] = [];\n      var normals = this['normals'] = [];\n      // Allocate the vector arrays for the calculated properties\n      for (i = 0; i < points.length; i++) {\n        calcPoints.push(new Vector());\n        edges.push(new Vector());\n        normals.push(new Vector());\n      }\n    }\n    this['points'] = points;\n    this._recalc();\n    return this;\n  };\n\n  // Set the current rotation angle of the polygon.\n  /**\n   * @param {number} angle The current rotation angle (in radians).\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype['setAngle'] = Polygon.prototype.setAngle = function(angle) {\n    this['angle'] = angle;\n    this._recalc();\n    return this;\n  };\n\n  // Set the current offset to apply to the `points` before applying the `angle` rotation.\n  /**\n   * @param {Vector} offset The new offset vector.\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype['setOffset'] = Polygon.prototype.setOffset = function(offset) {\n    this['offset'] = offset;\n    this._recalc();\n    return this;\n  };\n\n  // Rotates this polygon counter-clockwise around the origin of *its local coordinate system* (i.e. `pos`).\n  //\n  // Note: This changes the **original** points (so any `angle` will be applied on top of this rotation).\n  /**\n   * @param {number} angle The angle to rotate (in radians)\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype['rotate'] = Polygon.prototype.rotate = function(angle) {\n    var points = this['points'];\n    var len = points.length;\n    for (var i = 0; i < len; i++) {\n      points[i].rotate(angle);\n    }\n    this._recalc();\n    return this;\n  };\n\n  // Translates the points of this polygon by a specified amount relative to the origin of *its own coordinate\n  // system* (i.e. `pos`).\n  //\n  // This is most useful to change the \"center point\" of a polygon. If you just want to move the whole polygon, change\n  // the coordinates of `pos`.\n  //\n  // Note: This changes the **original** points (so any `offset` will be applied on top of this translation)\n  /**\n   * @param {number} x The horizontal amount to translate.\n   * @param {number} y The vertical amount to translate.\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype['translate'] = Polygon.prototype.translate = function (x, y) {\n    var points = this['points'];\n    var len = points.length;\n    for (var i = 0; i < len; i++) {\n      points[i].x += x;\n      points[i].y += y;\n    }\n    this._recalc();\n    return this;\n  };\n\n\n  // Computes the calculated collision polygon. Applies the `angle` and `offset` to the original points then recalculates the\n  // edges and normals of the collision polygon.\n  /**\n   * @return {Polygon} This for chaining.\n   */\n  Polygon.prototype._recalc = function() {\n    // Calculated points - this is what is used for underlying collisions and takes into account\n    // the angle/offset set on the polygon.\n    var calcPoints = this['calcPoints'];\n    // The edges here are the direction of the `n`th edge of the polygon, relative to\n    // the `n`th point. If you want to draw a given edge from the edge value, you must\n    // first translate to the position of the starting point.\n    var edges = this['edges'];\n    // The normals here are the direction of the normal for the `n`th edge of the polygon, relative\n    // to the position of the `n`th point. If you want to draw an edge normal, you must first\n    // translate to the position of the starting point.\n    var normals = this['normals'];\n    // Copy the original points array and apply the offset/angle\n    var points = this['points'];\n    var offset = this['offset'];\n    var angle = this['angle'];\n    var len = points.length;\n    var i;\n    for (i = 0; i < len; i++) {\n      var calcPoint = calcPoints[i].copy(points[i]);\n      calcPoint.x += offset.x;\n      calcPoint.y += offset.y;\n      if (angle !== 0) {\n        calcPoint.rotate(angle);\n      }\n    }\n    // Calculate the edges/normals\n    for (i = 0; i < len; i++) {\n      var p1 = calcPoints[i];\n      var p2 = i < len - 1 ? calcPoints[i + 1] : calcPoints[0];\n      var e = edges[i].copy(p2).sub(p1);\n      normals[i].copy(e).perp().normalize();\n    }\n    return this;\n  };\n  \n  \n  // Compute the axis-aligned bounding box. Any current state\n  // (translations/rotations) will be applied before constructing the AABB.\n  //\n  // Note: Returns a _new_ `Polygon` each time you call this.\n  /**\n   * @return {Polygon} The AABB\n   */\n  Polygon.prototype[\"getAABB\"] = Polygon.prototype.getAABB = function() {\n    var points = this[\"calcPoints\"];\n    var len = points.length;\n    var xMin = points[0][\"x\"];\n    var yMin = points[0][\"y\"];\n    var xMax = points[0][\"x\"];\n    var yMax = points[0][\"y\"];\n    for (var i = 1; i < len; i++) {\n      var point = points[i];\n      if (point[\"x\"] < xMin) {\n        xMin = point[\"x\"];\n      }\n      else if (point[\"x\"] > xMax) {\n        xMax = point[\"x\"];\n      }\n      if (point[\"y\"] < yMin) {\n        yMin = point[\"y\"];\n      }\n      else if (point[\"y\"] > yMax) {\n        yMax = point[\"y\"];\n      }\n    }\n    return new Box(this[\"pos\"].clone().add(new Vector(xMin, yMin)), xMax - xMin, yMax - yMin).toPolygon();\n  };\n  \n\n  // ## Box\n  //\n  // Represents an axis-aligned box, with a width and height.\n\n\n  // Create a new box, with the specified position, width, and height. If no position\n  // is given, the position will be `(0,0)`. If no width or height are given, they will\n  // be set to `0`.\n  /**\n   * @param {Vector=} pos A vector representing the bottom-left of the box (i.e. the smallest x and smallest y value).\n   * @param {?number=} w The width of the box.\n   * @param {?number=} h The height of the box.\n   * @constructor\n   */\n  function Box(pos, w, h) {\n    this['pos'] = pos || new Vector();\n    this['w'] = w || 0;\n    this['h'] = h || 0;\n  }\n  SAT['Box'] = Box;\n\n  // Returns a polygon whose edges are the same as this box.\n  /**\n   * @return {Polygon} A new Polygon that represents this box.\n   */\n  Box.prototype['toPolygon'] = Box.prototype.toPolygon = function() {\n    var pos = this['pos'];\n    var w = this['w'];\n    var h = this['h'];\n    return new Polygon(new Vector(pos['x'], pos['y']), [\n     new Vector(), new Vector(w, 0), \n     new Vector(w,h), new Vector(0,h)\n    ]);\n  };\n  \n  // ## Response\n  //\n  // An object representing the result of an intersection. Contains:\n  //  - The two objects participating in the intersection\n  //  - The vector representing the minimum change necessary to extract the first object\n  //    from the second one (as well as a unit vector in that direction and the magnitude\n  //    of the overlap)\n  //  - Whether the first object is entirely inside the second, and vice versa.\n  /**\n   * @constructor\n   */  \n  function Response() {\n    this['a'] = null;\n    this['b'] = null;\n    this['overlapN'] = new Vector();\n    this['overlapV'] = new Vector();\n    this.clear();\n  }\n  SAT['Response'] = Response;\n\n  // Set some values of the response back to their defaults.  Call this between tests if\n  // you are going to reuse a single Response object for multiple intersection tests (recommented\n  // as it will avoid allcating extra memory)\n  /**\n   * @return {Response} This for chaining\n   */\n  Response.prototype['clear'] = Response.prototype.clear = function() {\n    this['aInB'] = true;\n    this['bInA'] = true;\n    this['overlap'] = Number.MAX_VALUE;\n    return this;\n  };\n\n  // ## Object Pools\n\n  // A pool of `Vector` objects that are used in calculations to avoid\n  // allocating memory.\n  /**\n   * @type {Array.<Vector>}\n   */\n  var T_VECTORS = [];\n  for (var i = 0; i < 10; i++) { T_VECTORS.push(new Vector()); }\n  \n  // A pool of arrays of numbers used in calculations to avoid allocating\n  // memory.\n  /**\n   * @type {Array.<Array.<number>>}\n   */\n  var T_ARRAYS = [];\n  for (var i = 0; i < 5; i++) { T_ARRAYS.push([]); }\n\n  // Temporary response used for polygon hit detection.\n  /**\n   * @type {Response}\n   */\n  var T_RESPONSE = new Response();\n\n  // Tiny \"point\" polygon used for polygon hit detection.\n  /**\n   * @type {Polygon}\n   */\n  var TEST_POINT = new Box(new Vector(), 0.000001, 0.000001).toPolygon();\n\n  // ## Helper Functions\n\n  // Flattens the specified array of points onto a unit vector axis,\n  // resulting in a one dimensional range of the minimum and\n  // maximum value on that axis.\n  /**\n   * @param {Array.<Vector>} points The points to flatten.\n   * @param {Vector} normal The unit vector axis to flatten on.\n   * @param {Array.<number>} result An array.  After calling this function,\n   *   result[0] will be the minimum value,\n   *   result[1] will be the maximum value.\n   */\n  function flattenPointsOn(points, normal, result) {\n    var min = Number.MAX_VALUE;\n    var max = -Number.MAX_VALUE;\n    var len = points.length;\n    for (var i = 0; i < len; i++ ) {\n      // The magnitude of the projection of the point onto the normal\n      var dot = points[i].dot(normal);\n      if (dot < min) { min = dot; }\n      if (dot > max) { max = dot; }\n    }\n    result[0] = min; result[1] = max;\n  }\n  \n  // Check whether two convex polygons are separated by the specified\n  // axis (must be a unit vector).\n  /**\n   * @param {Vector} aPos The position of the first polygon.\n   * @param {Vector} bPos The position of the second polygon.\n   * @param {Array.<Vector>} aPoints The points in the first polygon.\n   * @param {Array.<Vector>} bPoints The points in the second polygon.\n   * @param {Vector} axis The axis (unit sized) to test against.  The points of both polygons\n   *   will be projected onto this axis.\n   * @param {Response=} response A Response object (optional) which will be populated\n   *   if the axis is not a separating axis.\n   * @return {boolean} true if it is a separating axis, false otherwise.  If false,\n   *   and a response is passed in, information about how much overlap and\n   *   the direction of the overlap will be populated.\n   */\n  function isSeparatingAxis(aPos, bPos, aPoints, bPoints, axis, response) {\n    var rangeA = T_ARRAYS.pop();\n    var rangeB = T_ARRAYS.pop();\n    // The magnitude of the offset between the two polygons\n    var offsetV = T_VECTORS.pop().copy(bPos).sub(aPos);\n    var projectedOffset = offsetV.dot(axis);\n    // Project the polygons onto the axis.\n    flattenPointsOn(aPoints, axis, rangeA);\n    flattenPointsOn(bPoints, axis, rangeB);\n    // Move B's range to its position relative to A.\n    rangeB[0] += projectedOffset;\n    rangeB[1] += projectedOffset;\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\n      T_VECTORS.push(offsetV); \n      T_ARRAYS.push(rangeA); \n      T_ARRAYS.push(rangeB);\n      return true;\n    }\n    // This is not a separating axis. If we're calculating a response, calculate the overlap.\n    if (response) {\n      var overlap = 0;\n      // A starts further left than B\n      if (rangeA[0] < rangeB[0]) {\n        response['aInB'] = false;\n        // A ends before B does. We have to pull A out of B\n        if (rangeA[1] < rangeB[1]) { \n          overlap = rangeA[1] - rangeB[0];\n          response['bInA'] = false;\n        // B is fully inside A.  Pick the shortest way out.\n        } else {\n          var option1 = rangeA[1] - rangeB[0];\n          var option2 = rangeB[1] - rangeA[0];\n          overlap = option1 < option2 ? option1 : -option2;\n        }\n      // B starts further left than A\n      } else {\n        response['bInA'] = false;\n        // B ends before A ends. We have to push A out of B\n        if (rangeA[1] > rangeB[1]) { \n          overlap = rangeA[0] - rangeB[1];\n          response['aInB'] = false;\n        // A is fully inside B.  Pick the shortest way out.\n        } else {\n          var option1 = rangeA[1] - rangeB[0];\n          var option2 = rangeB[1] - rangeA[0];\n          overlap = option1 < option2 ? option1 : -option2;\n        }\n      }\n      // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\n      var absOverlap = Math.abs(overlap);\n      if (absOverlap < response['overlap']) {\n        response['overlap'] = absOverlap;\n        response['overlapN'].copy(axis);\n        if (overlap < 0) {\n          response['overlapN'].reverse();\n        }\n      }      \n    }\n    T_VECTORS.push(offsetV); \n    T_ARRAYS.push(rangeA); \n    T_ARRAYS.push(rangeB);\n    return false;\n  }\n  SAT['isSeparatingAxis'] = isSeparatingAxis;\n  \n  // Calculates which Voronoi region a point is on a line segment.\n  // It is assumed that both the line and the point are relative to `(0,0)`\n  //\n  //            |       (0)      |\n  //     (-1)  [S]--------------[E]  (1)\n  //            |       (0)      |\n  /**\n   * @param {Vector} line The line segment.\n   * @param {Vector} point The point.\n   * @return  {number} LEFT_VORONOI_REGION (-1) if it is the left region,\n   *          MIDDLE_VORONOI_REGION (0) if it is the middle region,\n   *          RIGHT_VORONOI_REGION (1) if it is the right region.\n   */\n  function voronoiRegion(line, point) {\n    var len2 = line.len2();\n    var dp = point.dot(line);\n    // If the point is beyond the start of the line, it is in the\n    // left voronoi region.\n    if (dp < 0) { return LEFT_VORONOI_REGION; }\n    // If the point is beyond the end of the line, it is in the\n    // right voronoi region.\n    else if (dp > len2) { return RIGHT_VORONOI_REGION; }\n    // Otherwise, it's in the middle one.\n    else { return MIDDLE_VORONOI_REGION; }\n  }\n  // Constants for Voronoi regions\n  /**\n   * @const\n   */\n  var LEFT_VORONOI_REGION = -1;\n  /**\n   * @const\n   */\n  var MIDDLE_VORONOI_REGION = 0;\n  /**\n   * @const\n   */\n  var RIGHT_VORONOI_REGION = 1;\n  \n  // ## Collision Tests\n\n  // Check if a point is inside a circle.\n  /**\n   * @param {Vector} p The point to test.\n   * @param {Circle} c The circle to test.\n   * @return {boolean} true if the point is inside the circle, false if it is not.\n   */\n  function pointInCircle(p, c) {\n    var differenceV = T_VECTORS.pop().copy(p).sub(c['pos']);\n    var radiusSq = c['r'] * c['r'];\n    var distanceSq = differenceV.len2();\n    T_VECTORS.push(differenceV);\n    // If the distance between is smaller than the radius then the point is inside the circle.\n    return distanceSq <= radiusSq;\n  }\n  SAT['pointInCircle'] = pointInCircle;\n\n  // Check if a point is inside a convex polygon.\n  /**\n   * @param {Vector} p The point to test.\n   * @param {Polygon} poly The polygon to test.\n   * @return {boolean} true if the point is inside the polygon, false if it is not.\n   */\n  function pointInPolygon(p, poly) {\n    TEST_POINT['pos'].copy(p);\n    T_RESPONSE.clear();\n    var result = testPolygonPolygon(TEST_POINT, poly, T_RESPONSE);\n    if (result) {\n      result = T_RESPONSE['aInB'];\n    }\n    return result;\n  }\n  SAT['pointInPolygon'] = pointInPolygon;\n\n  // Check if two circles collide.\n  /**\n   * @param {Circle} a The first circle.\n   * @param {Circle} b The second circle.\n   * @param {Response=} response Response object (optional) that will be populated if\n   *   the circles intersect.\n   * @return {boolean} true if the circles intersect, false if they don't. \n   */\n  function testCircleCircle(a, b, response) {\n    // Check if the distance between the centers of the two\n    // circles is greater than their combined radius.\n    var differenceV = T_VECTORS.pop().copy(b['pos']).sub(a['pos']);\n    var totalRadius = a['r'] + b['r'];\n    var totalRadiusSq = totalRadius * totalRadius;\n    var distanceSq = differenceV.len2();\n    // If the distance is bigger than the combined radius, they don't intersect.\n    if (distanceSq > totalRadiusSq) {\n      T_VECTORS.push(differenceV);\n      return false;\n    }\n    // They intersect.  If we're calculating a response, calculate the overlap.\n    if (response) { \n      var dist = Math.sqrt(distanceSq);\n      response['a'] = a;\n      response['b'] = b;\n      response['overlap'] = totalRadius - dist;\n      response['overlapN'].copy(differenceV.normalize());\n      response['overlapV'].copy(differenceV).scale(response['overlap']);\n      response['aInB']= a['r'] <= b['r'] && dist <= b['r'] - a['r'];\n      response['bInA'] = b['r'] <= a['r'] && dist <= a['r'] - b['r'];\n    }\n    T_VECTORS.push(differenceV);\n    return true;\n  }\n  SAT['testCircleCircle'] = testCircleCircle;\n  \n  // Check if a polygon and a circle collide.\n  /**\n   * @param {Polygon} polygon The polygon.\n   * @param {Circle} circle The circle.\n   * @param {Response=} response Response object (optional) that will be populated if\n   *   they interset.\n   * @return {boolean} true if they intersect, false if they don't.\n   */\n  function testPolygonCircle(polygon, circle, response) {\n    // Get the position of the circle relative to the polygon.\n    var circlePos = T_VECTORS.pop().copy(circle['pos']).sub(polygon['pos']);\n    var radius = circle['r'];\n    var radius2 = radius * radius;\n    var points = polygon['calcPoints'];\n    var len = points.length;\n    var edge = T_VECTORS.pop();\n    var point = T_VECTORS.pop();\n    \n    // For each edge in the polygon:\n    for (var i = 0; i < len; i++) {\n      var next = i === len - 1 ? 0 : i + 1;\n      var prev = i === 0 ? len - 1 : i - 1;\n      var overlap = 0;\n      var overlapN = null;\n      \n      // Get the edge.\n      edge.copy(polygon['edges'][i]);\n      // Calculate the center of the circle relative to the starting point of the edge.\n      point.copy(circlePos).sub(points[i]);\n      \n      // If the distance between the center of the circle and the point\n      // is bigger than the radius, the polygon is definitely not fully in\n      // the circle.\n      if (response && point.len2() > radius2) {\n        response['aInB'] = false;\n      }\n      \n      // Calculate which Voronoi region the center of the circle is in.\n      var region = voronoiRegion(edge, point);\n      // If it's the left region:\n      if (region === LEFT_VORONOI_REGION) {\n        // We need to make sure we're in the RIGHT_VORONOI_REGION of the previous edge.\n        edge.copy(polygon['edges'][prev]);\n        // Calculate the center of the circle relative the starting point of the previous edge\n        var point2 = T_VECTORS.pop().copy(circlePos).sub(points[prev]);\n        region = voronoiRegion(edge, point2);\n        if (region === RIGHT_VORONOI_REGION) {\n          // It's in the region we want.  Check if the circle intersects the point.\n          var dist = point.len();\n          if (dist > radius) {\n            // No intersection\n            T_VECTORS.push(circlePos); \n            T_VECTORS.push(edge);\n            T_VECTORS.push(point); \n            T_VECTORS.push(point2);\n            return false;\n          } else if (response) {\n            // It intersects, calculate the overlap.\n            response['bInA'] = false;\n            overlapN = point.normalize();\n            overlap = radius - dist;\n          }\n        }\n        T_VECTORS.push(point2);\n      // If it's the right region:\n      } else if (region === RIGHT_VORONOI_REGION) {\n        // We need to make sure we're in the left region on the next edge\n        edge.copy(polygon['edges'][next]);\n        // Calculate the center of the circle relative to the starting point of the next edge.\n        point.copy(circlePos).sub(points[next]);\n        region = voronoiRegion(edge, point);\n        if (region === LEFT_VORONOI_REGION) {\n          // It's in the region we want.  Check if the circle intersects the point.\n          var dist = point.len();\n          if (dist > radius) {\n            // No intersection\n            T_VECTORS.push(circlePos); \n            T_VECTORS.push(edge); \n            T_VECTORS.push(point);\n            return false;              \n          } else if (response) {\n            // It intersects, calculate the overlap.\n            response['bInA'] = false;\n            overlapN = point.normalize();\n            overlap = radius - dist;\n          }\n        }\n      // Otherwise, it's the middle region:\n      } else {\n        // Need to check if the circle is intersecting the edge,\n        // Change the edge into its \"edge normal\".\n        var normal = edge.perp().normalize();\n        // Find the perpendicular distance between the center of the \n        // circle and the edge.\n        var dist = point.dot(normal);\n        var distAbs = Math.abs(dist);\n        // If the circle is on the outside of the edge, there is no intersection.\n        if (dist > 0 && distAbs > radius) {\n          // No intersection\n          T_VECTORS.push(circlePos); \n          T_VECTORS.push(normal); \n          T_VECTORS.push(point);\n          return false;\n        } else if (response) {\n          // It intersects, calculate the overlap.\n          overlapN = normal;\n          overlap = radius - dist;\n          // If the center of the circle is on the outside of the edge, or part of the\n          // circle is on the outside, the circle is not fully inside the polygon.\n          if (dist >= 0 || overlap < 2 * radius) {\n            response['bInA'] = false;\n          }\n        }\n      }\n      \n      // If this is the smallest overlap we've seen, keep it. \n      // (overlapN may be null if the circle was in the wrong Voronoi region).\n      if (overlapN && response && Math.abs(overlap) < Math.abs(response['overlap'])) {\n        response['overlap'] = overlap;\n        response['overlapN'].copy(overlapN);\n      }\n    }\n    \n    // Calculate the final overlap vector - based on the smallest overlap.\n    if (response) {\n      response['a'] = polygon;\n      response['b'] = circle;\n      response['overlapV'].copy(response['overlapN']).scale(response['overlap']);\n    }\n    T_VECTORS.push(circlePos); \n    T_VECTORS.push(edge); \n    T_VECTORS.push(point);\n    return true;\n  }\n  SAT['testPolygonCircle'] = testPolygonCircle;\n  \n  // Check if a circle and a polygon collide.\n  //\n  // **NOTE:** This is slightly less efficient than polygonCircle as it just\n  // runs polygonCircle and reverses everything at the end.\n  /**\n   * @param {Circle} circle The circle.\n   * @param {Polygon} polygon The polygon.\n   * @param {Response=} response Response object (optional) that will be populated if\n   *   they interset.\n   * @return {boolean} true if they intersect, false if they don't.\n   */\n  function testCirclePolygon(circle, polygon, response) {\n    // Test the polygon against the circle.\n    var result = testPolygonCircle(polygon, circle, response);\n    if (result && response) {\n      // Swap A and B in the response.\n      var a = response['a'];\n      var aInB = response['aInB'];\n      response['overlapN'].reverse();\n      response['overlapV'].reverse();\n      response['a'] = response['b'];\n      response['b'] = a;\n      response['aInB'] = response['bInA'];\n      response['bInA'] = aInB;\n    }\n    return result;\n  }\n  SAT['testCirclePolygon'] = testCirclePolygon;\n  \n  // Checks whether polygons collide.\n  /**\n   * @param {Polygon} a The first polygon.\n   * @param {Polygon} b The second polygon.\n   * @param {Response=} response Response object (optional) that will be populated if\n   *   they interset.\n   * @return {boolean} true if they intersect, false if they don't.\n   */\n  function testPolygonPolygon(a, b, response) {\n    var aPoints = a['calcPoints'];\n    var aLen = aPoints.length;\n    var bPoints = b['calcPoints'];\n    var bLen = bPoints.length;\n    // If any of the edge normals of A is a separating axis, no intersection.\n    for (var i = 0; i < aLen; i++) {\n      if (isSeparatingAxis(a['pos'], b['pos'], aPoints, bPoints, a['normals'][i], response)) {\n        return false;\n      }\n    }\n    // If any of the edge normals of B is a separating axis, no intersection.\n    for (var i = 0;i < bLen; i++) {\n      if (isSeparatingAxis(a['pos'], b['pos'], aPoints, bPoints, b['normals'][i], response)) {\n        return false;\n      }\n    }\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\n    // final overlap vector.\n    if (response) {\n      response['a'] = a;\n      response['b'] = b;\n      response['overlapV'].copy(response['overlapN']).scale(response['overlap']);\n    }\n    return true;\n  }\n  SAT['testPolygonPolygon'] = testPolygonPolygon;\n\n  return SAT;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/SAT/SAT.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 9\n// module chunks = 0","'use strict';\n\nmodule.exports = class AiWrapper {\n\n  constructor(tank) {\n    this._tank = tank;\n    this._aiWorker = null;\n    this._aiProcessingStart = 0;\n    this._aiProcessingCheckInterval = null;\n    this._aiProcessingResolveCallback = null;\n    this._aiProcessingRejectCallback = null;\n    this._slowAiChances = 10;\n    this._onActivationCallback = [];\n    this._onDectivationCallback = [];\n    this._aiProcessingTimeLimit = 3000;\n\n    this._controlData = {\n      THROTTLE: 0,\n      BOOST: 0,\n      TURN: 0,\n      RADAR_TURN: 0,\n      GUN_TURN: 0,\n      SHOOT: 0,\n      DEBUG: {}\n    };\n  }\n\n  setProcessingLimit(v) {\n    this._aiProcessingTimeLimit = v;\n  }\n\n  get tank() {\n    return this._tank;\n  }\n\n  get worker() {\n    return this._aiWorker;\n  }\n\n  onActivation(callback) {\n    this._onActivationCallback.push(callback);\n  }\n\n  onDectivation(callback) {\n    this._onDeactivationCallback.push(callback);\n  }\n\n  activate(seed) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n\n      self._aiWorker = self._createWorker(\"js/tanks/\" + self._tank.name + \".tank.js\");\n      self._aiWorker.onerror = function(err) {\n        console.log(err);\n        if(self._aiProcessingRejectCallback) {\n          self._aiProcessingRejectCallback({\n            message: \"Web Worker of '\" + self._tank.fullName + \"' returned an error: \" + (err.message ? err.message : 'unknown'),\n            performanceIssues: false,\n            tankName: self._tank.name,\n            tankId: self._tank.id\n          });\n          self._aiProcessingResolveCallback = null;\n          self._aiProcessingRejectCallback = null;\n        }\n      };\n\n      if(self._aiProcessingCheckInterval) {\n        clearInterval(self._aiProcessingCheckInterval);\n        self._aiProcessingCheckInterval = null;\n      }\n\n      self._aiProcessingCheckInterval = setInterval(function() {\n        if(self._aiProcessingRejectCallback) {\n          var now = (new Date()).getTime();\n          var dt = now - self._aiProcessingStart;\n          if(dt > self._aiProcessingTimeLimit) {\n            clearInterval(self._aiProcessingCheckInterval);\n            self._aiProcessingCheckInterval = null;\n            self._aiProcessingRejectCallback({\n              message: \"Simulation cannot be continued because \" + self._tank.name + \" #\" + self._tank.id + \" does not respond\",\n              performanceIssues: true,\n              tankName: self._tank.name,\n              tankId: self._tank.id\n            });\n          }\n        }\n      }, Math.max(50, Math.round(self._aiProcessingTimeLimit/2)));\n\n      self._aiWorker.onmessage = function (commandEvent) {\n\n        var value = commandEvent.data;\n\n        if(self._aiProcessingResolveCallback) {\n          if(value.type == 'init') {\n            self._configureTank(value.settings ? value.settings : {});\n            for(var i=0; i < self._onActivationCallback.length; i++) self._onActivationCallback[i].bind(self)();\n          } else {\n            self._controlTank(value);\n          }\n\n          var now = (new Date()).getTime();\n          var dt = now - self._aiProcessingStart;\n          if(dt > 50 && value.type != 'init') {\n            self._slowAiChances--;\n            console.warn(\"Execution of AI for tank \" + self._tank.name + \" #\" + self._tank.id + \" takes too long. If problem repeats, AI will be terminated.\");\n            if(self._slowAiChances <= 0) {\n              self._aiProcessingRejectCallback({\n                message: \"Simulation cannot be continued because \" + self._tank.name + \" #\" + self._tank.id + \" has performance issues\",\n                performanceIssues: true,\n                tankName: self._tank.name,\n                tankId: self._tank.id\n              });\n              self._aiProcessingResolveCallback = null;\n              self._aiProcessingRejectCallback = null;\n              return;\n            }\n          }\n\n          self._aiProcessingResolveCallback();\n          self._aiProcessingResolveCallback = null;\n          self._aiProcessingRejectCallback = null;\n        }\n\n      };\n      self._aiProcessingStart = (new Date()).getTime();\n      self._aiProcessingResolveCallback = resolve;\n      self._aiProcessingRejectCallback = reject;\n      self._aiWorker.postMessage({\n        command: 'init',\n        seed: seed + \":\" + self._tank.id,\n        settings: {\n          SKIN: 'zebra'\n        }\n      });\n    });\n  }\n\n  deactivate() {\n    if(this._aiWorker) {\n      this._aiWorker.terminate();\n      this._aiWorker = null;\n    }\n\n    if(this._aiProcessingCheckInterval) {\n      clearInterval(this._aiProcessingCheckInterval);\n      this._aiProcessingCheckInterval = null;\n    }\n    for(var i=0; i < this._onDectivationCallback.length; i++) this._onDectivationCallback[i].bind(this)();\n  }\n\n  simulationStep() {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if(self._aiWorker && self._tank.energy == 0) {\n        self._aiWorker.terminate();\n        self._aiWorker = null;\n        resolve();\n        return;\n      }\n\n      self._aiProcessingStart = (new Date()).getTime();\n      self._aiProcessingResolveCallback = resolve;\n      self._aiProcessingRejectCallback = reject;\n      self._aiWorker.postMessage({\n        command: 'update',\n        state: self._tank.state,\n        control: self._controlData\n      });\n    });\n  }\n  _configureTank(input) {\n    var settings = {};\n\n    var skinList = ['zebra', 'forest', 'black', 'tiger', 'desert', 'lava', 'ocean'];\n    if(skinList.indexOf(input.SKIN) != -1) {\n      settings.SKIN = input.SKIN;\n    }\n    this._tank.init(settings);\n  }\n\n  _controlTank(value) {\n    var self = this;\n    self._controlData.THROTTLE = Number(value.THROTTLE);\n    self._controlData.TURN = Number(value.TURN);\n    self._controlData.GUN_TURN = Number(value.GUN_TURN);\n    self._controlData.RADAR_TURN = Number(value.RADAR_TURN);\n    self._controlData.SHOOT = Number(value.SHOOT);\n    self._controlData.DEBUG = value.DEBUG;\n    self._controlData.BOOST = value.BOOST ? 1 : 0;\n\n    self._controlData.THROTTLE = isNaN(self._controlData.THROTTLE) ? 0 : self._controlData.THROTTLE;\n    self._controlData.TURN = isNaN(self._controlData.TURN) ? 0 : self._controlData.TURN;\n    self._controlData.GUN_TURN = isNaN(self._controlData.GUN_TURN) ? 0 : self._controlData.GUN_TURN;\n    self._controlData.RADAR_TURN = isNaN(self._controlData.RADAR_TURN) ? 0 : self._controlData.RADAR_TURN;\n    self._controlData.SHOOT = isNaN(self._controlData.SHOOT) ? 0 : self._controlData.SHOOT;\n\n    self._controlData.THROTTLE = Math.min(1, Math.max(-1, Number(self._controlData.THROTTLE)));\n    self._controlData.TURN = Math.min(1, Math.max(-1, Number(self._controlData.TURN)));\n    self._controlData.GUN_TURN = Math.min(1, Math.max(-1, Number(self._controlData.GUN_TURN)));\n    self._controlData.RADAR_TURN = Math.min(1, Math.max(-1, Number(self._controlData.RADAR_TURN)));\n    self._controlData.SHOOT = Math.min(1, Math.max(0, Number(self._controlData.SHOOT)));\n\n    self._tank.setThrottle(self._controlData.THROTTLE );\n    self._tank.setBoost(self._controlData.BOOST );\n    self._tank.setTurn(self._controlData.TURN);\n    self._tank.setRadarTurn(self._controlData.RADAR_TURN);\n    self._tank.setGunTurn(self._controlData.GUN_TURN );\n    self._tank.setDebugData(self._controlData.DEBUG);\n    if(self._controlData.SHOOT) {\n      self._tank.shoot(self._controlData.SHOOT);\n    }\n    self._controlData.SHOOT = 0;\n  }\n\n  _createWorker(path) {\n    return new Worker(path);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/AiWrapper.js","'use strict';\n\nmodule.exports = class PerformanceMonitor {\n\n  constructor() {\n    this._simulationStepDuration = 30;\n    this._stepCounter=0;\n    this._checkLoop=0;\n    this._started=false;\n    this._desiredPerfomance = Math.floor(1000/this._simulationStepDuration);\n    this._actualPerfomance = this._desiredPerfomance;\n    this._perfomanceIndex = 1;\n    this._desiredQuality = 1;\n    this._quality = this._desiredQuality;\n    this._checkInterval = 500;\n  }\n\n  get started() {\n    return this._started;\n  }\n\n  get desiredPerfomance() {\n    return this._desiredPerfomance;\n  }\n\n  get actualPerfomance() {\n    return this._actualPerfomance;\n  }\n\n  start() {\n    this._started = true;\n    var self = this;\n    this._checkLoop = setInterval(() => {\n      self._check();\n    }, this._checkInterval);\n  }\n\n  stop() {\n    this._started = false;\n    if(this._checkLoop) {\n      clearInterval(this._checkLoop);\n      this._checkLoop = null;\n    }\n  }\n\n  setSimulationStepDuration(v) {\n    if(v != this._simulationStepDuration) {\n      this._quality = this._desiredQuality;\n    }\n    this._simulationStepDuration = v;\n    this._desiredPerfomance = Math.floor(1000/v);\n  }\n\n  onSimulationStep() {\n    if(this._started) {\n      this._stepCounter++;\n    }\n  }\n\n  get qualityLevel() {\n    return this._quality;\n  }\n\n  _check() {\n    this._actualPerfomance = Math.ceil(this._stepCounter*(1000/this._checkInterval));\n    this._stepCounter = 0;\n    var index = this._desiredPerfomance ? this._actualPerfomance/this._desiredPerfomance : 1;\n    this._perfomanceIndex = (this._perfomanceIndex + index)/2;\n    this._updateQuality();\n  }\n\n  _updateQuality() {\n    var lowestQuality = 2.5*this._perfomanceIndex - 1.25;\n    lowestQuality = Math.max(0, Math.min(1, lowestQuality));\n    var decreaseStep = -0.5*this._perfomanceIndex + 0.45;\n\n    if(this._perfomanceIndex > 1) {\n      this._desiredQuality += 0.1;\n    } else {\n      this._desiredQuality -= decreaseStep;\n    }\n\n    this._desiredQuality = Math.max(0, Math.min(1, this._desiredQuality));\n\n    var targetQuality = Math.max(lowestQuality, this._desiredQuality);\n\n    this._desiredQuality = (this._desiredQuality + targetQuality)/2;\n    if(this._desiredQuality < this._quality ) {\n      this._quality = this._desiredQuality;\n    } else {\n      this._quality = (this._desiredQuality + 9*this._quality)/10;\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/PerformanceMonitor.js","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/index.js","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// \n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = data.toString();\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/alea.js","module.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 14\n// module chunks = 0","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/xor128.js","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/xorwow.js","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/xorshift7.js","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/xor4096.js","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/lib/tychei.js","/*\nCopyright 2014 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\nvar global = this,\n    width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\nmath['seed' + rngname] = seedrandom;\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n}\n\n// End anonymous scope, and pass initial values.\n})(\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n\n\n\n// WEBPACK FOOTER //\n// ./~/seedrandom/seedrandom.js","'use strict';\n\nmodule.exports = class Renderer {\n\n  constructor() {\n\n  }\n\n  initBatlefield(battlefield) {\n\n  }\n\n  get quality() {\n    return 1;\n  }\n\n  set quality(v) {\n\n  }\n\n  preRender() {\n\n  }\n\n  postRender() {\n\n  }\n\n  renderTank(tank, events) {\n\n  }\n\n  renderClock(msElapsed, msLimit) {\n\n  }\n\n  renderTankStats(tankList) {\n\n  }\n\n  renderBullet(bullet, events) {\n\n  }\n\n  stop() {\n\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/Renderer.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiRenderer = require(\"../abstractPixi/AbstractPixiRenderer.js\");\nvar DebugBattlefieldView = require(\"./DebugBattlefieldView.js\");\nvar DebugClockView = require(\"./DebugClockView.js\");\nvar DebugBulletView = require(\"./DebugBulletView.js\");\nvar DebugTankView = require(\"./DebugTankView.js\");\n\nmodule.exports = class DebugRenderer extends AbstractPixiRenderer  {\n\n  constructor() {\n    super();\n    this._frameCounter = 0;\n    this._fpsLabel = null;\n    this._scoreBoard = null;\n  }\n\n  initBatlefield(battlefield) {\n    super.initBatlefield(battlefield);\n\n    var labelStyle = new PIXI.TextStyle({\n      fontFamily: 'Arial',\n      fontSize: 12,\n      fill: '#00ff00'\n    });\n\n    this._fpsLabel = new PIXI.Text(\"FPS\", labelStyle);\n    this._fpsLabel.x = 100;\n    this._fpsLabel.y = 5;\n    this.stage.addChild(this._fpsLabel);\n\n    var self = this;\n    setInterval(function() {\n      self._fpsLabel.text = \"FPS: \" + self._frameCounter;\n      self._frameCounter = 0;\n    }, 1000);\n\n    labelStyle = new PIXI.TextStyle({\n      fontFamily: 'Arial',\n      fontSize: 12,\n      fill: '#00ff00'\n    });\n\n    this._scoreBoard = new PIXI.Text(\"scores\", labelStyle);\n    this._scoreBoard.x = battlefield.margin+2;\n    this._scoreBoard.y = battlefield.margin+2;\n    this._scoreBoard.alpha = 0.5;\n    this.stage.addChild(this._scoreBoard);\n  }\n\n  renderTankStats(tankList) {\n    super.renderTankStats(tankList);\n    var scores = [];\n    var i;\n    for(i=0; i < tankList.length; i++) {\n      scores.push({\n        name: tankList[i].fullName,\n        energy: tankList[i].energy,\n        value: tankList[i].score,\n      });\n    }\n    scores.sort(function(a,b) {\n      if (a.value < b.value) return 1;\n      if (a.value > b.value) return -1;\n      return 0;\n    });\n    var msg = \"\";\n    for(i=0; i < scores.length; i++) {\n      msg += scores[i].value.toFixed(3) + \" - \" + scores[i].name + (scores[i].energy == 0 ? \" [X]\" : \"\" ) + \"\\n\";\n    }\n    this._scoreBoard.text = msg;\n  }\n\n  postRender() {\n    super.postRender();\n    this._frameCounter++;\n  }\n\n  _createBattlefieldView(battlefield) {\n    return new DebugBattlefieldView(battlefield);\n  }\n\n  _createClockView(clock) {\n    return new DebugClockView(clock);\n  }\n\n  _createBulletView(bullet) {\n    return new DebugBulletView(bullet);\n  }\n\n  _createTankView(tank) {\n    return new DebugTankView(tank);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/debug/DebugRenderer.js","/* globals PIXI */\n'use strict';\n\nvar AbstractRenderer = require(\"../abstract/AbstractRenderer.js\");\nvar AbstractPixiView = require(\"./AbstractPixiView.js\");\nvar AbstractPixiTankView = require(\"./AbstractPixiTankView.js\");\nvar PixiRendererClockModel = require(\"./PixiRendererClockModel.js\");\nvar PixiPackerParser = require(\"pixi-packer-parser\");\n\nmodule.exports = class AbstractPixiRenderer extends AbstractRenderer  {\n\n  constructor(name) {\n    super();\n    this._name = name;\n\n    if(!PIXI) {\n      throw \"Pixi.js is required!\";\n    }\n    this._masterContainer = new PIXI.Container();\n    this._tankContainer = new PIXI.Container();\n    this._bulletContainer = new PIXI.Container();\n    this._hudContainer = new PIXI.Container();\n    this._masterContainer.addChild(this._tankContainer );\n    this._masterContainer.addChild(this._bulletContainer);\n    this._masterContainer.addChild(this._hudContainer);\n    this._renderer = null;\n    this._stage = null;\n    this._clockModel = new PixiRendererClockModel();\n    this._clockView = null;\n    this._battlefieldView = null;\n    if(window.devicePixelRatio >= 2) {\n      this._rendererScale = 2;\n    } else {\n      this._rendererScale = 1;\n    }\n  }\n\n  get stage() {\n    return this._stage;\n  }\n\n  get battlefieldView() {\n    return this._battlefieldView;\n  }\n\n  get masterContainer() {\n    return this._masterContainer;\n  }\n\n  initBatlefield(battlefield) {\n    super.initBatlefield(battlefield);\n    this._masterContainer.x = -this.offsetX;\n    this._masterContainer.y = -this.offsetY;\n\n    var rendererSettings = {\n      view: this._canvas,\n      antialias: false,\n      backgroundColor: 0xffffff,\n      resolution: window.devicePixelRatio\n    };\n\n    this._renderer = new PIXI.autoDetectRenderer(\n      battlefield.width + 2 * battlefield.margin,\n      battlefield.height + 2 * battlefield.margin,\n      rendererSettings\n    );\n    this._stage = new PIXI.Container();\n\n    this._battlefieldView = this._createBattlefieldView(battlefield);\n    this._clockView = this._createClockView(this._clockModel);\n\n    this._stage.addChild(this._battlefieldView.view);\n    this._stage.addChild(this._masterContainer);\n    this._stage.addChild(this._clockView.view);\n\n    this._renderer.render(this._stage);\n  }\n\n  init(canvas) {\n    this._canvas = canvas;\n  }\n\n  loadAssets(done) {\n    if(!this._name) {\n      done();\n      return;\n    }\n    var loader = new PIXI.loaders.Loader();\n    loader.after(PixiPackerParser(PIXI));\n    var resolution = (this._rendererScale == 2) ? \"retina\" : \"web\";\n    loader.add(\"img/game_\" + this._name + \"_\" + resolution + \".json\");\n    var self = this;\n    loader.load(function() {\n      self.onAssetsLoaded();\n      done();\n    });\n  }\n\n  onAssetsLoaded() {\n\n  }\n\n  preRender() {\n    this._battlefieldView.update();\n  }\n\n  renderTank(tank, events) {\n    super.renderTank(tank, events);\n    var view = this.getTankView(tank.id);\n    if(!view.parent && view.isAlive) {\n      this._tankContainer.addChild(view.view);\n      this._hudContainer.addChild(view.hudView);\n    }\n  }\n\n  renderBullet(bullet, events) {\n    super.renderBullet(bullet, events);\n    var view = this.getBulletView(bullet.id);\n    if(!view.parent && view.isAlive) {\n      this._bulletContainer.addChild(view.view);\n    }\n  }\n\n  renderClock(msElapsed, msLimit) {\n    this._clockModel.update(msElapsed, msLimit);\n    this._clockView.update();\n  }\n\n  postRender() {\n    super.postRender();\n    this._renderer.render(this._stage);\n  }\n\n  _createTankView(tank) {\n    return new AbstractPixiTankView(tank);\n  }\n\n  _createBulletView(bullet) {\n    return new AbstractPixiView(bullet);\n  }\n\n  _createBattlefieldView(battlefield) {\n    return new AbstractPixiView(battlefield);\n  }\n\n  _createClockView(clock) {\n    return new AbstractPixiView(clock);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstractPixi/AbstractPixiRenderer.js","'use strict';\n\nvar Renderer = require(\"../Renderer.js\");\nvar AbstractView = require(\"./AbstractView.js\");\n\nmodule.exports = class AbstractRenderer extends Renderer  {\n\n  constructor() {\n    super();\n    this._tankMap = [];\n    this._bulletMap = [];\n    this._offsetX = 0;\n    this._offsetY = 0;\n  }\n\n  get offsetX() {\n    return this._offsetX;\n  }\n\n  get offsetY() {\n    return this._offsetY;\n  }\n\n  initBatlefield(battlefield) {\n    this._offsetX = battlefield.offsetX;\n    this._offsetY = battlefield.offsetY;\n  }\n\n  renderTank(tank, events) {\n    this._renderModel(tank, events, this._tankMap, this._createTankView);\n  }\n\n  renderBullet(bullet, events) {\n    this._renderModel(bullet, events, this._bulletMap, this._createBulletView);\n  }\n\n  getBulletView(id) {\n    return this._bulletMap[id];\n  }\n\n  getTankView(id) {\n    return this._tankMap[id];\n  }\n\n  _renderModel(model, events, map, factory) {\n    var view = null;\n    if(map[model.id]) {\n      view = map[model.id];\n    } else {\n      view = factory(model);\n      map[model.id] = view;\n    }\n    view.update(events);\n    return view;\n  }\n\n  _createTankView(tank) {\n    return new AbstractView(tank);\n  }\n\n  _createBulletView(bullet) {\n    return new AbstractView(bullet);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstract/AbstractRenderer.js","'use strict';\n\nmodule.exports = class AbstractView  {\n\n  constructor(model) {\n    this._model = model;\n    this._view = null;\n    this._isAlive = true;\n  }\n\n  get isAlive() {\n    return this._isAlive;\n  }\n\n  destroy() {\n    this._isAlive = false;\n  }\n\n  get model () {\n    return this._model;\n  }\n\n  get view () {\n    return this._view;\n  }\n\n  update(events) {\n    \n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstract/AbstractView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractView = require(\"../abstract/AbstractView.js\");\n\nmodule.exports = class AbstractPixiView extends AbstractView {\n\n  constructor(model) {\n    super(model);\n    this._model = model;\n    this._view = new PIXI.Container();\n    this._create(this._view);\n  }\n\n  update(events) {\n    super.update(events);\n    if(this._model.x !== undefined) {\n      this._view.x = this._model.x;\n    }\n    if(this._model.y !== undefined) {\n      this._view.y = this._model.y;\n    }\n    if(this._model.angle !== undefined) {\n      this._view.rotation = this._model.angle * (Math.PI / 180);\n    }\n  }\n\n  destroy() {\n    super.destroy();\n    if(this.view.parent) {\n      this.view.parent.removeChild(this.view);\n    }\n  }\n\n  _create(container) {\n\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstractPixi/AbstractPixiView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"./AbstractPixiView.js\");\n\nmodule.exports = class AbstractPixiTankView extends AbstractPixiView {\n\n  constructor(model) {\n    super(model);\n    this._hudView = new PIXI.Container();\n    this._createHud(this._hudView);\n  }\n\n  get body() {\n    return this._body;\n  }\n\n  get hudView() {\n    return this._hudView;\n  }\n\n  get gun() {\n    return this._gun;\n  }\n\n  get radar() {\n    return this._radar;\n  }\n\n  get label() {\n    return this._label;\n  }\n\n  get energyBar() {\n    return this._energyBar;\n  }\n\n  update(events) {\n    super.update(events);\n    this.view.rotation = 0;\n    this.body.rotation = this.model.angle * (Math.PI/180);\n    this.gun.rotation = (this.model.angle + this.model.gunAngle) * (Math.PI/180);\n    this.radar.rotation = (this.model.angle + this.model.radarAngle) * (Math.PI/180);\n    this.energyBar.scale.x = this.model.energy / this.model.maxEnergy;\n    this.label.text = this.model.fullName;\n\n    this.hudView.x = this.view.x;\n    this.hudView.y = this.view.y;\n\n    for(var i=0; i < events.length; i++) {\n      this._onEvent(events[i]);\n    }\n  }\n\n  _onEvent(event) {\n    switch (event.type) {\n      case 'shoot':\n        this._onShoot(event);\n        break;\n      case 'destroy':\n        this._onDestroy(event);\n        break;\n    }\n  }\n\n  _onShoot(event) {\n\n  }\n\n\n  _onDestroy(event) {\n    this.destroy();\n  }\n\n  _create(container) {\n    super._create(container);\n    this._body = this._createBody();\n    this._gun = this._createGun();\n    this._radar = this._createRadar();\n    container.addChild(this._body);\n    container.addChild(this._gun);\n    container.addChild(this._radar);\n  }\n\n  _createHud(container) {\n    this._label = this._createLabel();\n    this._energyBar = this._createEnergyBar();\n    container.addChild(this._createHudBackground());\n    container.addChild(this._energyBar);\n    container.addChild(this._label);\n  }\n\n  _createBody() {\n    return new PIXI.Sprite();\n  }\n\n  _createGun() {\n    return new PIXI.Sprite();\n  }\n\n  _createRadar() {\n    return new PIXI.Sprite();\n  }\n\n  _createHudBackground() {\n    return new PIXI.Sprite();\n  }\n\n  _createEnergyBar() {\n    return new PIXI.Sprite();\n  }\n\n  _createLabel() {\n    return new PIXI.Text();\n  }\n  destroy() {\n    super.destroy();\n    if(this.hudView.parent) {\n      this.hudView.parent.removeChild(this.hudView);\n    }\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstractPixi/AbstractPixiTankView.js","module.exports = class PixiRendererClockModel {\n\n  construct() {\n    this._msElapsed = 0;\n    this._msLimit = 0;\n  }\n\n  update(msElapsed, msLimit) {\n    this._msElapsed = msElapsed;\n    this._msLimit = msLimit;\n  }\n\n  get msElapsed() {\n    return this._msElapsed;\n  }\n\n  get msLimit() {\n    return this._msLimit;\n  }\n\n  get text() {\n    var msTotal = Math.max(0, this._msLimit - this._msElapsed);\n    var s = Math.floor(msTotal/1000);\n    var ms = msTotal % 1000;\n    s = s.toString();\n    while(s.length < 2) s = \"0\" + s;\n    ms = ms.toString();\n    while(ms.length < 3) ms = \"0\" + ms;\n\n    return \"0:\" + s + \".\" + ms;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstractPixi/PixiRendererClockModel.js","\"use strict\";\n\nvar Resource = require(\"resource-loader\").Resource;\n\nfunction pathWithoutFile(path) {\n    var elements = path.split(\"/\");\n    elements.pop(); // remove filename\n    return elements.join(\"/\");\n}\n\n// Simple \"wait for all\" helper class\nfunction WaitForAll(count, allDone) {\n    var remaining = count;\n\n    this.done = function() {\n        remaining--;\n        if (remaining === 0) {\n            allDone();\n        }\n    };\n}\n\nmodule.exports = function (PIXI)\n{\n    return function (resource, next)\n    {\n        // skip if no data, its not json, or it isn't a pixi-packer manifest\n        if (!resource.data || resource.type !== Resource.TYPE.JSON || !resource.data.meta || resource.data.meta.type !== \"pixi-packer\") {\n            return next();\n        }\n\n        if (resource.data.meta.version > 1) {\n            throw new Error(\"pixi-packer manifest version \" + resource.data.meta.version + \" not supported\");\n        }\n\n        var loader = this;\n\n        var loadOptions = {\n            crossOrigin: resource.crossOrigin,\n            loadType: Resource.LOAD_TYPE.IMAGE,\n            parentResource: resource\n        };\n\n        var urlForManifest = resource.url.replace(loader.baseUrl, \"\");\n        var route = pathWithoutFile(urlForManifest);\n\n        var resolution = resource.data.resolution;\n\n        if (resource.data.spritesheets.length && loader.progress === 100) {\n            // This is a temporary workaround until a solution for https://github.com/englercj/resource-loader/pull/32 is found\n            loader.progress = 0;\n        }\n\n        // Load all spritesheets\n        var waiter = new WaitForAll(resource.data.spritesheets.length, next);\n        resource.data.spritesheets.forEach(function(spritesheet) {\n            var name = spritesheet.image;\n            var imageUrl = route + \"/\" + spritesheet.image;\n            loader.add(name, imageUrl, loadOptions, function (res) {\n                res.texture.baseTexture.resolution = resolution;\n                res.texture.baseTexture.update();\n                res.textures = {};\n                spritesheet.sprites.forEach(function(sprite) {\n                    var frame = new PIXI.Rectangle(\n                        sprite.position.x / resolution,\n                        sprite.position.y / resolution,\n                        sprite.dimension.w / resolution,\n                        sprite.dimension.h / resolution\n                    );\n\n                    var crop;\n                    if (Number(PIXI.VERSION.charAt(0)) >= 4) {\n                        crop = new PIXI.Rectangle(\n                            0,\n                            0,\n                            sprite.dimension.w / resolution,\n                            sprite.dimension.h / resolution\n                        );\n                    } else {\n                        crop = frame.clone();\n                    }\n\n                    var trim = null;\n\n                    //  Check to see if the sprite is trimmed\n                    if (sprite.trim) {\n                        if (Number(PIXI.VERSION.charAt(0)) >= 4) {\n                            trim = new PIXI.Rectangle(\n                                sprite.trim.x / resolution,\n                                sprite.trim.y / resolution,\n                                sprite.trim.w / resolution,\n                                sprite.trim.h / resolution\n                            );\n\n                            frame.width = sprite.trim.w / resolution;\n                            frame.height = sprite.trim.h / resolution;\n                        } else {\n                            trim = new PIXI.Rectangle(\n                                sprite.trim.x / resolution,\n                                sprite.trim.y / resolution,\n                                frame.width,\n                                frame.height\n                            );\n\n                            crop.width = sprite.trim.w / resolution;\n                            crop.height = sprite.trim.h / resolution;\n                        }\n                    }\n\n                    res.textures[sprite.name] = new PIXI.Texture(res.texture.baseTexture, frame, crop, trim, false);\n\n                    // lets also add the frame to pixi's global cache for fromFrame and fromImage functions\n                    PIXI.utils.TextureCache[sprite.name] = res.textures[sprite.name];\n                });\n                waiter.done();\n            });\n        });\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/pixi-packer-parser/index.js","'use strict';\n\n// import Loader from './Loader';\n// import Resource from './Resource';\n// import * as async from './async';\n// import * as b64 from './b64';\n\n/* eslint-disable no-undef */\n\nvar Loader = require('./Loader').default;\nvar Resource = require('./Resource').default;\nvar async = require('./async');\nvar b64 = require('./b64');\n\nLoader.Resource = Resource;\nLoader.async = async;\nLoader.base64 = b64;\n\n// export manually, and also as default\nmodule.exports = Loader;\n// export default Loader;\nmodule.exports.default = Loader;\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/resource-loader/lib/index.js","'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _miniSignals = require('mini-signals');\n\nvar _miniSignals2 = _interopRequireDefault(_miniSignals);\n\nvar _parseUri = require('parse-uri');\n\nvar _parseUri2 = _interopRequireDefault(_parseUri);\n\nvar _async = require('./async');\n\nvar async = _interopRequireWildcard(_async);\n\nvar _Resource = require('./Resource');\n\nvar _Resource2 = _interopRequireDefault(_Resource);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// some constants\nvar MAX_PROGRESS = 100;\nvar rgxExtractUrlHash = /(#[\\w-]+)?$/;\n\n/**\n * Manages the state and loading of multiple resources to load.\n *\n * @class\n */\n\nvar Loader = function () {\n    /**\n     * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n     * @param {number} [concurrency=10] - The number of resources to load concurrently.\n     */\n    function Loader() {\n        var _this = this;\n\n        var baseUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var concurrency = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n        _classCallCheck(this, Loader);\n\n        /**\n         * The base url for all resources loaded by this loader.\n         *\n         * @member {string}\n         */\n        this.baseUrl = baseUrl;\n\n        /**\n         * The progress percent of the loader going through the queue.\n         *\n         * @member {number}\n         */\n        this.progress = 0;\n\n        /**\n         * Loading state of the loader, true if it is currently loading resources.\n         *\n         * @member {boolean}\n         */\n        this.loading = false;\n\n        /**\n         * A querystring to append to every URL added to the loader.\n         *\n         * This should be a valid query string *without* the question-mark (`?`). The loader will\n         * also *not* escape values for you. Make sure to escape your parameters with\n         * [`encodeURIComponent`](https://mdn.io/encodeURIComponent) before assigning this property.\n         *\n         * @example\n         * const loader = new Loader();\n         *\n         * loader.defaultQueryString = 'user=me&password=secret';\n         *\n         * // This will request 'image.png?user=me&password=secret'\n         * loader.add('image.png').load();\n         *\n         * loader.reset();\n         *\n         * // This will request 'image.png?v=1&user=me&password=secret'\n         * loader.add('iamge.png?v=1').load();\n         */\n        this.defaultQueryString = '';\n\n        /**\n         * The middleware to run before loading each resource.\n         *\n         * @member {function[]}\n         */\n        this._beforeMiddleware = [];\n\n        /**\n         * The middleware to run after loading each resource.\n         *\n         * @member {function[]}\n         */\n        this._afterMiddleware = [];\n\n        /**\n         * The tracks the resources we are currently completing parsing for.\n         *\n         * @member {Resource[]}\n         */\n        this._resourcesParsing = [];\n\n        /**\n         * The `_loadResource` function bound with this object context.\n         *\n         * @private\n         * @member {function}\n         * @param {Resource} r - The resource to load\n         * @param {Function} d - The dequeue function\n         * @return {undefined}\n         */\n        this._boundLoadResource = function (r, d) {\n            return _this._loadResource(r, d);\n        };\n\n        /**\n         * The resources waiting to be loaded.\n         *\n         * @private\n         * @member {Resource[]}\n         */\n        this._queue = async.queue(this._boundLoadResource, concurrency);\n\n        this._queue.pause();\n\n        /**\n         * All the resources for this loader keyed by name.\n         *\n         * @member {object<string, Resource>}\n         */\n        this.resources = {};\n\n        /**\n         * Dispatched once per loaded or errored resource.\n         *\n         * The callback looks like {@link Loader.OnProgressSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onProgress = new _miniSignals2.default();\n\n        /**\n         * Dispatched once per errored resource.\n         *\n         * The callback looks like {@link Loader.OnErrorSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onError = new _miniSignals2.default();\n\n        /**\n         * Dispatched once per loaded resource.\n         *\n         * The callback looks like {@link Loader.OnLoadSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onLoad = new _miniSignals2.default();\n\n        /**\n         * Dispatched when the loader begins to process the queue.\n         *\n         * The callback looks like {@link Loader.OnStartSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onStart = new _miniSignals2.default();\n\n        /**\n         * Dispatched when the queued resources all load.\n         *\n         * The callback looks like {@link Loader.OnCompleteSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onComplete = new _miniSignals2.default();\n\n        /**\n         * When the progress changes the loader and resource are disaptched.\n         *\n         * @memberof Loader\n         * @callback OnProgressSignal\n         * @param {Loader} loader - The loader the progress is advancing on.\n         * @param {Resource} resource - The resource that has completed or failed to cause the progress to advance.\n         */\n\n        /**\n         * When an error occurrs the loader and resource are disaptched.\n         *\n         * @memberof Loader\n         * @callback OnErrorSignal\n         * @param {Loader} loader - The loader the error happened in.\n         * @param {Resource} resource - The resource that caused the error.\n         */\n\n        /**\n         * When a load completes the loader and resource are disaptched.\n         *\n         * @memberof Loader\n         * @callback OnLoadSignal\n         * @param {Loader} loader - The loader that laoded the resource.\n         * @param {Resource} resource - The resource that has completed loading.\n         */\n\n        /**\n         * When the loader starts loading resources it dispatches this callback.\n         *\n         * @memberof Loader\n         * @callback OnStartSignal\n         * @param {Loader} loader - The loader that has started loading resources.\n         */\n\n        /**\n         * When the loader completes loading resources it dispatches this callback.\n         *\n         * @memberof Loader\n         * @callback OnCompleteSignal\n         * @param {Loader} loader - The loader that has finished loading resources.\n         */\n    }\n\n    /**\n     * Adds a resource (or multiple resources) to the loader queue.\n     *\n     * This function can take a wide variety of different parameters. The only thing that is always\n     * required the url to load. All the following will work:\n     *\n     * ```js\n     * loader\n     *     // normal param syntax\n     *     .add('key', 'http://...', function () {})\n     *     .add('http://...', function () {})\n     *     .add('http://...')\n     *\n     *     // object syntax\n     *     .add({\n     *         name: 'key2',\n     *         url: 'http://...'\n     *     }, function () {})\n     *     .add({\n     *         url: 'http://...'\n     *     }, function () {})\n     *     .add({\n     *         name: 'key3',\n     *         url: 'http://...'\n     *         onComplete: function () {}\n     *     })\n     *     .add({\n     *         url: 'https://...',\n     *         onComplete: function () {},\n     *         crossOrigin: true\n     *     })\n     *\n     *     // you can also pass an array of objects or urls or both\n     *     .add([\n     *         { name: 'key4', url: 'http://...', onComplete: function () {} },\n     *         { url: 'http://...', onComplete: function () {} },\n     *         'http://...'\n     *     ])\n     *\n     *     // and you can use both params and options\n     *     .add('key', 'http://...', { crossOrigin: true }, function () {})\n     *     .add('http://...', { crossOrigin: true }, function () {});\n     * ```\n     *\n     * @param {string} [name] - The name of the resource to load, if not passed the url is used.\n     * @param {string} [url] - The url for this resource, relative to the baseUrl of this loader.\n     * @param {object} [options] - The options for the load.\n     * @param {boolean} [options.crossOrigin] - Is this request cross-origin? Default is to determine automatically.\n     * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource be loaded?\n     * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How should\n     *      the data being loaded be interpreted when using XHR?\n     * @param {object} [options.metadata] - Extra configuration for middleware and the Resource object.\n     * @param {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [options.metadata.loadElement=null] - The\n     *      element to use for loading, instead of creating one.\n     * @param {boolean} [options.metadata.skipSource=false] - Skips adding source(s) to the load element. This\n     *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n     * @param {function} [cb] - Function to call when this specific resource completes loading.\n     * @return {Loader} Returns itself.\n     */\n\n\n    Loader.prototype.add = function add(name, url, options, cb) {\n        // special case of an array of objects or urls\n        if (Array.isArray(name)) {\n            for (var i = 0; i < name.length; ++i) {\n                this.add(name[i]);\n            }\n\n            return this;\n        }\n\n        // if an object is passed instead of params\n        if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n            cb = url || name.callback || name.onComplete;\n            options = name;\n            url = name.url;\n            name = name.name || name.key || name.url;\n        }\n\n        // case where no name is passed shift all args over by one.\n        if (typeof url !== 'string') {\n            cb = options;\n            options = url;\n            url = name;\n        }\n\n        // now that we shifted make sure we have a proper url.\n        if (typeof url !== 'string') {\n            throw new Error('No url passed to add resource to loader.');\n        }\n\n        // options are optional so people might pass a function and no options\n        if (typeof options === 'function') {\n            cb = options;\n            options = null;\n        }\n\n        // if loading already you can only add resources that have a parent.\n        if (this.loading && (!options || !options.parentResource)) {\n            throw new Error('Cannot add resources while the loader is running.');\n        }\n\n        // check if resource already exists.\n        if (this.resources[name]) {\n            throw new Error('Resource named \"' + name + '\" already exists.');\n        }\n\n        // add base url if this isn't an absolute url\n        url = this._prepareUrl(url);\n\n        // create the store the resource\n        this.resources[name] = new _Resource2.default(name, url, options);\n\n        if (typeof cb === 'function') {\n            this.resources[name].onAfterMiddleware.once(cb);\n        }\n\n        // if actively loading, make sure to adjust progress chunks for that parent and its children\n        if (this.loading) {\n            var parent = options.parentResource;\n            var incompleteChildren = [];\n\n            for (var _i = 0; _i < parent.children.length; ++_i) {\n                if (!parent.children[_i].isComplete) {\n                    incompleteChildren.push(parent.children[_i]);\n                }\n            }\n\n            var fullChunk = parent.progressChunk * (incompleteChildren.length + 1); // +1 for parent\n            var eachChunk = fullChunk / (incompleteChildren.length + 2); // +2 for parent & new child\n\n            parent.children.push(this.resources[name]);\n            parent.progressChunk = eachChunk;\n\n            for (var _i2 = 0; _i2 < incompleteChildren.length; ++_i2) {\n                incompleteChildren[_i2].progressChunk = eachChunk;\n            }\n\n            this.resources[name].progressChunk = eachChunk;\n        }\n\n        // add the resource to the queue\n        this._queue.push(this.resources[name]);\n\n        return this;\n    };\n\n    /**\n     * Sets up a middleware function that will run *before* the\n     * resource is loaded.\n     *\n     * @method before\n     * @param {function} fn - The middleware function to register.\n     * @return {Loader} Returns itself.\n     */\n\n\n    Loader.prototype.pre = function pre(fn) {\n        this._beforeMiddleware.push(fn);\n\n        return this;\n    };\n\n    /**\n     * Sets up a middleware function that will run *after* the\n     * resource is loaded.\n     *\n     * @alias use\n     * @method after\n     * @param {function} fn - The middleware function to register.\n     * @return {Loader} Returns itself.\n     */\n\n\n    Loader.prototype.use = function use(fn) {\n        this._afterMiddleware.push(fn);\n\n        return this;\n    };\n\n    /**\n     * Resets the queue of the loader to prepare for a new load.\n     *\n     * @return {Loader} Returns itself.\n     */\n\n\n    Loader.prototype.reset = function reset() {\n        this.progress = 0;\n        this.loading = false;\n\n        this._queue.kill();\n        this._queue.pause();\n\n        // abort all resource loads\n        for (var k in this.resources) {\n            var res = this.resources[k];\n\n            if (res._onLoadBinding) {\n                res._onLoadBinding.detach();\n            }\n\n            if (res.isLoading) {\n                res.abort();\n            }\n        }\n\n        this.resources = {};\n\n        return this;\n    };\n\n    /**\n     * Starts loading the queued resources.\n     *\n     * @param {function} [cb] - Optional callback that will be bound to the `complete` event.\n     * @return {Loader} Returns itself.\n     */\n\n\n    Loader.prototype.load = function load(cb) {\n        // register complete callback if they pass one\n        if (typeof cb === 'function') {\n            this.onComplete.once(cb);\n        }\n\n        // if the queue has already started we are done here\n        if (this.loading) {\n            return this;\n        }\n\n        // distribute progress chunks\n        var chunk = 100 / this._queue._tasks.length;\n\n        for (var i = 0; i < this._queue._tasks.length; ++i) {\n            this._queue._tasks[i].data.progressChunk = chunk;\n        }\n\n        // update loading state\n        this.loading = true;\n\n        // notify of start\n        this.onStart.dispatch(this);\n\n        // start loading\n        this._queue.resume();\n\n        return this;\n    };\n\n    /**\n     * Prepares a url for usage based on the configuration of this object\n     *\n     * @private\n     * @param {string} url - The url to prepare.\n     * @return {string} The prepared url.\n     */\n\n\n    Loader.prototype._prepareUrl = function _prepareUrl(url) {\n        var parsedUrl = (0, _parseUri2.default)(url, { strictMode: true });\n        var result = void 0;\n\n        // absolute url, just use it as is.\n        if (parsedUrl.protocol || !parsedUrl.path || url.indexOf('//') === 0) {\n            result = url;\n        }\n        // if baseUrl doesn't end in slash and url doesn't start with slash, then add a slash inbetween\n        else if (this.baseUrl.length && this.baseUrl.lastIndexOf('/') !== this.baseUrl.length - 1 && url.charAt(0) !== '/') {\n                result = this.baseUrl + '/' + url;\n            } else {\n                result = this.baseUrl + url;\n            }\n\n        // if we need to add a default querystring, there is a bit more work\n        if (this.defaultQueryString) {\n            var hash = rgxExtractUrlHash.exec(result)[0];\n\n            result = result.substr(0, result.length - hash.length);\n\n            if (result.indexOf('?') !== -1) {\n                result += '&' + this.defaultQueryString;\n            } else {\n                result += '?' + this.defaultQueryString;\n            }\n\n            result += hash;\n        }\n\n        return result;\n    };\n\n    /**\n     * Loads a single resource.\n     *\n     * @private\n     * @param {Resource} resource - The resource to load.\n     * @param {function} dequeue - The function to call when we need to dequeue this item.\n     */\n\n\n    Loader.prototype._loadResource = function _loadResource(resource, dequeue) {\n        var _this2 = this;\n\n        resource._dequeue = dequeue;\n\n        // run before middleware\n        async.eachSeries(this._beforeMiddleware, function (fn, next) {\n            fn.call(_this2, resource, function () {\n                // if the before middleware marks the resource as complete,\n                // break and don't process any more before middleware\n                next(resource.isComplete ? {} : null);\n            });\n        }, function () {\n            if (resource.isComplete) {\n                _this2._onLoad(resource);\n            } else {\n                resource._onLoadBinding = resource.onComplete.once(_this2._onLoad, _this2);\n                resource.load();\n            }\n        }, true);\n    };\n\n    /**\n     * Called once each resource has loaded.\n     *\n     * @private\n     */\n\n\n    Loader.prototype._onComplete = function _onComplete() {\n        this.loading = false;\n\n        this.onComplete.dispatch(this, this.resources);\n    };\n\n    /**\n     * Called each time a resources is loaded.\n     *\n     * @private\n     * @param {Resource} resource - The resource that was loaded\n     */\n\n\n    Loader.prototype._onLoad = function _onLoad(resource) {\n        var _this3 = this;\n\n        resource._onLoadBinding = null;\n\n        // remove this resource from the async queue, and add it to our list of resources that are being parsed\n        this._resourcesParsing.push(resource);\n        resource._dequeue();\n\n        // run all the after middleware for this resource\n        async.eachSeries(this._afterMiddleware, function (fn, next) {\n            fn.call(_this3, resource, next);\n        }, function () {\n            resource.onAfterMiddleware.dispatch(resource);\n\n            _this3.progress += resource.progressChunk;\n            _this3.onProgress.dispatch(_this3, resource);\n\n            if (resource.error) {\n                _this3.onError.dispatch(resource.error, _this3, resource);\n            } else {\n                _this3.onLoad.dispatch(_this3, resource);\n            }\n\n            _this3._resourcesParsing.splice(_this3._resourcesParsing.indexOf(resource), 1);\n\n            // do completion check\n            if (_this3._queue.idle() && _this3._resourcesParsing.length === 0) {\n                _this3.progress = MAX_PROGRESS;\n                _this3._onComplete();\n            }\n        }, true);\n    };\n\n    return Loader;\n}();\n\nexports.default = Loader;\n//# sourceMappingURL=Loader.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/resource-loader/lib/Loader.js","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar MiniSignalBinding = (function () {\n  function MiniSignalBinding(fn, once, thisArg) {\n    if (once === undefined) once = false;\n\n    _classCallCheck(this, MiniSignalBinding);\n\n    this._fn = fn;\n    this._once = once;\n    this._thisArg = thisArg;\n    this._next = this._prev = this._owner = null;\n  }\n\n  _createClass(MiniSignalBinding, [{\n    key: 'detach',\n    value: function detach() {\n      if (this._owner === null) return false;\n      this._owner.detach(this);\n      return true;\n    }\n  }]);\n\n  return MiniSignalBinding;\n})();\n\nfunction _addMiniSignalBinding(self, node) {\n  if (!self._head) {\n    self._head = node;\n    self._tail = node;\n  } else {\n    self._tail._next = node;\n    node._prev = self._tail;\n    self._tail = node;\n  }\n\n  node._owner = self;\n\n  return node;\n}\n\nvar MiniSignal = (function () {\n  function MiniSignal() {\n    _classCallCheck(this, MiniSignal);\n\n    this._head = this._tail = undefined;\n  }\n\n  _createClass(MiniSignal, [{\n    key: 'handlers',\n    value: function handlers() {\n      var exists = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\n      var node = this._head;\n\n      if (exists) return !!node;\n\n      var ee = [];\n\n      while (node) {\n        ee.push(node);\n        node = node._next;\n      }\n\n      return ee;\n    }\n  }, {\n    key: 'has',\n    value: function has(node) {\n      if (!(node instanceof MiniSignalBinding)) {\n        throw new Error('MiniSignal#has(): First arg must be a MiniSignalBinding object.');\n      }\n\n      return node._owner === this;\n    }\n  }, {\n    key: 'dispatch',\n    value: function dispatch() {\n      var node = this._head;\n\n      if (!node) return false;\n\n      while (node) {\n        if (node._once) this.detach(node);\n        node._fn.apply(node._thisArg, arguments);\n        node = node._next;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'add',\n    value: function add(fn) {\n      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      if (typeof fn !== 'function') {\n        throw new Error('MiniSignal#add(): First arg must be a Function.');\n      }\n      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, false, thisArg));\n    }\n  }, {\n    key: 'once',\n    value: function once(fn) {\n      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      if (typeof fn !== 'function') {\n        throw new Error('MiniSignal#once(): First arg must be a Function.');\n      }\n      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, true, thisArg));\n    }\n  }, {\n    key: 'detach',\n    value: function detach(node) {\n      if (!(node instanceof MiniSignalBinding)) {\n        throw new Error('MiniSignal#detach(): First arg must be a MiniSignalBinding object.');\n      }\n      if (node._owner !== this) return this;\n\n      if (node._prev) node._prev._next = node._next;\n      if (node._next) node._next._prev = node._prev;\n\n      if (node === this._head) {\n        this._head = node._next;\n        if (node._next === null) {\n          this._tail = null;\n        }\n      } else if (node === this._tail) {\n        this._tail = node._prev;\n        this._tail._next = null;\n      }\n\n      node._owner = null;\n      return this;\n    }\n  }, {\n    key: 'detachAll',\n    value: function detachAll() {\n      var node = this._head;\n      if (!node) return this;\n\n      this._head = this._tail = null;\n\n      while (node) {\n        node._owner = null;\n        node = node._next;\n      }\n      return this;\n    }\n  }]);\n\n  return MiniSignal;\n})();\n\nMiniSignal.MiniSignalBinding = MiniSignalBinding;\n\nexports['default'] = MiniSignal;\nmodule.exports = exports['default'];\n\n\n\n// WEBPACK FOOTER //\n// ./~/mini-signals/lib/mini-signals.js","'use strict'\n\nmodule.exports = function parseURI (str, opts) {\n  opts = opts || {}\n\n  var o = {\n    key: ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'],\n    q: {\n      name: 'queryKey',\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n    },\n    parser: {\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n      loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n    }\n  }\n\n  var m = o.parser[opts.strictMode ? 'strict' : 'loose'].exec(str)\n  var uri = {}\n  var i = 14\n\n  while (i--) uri[o.key[i]] = m[i] || ''\n\n  uri[o.q.name] = {}\n  uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n    if ($1) uri[o.q.name][$1] = $2\n  })\n\n  return uri\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/parse-uri/index.js","'use strict';\n\nexports.__esModule = true;\nexports.eachSeries = eachSeries;\nexports.queue = queue;\n/**\n * Smaller version of the async library constructs.\n *\n */\nfunction _noop() {} /* empty */\n\n/**\n * Iterates an array in series.\n *\n * @param {Array.<*>} array - Array to iterate.\n * @param {function} iterator - Function to call for each element.\n * @param {function} callback - Function to call when done, or on error.\n * @param {boolean} [deferNext=false] - Break synchronous each loop by calling next with a setTimeout of 1.\n */\nfunction eachSeries(array, iterator, callback, deferNext) {\n    var i = 0;\n    var len = array.length;\n\n    (function next(err) {\n        if (err || i === len) {\n            if (callback) {\n                callback(err);\n            }\n\n            return;\n        }\n\n        if (deferNext) {\n            setTimeout(function () {\n                iterator(array[i++], next);\n            }, 1);\n        } else {\n            iterator(array[i++], next);\n        }\n    })();\n}\n\n/**\n * Ensures a function is only called once.\n *\n * @param {function} fn - The function to wrap.\n * @return {function} The wrapping function.\n */\nfunction onlyOnce(fn) {\n    return function onceWrapper() {\n        if (fn === null) {\n            throw new Error('Callback was already called.');\n        }\n\n        var callFn = fn;\n\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\n\n/**\n * Async queue implementation,\n *\n * @param {function} worker - The worker function to call for each task.\n * @param {number} concurrency - How many workers to run in parrallel.\n * @return {*} The async queue object.\n */\nfunction queue(worker, concurrency) {\n    if (concurrency == null) {\n        // eslint-disable-line no-eq-null,eqeqeq\n        concurrency = 1;\n    } else if (concurrency === 0) {\n        throw new Error('Concurrency must not be zero');\n    }\n\n    var workers = 0;\n    var q = {\n        _tasks: [],\n        concurrency: concurrency,\n        saturated: _noop,\n        unsaturated: _noop,\n        buffer: concurrency / 4,\n        empty: _noop,\n        drain: _noop,\n        error: _noop,\n        started: false,\n        paused: false,\n        push: function push(data, callback) {\n            _insert(data, false, callback);\n        },\n        kill: function kill() {\n            workers = 0;\n            q.drain = _noop;\n            q.started = false;\n            q._tasks = [];\n        },\n        unshift: function unshift(data, callback) {\n            _insert(data, true, callback);\n        },\n        process: function process() {\n            while (!q.paused && workers < q.concurrency && q._tasks.length) {\n                var task = q._tasks.shift();\n\n                if (q._tasks.length === 0) {\n                    q.empty();\n                }\n\n                workers += 1;\n\n                if (workers === q.concurrency) {\n                    q.saturated();\n                }\n\n                worker(task.data, onlyOnce(_next(task)));\n            }\n        },\n        length: function length() {\n            return q._tasks.length;\n        },\n        running: function running() {\n            return workers;\n        },\n        idle: function idle() {\n            return q._tasks.length + workers === 0;\n        },\n        pause: function pause() {\n            if (q.paused === true) {\n                return;\n            }\n\n            q.paused = true;\n        },\n        resume: function resume() {\n            if (q.paused === false) {\n                return;\n            }\n\n            q.paused = false;\n\n            // Need to call q.process once per concurrent\n            // worker to preserve full concurrency after pause\n            for (var w = 1; w <= q.concurrency; w++) {\n                q.process();\n            }\n        }\n    };\n\n    function _insert(data, insertAtFront, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            // eslint-disable-line no-eq-null,eqeqeq\n            throw new Error('task callback must be a function');\n        }\n\n        q.started = true;\n\n        if (data == null && q.idle()) {\n            // eslint-disable-line no-eq-null,eqeqeq\n            // call drain immediately if there are no tasks\n            setTimeout(function () {\n                return q.drain();\n            }, 1);\n\n            return;\n        }\n\n        var item = {\n            data: data,\n            callback: typeof callback === 'function' ? callback : _noop\n        };\n\n        if (insertAtFront) {\n            q._tasks.unshift(item);\n        } else {\n            q._tasks.push(item);\n        }\n\n        setTimeout(function () {\n            return q.process();\n        }, 1);\n    }\n\n    function _next(task) {\n        return function next() {\n            workers -= 1;\n\n            task.callback.apply(task, arguments);\n\n            if (arguments[0] != null) {\n                // eslint-disable-line no-eq-null,eqeqeq\n                q.error(arguments[0], task.data);\n            }\n\n            if (workers <= q.concurrency - q.buffer) {\n                q.unsaturated();\n            }\n\n            if (q.idle()) {\n                q.drain();\n            }\n\n            q.process();\n        };\n    }\n\n    return q;\n}\n//# sourceMappingURL=async.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/resource-loader/lib/async.js","'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parseUri = require('parse-uri');\n\nvar _parseUri2 = _interopRequireDefault(_parseUri);\n\nvar _miniSignals = require('mini-signals');\n\nvar _miniSignals2 = _interopRequireDefault(_miniSignals);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// tests is CORS is supported in XHR, if not we need to use XDR\nvar useXdr = !!(window.XDomainRequest && !('withCredentials' in new XMLHttpRequest()));\nvar tempAnchor = null;\n\n// some status constants\nvar STATUS_NONE = 0;\nvar STATUS_OK = 200;\nvar STATUS_EMPTY = 204;\nvar STATUS_IE_BUG_EMPTY = 1223;\nvar STATUS_TYPE_OK = 2;\n\n// noop\nfunction _noop() {} /* empty */\n\n/**\n * Manages the state and loading of a resource and all child resources.\n *\n * @class\n */\n\nvar Resource = function () {\n    /**\n     * Sets the load type to be used for a specific extension.\n     *\n     * @static\n     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param {Resource.LOAD_TYPE} loadType - The load type to set it to.\n     */\n    Resource.setExtensionLoadType = function setExtensionLoadType(extname, loadType) {\n        setExtMap(Resource._loadTypeMap, extname, loadType);\n    };\n\n    /**\n     * Sets the load type to be used for a specific extension.\n     *\n     * @static\n     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param {Resource.XHR_RESPONSE_TYPE} xhrType - The xhr type to set it to.\n     */\n\n\n    Resource.setExtensionXhrType = function setExtensionXhrType(extname, xhrType) {\n        setExtMap(Resource._xhrTypeMap, extname, xhrType);\n    };\n\n    /**\n     * @param {string} name - The name of the resource to load.\n     * @param {string|string[]} url - The url for this resource, for audio/video loads you can pass\n     *      an array of sources.\n     * @param {object} [options] - The options for the load.\n     * @param {string|boolean} [options.crossOrigin] - Is this request cross-origin? Default is to\n     *      determine automatically.\n     * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource\n     *      be loaded?\n     * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How\n     *      should the data being loaded be interpreted when using XHR?\n     * @param {object} [options.metadata] - Extra configuration for middleware and the Resource object.\n     * @param {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [options.metadata.loadElement=null] - The\n     *      element to use for loading, instead of creating one.\n     * @param {boolean} [options.metadata.skipSource=false] - Skips adding source(s) to the load element. This\n     *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n     * @param {string|string[]} [options.metadata.mimeType] - The mime type to use for the source element of a video/audio\n     *      elment. If the urls are an array, you can pass this as an array as well where each index is the mime type to\n     *      use for the corresponding url index.\n     */\n\n\n    function Resource(name, url, options) {\n        _classCallCheck(this, Resource);\n\n        if (typeof name !== 'string' || typeof url !== 'string') {\n            throw new Error('Both name and url are required for constructing a resource.');\n        }\n\n        options = options || {};\n\n        /**\n         * The state flags of this resource.\n         *\n         * @member {number}\n         */\n        this._flags = 0;\n\n        // set data url flag, needs to be set early for some _determineX checks to work.\n        this._setFlag(Resource.STATUS_FLAGS.DATA_URL, url.indexOf('data:') === 0);\n\n        /**\n         * The name of this resource.\n         *\n         * @member {string}\n         * @readonly\n         */\n        this.name = name;\n\n        /**\n         * The url used to load this resource.\n         *\n         * @member {string}\n         * @readonly\n         */\n        this.url = url;\n\n        /**\n         * The extension used to load this resource.\n         *\n         * @member {string}\n         * @readonly\n         */\n        this.extension = this._getExtension();\n\n        /**\n         * The data that was loaded by the resource.\n         *\n         * @member {any}\n         */\n        this.data = null;\n\n        /**\n         * Is this request cross-origin? If unset, determined automatically.\n         *\n         * @member {string}\n         */\n        this.crossOrigin = options.crossOrigin === true ? 'anonymous' : options.crossOrigin;\n\n        /**\n         * The method of loading to use for this resource.\n         *\n         * @member {Resource.LOAD_TYPE}\n         */\n        this.loadType = options.loadType || this._determineLoadType();\n\n        /**\n         * The type used to load the resource via XHR. If unset, determined automatically.\n         *\n         * @member {string}\n         */\n        this.xhrType = options.xhrType;\n\n        /**\n         * Extra info for middleware, and controlling specifics about how the resource loads.\n         *\n         * Note that if you pass in a `loadElement`, the Resource class takes ownership of it.\n         * Meaning it will modify it as it sees fit.\n         *\n         * @member {object}\n         * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The\n         *  element to use for loading, instead of creating one.\n         * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This\n         *  is useful if you want to pass in a `loadElement` that you already added load sources\n         *  to.\n         */\n        this.metadata = options.metadata || {};\n\n        /**\n         * The error that occurred while loading (if any).\n         *\n         * @member {Error}\n         * @readonly\n         */\n        this.error = null;\n\n        /**\n         * The XHR object that was used to load this resource. This is only set\n         * when `loadType` is `Resource.LOAD_TYPE.XHR`.\n         *\n         * @member {XMLHttpRequest}\n         * @readonly\n         */\n        this.xhr = null;\n\n        /**\n         * The child resources this resource owns.\n         *\n         * @member {Resource[]}\n         * @readonly\n         */\n        this.children = [];\n\n        /**\n         * The resource type.\n         *\n         * @member {Resource.TYPE}\n         * @readonly\n         */\n        this.type = Resource.TYPE.UNKNOWN;\n\n        /**\n         * The progress chunk owned by this resource.\n         *\n         * @member {number}\n         * @readonly\n         */\n        this.progressChunk = 0;\n\n        /**\n         * The `dequeue` method that will be used a storage place for the async queue dequeue method\n         * used privately by the loader.\n         *\n         * @private\n         * @member {function}\n         */\n        this._dequeue = _noop;\n\n        /**\n         * Used a storage place for the on load binding used privately by the loader.\n         *\n         * @private\n         * @member {function}\n         */\n        this._onLoadBinding = null;\n\n        /**\n         * The `complete` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundComplete = this.complete.bind(this);\n\n        /**\n         * The `_onError` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundOnError = this._onError.bind(this);\n\n        /**\n         * The `_onProgress` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundOnProgress = this._onProgress.bind(this);\n\n        // xhr callbacks\n        this._boundXhrOnError = this._xhrOnError.bind(this);\n        this._boundXhrOnAbort = this._xhrOnAbort.bind(this);\n        this._boundXhrOnLoad = this._xhrOnLoad.bind(this);\n        this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this);\n\n        /**\n         * Dispatched when the resource beings to load.\n         *\n         * The callback looks like {@link Resource.OnStartSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onStart = new _miniSignals2.default();\n\n        /**\n         * Dispatched each time progress of this resource load updates.\n         * Not all resources types and loader systems can support this event\n         * so sometimes it may not be available. If the resource\n         * is being loaded on a modern browser, using XHR, and the remote server\n         * properly sets Content-Length headers, then this will be available.\n         *\n         * The callback looks like {@link Resource.OnProgressSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onProgress = new _miniSignals2.default();\n\n        /**\n         * Dispatched once this resource has loaded, if there was an error it will\n         * be in the `error` property.\n         *\n         * The callback looks like {@link Resource.OnCompleteSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onComplete = new _miniSignals2.default();\n\n        /**\n         * Dispatched after this resource has had all the *after* middleware run on it.\n         *\n         * The callback looks like {@link Resource.OnCompleteSignal}.\n         *\n         * @member {Signal}\n         */\n        this.onAfterMiddleware = new _miniSignals2.default();\n\n        /**\n         * When the resource starts to load.\n         *\n         * @memberof Resource\n         * @callback OnStartSignal\n         * @param {Resource} resource - The resource that the event happened on.\n         */\n\n        /**\n         * When the resource reports loading progress.\n         *\n         * @memberof Resource\n         * @callback OnProgressSignal\n         * @param {Resource} resource - The resource that the event happened on.\n         * @param {number} percentage - The progress of the load in the range [0, 1].\n         */\n\n        /**\n         * When the resource finishes loading.\n         *\n         * @memberof Resource\n         * @callback OnCompleteSignal\n         * @param {Resource} resource - The resource that the event happened on.\n         */\n    }\n\n    /**\n     * Stores whether or not this url is a data url.\n     *\n     * @member {boolean}\n     * @readonly\n     */\n\n\n    /**\n     * Marks the resource as complete.\n     *\n     */\n    Resource.prototype.complete = function complete() {\n        // TODO: Clean this up in a wrapper or something...gross....\n        if (this.data && this.data.removeEventListener) {\n            this.data.removeEventListener('error', this._boundOnError, false);\n            this.data.removeEventListener('load', this._boundComplete, false);\n            this.data.removeEventListener('progress', this._boundOnProgress, false);\n            this.data.removeEventListener('canplaythrough', this._boundComplete, false);\n        }\n\n        if (this.xhr) {\n            if (this.xhr.removeEventListener) {\n                this.xhr.removeEventListener('error', this._boundXhrOnError, false);\n                this.xhr.removeEventListener('abort', this._boundXhrOnAbort, false);\n                this.xhr.removeEventListener('progress', this._boundOnProgress, false);\n                this.xhr.removeEventListener('load', this._boundXhrOnLoad, false);\n            } else {\n                this.xhr.onerror = null;\n                this.xhr.ontimeout = null;\n                this.xhr.onprogress = null;\n                this.xhr.onload = null;\n            }\n        }\n\n        if (this.isComplete) {\n            throw new Error('Complete called again for an already completed resource.');\n        }\n\n        this._setFlag(Resource.STATUS_FLAGS.COMPLETE, true);\n        this._setFlag(Resource.STATUS_FLAGS.LOADING, false);\n\n        this.onComplete.dispatch(this);\n    };\n\n    /**\n     * Aborts the loading of this resource, with an optional message.\n     *\n     * @param {string} message - The message to use for the error\n     */\n\n\n    Resource.prototype.abort = function abort(message) {\n        // abort can be called multiple times, ignore subsequent calls.\n        if (this.error) {\n            return;\n        }\n\n        // store error\n        this.error = new Error(message);\n\n        // abort the actual loading\n        if (this.xhr) {\n            this.xhr.abort();\n        } else if (this.xdr) {\n            this.xdr.abort();\n        } else if (this.data) {\n            // single source\n            if (this.data.src) {\n                this.data.src = Resource.EMPTY_GIF;\n            }\n            // multi-source\n            else {\n                    while (this.data.firstChild) {\n                        this.data.removeChild(this.data.firstChild);\n                    }\n                }\n        }\n\n        // done now.\n        this.complete();\n    };\n\n    /**\n     * Kicks off loading of this resource. This method is asynchronous.\n     *\n     * @param {function} [cb] - Optional callback to call once the resource is loaded.\n     */\n\n\n    Resource.prototype.load = function load(cb) {\n        var _this = this;\n\n        if (this.isLoading) {\n            return;\n        }\n\n        if (this.isComplete) {\n            if (cb) {\n                setTimeout(function () {\n                    return cb(_this);\n                }, 1);\n            }\n\n            return;\n        } else if (cb) {\n            this.onComplete.once(cb);\n        }\n\n        this._setFlag(Resource.STATUS_FLAGS.LOADING, true);\n\n        this.onStart.dispatch(this);\n\n        // if unset, determine the value\n        if (this.crossOrigin === false || typeof this.crossOrigin !== 'string') {\n            this.crossOrigin = this._determineCrossOrigin(this.url);\n        }\n\n        switch (this.loadType) {\n            case Resource.LOAD_TYPE.IMAGE:\n                this.type = Resource.TYPE.IMAGE;\n                this._loadElement('image');\n                break;\n\n            case Resource.LOAD_TYPE.AUDIO:\n                this.type = Resource.TYPE.AUDIO;\n                this._loadSourceElement('audio');\n                break;\n\n            case Resource.LOAD_TYPE.VIDEO:\n                this.type = Resource.TYPE.VIDEO;\n                this._loadSourceElement('video');\n                break;\n\n            case Resource.LOAD_TYPE.XHR:\n            /* falls through */\n            default:\n                if (useXdr && this.crossOrigin) {\n                    this._loadXdr();\n                } else {\n                    this._loadXhr();\n                }\n                break;\n        }\n    };\n\n    /**\n     * Checks if the flag is set.\n     *\n     * @private\n     * @param {number} flag - The flag to check.\n     * @return {boolean} True if the flag is set.\n     */\n\n\n    Resource.prototype._hasFlag = function _hasFlag(flag) {\n        return !!(this._flags & flag);\n    };\n\n    /**\n     * (Un)Sets the flag.\n     *\n     * @private\n     * @param {number} flag - The flag to (un)set.\n     * @param {boolean} value - Whether to set or (un)set the flag.\n     */\n\n\n    Resource.prototype._setFlag = function _setFlag(flag, value) {\n        this._flags = value ? this._flags | flag : this._flags & ~flag;\n    };\n\n    /**\n     * Loads this resources using an element that has a single source,\n     * like an HTMLImageElement.\n     *\n     * @private\n     * @param {string} type - The type of element to use.\n     */\n\n\n    Resource.prototype._loadElement = function _loadElement(type) {\n        if (this.metadata.loadElement) {\n            this.data = this.metadata.loadElement;\n        } else if (type === 'image' && typeof window.Image !== 'undefined') {\n            this.data = new Image();\n        } else {\n            this.data = document.createElement(type);\n        }\n\n        if (this.crossOrigin) {\n            this.data.crossOrigin = this.crossOrigin;\n        }\n\n        if (!this.metadata.skipSource) {\n            this.data.src = this.url;\n        }\n\n        this.data.addEventListener('error', this._boundOnError, false);\n        this.data.addEventListener('load', this._boundComplete, false);\n        this.data.addEventListener('progress', this._boundOnProgress, false);\n    };\n\n    /**\n     * Loads this resources using an element that has multiple sources,\n     * like an HTMLAudioElement or HTMLVideoElement.\n     *\n     * @private\n     * @param {string} type - The type of element to use.\n     */\n\n\n    Resource.prototype._loadSourceElement = function _loadSourceElement(type) {\n        if (this.metadata.loadElement) {\n            this.data = this.metadata.loadElement;\n        } else if (type === 'audio' && typeof window.Audio !== 'undefined') {\n            this.data = new Audio();\n        } else {\n            this.data = document.createElement(type);\n        }\n\n        if (this.data === null) {\n            this.abort('Unsupported element: ' + type);\n\n            return;\n        }\n\n        if (!this.metadata.skipSource) {\n            // support for CocoonJS Canvas+ runtime, lacks document.createElement('source')\n            if (navigator.isCocoonJS) {\n                this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;\n            } else if (Array.isArray(this.url)) {\n                var mimeTypes = this.metadata.mimeType;\n\n                for (var i = 0; i < this.url.length; ++i) {\n                    this.data.appendChild(this._createSource(type, this.url[i], Array.isArray(mimeTypes) ? mimeTypes[i] : mimeTypes));\n                }\n            } else {\n                var _mimeTypes = this.metadata.mimeType;\n\n                this.data.appendChild(this._createSource(type, this.url, Array.isArray(_mimeTypes) ? _mimeTypes[0] : _mimeTypes));\n            }\n        }\n\n        this.data.addEventListener('error', this._boundOnError, false);\n        this.data.addEventListener('load', this._boundComplete, false);\n        this.data.addEventListener('progress', this._boundOnProgress, false);\n        this.data.addEventListener('canplaythrough', this._boundComplete, false);\n\n        this.data.load();\n    };\n\n    /**\n     * Loads this resources using an XMLHttpRequest.\n     *\n     * @private\n     */\n\n\n    Resource.prototype._loadXhr = function _loadXhr() {\n        // if unset, determine the value\n        if (typeof this.xhrType !== 'string') {\n            this.xhrType = this._determineXhrType();\n        }\n\n        var xhr = this.xhr = new XMLHttpRequest();\n\n        // set the request type and url\n        xhr.open('GET', this.url, true);\n\n        // load json as text and parse it ourselves. We do this because some browsers\n        // *cough* safari *cough* can't deal with it.\n        if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON || this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n            xhr.responseType = Resource.XHR_RESPONSE_TYPE.TEXT;\n        } else {\n            xhr.responseType = this.xhrType;\n        }\n\n        xhr.addEventListener('error', this._boundXhrOnError, false);\n        xhr.addEventListener('abort', this._boundXhrOnAbort, false);\n        xhr.addEventListener('progress', this._boundOnProgress, false);\n        xhr.addEventListener('load', this._boundXhrOnLoad, false);\n\n        xhr.send();\n    };\n\n    /**\n     * Loads this resources using an XDomainRequest. This is here because we need to support IE9 (gross).\n     *\n     * @private\n     */\n\n\n    Resource.prototype._loadXdr = function _loadXdr() {\n        // if unset, determine the value\n        if (typeof this.xhrType !== 'string') {\n            this.xhrType = this._determineXhrType();\n        }\n\n        var xdr = this.xhr = new XDomainRequest();\n\n        // XDomainRequest has a few quirks. Occasionally it will abort requests\n        // A way to avoid this is to make sure ALL callbacks are set even if not used\n        // More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n        xdr.timeout = 5000;\n\n        xdr.onerror = this._boundXhrOnError;\n        xdr.ontimeout = this._boundXdrOnTimeout;\n        xdr.onprogress = this._boundOnProgress;\n        xdr.onload = this._boundXhrOnLoad;\n\n        xdr.open('GET', this.url, true);\n\n        // Note: The xdr.send() call is wrapped in a timeout to prevent an\n        // issue with the interface where some requests are lost if multiple\n        // XDomainRequests are being sent at the same time.\n        // Some info here: https://github.com/photonstorm/phaser/issues/1248\n        setTimeout(function () {\n            return xdr.send();\n        }, 1);\n    };\n\n    /**\n     * Creates a source used in loading via an element.\n     *\n     * @private\n     * @param {string} type - The element type (video or audio).\n     * @param {string} url - The source URL to load from.\n     * @param {string} [mime] - The mime type of the video\n     * @return {HTMLSourceElement} The source element.\n     */\n\n\n    Resource.prototype._createSource = function _createSource(type, url, mime) {\n        if (!mime) {\n            mime = type + '/' + this._getExtension(url);\n        }\n\n        var source = document.createElement('source');\n\n        source.src = url;\n        source.type = mime;\n\n        return source;\n    };\n\n    /**\n     * Called if a load errors out.\n     *\n     * @param {Event} event - The error event from the element that emits it.\n     * @private\n     */\n\n\n    Resource.prototype._onError = function _onError(event) {\n        this.abort('Failed to load element using: ' + event.target.nodeName);\n    };\n\n    /**\n     * Called if a load progress event fires for xhr/xdr.\n     *\n     * @private\n     * @param {XMLHttpRequestProgressEvent|Event} event - Progress event.\n     */\n\n\n    Resource.prototype._onProgress = function _onProgress(event) {\n        if (event && event.lengthComputable) {\n            this.onProgress.dispatch(this, event.loaded / event.total);\n        }\n    };\n\n    /**\n     * Called if an error event fires for xhr/xdr.\n     *\n     * @private\n     * @param {XMLHttpRequestErrorEvent|Event} event - Error event.\n     */\n\n\n    Resource.prototype._xhrOnError = function _xhrOnError() {\n        var xhr = this.xhr;\n\n        this.abort(reqType(xhr) + ' Request failed. Status: ' + xhr.status + ', text: \"' + xhr.statusText + '\"');\n    };\n\n    /**\n     * Called if an abort event fires for xhr.\n     *\n     * @private\n     * @param {XMLHttpRequestAbortEvent} event - Abort Event\n     */\n\n\n    Resource.prototype._xhrOnAbort = function _xhrOnAbort() {\n        this.abort(reqType(this.xhr) + ' Request was aborted by the user.');\n    };\n\n    /**\n     * Called if a timeout event fires for xdr.\n     *\n     * @private\n     * @param {Event} event - Timeout event.\n     */\n\n\n    Resource.prototype._xdrOnTimeout = function _xdrOnTimeout() {\n        this.abort(reqType(this.xhr) + ' Request timed out.');\n    };\n\n    /**\n     * Called when data successfully loads from an xhr/xdr request.\n     *\n     * @private\n     * @param {XMLHttpRequestLoadEvent|Event} event - Load event\n     */\n\n\n    Resource.prototype._xhrOnLoad = function _xhrOnLoad() {\n        var xhr = this.xhr;\n        var text = '';\n        var status = typeof xhr.status === 'undefined' ? STATUS_OK : xhr.status; // XDR has no `.status`, assume 200.\n\n        // responseText is accessible only if responseType is '' or 'text' and on older browsers\n        if (xhr.responseType === '' || xhr.responseType === 'text' || typeof xhr.responseType === 'undefined') {\n            text = xhr.responseText;\n        }\n\n        // status can be 0 when using the `file://` protocol so we also check if a response is set.\n        // If it has a response, we assume 200; otherwise a 0 status code with no contents is an aborted request.\n        if (status === STATUS_NONE && text.length > 0) {\n            status = STATUS_OK;\n        }\n        // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n        else if (status === STATUS_IE_BUG_EMPTY) {\n                status = STATUS_EMPTY;\n            }\n\n        var statusType = status / 100 | 0;\n\n        if (statusType === STATUS_TYPE_OK) {\n            // if text, just return it\n            if (this.xhrType === Resource.XHR_RESPONSE_TYPE.TEXT) {\n                this.data = text;\n                this.type = Resource.TYPE.TEXT;\n            }\n            // if json, parse into json object\n            else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON) {\n                    try {\n                        this.data = JSON.parse(text);\n                        this.type = Resource.TYPE.JSON;\n                    } catch (e) {\n                        this.abort('Error trying to parse loaded json: ' + e);\n\n                        return;\n                    }\n                }\n                // if xml, parse into an xml document or div element\n                else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n                        try {\n                            if (window.DOMParser) {\n                                var domparser = new DOMParser();\n\n                                this.data = domparser.parseFromString(text, 'text/xml');\n                            } else {\n                                var div = document.createElement('div');\n\n                                div.innerHTML = text;\n\n                                this.data = div;\n                            }\n\n                            this.type = Resource.TYPE.XML;\n                        } catch (e) {\n                            this.abort('Error trying to parse loaded xml: ' + e);\n\n                            return;\n                        }\n                    }\n                    // other types just return the response\n                    else {\n                            this.data = xhr.response || text;\n                        }\n        } else {\n            this.abort('[' + xhr.status + '] ' + xhr.statusText + ': ' + xhr.responseURL);\n\n            return;\n        }\n\n        this.complete();\n    };\n\n    /**\n     * Sets the `crossOrigin` property for this resource based on if the url\n     * for this resource is cross-origin. If crossOrigin was manually set, this\n     * function does nothing.\n     *\n     * @private\n     * @param {string} url - The url to test.\n     * @param {object} [loc=window.location] - The location object to test against.\n     * @return {string} The crossOrigin value to use (or empty string for none).\n     */\n\n\n    Resource.prototype._determineCrossOrigin = function _determineCrossOrigin(url, loc) {\n        // data: and javascript: urls are considered same-origin\n        if (url.indexOf('data:') === 0) {\n            return '';\n        }\n\n        // default is window.location\n        loc = loc || window.location;\n\n        if (!tempAnchor) {\n            tempAnchor = document.createElement('a');\n        }\n\n        // let the browser determine the full href for the url of this resource and then\n        // parse with the node url lib, we can't use the properties of the anchor element\n        // because they don't work in IE9 :(\n        tempAnchor.href = url;\n        url = (0, _parseUri2.default)(tempAnchor.href, { strictMode: true });\n\n        var samePort = !url.port && loc.port === '' || url.port === loc.port;\n        var protocol = url.protocol ? url.protocol + ':' : '';\n\n        // if cross origin\n        if (url.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\n            return 'anonymous';\n        }\n\n        return '';\n    };\n\n    /**\n     * Determines the responseType of an XHR request based on the extension of the\n     * resource being loaded.\n     *\n     * @private\n     * @return {Resource.XHR_RESPONSE_TYPE} The responseType to use.\n     */\n\n\n    Resource.prototype._determineXhrType = function _determineXhrType() {\n        return Resource._xhrTypeMap[this.extension] || Resource.XHR_RESPONSE_TYPE.TEXT;\n    };\n\n    /**\n     * Determines the loadType of a resource based on the extension of the\n     * resource being loaded.\n     *\n     * @private\n     * @return {Resource.LOAD_TYPE} The loadType to use.\n     */\n\n\n    Resource.prototype._determineLoadType = function _determineLoadType() {\n        return Resource._loadTypeMap[this.extension] || Resource.LOAD_TYPE.XHR;\n    };\n\n    /**\n     * Extracts the extension (sans '.') of the file being loaded by the resource.\n     *\n     * @private\n     * @return {string} The extension.\n     */\n\n\n    Resource.prototype._getExtension = function _getExtension() {\n        var url = this.url;\n        var ext = '';\n\n        if (this.isDataUrl) {\n            var slashIndex = url.indexOf('/');\n\n            ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\n        } else {\n            var queryStart = url.indexOf('?');\n            var hashStart = url.indexOf('#');\n            var index = Math.min(queryStart > -1 ? queryStart : url.length, hashStart > -1 ? hashStart : url.length);\n\n            url = url.substring(0, index);\n            ext = url.substring(url.lastIndexOf('.') + 1);\n        }\n\n        return ext.toLowerCase();\n    };\n\n    /**\n     * Determines the mime type of an XHR request based on the responseType of\n     * resource being loaded.\n     *\n     * @private\n     * @param {Resource.XHR_RESPONSE_TYPE} type - The type to get a mime type for.\n     * @return {string} The mime type to use.\n     */\n\n\n    Resource.prototype._getMimeFromXhrType = function _getMimeFromXhrType(type) {\n        switch (type) {\n            case Resource.XHR_RESPONSE_TYPE.BUFFER:\n                return 'application/octet-binary';\n\n            case Resource.XHR_RESPONSE_TYPE.BLOB:\n                return 'application/blob';\n\n            case Resource.XHR_RESPONSE_TYPE.DOCUMENT:\n                return 'application/xml';\n\n            case Resource.XHR_RESPONSE_TYPE.JSON:\n                return 'application/json';\n\n            case Resource.XHR_RESPONSE_TYPE.DEFAULT:\n            case Resource.XHR_RESPONSE_TYPE.TEXT:\n            /* falls through */\n            default:\n                return 'text/plain';\n\n        }\n    };\n\n    _createClass(Resource, [{\n        key: 'isDataUrl',\n        get: function get() {\n            return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL);\n        }\n\n        /**\n         * Describes if this resource has finished loading. Is true when the resource has completely\n         * loaded.\n         *\n         * @member {boolean}\n         * @readonly\n         */\n\n    }, {\n        key: 'isComplete',\n        get: function get() {\n            return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE);\n        }\n\n        /**\n         * Describes if this resource is currently loading. Is true when the resource starts loading,\n         * and is false again when complete.\n         *\n         * @member {boolean}\n         * @readonly\n         */\n\n    }, {\n        key: 'isLoading',\n        get: function get() {\n            return this._hasFlag(Resource.STATUS_FLAGS.LOADING);\n        }\n    }]);\n\n    return Resource;\n}();\n\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\n\n\nexports.default = Resource;\nResource.STATUS_FLAGS = {\n    NONE: 0,\n    DATA_URL: 1 << 0,\n    COMPLETE: 1 << 1,\n    LOADING: 1 << 2\n};\n\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\nResource.TYPE = {\n    UNKNOWN: 0,\n    JSON: 1,\n    XML: 2,\n    IMAGE: 3,\n    AUDIO: 4,\n    VIDEO: 5,\n    TEXT: 6\n};\n\n/**\n * The types of loading a resource can use.\n *\n * @static\n * @readonly\n * @enum {number}\n */\nResource.LOAD_TYPE = {\n    /** Uses XMLHttpRequest to load the resource. */\n    XHR: 1,\n    /** Uses an `Image` object to load the resource. */\n    IMAGE: 2,\n    /** Uses an `Audio` object to load the resource. */\n    AUDIO: 3,\n    /** Uses a `Video` object to load the resource. */\n    VIDEO: 4\n};\n\n/**\n * The XHR ready states, used internally.\n *\n * @static\n * @readonly\n * @enum {string}\n */\nResource.XHR_RESPONSE_TYPE = {\n    /** string */\n    DEFAULT: 'text',\n    /** ArrayBuffer */\n    BUFFER: 'arraybuffer',\n    /** Blob */\n    BLOB: 'blob',\n    /** Document */\n    DOCUMENT: 'document',\n    /** Object */\n    JSON: 'json',\n    /** String */\n    TEXT: 'text'\n};\n\nResource._loadTypeMap = {\n    // images\n    gif: Resource.LOAD_TYPE.IMAGE,\n    png: Resource.LOAD_TYPE.IMAGE,\n    bmp: Resource.LOAD_TYPE.IMAGE,\n    jpg: Resource.LOAD_TYPE.IMAGE,\n    jpeg: Resource.LOAD_TYPE.IMAGE,\n    tif: Resource.LOAD_TYPE.IMAGE,\n    tiff: Resource.LOAD_TYPE.IMAGE,\n    webp: Resource.LOAD_TYPE.IMAGE,\n    tga: Resource.LOAD_TYPE.IMAGE,\n    svg: Resource.LOAD_TYPE.IMAGE,\n    'svg+xml': Resource.LOAD_TYPE.IMAGE, // for SVG data urls\n\n    // audio\n    mp3: Resource.LOAD_TYPE.AUDIO,\n    ogg: Resource.LOAD_TYPE.AUDIO,\n    wav: Resource.LOAD_TYPE.AUDIO,\n\n    // videos\n    mp4: Resource.LOAD_TYPE.VIDEO,\n    webm: Resource.LOAD_TYPE.VIDEO\n};\n\nResource._xhrTypeMap = {\n    // xml\n    xhtml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    html: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    htm: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    xml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    tmx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    svg: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\n    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n    // this should probably be fine.\n    tsx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\n    // images\n    gif: Resource.XHR_RESPONSE_TYPE.BLOB,\n    png: Resource.XHR_RESPONSE_TYPE.BLOB,\n    bmp: Resource.XHR_RESPONSE_TYPE.BLOB,\n    jpg: Resource.XHR_RESPONSE_TYPE.BLOB,\n    jpeg: Resource.XHR_RESPONSE_TYPE.BLOB,\n    tif: Resource.XHR_RESPONSE_TYPE.BLOB,\n    tiff: Resource.XHR_RESPONSE_TYPE.BLOB,\n    webp: Resource.XHR_RESPONSE_TYPE.BLOB,\n    tga: Resource.XHR_RESPONSE_TYPE.BLOB,\n\n    // json\n    json: Resource.XHR_RESPONSE_TYPE.JSON,\n\n    // text\n    text: Resource.XHR_RESPONSE_TYPE.TEXT,\n    txt: Resource.XHR_RESPONSE_TYPE.TEXT,\n\n    // fonts\n    ttf: Resource.XHR_RESPONSE_TYPE.BUFFER,\n    otf: Resource.XHR_RESPONSE_TYPE.BUFFER\n};\n\n// We can't set the `src` attribute to empty string, so on abort we set it to this 1px transparent gif\nResource.EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n\n/**\n * Quick helper to set a value on one of the extension maps. Ensures there is no\n * dot at the start of the extension.\n *\n * @ignore\n * @param {object} map - The map to set on.\n * @param {string} extname - The extension (or key) to set.\n * @param {number} val - The value to set.\n */\nfunction setExtMap(map, extname, val) {\n    if (extname && extname.indexOf('.') === 0) {\n        extname = extname.substring(1);\n    }\n\n    if (!extname) {\n        return;\n    }\n\n    map[extname] = val;\n}\n\n/**\n * Quick helper to get string xhr type.\n *\n * @ignore\n * @param {XMLHttpRequest|XDomainRequest} xhr - The request to check.\n * @return {string} The type.\n */\nfunction reqType(xhr) {\n    return xhr.toString().replace('object ', '');\n}\n//# sourceMappingURL=Resource.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/resource-loader/lib/Resource.js","'use strict';\n\nexports.__esModule = true;\nexports.encodeBinary = encodeBinary;\nvar _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction encodeBinary(input) {\n    var output = '';\n    var inx = 0;\n\n    while (inx < input.length) {\n        // Fill byte buffer array\n        var bytebuffer = [0, 0, 0];\n        var encodedCharIndexes = [0, 0, 0, 0];\n\n        for (var jnx = 0; jnx < bytebuffer.length; ++jnx) {\n            if (inx < input.length) {\n                // throw away high-order byte, as documented at:\n                // https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data\n                bytebuffer[jnx] = input.charCodeAt(inx++) & 0xff;\n            } else {\n                bytebuffer[jnx] = 0;\n            }\n        }\n\n        // Get each encoded character, 6 bits at a time\n        // index 1: first 6 bits\n        encodedCharIndexes[0] = bytebuffer[0] >> 2;\n\n        // index 2: second 6 bits (2 least significant bits from input byte 1 + 4 most significant bits from byte 2)\n        encodedCharIndexes[1] = (bytebuffer[0] & 0x3) << 4 | bytebuffer[1] >> 4;\n\n        // index 3: third 6 bits (4 least significant bits from input byte 2 + 2 most significant bits from byte 3)\n        encodedCharIndexes[2] = (bytebuffer[1] & 0x0f) << 2 | bytebuffer[2] >> 6;\n\n        // index 3: forth 6 bits (6 least significant bits from input byte 3)\n        encodedCharIndexes[3] = bytebuffer[2] & 0x3f;\n\n        // Determine whether padding happened, and adjust accordingly\n        var paddingBytes = inx - (input.length - 1);\n\n        switch (paddingBytes) {\n            case 2:\n                // Set last 2 characters to padding char\n                encodedCharIndexes[3] = 64;\n                encodedCharIndexes[2] = 64;\n                break;\n\n            case 1:\n                // Set last character to padding char\n                encodedCharIndexes[3] = 64;\n                break;\n\n            default:\n                break; // No padding - proceed\n        }\n\n        // Now we will grab each appropriate character out of our keystring\n        // based on our index array and append it to the output string\n        for (var _jnx = 0; _jnx < encodedCharIndexes.length; ++_jnx) {\n            output += _keyStr.charAt(encodedCharIndexes[_jnx]);\n        }\n    }\n\n    return output;\n}\n//# sourceMappingURL=b64.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/resource-loader/lib/b64.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class DebugBattlefieldView extends AbstractPixiView  {\n\n  _create(container) {\n    var background = new PIXI.Graphics();\n    background.beginFill(0x000000);\n    background.lineStyle(1, 0xffff00, 0.8);\n    background.drawRect(0, 0, this.model.width+2*this.model.margin, this.model.height+2*this.model.margin);\n    background.endFill();\n    container.addChild(background);\n    background = new PIXI.Graphics();\n    background.beginFill(0x000000);\n    background.lineStyle(1, 0xffff00, 0.8);\n    background.drawRect(this.model.margin, this.model.margin, this.model.width, this.model.height);\n    background.endFill();\n    container.addChild(background);\n  }\n\n  update(events) {\n\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/debug/DebugBattlefieldView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class DebugClockView extends AbstractPixiView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _create(container) {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 12,\n        fill: '#00ff00'\n    });\n\n    this._label = new PIXI.Text(\"clock\", labelStyle);\n    this._label.x = 5;\n    this._label.y = 5;\n    container.addChild(this._label);\n  }\n\n  update(events) {\n    this._label.setText(this.model.text);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/debug/DebugClockView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiBulletView = require(\"../abstractPixi/AbstractPixiBulletView.js\");\n\nmodule.exports = class DebugBulletView extends AbstractPixiBulletView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _create(container) {\n    var bullet = new PIXI.Graphics();\n    bullet.beginFill(0x00ff00, 0.5);\n    bullet.drawCircle(0, 0, 5);\n    bullet.endFill();\n    container.addChild(bullet);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/debug/DebugBulletView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"./AbstractPixiView.js\");\n\nmodule.exports = class AbstractPixiBulletView extends AbstractPixiView {\n\n  constructor(model) {\n    super(model);\n  }\n\n  update(events) {\n    super.update(events);\n    this.view.scale.x = this.view.scale.y = this.model.power * 0.7 + 0.3;\n    if(this.model.exploded) {\n      this.destroy();\n    }\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/abstractPixi/AbstractPixiBulletView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiTankView = require(\"../abstractPixi/AbstractPixiTankView.js\");\n\nmodule.exports = class DebugTankView extends AbstractPixiTankView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _createBody() {\n    var body = new PIXI.Graphics();\n    body.lineStyle(1, 0xffff00, 0.8);\n    body.beginFill(0x00ff00, 0.5);\n    body.drawRect(-15, -15, 30, 30);\n    body.endFill();\n    return body;\n  }\n\n  _createGun() {\n    var body = new PIXI.Graphics();\n    body.beginFill(0x00ff00, 0.5);\n    body.lineStyle(1, 0xffff00, 0.8);\n    body.drawCircle(0, 0, 10);\n    body.drawRect(0, -3, 30, 6);\n    body.endFill();\n    return body;\n  }\n\n  _createRadar() {\n    var body = new PIXI.Graphics();\n    body.beginFill(0x00ff00, 0.5);\n    body.lineStyle(1, 0xffff00, 0.8);\n    body.drawRect(-3, -10, 6, 20);\n    body.endFill();\n    body.lineStyle();\n    body.beginFill(0xaaffaa, 0.1);\n    body.moveTo(0, -3);\n    var radarRange = 300;\n    var radarFocal = 6;\n    var width = radarRange * Math.tan(radarFocal*(Math.PI/180))/2;\n    body.lineTo(radarRange, -width);\n    body.lineTo(radarRange, width);\n    body.lineTo(0, 3);\n    return body;\n  }\n\n  _createLabel() {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 12,\n        fill: 0x00ff00\n    });\n    var label = new PIXI.Text(\"\", labelStyle);\n    label.anchor.set(0.5, 0.5);\n    label.x = 0;\n    label.y = -40;\n    return label;\n  }\n\n  _createHudBackground() {\n    var statusBarBg =  new PIXI.Graphics();\n    statusBarBg.beginFill(0x000000, 1);\n    statusBarBg.lineStyle(1, 0xffff00, 0.8);\n    statusBarBg.drawRect(-26, -3, 52, 6);\n    statusBarBg.y = -30;\n    return statusBarBg;\n  }\n\n  _createEnergyBar() {\n    var energyBar =  new PIXI.Graphics();\n    energyBar.beginFill(0x00ff00, 1);\n    energyBar.drawRect(0, -2, 50, 4);\n    energyBar.x = -25;\n    energyBar.y = -30;\n    return energyBar;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/debug/DebugTankView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiRenderer = require(\"../abstractPixi/AbstractPixiRenderer.js\");\nvar BWBattlefieldView = require(\"./BWBattlefieldView.js\");\nvar BWClockView = require(\"./BWClockView.js\");\nvar BWBulletView = require(\"./BWBulletView.js\");\nvar BWTankView = require(\"./BWTankView.js\");\n\nmodule.exports = class BWRenderer extends AbstractPixiRenderer  {\n\n  constructor() {\n    super('bw');\n    this._bigBoomAnim = [];\n    this._smallBoomAnim = [];\n    this._shakeTimer = 0;\n  }\n\n  onAssetsLoaded() {\n    for(var i=0; i <= 9; i++) {\n      this._bigBoomAnim.push(PIXI.Texture.fromFrame('big_boom_00' + i));\n      this._smallBoomAnim.push(PIXI.Texture.fromFrame('small_boom_00' + i));\n    }\n  }\n\n  initBatlefield(battlefield) {\n    super.initBatlefield(battlefield);\n  }\n\n  renderTank(tank, events) {\n    super.renderTank(tank, events);\n    if(tank.energy == 0) {\n      this._shakeTimer = 10;\n      this._addExplosion(tank.x, tank.y, this._bigBoomAnim);\n    }\n  }\n\n  renderBullet(bullet, events) {\n    super.renderBullet(bullet, events);\n    if(bullet.exploded) {\n      this._addExplosion(bullet.x, bullet.y, this._smallBoomAnim);\n    }\n  }\n\n  postRender() {\n    super.postRender();\n    if(this._shakeTimer > 0) {\n      this._shakeTimer--;\n      this.masterContainer.x = Math.random()*10-5-this.offsetX;\n      this.masterContainer.y = Math.random()*10-5-this.offsetY;\n    } else {\n      this.masterContainer.x = -this.offsetX;\n      this.masterContainer.y = -this.offsetY;\n    }\n  }\n\n  _createBattlefieldView(battlefield) {\n    return new BWBattlefieldView(battlefield);\n  }\n\n  _createClockView(clock) {\n    return new BWClockView(clock);\n  }\n\n  _createBulletView(bullet) {\n    return new BWBulletView(bullet);\n  }\n\n  _createTankView(tank) {\n    return new BWTankView(tank);\n  }\n\n  _addExplosion(x, y, type) {\n    var anim = new PIXI.extras.AnimatedSprite(type);\n    anim.anchor.set(0.5);\n    this.masterContainer.addChild(anim);\n    anim.x = x;\n    anim.y = y;\n    anim.loop = false;\n    anim.onComplete = function() {\n      this.stop();\n      this.parent.removeChild(this);\n    };\n    anim.play();\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/bw/BWRenderer.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class BWBattlefieldView extends AbstractPixiView  {\n\n  _create(container) {\n    var background = PIXI.Sprite.fromFrame('battlefield');\n    container.addChild(background);\n  }\n\n  update(events) {\n\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/bw/BWBattlefieldView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class BWClockView extends AbstractPixiView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _create(container) {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 15,\n        fill: '#000000'\n    });\n\n    this._label = new PIXI.Text(\"clock\", labelStyle);\n    this._label.x = 10;\n    this._label.y = 600 - 20;\n    container.addChild(this._label);\n  }\n\n  update(events) {\n    this._label.setText(this.model.text);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/bw/BWClockView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiBulletView = require(\"../abstractPixi/AbstractPixiBulletView.js\");\n\nmodule.exports = class BWBulletView extends AbstractPixiBulletView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _create(container) {\n    var bullet = PIXI.Sprite.fromFrame('bullet');\n    bullet.anchor.set(0.5);\n    container.addChild(bullet);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/bw/BWBulletView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiTankView = require(\"../abstractPixi/AbstractPixiTankView.js\");\n\nmodule.exports = class BWTankView extends AbstractPixiTankView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  update(events) {\n    super.update(events);\n    this._shoot.alpha = this.model.isShooting ? 1 : this._shoot.alpha*0.7;\n  }\n\n  _createBody() {\n    var body = PIXI.Sprite.fromFrame('tank_body');\n    body.anchor.set(0.5);\n    return body;\n  }\n\n  _createGun() {\n    var gunContainer = new PIXI.Container();\n\n    var tankGun = PIXI.Sprite.fromFrame('tank_gun');\n    tankGun.anchor.set(0.3, 0.5);\n    gunContainer.addChild(tankGun);\n\n    this._shoot = PIXI.Sprite.fromFrame('tank_shoot');\n    this._shoot.anchor.set(-1.2, 0.5);\n    this._shoot.alpha = 0;\n    gunContainer.addChild(this._shoot);\n\n    return gunContainer;\n  }\n\n  _createRadar() {\n    var tankRadar = PIXI.Sprite.fromFrame('tank_radar');\n    tankRadar.anchor.set(0.5);\n    return tankRadar;\n  }\n\n  _createLabel() {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 12,\n        fill: 0x000000\n    });\n    var label = new PIXI.Text(\"\", labelStyle);\n    label.anchor.set(0.5, 0.5);\n    label.x = 0;\n    label.y = -40;\n    return label;\n  }\n\n  _createHudBackground() {\n    var statusBarBg =  new PIXI.Graphics();\n    statusBarBg.beginFill(0x000000, 1);\n    statusBarBg.drawRect(-26, -3, 52, 6);\n    statusBarBg.y = -30;\n    return statusBarBg;\n  }\n\n  _createEnergyBar() {\n    var energyBar =  new PIXI.Graphics();\n    energyBar.beginFill(0xff0000, 1);\n    energyBar.drawRect(0, -2, 50, 4);\n    energyBar.x = -25;\n    energyBar.y = -30;\n    return energyBar;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/bw/BWTankView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiRenderer = require(\"../abstractPixi/AbstractPixiRenderer.js\");\nvar BrodyBattlefieldView = require(\"./BrodyBattlefieldView.js\");\nvar BrodyClockView = require(\"./BrodyClockView.js\");\nvar BrodyBulletView = require(\"./BrodyBulletView.js\");\nvar BrodyTankView = require(\"./BrodyTankView.js\");\nvar BrodySettings = require(\"./BrodySettings.js\");\n\nmodule.exports = class BrodyRenderer extends AbstractPixiRenderer  {\n\n  constructor() {\n    super('brody');\n    this._bigBoomAnim = [];\n    this._shakeTimer = 0;\n    this._particleContainer = null;\n    this._particleList = [];\n    this._explosionList = [];\n    this._settings = new BrodySettings();\n    this._masterContainer.addChild(this._bulletContainer);\n    this._frameTimer = 0;\n    this._frameCounter = 0;\n    this._fpsInterval = null;\n    this._fps = 30;\n  }\n\n  onAssetsLoaded() {\n    var i;\n    for(i=0; i <= 22; i++) {\n      this._bigBoomAnim.push(PIXI.Texture.fromFrame('big_boom_0' + (i < 10 ? \"0\" + i : i)));\n    }\n  }\n\n  get quality() {\n    return this._settings.quality;\n  }\n\n  set quality(v) {\n    this._settings.quality = v;\n  }\n\n  initBatlefield(battlefield) {\n    super.initBatlefield(battlefield);\n    this.battlefieldView.configure(this._settings);\n    this._particleContainer = new PIXI.particles.ParticleContainer(1000, {\n      position: true,\n      rotation: true,\n      alpha: true\n    });\n    this._masterContainer.addChild(this._particleContainer);\n    this._masterContainer.addChild(this._hudContainer);\n\n    var self = this;\n    this._fpsInterval = setInterval(function() {\n      self._fps = self._frameCounter;\n      self._frameCounter = 0;\n    }, 1000);\n  }\n\n  renderTank(tank, events) {\n    super.renderTank(tank, events);\n    var i;\n    for(i in events) {\n      if(events[i].type == 'destroy') {\n        this._shakeTimer = 10;\n        this._addTankExplosion(tank);\n        break;\n      }\n    }\n\n    var directionCorrection = tank.throttle > 0 ? 180 : 0;\n    var dirtAngle = (tank.angle+directionCorrection)*(Math.PI/180);\n    if(tank.speed > 1) {\n      var corner1X = tank.x + 20*Math.cos(dirtAngle-Math.PI/4) + 7*Math.cos(dirtAngle);\n      var corner1Y = tank.y + 20*Math.sin(dirtAngle-Math.PI/4) + 7*Math.sin(dirtAngle);\n      var corner2X = tank.x + 20*Math.cos(dirtAngle+Math.PI/4) + 7*Math.cos(dirtAngle);\n      var corner2Y = tank.y + 20*Math.sin(dirtAngle+Math.PI/4) + 7*Math.sin(dirtAngle);\n\n      this._addDirt(\n        corner1X,\n        corner1Y\n      );\n      this._addDirt(\n        corner2X,\n        corner2Y\n      );\n    }\n  }\n\n  renderBullet(bullet, events) {\n    super.renderBullet(bullet, events);\n    var view = this.getBulletView(bullet.id);\n    view.configure(this._settings);\n    if(bullet.exploded) {\n      this._addBulletExplosion(bullet);\n      this.battlefieldView.addBulletHole(bullet.x, bullet.y, bullet.power);\n    }\n  }\n\n  preRender() {\n    super.preRender();\n    var particle;\n    var particleCount = 0;\n    var i;\n    for(i = this._particleList.length-1; i >= 0; i--) {\n      particle = this._particleList[i];\n      if(!particle) {\n        continue;\n      }\n\n      particle.x += particle.speed * particle.rotation * Math.cos(particle.rotation);\n      particle.y += particle.speed * particle.rotation * Math.sin(particle.rotation);\n      particle.alpha = Math.max(0, particle.alpha-particle.alphaSpeed);\n\n      particle.lifetime--;\n      if(particle.lifetime <= 0 || particleCount > this._settings.particleLimit) {\n        particle.parent.removeChild(particle);\n        this._particleList[i] = null;\n      } else {\n        particleCount++;\n      }\n    }\n    for(i=0; i < this._explosionList.length; i++) {\n      if(!this._explosionList[i]) continue;\n      this._explosionList[i].alpha *= 0.7;\n      if(this._explosionList[i].alpha < 0.01) {\n        this._explosionList[i].parent.removeChild(this._explosionList[i]);\n        this._explosionList[i] = null;\n      }\n    }\n\n  }\n\n  postRender() {\n    this._frameTimer++;\n    this._frameCounter++;\n    if(this._frameTimer % this._settings.dropFrames == 0){\n      super.postRender();\n    }\n    if(this._shakeTimer > 0) {\n      this._shakeTimer--;\n      this.masterContainer.x = Math.random()*10-5-this.offsetX;\n      this.masterContainer.y = Math.random()*10-5-this.offsetY;\n      this._battlefieldView.view.x = Math.random()*10-5;\n      this._battlefieldView.view.y = Math.random()*10-5;\n    } else {\n      this.masterContainer.x = -this.offsetX;\n      this.masterContainer.y = -this.offsetY;\n      this._battlefieldView.view.x = 0;\n      this._battlefieldView.view.y = 0;\n    }\n  }\n\n  stop() {\n    if(this._fpsInterval) {\n      clearInterval(this._fpsInterval);\n    }\n  }\n\n  _addTankExplosion(tank) {\n    this._addExplosion(tank.x, tank.y, this._bigBoomAnim);\n    this.battlefieldView.addCrater(tank.x, tank.y);\n    this._addSparks(\n      tank.x,\n      tank.y,\n      300\n    );\n  }\n\n  _addBulletExplosion(bullet) {\n    this._addGlow(bullet.x, bullet.y, 0.3 + 0.6*bullet.power);\n    var sparks = 5 + 40 * bullet.power;\n    this._addSparks(\n      bullet.x,\n      bullet.y,\n      sparks\n    );\n  }\n\n  _createBattlefieldView(battlefield) {\n    return new BrodyBattlefieldView(battlefield);\n  }\n\n  _createClockView(clock) {\n    return new BrodyClockView(clock);\n  }\n\n  _createBulletView(bullet) {\n    return new BrodyBulletView(bullet);\n  }\n\n  _createTankView(tank) {\n    return new BrodyTankView(tank);\n  }\n\n  _addExplosion(x, y, type) {\n    this._addGlow(x, y, 5);\n\n    var anim = new PIXI.extras.AnimatedSprite(type);\n    anim.anchor.set(0.5);\n    this.masterContainer.addChild(anim);\n    anim.x = x;\n    anim.y = y;\n    anim.loop = false;\n    anim.blendMode = PIXI.BLEND_MODES.ADD;\n    anim.onComplete = function() {\n      this.stop();\n      this.parent.removeChild(this);\n    };\n    anim.play();\n  }\n\n  _addGlow(x, y, scale) {\n    if(!this._settings.showGlow) return;\n    var glow = PIXI.Sprite.fromFrame('glow');\n    glow.anchor.set(0.5);\n    glow.scale.x = glow.scale.y = scale;\n    glow.alpha = 0.4;\n    glow.blendMode = PIXI.BLEND_MODES.ADD;\n    glow.x = x;\n    glow.y = y;\n    this.masterContainer.addChild(glow);\n    this._explosionList.push(glow);\n  }\n\n  _addSparks(x, y, amount) {\n    amount = Math.ceil(amount*this._settings.quality);\n    for(var i=0; i < amount; i++) {\n      var particle = PIXI.Sprite.fromFrame('spark');\n      particle.x = x;\n      particle.y = y;\n      particle.alphaSpeed = 0;\n      particle.anchor.set(0.5);\n      particle.speed = 1+Math.random()*2;\n      particle.rotation = Math.random()*2*Math.PI;\n      particle.lifetime = 5+Math.random()*5;\n      this._particleContainer.addChild(particle);\n      this._particleList.push(particle);\n    }\n  }\n\n  _addDirt(x, y) {\n    if(!this._settings.showDirt) return;\n    for(var i=0; i < 5; i++) {\n      var index = Math.floor(Math.random()*3);\n      var particle = PIXI.Sprite.fromFrame('dirt_' + index);\n      particle.x = x+Math.random()*4-2;\n      particle.y = y+Math.random()*4-2;\n      particle.anchor.set(0.5);\n      particle.speed = 0;\n      particle.alphaSpeed = 0.02 + Math.random()*0.02;\n      particle.rotation = 0;\n      particle.alpha = 0.1+0.4*Math.random();\n      particle.lifetime = 25;\n      particle.scale.x = particle.scale.y = 0.5 + 2*Math.random();\n      this._particleContainer.addChild(particle);\n      this._particleList.push(particle);\n    }\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodyRenderer.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class BrodyBattlefieldView extends AbstractPixiView  {\n\n  constructor(model) {\n    super(model);\n    this._holeList = [];\n    this._settings = null;\n  }\n\n  configure(settings) {\n    this._settings = settings;\n  }\n\n  _create(container) {\n    var background = PIXI.Sprite.fromFrame('battlefield');\n    container.addChild(background);\n\n    var groundMask = new PIXI.Graphics();\n    groundMask.beginFill(0x0000ff, 1);\n    groundMask.moveTo(25, 25);\n    groundMask.lineTo(900-25, 25);\n    groundMask.lineTo(900-25, 600-25);\n    groundMask.lineTo(90, 600-25);\n    groundMask.lineTo(90, 600-35);\n    groundMask.lineTo(25, 600-35);\n    groundMask.lineTo(25, 25);\n    groundMask.endFill();\n    this._craterContainer = new PIXI.Container();\n    this._craterContainer.mask = groundMask;\n    container.addChild(this._craterContainer);\n    container.addChild(groundMask);\n\n    var wallMask = new PIXI.Graphics();\n    wallMask.beginFill(0x0000ff, 0.4);\n    wallMask.moveTo(15, 15);\n    wallMask.lineTo(900-15, 15);\n    wallMask.lineTo(900-15, 600-15);\n    wallMask.lineTo(80, 600-15);\n    wallMask.lineTo(80, 600-25);\n    wallMask.lineTo(15, 600-25);\n    wallMask.lineTo(15, 15);\n    wallMask.lineTo(25, 25);\n    wallMask.lineTo(25, 600-25);\n    wallMask.lineTo(80, 600-25);\n    wallMask.lineTo(80, 600-25);\n    wallMask.lineTo(900-25, 600-25);\n    wallMask.lineTo(900-25, 25);\n    wallMask.lineTo(25, 25);\n    wallMask.endFill();\n    this._holesContainer = new PIXI.Container();\n    this._holesContainer.mask = wallMask;\n    container.addChild(this._holesContainer);\n    container.addChild(wallMask);\n  }\n\n  addCrater(x, y) {\n    var crater = PIXI.Sprite.fromFrame('crater');\n    crater.anchor.set(0.5);\n    crater.x = x - this.model.offsetX;\n    crater.y = y - this.model.offsetY;\n    crater.blendMode = PIXI.BLEND_MODES.MULTIPLY;\n    crater.alpha = 0.8;\n    this._craterContainer.addChild(crater);\n  }\n\n  update() {\n    super.update();\n    this._holesContainer.visible = (this._settings.skratchLimit > 0);\n    this._craterContainer.visible = this._settings.showCraters;\n  }\n\n  addBulletHole(x, y, power) {\n    var rotation = 0;\n    if(Math.abs(y - this.model.maxY) < 10) {\n      y = this.model.maxY + 3 +  Math.random()*3;\n    } else if(Math.abs(y - this.model.minY) < 10) {\n      y = this.model.minY - 3 -  Math.random()*3;\n    } else if(Math.abs(x - this.model.maxX) < 10) {\n      x = this.model.maxX + 3 +  Math.random()*3;\n      rotation = Math.PI/2;\n    } else if(Math.abs(x - this.model.minX) < 10) {\n      x = this.model.minX - 3 -  Math.random()*3;\n      rotation = Math.PI/2;\n    } else {\n      return;\n    }\n\n    var hole = PIXI.Sprite.fromFrame('hole');\n    hole.anchor.set(0.5);\n    hole.x = x - this.model.offsetX;\n    hole.y = y - this.model.offsetY;\n    hole.rotation = rotation;\n    hole.scale.x = hole.scale.y = 0.7 + 0.5*power;\n    this._holesContainer.addChild(hole);\n    this._holeList.push(hole);\n    var limit = this._settings ? this._settings.skratchLimit : 20;\n    while(this._holeList.length > limit) {\n      hole = this._holeList.shift();\n      hole.parent.removeChild(hole);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodyBattlefieldView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiView = require(\"../abstractPixi/AbstractPixiView.js\");\n\nmodule.exports = class BrodyClockView extends AbstractPixiView  {\n\n  constructor(model) {\n    super(model);\n  }\n\n  _create(container) {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 15,\n        fill: '#000000'\n    });\n\n    this._label = new PIXI.Text(\"clock\", labelStyle);\n    this._label.x = 10;\n    this._label.y = 600 - 20;\n    container.addChild(this._label);\n  }\n\n  update(events) {\n    this._label.setText(this.model.text);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodyClockView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiBulletView = require(\"../abstractPixi/AbstractPixiBulletView.js\");\n\nmodule.exports = class BrodyBulletView extends AbstractPixiBulletView  {\n\n  constructor(model, settings) {\n    super(model);\n  }\n\n  configure(settings) {\n    this._settings = settings;\n  }\n\n  update(events) {\n    super.update(events);\n    this._glow.visible = this._settings && this._settings.showGlow;\n  }\n\n  _create(container) {\n    var bullet = PIXI.Sprite.fromFrame('bullet');\n    bullet.anchor.set(0.5);\n    var glow = PIXI.Sprite.fromFrame('glow');\n    glow.anchor.set(0.5);\n    glow.blendMode = PIXI.BLEND_MODES.ADD;\n    glow.alpha = 0.1;\n    this._glow = glow;\n    container.addChild(glow);\n    container.addChild(bullet);\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodyBulletView.js","/* globals PIXI */\n'use strict';\n\nvar AbstractPixiTankView = require(\"../abstractPixi/AbstractPixiTankView.js\");\n\nmodule.exports = class BrodyTankView extends AbstractPixiTankView  {\n\n  constructor(model) {\n    super(model);\n    this._lightTimer = 0;\n  }\n\n  update(events) {\n    super.update(events);\n    this._shoot.alpha =  this._shoot.alpha*0.8;\n    this._tankGun.x = this._tankGun.x*0.8;\n    this.radar.rotation = (- this.model.gunAngle + this._model.radarAngle) * (Math.PI/180);\n\n    this._lightTimer = this.model.enemySpot ? this._lightTimer+1 : 0;\n\n    this._light.alpha = -Math.cos(this._lightTimer * 0.25) * 0.5 + 0.5;\n  }\n\n  _onShoot(event) {\n    super._onShoot(event);\n    this._tankGun.x = -1-3*event.bullet.power;\n    this._shoot.alpha = 1;\n  }\n\n  _create(container) {\n    super._create(container);\n    this._tankGun.addChild(this.radar);\n  }\n\n  _createBody() {\n    var body = PIXI.Sprite.fromFrame('tank_body_' + this.model.skin);\n    body.anchor.set(0.3, 0.5);\n    return body;\n  }\n\n  _createGun() {\n    var gunContainer = new PIXI.Container();\n\n    var tankGun = PIXI.Sprite.fromFrame('tank_gun_' + this.model.skin);\n    tankGun.anchor.set(0.3, 0.5);\n    gunContainer.addChild(tankGun);\n    this._tankGun = tankGun;\n\n    this._shoot = PIXI.Sprite.fromFrame('tank_shoot');\n    this._shoot.anchor.set(0.3, 0.5);\n    this._shoot.alpha = 0;\n\n    this._light = PIXI.Sprite.fromFrame('tank_light');\n    this._light.anchor.set(0.3, 0.5);\n    this._light.alpha = 0;\n\n    gunContainer.addChild(this._shoot);\n    gunContainer.addChild(this._light);\n\n    return gunContainer;\n  }\n\n  _createRadar() {\n    var tankRadar = PIXI.Sprite.fromFrame('tank_radar_' + this.model.skin);\n    tankRadar.anchor.set(0.2, 0.5);\n    tankRadar.x=-5;\n    return tankRadar;\n  }\n\n  _createLabel() {\n    var labelStyle = new PIXI.TextStyle({\n        fontFamily: 'Arial',\n        fontSize: 10,\n        stroke: 0x000000,\n        strokeThickness: 2,\n        fill: 0xffffbb\n    });\n    var label = new PIXI.Text(\"\", labelStyle);\n    label.anchor.set(0.5, 0.5);\n    label.x = 0;\n    label.y = -40;\n    return label;\n  }\n\n  _createHudBackground() {\n    var statusBarBg =  new PIXI.Graphics();\n    statusBarBg.beginFill(0x000000, 1);\n    statusBarBg.drawRect(-26, -3, 52, 6);\n    statusBarBg.y = -30;\n    return statusBarBg;\n  }\n\n  _createEnergyBar() {\n    var energyBar =  new PIXI.Graphics();\n    energyBar.beginFill(0xffff99, 1);\n    energyBar.drawRect(0, -2, 50, 4);\n    energyBar.x = -25;\n    energyBar.y = -30;\n    return energyBar;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodyTankView.js","'use strict';\n\nmodule.exports = class BrodySettings   {\n\n  constructor(model) {\n    this._particleLimit = 1000;\n    this._skratchLimit = 100;\n    this._showDirt = true;\n    this._showGlow = true;\n    this._showCraters = true;\n    this._dropFrames = 1;\n    this._quality = 1;\n    this.quality = this._quality;\n  }\n  get dropFrames() {\n    return this._dropFrames;\n  }\n  get particleLimit() {\n    return this._particleLimit;\n  }\n  get skratchLimit() {\n    return this._skratchLimit;\n  }\n  get showDirt() {\n    return this._showDirt;\n  }\n  get showGlow() {\n    return this._showGlow;\n  }\n  get showCraters() {\n    return this._showCraters;\n  }\n  get quality() {\n    return this._quality;\n  }\n  set quality(v) {\n    v = Math.min(1, Math.max(0, v));\n    this._quality = v;\n    this._particleLimit = Math.round(1000*v*v);\n    this._skratchLimit = Math.round(100*v);\n    this._showDirt = (v > 0.2);\n    this._showGlow = (v > 0.5);\n    this._showCraters = (v > 0.1);\n    if(v > 0.3) {\n      this._dropFrames = 1;\n    } else if(v > 0.2) {\n      this._dropFrames = 2;\n    } else if(v > 0.1) {\n      this._dropFrames = 3;\n    } else {\n      this._dropFrames = 4;\n    }\n    this._quality = v;\n  }\n\n\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/engine/renderers/brody/BrodySettings.js"],"sourceRoot":""}