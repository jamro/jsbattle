/*! For license information please see jsbattle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={8056:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},a.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var f=r(501),p=r(3501),h=r(3933),d=r(98),y=["/properties"],m="http://json-schema.org/draft-07/schema",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(v,e);var t,r,n,s,f=(n=v,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(n);if(s){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function v(){return o(this,v),f.apply(this,arguments)}return t=v,(r=[{key:"_addVocabularies",value:function(){var e=this;a(l(v.prototype),"_addVocabularies",this).call(this),p.default.forEach((function(t){return e.addVocabulary(t)})),this.opts.discriminator&&this.addKeyword(h.default)}},{key:"_addDefaultMetaSchema",value:function(){if(a(l(v.prototype),"_addDefaultMetaSchema",this).call(this),this.opts.meta){var e=this.opts.$data?this.$dataMetaSchema(d,y):d;this.addMetaSchema(e,m,!1),this.refs["http://json-schema.org/schema"]=m}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=a(l(v.prototype),"defaultMeta",this).call(this)||(this.getSchema(m)?m:void 0)}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),v}(f.default);e.exports=t=v,Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var b=r(8612);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return b.KeywordCxt}});var _=r(6287);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return _.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return _.CodeGen}})},2279:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n,o;function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;var y=h((function e(){d(this,e)}));t._CodeOrName=y,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var m=function(e){s(n,e);var r=c(n);function n(e){var o;if(d(this,n),o=r.call(this),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");return o.str=e,o}return h(n,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return e={},1,(t=this.str)in e?Object.defineProperty(e,t,{value:1,enumerable:!0,configurable:!0,writable:!0}):e[t]=1,e;var e,t}}]),n}(y);t.Name=m;var v=function(e){s(r,e);var t=c(r);function r(e){var n;return d(this,r),(n=t.call(this))._items="string"==typeof e?[e]:e,n}return h(r,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof m&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}]),r}(y);function b(e){for(var t=[e[0]],r=0,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];for(;r<o.length;)w(t,o[r]),t.push(e[++r]);return new v(t)}t._Code=v,t.nil=new v(""),t._=b;var _=new v("+");function g(e){for(var t=[O(e[0])],r=0,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];for(;r<o.length;)t.push(_),w(t,o[r]),t.push(_,O(e[++r]));return k(t),new v(t)}function w(e,t){var r,n;t instanceof v?e.push.apply(e,function(e){if(Array.isArray(e))return a(e)}(n=t._items)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t instanceof m?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:O(Array.isArray(r)?r.join(","):r))}function k(e){for(var t=1;t<e.length-1;){if(e[t]===_){var r=S(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function S(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof m||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof m?void 0:'"'.concat(e).concat(t.slice(1))}function O(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=g,t.addCodeArg=w,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:g(n||(n=i(["","",""])),e,t)},t.stringify=function(e){return new v(O(e))},t.safeStringify=O,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new v(".".concat(e)):b(o||(o=i(["[","]"])),e)},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new v("".concat(e));throw new Error("CodeGen: invalid export name: ".concat(e,", use explicit $id name mapping"))},t.regexpCode=function(e){return new v(e.toString())}},6287:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o,i,a,s,u,c;function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;var E=r(2279),T=r(1285),C=r(2279);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return C._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return C.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return C.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return C.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return C.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return C.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return C.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return C.Name}});var R=r(1285);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return R.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return R.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return R.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return R.varKinds}}),t.operators={GT:new E._Code(">"),GTE:new E._Code(">="),LT:new E._Code("<"),LTE:new E._Code("<="),EQ:new E._Code("==="),NEQ:new E._Code("!=="),NOT:new E._Code("!"),OR:new E._Code("||"),AND:new E._Code("&&"),ADD:new E._Code("+")};var A=function(){function e(){P(this,e)}return x(e,[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}]),e}(),D=function(e){g(r,e);var t=k(r);function r(e,n,o){var i;return P(this,r),(i=t.call(this)).varKind=e,i.name=n,i.rhs=o,i}return x(r,[{key:"render",value:function(e){var t=e.es5,r=e._n,n=t?T.varKinds.var:this.varKind,o=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(n," ").concat(this.name).concat(o,";")+r}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=ne(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof E._CodeOrName?this.rhs.names:{}}}]),r}(A),M=function(e){g(r,e);var t=k(r);function r(e,n,o){var i;return P(this,r),(i=t.call(this)).lhs=e,i.rhs=n,i.sideEffects=o,i}return x(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}},{key:"optimizeNames",value:function(e,t){if(!(this.lhs instanceof E.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=ne(this.rhs,e,t),this}},{key:"names",get:function(){return re(this.lhs instanceof E.Name?{}:b({},this.lhs.names),this.rhs)}}]),r}(A),N=function(e){g(r,e);var t=k(r);function r(e,n,o,i){var a;return P(this,r),(a=t.call(this,e,o,i)).op=n,a}return x(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+t}}]),r}(M),I=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).label=e,n.names={},n}return x(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.label,":")+t}}]),r}(A),L=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).label=e,n.names={},n}return x(r,[{key:"render",value:function(e){var t=e._n,r=this.label?" ".concat(this.label):"";return"break".concat(r,";")+t}}]),r}(A),B=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).error=e,n}return x(r,[{key:"render",value:function(e){var t=e._n;return"throw ".concat(this.error,";")+t}},{key:"names",get:function(){return this.error.names}}]),r}(A),$=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).code=e,n}return x(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.code,";")+t}},{key:"optimizeNodes",value:function(){return"".concat(this.code)?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=ne(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof E._CodeOrName?this.code.names:{}}}]),r}(A),V=function(e){g(r,e);var t=k(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return P(this,r),(e=t.call(this)).nodes=n,e}return x(r,[{key:"render",value:function(e){return this.nodes.reduce((function(t,r){return t+r.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var r=e[t].optimizeNodes();Array.isArray(r)?e.splice.apply(e,[t,1].concat(d(r))):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var r=this.nodes,n=r.length;n--;){var o=r[n];o.optimizeNames(e,t)||(oe(e,o.names),r.splice(n,1))}return r.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return te(e,t.names)}),{})}}]),r}(A),z=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r,[{key:"render",value:function(e){return"{"+e._n+p(O(r.prototype),"render",this).call(this,e)+"}"+e._n}}]),r}(V),U=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r)}(V),F=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r)}(z);F.kind="else";var q=function(e){g(r,e);var t=k(r);function r(e,n){var o;return P(this,r),(o=t.call(this,n)).condition=e,o}return x(r,[{key:"render",value:function(e){var t="if(".concat(this.condition,")")+p(O(r.prototype),"render",this).call(this,e);return this.else&&(t+="else "+this.else.render(e)),t}},{key:"optimizeNodes",value:function(){p(O(r.prototype),"optimizeNodes",this).call(this);var e=this.condition;if(!0===e)return this.nodes;var t=this.else;if(t){var n=t.optimizeNodes();t=this.else=Array.isArray(n)?new F(n):n}return t?!1===e?t instanceof r?t:t.nodes:this.nodes.length?this:new r(ie(e),t instanceof r?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),p(O(r.prototype),"optimizeNames",this).call(this,e,t)||this.else)return this.condition=ne(this.condition,e,t),this}},{key:"names",get:function(){var e=p(O(r.prototype),"names",this);return re(e,this.condition),this.else&&te(e,this.else.names),e}}]),r}(z);q.kind="if";var H=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r)}(z);H.kind="for";var G=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).iteration=e,n}return x(r,[{key:"render",value:function(e){return"for(".concat(this.iteration,")")+p(O(r.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(p(O(r.prototype),"optimizeNames",this).call(this,e,t))return this.iteration=ne(this.iteration,e,t),this}},{key:"names",get:function(){return te(p(O(r.prototype),"names",this),this.iteration.names)}}]),r}(H),K=function(e){g(r,e);var t=k(r);function r(e,n,o,i){var a;return P(this,r),(a=t.call(this)).varKind=e,a.name=n,a.from=o,a.to=i,a}return x(r,[{key:"render",value:function(e){var t=e.es5?T.varKinds.var:this.varKind,n=this.name,o=this.from,i=this.to;return"for(".concat(t," ").concat(n,"=").concat(o,"; ").concat(n,"<").concat(i,"; ").concat(n,"++)")+p(O(r.prototype),"render",this).call(this,e)}},{key:"names",get:function(){var e=re(p(O(r.prototype),"names",this),this.from);return re(e,this.to)}}]),r}(H),X=function(e){g(r,e);var t=k(r);function r(e,n,o,i){var a;return P(this,r),(a=t.call(this)).loop=e,a.varKind=n,a.name=o,a.iterable=i,a}return x(r,[{key:"render",value:function(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+p(O(r.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(p(O(r.prototype),"optimizeNames",this).call(this,e,t))return this.iterable=ne(this.iterable,e,t),this}},{key:"names",get:function(){return te(p(O(r.prototype),"names",this),this.iterable.names)}}]),r}(H),W=function(e){g(r,e);var t=k(r);function r(e,n,o){var i;return P(this,r),(i=t.call(this)).name=e,i.args=n,i.async=o,i}return x(r,[{key:"render",value:function(e){var t=this.async?"async ":"";return"".concat(t,"function ").concat(this.name,"(").concat(this.args,")")+p(O(r.prototype),"render",this).call(this,e)}}]),r}(z);W.kind="func";var Y=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r,[{key:"render",value:function(e){return"return "+p(O(r.prototype),"render",this).call(this,e)}}]),r}(V);Y.kind="return";var J=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r,[{key:"render",value:function(e){var t="try"+p(O(r.prototype),"render",this).call(this,e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}},{key:"optimizeNodes",value:function(){var e,t;return p(O(r.prototype),"optimizeNodes",this).call(this),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,t){var n,o;return p(O(r.prototype),"optimizeNames",this).call(this,e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(o=this.finally)||void 0===o||o.optimizeNames(e,t),this}},{key:"names",get:function(){var e=p(O(r.prototype),"names",this);return this.catch&&te(e,this.catch.names),this.finally&&te(e,this.finally.names),e}}]),r}(z),Q=function(e){g(r,e);var t=k(r);function r(e){var n;return P(this,r),(n=t.call(this)).error=e,n}return x(r,[{key:"render",value:function(e){return"catch(".concat(this.error,")")+p(O(r.prototype),"render",this).call(this,e)}}]),r}(z);Q.kind="catch";var Z=function(e){g(r,e);var t=k(r);function r(){return P(this,r),t.apply(this,arguments)}return x(r,[{key:"render",value:function(e){return"finally"+p(O(r.prototype),"render",this).call(this,e)}}]),r}(z);Z.kind="finally";var ee=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(this,e),this._values={},this._blockStarts=[],this._constants={},this.opts=b(b({},r),{},{_n:r.lines?"\n":""}),this._extScope=t,this._scope=new T.Scope({parent:t}),this._nodes=[new U]}return x(e,[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,r,n){var o=this._scope.toName(t);return void 0!==r&&n&&(this._constants[o.str]=r),this._leafNode(new D(e,o,r)),o}},{key:"const",value:function(e,t,r){return this._def(T.varKinds.const,e,t,r)}},{key:"let",value:function(e,t,r){return this._def(T.varKinds.let,e,t,r)}},{key:"var",value:function(e,t,r){return this._def(T.varKinds.var,e,t,r)}},{key:"assign",value:function(e,t,r){return this._leafNode(new M(e,t,r))}},{key:"add",value:function(e,r){return this._leafNode(new N(e,t.operators.ADD,r))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==E.nil&&this._leafNode(new $(e)),this}},{key:"object",value:function(){for(var e=["{"],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=0,i=r;o<i.length;o++){var a=f(i[o],2),s=a[0],u=a[1];e.length>1&&e.push(","),e.push(s),(s!==u||this.opts.es5)&&(e.push(":"),(0,E.addCodeArg)(e,u))}return e.push("}"),new E._Code(e)}},{key:"if",value:function(e,t,r){if(this._blockNode(new q(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new q(e))}},{key:"else",value:function(){return this._elseNode(new F)}},{key:"endIf",value:function(){return this._endBlockNode(q,F)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new G(e),t)}},{key:"forRange",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?T.varKinds.var:T.varKinds.let,i=this._scope.toName(e);return this._for(new K(o,i,t,r),(function(){return n(i)}))}},{key:"forOf",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.varKinds.const,s=this._scope.toName(e);if(this.opts.es5){var u=t instanceof E.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,E._)(o||(o=l(["",".length"])),u),(function(e){n.var(s,(0,E._)(i||(i=l(["","[","]"])),u,e)),r(s)}))}return this._for(new X("of",a,s,t),(function(){return r(s)}))}},{key:"forIn",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?T.varKinds.var:T.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,(0,E._)(a||(a=l(["Object.keys(",")"])),t),r);var o=this._scope.toName(e);return this._for(new X("in",n,o,t),(function(){return r(o)}))}},{key:"endFor",value:function(){return this._endBlockNode(H)}},{key:"label",value:function(e){return this._leafNode(new I(e))}},{key:"break",value:function(e){return this._leafNode(new L(e))}},{key:"return",value:function(e){var t=new Y;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Y)}},{key:"try",value:function(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');var n=new J;if(this._blockNode(n),this.code(e),t){var o=this.name("e");this._currNode=n.catch=new Q(o),t(o)}return r&&(this._currNode=n.finally=new Z,this.code(r)),this._endBlockNode(Q,Z)}},{key:"throw",value:function(e){return this._leafNode(new B(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(r," vs ").concat(e," expected"));return this._nodes.length=t,this}},{key:"func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.nil,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this._blockNode(new W(e,t,r)),n&&this.code(n).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(W)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}]),e}();function te(e,t){for(var r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function re(e,t){return t instanceof E._CodeOrName?te(e,t.names):e}function ne(e,t,r){return e instanceof E.Name?o(e):(n=e)instanceof E._Code&&n._items.some((function(e){return e instanceof E.Name&&1===t[e.str]&&void 0!==r[e.str]}))?new E._Code(e._items.reduce((function(e,t){return t instanceof E.Name&&(t=o(t)),t instanceof E._Code?e.push.apply(e,d(t._items)):e.push(t),e}),[])):e;var n;function o(e){var n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function oe(e,t){for(var r in t)e[r]=(e[r]||0)-(t[r]||0)}function ie(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,E._)(s||(s=l(["!",""])),ce(e))}t.CodeGen=ee,t.not=ie;var ae=ue(t.operators.AND);t.and=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(ae)};var se=ue(t.operators.OR);function ue(e){return function(t,r){return t===E.nil?r:r===E.nil?t:(0,E._)(u||(u=l([""," "," ",""])),ce(t),e,ce(r))}}function ce(e){return e instanceof E.Name?e:(0,E._)(c||(c=l(["(",")"])),e)}t.or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(se)}},1285:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o,i,a,s,u;function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function v(e){var t=w();return function(){var r,n=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){var t="function"==typeof Map?new Map:void 0;return _=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,S(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},_(e)}function g(e,t,r){return g=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&k(o,r.prototype),o},g.apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;var O,P=r(2279),j=function(e){m(r,e);var t=v(r);function r(e){var n;return y(this,r),(n=t.call(this,'CodeGen: "code" for '.concat(e," not defined"))).value=e.value,n}return d(r)}(_(Error));!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(O=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new P.Name("const"),let:new P.Name("let"),var:new P.Name("var")};var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefixes,n=t.parent;y(this,e),this._names={},this._prefixes=r,this._parent=n}return d(e,[{key:"toName",value:function(e){return e instanceof P.Name?e:this.name(e)}},{key:"name",value:function(e){return new P.Name(this._newName(e))}},{key:"_newName",value:function(e){var t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}},{key:"_nameGroup",value:function(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}]),e}();t.Scope=x;var E=function(e){m(r,e);var t=v(r);function r(e,n){var o;return y(this,r),(o=t.call(this,n)).prefix=e,o}return d(r,[{key:"setValue",value:function(e,t){var r=t.property,n=t.itemIndex;this.value=e,this.scopePath=(0,P._)(o||(o=p([".","[","]"])),new P.Name(r),n)}}]),r}(P.Name);t.ValueScopeName=E;var T=(0,P._)(i||(i=p(["\n"],["\\n"]))),C=function(e){m(n,e);var r=v(n);function n(e){var t;return y(this,n),(t=r.call(this,e))._values={},t._scope=e.scope,t.opts=l(l({},e),{},{_n:e.lines?T:P.nil}),t}return d(n,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new E(e,this._newName(e))}},{key:"value",value:function(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var n=this.toName(e),o=n.prefix,i=null!==(r=t.key)&&void 0!==r?r:t.ref,a=this._values[o];if(a){var s=a.get(i);if(s)return s}else a=this._values[o]=new Map;a.set(i,n);var u=this._scope[o]||(this._scope[o]=[]),c=u.length;return u[c]=t.ref,n.setValue(t,{property:o,itemIndex:c}),n}},{key:"getValue",value:function(e,t){var r=this._values[e];if(r)return r.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return(0,P._)(a||(a=p(["","",""])),e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code}),t,r)}},{key:"_reduceValues",value:function(e,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,a=P.nil,c=function(c){var l=e[c];if(!l)return"continue";var f=o[c]=o[c]||new Map;l.forEach((function(e){if(!f.has(e)){f.set(e,O.Started);var o=r(e);if(o){var c=n.opts.es5?t.varKinds.var:t.varKinds.const;a=(0,P._)(s||(s=p(["",""," "," = ",";",""])),a,c,e,o,n.opts._n)}else{if(!(o=null==i?void 0:i(e)))throw new j(e);a=(0,P._)(u||(u=p(["","","",""])),a,o,n.opts._n)}f.set(e,O.Completed)}}))};for(var l in e)c(l);return a}}]),n}(x);t.ValueScope=C},388:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_,g,w,k,S,O,P,j,x;function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;var T=r(6287),C=r(2523),R=r(1418);function A(e,t){var r=e.const("err",t);e.if((0,T._)(m||(m=E([""," === null"])),R.default.vErrors),(function(){return e.assign(R.default.vErrors,(0,T._)(v||(v=E(["[","]"])),r))}),(0,T._)(b||(b=E(["",".push(",")"])),R.default.vErrors,r)),e.code((0,T._)(_||(_=E(["","++"])),R.default.errors))}function D(e,t){var r=e.gen,n=e.validateName;e.schemaEnv.$async?r.throw((0,T._)(g||(g=E(["new ","(",")"])),e.ValidationError,t)):(r.assign((0,T._)(w||(w=E(["",".errors"])),n),t),r.return(!1))}t.keywordError={message:function(e){var t=e.keyword;return(0,T.str)(n||(n=E(['must pass "','" keyword validation'])),t)}},t.keyword$DataError={message:function(e){var t=e.keyword,r=e.schemaType;return r?(0,T.str)(o||(o=E(['"','" keyword must be '," ($data)"])),t,r):(0,T.str)(i||(i=E(['"','" keyword is invalid ($data)'])),t)}},t.reportError=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=e.it,s=i.gen,u=i.compositeRule,c=i.allErrors,l=N(e,r,n);(null!=o?o:u||c)?A(s,l):D(i,(0,T._)(a||(a=E(["[","]"])),l))},t.reportExtraError=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,n=arguments.length>2?arguments[2]:void 0,o=e.it,i=o.gen,a=o.compositeRule,s=o.allErrors,u=N(e,r,n);A(i,u),a||s||D(o,R.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(R.default.errors,t),e.if((0,T._)(s||(s=E([""," !== null"])),R.default.vErrors),(function(){return e.if(t,(function(){return e.assign((0,T._)(u||(u=E(["",".length"])),R.default.vErrors),t)}),(function(){return e.assign(R.default.vErrors,null)}))}))},t.extendErrors=function(e){var t=e.gen,r=e.keyword,n=e.schemaValue,o=e.data,i=e.errsCount,a=e.it;if(void 0===i)throw new Error("ajv implementation error");var s=t.name("err");t.forRange("i",i,R.default.errors,(function(e){t.const(s,(0,T._)(c||(c=E(["","[","]"])),R.default.vErrors,e)),t.if((0,T._)(l||(l=E(["",".instancePath === undefined"])),s),(function(){return t.assign((0,T._)(f||(f=E(["",".instancePath"])),s),(0,T.strConcat)(R.default.instancePath,a.errorPath))})),t.assign((0,T._)(p||(p=E(["",".schemaPath"])),s),(0,T.str)(h||(h=E(["","/",""])),a.errSchemaPath,r)),a.opts.verbose&&(t.assign((0,T._)(d||(d=E(["",".schema"])),s),n),t.assign((0,T._)(y||(y=E(["",".data"])),s),o))}))};var M={keyword:new T.Name("keyword"),schemaPath:new T.Name("schemaPath"),params:new T.Name("params"),propertyName:new T.Name("propertyName"),message:new T.Name("message"),schema:new T.Name("schema"),parentSchema:new T.Name("parentSchema")};function N(e,t,r){return!1===e.it.createErrors?(0,T._)(k||(k=E(["{}"]))):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.gen,o=[I(e.it,r),L(e,r)];return B(e,t,o),n.object.apply(n,o)}(e,t,r)}function I(e,t){var r=e.errorPath,n=t.instancePath,o=n?(0,T.str)(S||(S=E(["","",""])),r,(0,C.getErrorPath)(n,C.Type.Str)):r;return[R.default.instancePath,(0,T.strConcat)(R.default.instancePath,o)]}function L(e,t){var r=e.keyword,n=e.it.errSchemaPath,o=t.schemaPath,i=t.parentSchema?n:(0,T.str)(O||(O=E(["","/",""])),n,r);return o&&(i=(0,T.str)(P||(P=E(["","",""])),i,(0,C.getErrorPath)(o,C.Type.Str))),[M.schemaPath,i]}function B(e,t,r){var n=t.params,o=t.message,i=e.keyword,a=e.data,s=e.schemaValue,u=e.it,c=u.opts,l=u.propertyName,f=u.topSchemaRef,p=u.schemaPath;r.push([M.keyword,i],[M.params,"function"==typeof n?n(e):n||(0,T._)(j||(j=E(["{}"])))]),c.messages&&r.push([M.message,"function"==typeof o?o(e):o]),c.verbose&&r.push([M.schema,s],[M.parentSchema,(0,T._)(x||(x=E(["","",""])),f,p)],[R.default.data,a]),l&&r.push([M.propertyName,l])}},6678:(e,t,r)=>{"use strict";var n,o;function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;var f=r(6287),p=r(7355),h=r(1418),d=r(5381),y=r(2523),m=r(8612),v=l((function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refs={},this.dynamicAnchors={},"object"==u(t.schema)&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(r=t.baseId)&&void 0!==r?r:(0,d.normalizeId)(null==n?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==n?void 0:n.$async,this.refs={}}));function b(e){var t=g.call(this,e);if(t)return t;var r,i=(0,d.getFullPath)(this.opts.uriResolver,e.root.baseId),a=this.opts.code,u=a.es5,c=a.lines,l=this.opts.ownProperties,y=new f.CodeGen(this.scope,{es5:u,lines:c,ownProperties:l});e.$async&&(r=y.scopeValue("Error",{ref:p.default,code:(0,f._)(n||(n=s(['require("ajv/dist/runtime/validation_error").default'])))}));var v=y.scopeName("validate");e.validateName=v;var b,_={gen:y,allErrors:this.opts.allErrors,data:h.default.data,parentData:h.default.parentData,parentDataProperty:h.default.parentDataProperty,dataNames:[h.default.data],dataPathArr:[f.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:y.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,f.stringify)(e.schema)}:{ref:e.schema}),validateName:v,ValidationError:r,schema:e.schema,schemaEnv:e,rootId:i,baseId:e.baseId||i,schemaPath:f.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,f._)(o||(o=s(['""']))),opts:this.opts,self:this};try{this._compilations.add(e),(0,m.validateFunctionCode)(_),y.optimize(this.opts.code.optimize);var w=y.toString();b="".concat(y.scopeRefs(h.default.scope),"return ").concat(w),this.opts.code.process&&(b=this.opts.code.process(b,e));var k=new Function("".concat(h.default.self),"".concat(h.default.scope),b)(this,this.scope.get());if(this.scope.value(v,{ref:k}),k.errors=null,k.schema=e.schema,k.schemaEnv=e,e.$async&&(k.$async=!0),!0===this.opts.code.source&&(k.source={validateName:v,validateCode:w,scopeValues:y._values}),this.opts.unevaluated){var S=_.props,O=_.items;k.evaluated={props:S instanceof f.Name?void 0:S,items:O instanceof f.Name?void 0:O,dynamicProps:S instanceof f.Name,dynamicItems:O instanceof f.Name},k.source&&(k.source.evaluated=(0,f.stringify)(k.evaluated))}return e.validate=k,e}catch(t){throw delete e.validate,delete e.validateName,b&&this.logger.error("Error compiling schema, function code:",b),t}finally{this._compilations.delete(e)}}function _(e){return(0,d.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:b.call(this,e)}function g(e){var t,r,n,o=i(this._compilations);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(n=e,(r=a).schema===n.schema&&r.root===n.root&&r.baseId===n.baseId)return a}}catch(e){o.e(e)}finally{o.f()}}function w(e,t){for(var r;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||k.call(this,e,t)}function k(e,t){var r=this.opts.uriResolver.parse(t),n=(0,d._getFullPath)(this.opts.uriResolver,r),o=(0,d.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===o)return O.call(this,r,e);var i=(0,d.normalizeId)(n),a=this.refs[i]||this.schemas[i];if("string"==typeof a){var s=k.call(this,e,a);if("object"!==u(null==s?void 0:s.schema))return;return O.call(this,r,s)}if("object"===u(null==a?void 0:a.schema)){if(a.validate||b.call(this,a),i===(0,d.normalizeId)(t)){var c=a.schema,l=this.opts.schemaId,f=c[l];return f&&(o=(0,d.resolveUrl)(this.opts.uriResolver,o,f)),new v({schema:c,schemaId:l,root:e,baseId:o})}return O.call(this,r,a)}}t.SchemaEnv=v,t.compileSchema=b,t.resolveRef=function(e,t,r){var n;r=(0,d.resolveUrl)(this.opts.uriResolver,t,r);var o=e.refs[r];if(o)return o;var i=w.call(this,e,r);if(void 0===i){var a=null===(n=e.localRefs)||void 0===n?void 0:n[r],s=this.opts.schemaId;a&&(i=new v({schema:a,schemaId:s,root:e,baseId:t}))}return void 0!==i?e.refs[r]=_.call(this,i):void 0},t.getCompilingSchema=g,t.resolveSchema=k;var S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function O(e,t){var r,n=t.baseId,o=t.schema,a=t.root;if("/"===(null===(r=e.fragment)||void 0===r?void 0:r[0])){var s,c,l=i(e.fragment.slice(1).split("/"));try{for(l.s();!(s=l.n()).done;){var f=s.value;if("boolean"==typeof o)return;var p=o[(0,y.unescapeFragment)(f)];if(void 0===p)return;var h="object"===u(o=p)&&o[this.opts.schemaId];!S.has(f)&&h&&(n=(0,d.resolveUrl)(this.opts.uriResolver,n,h))}}catch(e){l.e(e)}finally{l.f()}if("boolean"!=typeof o&&o.$ref&&!(0,y.schemaHasRulesButRef)(o,this.RULES)){var m=(0,d.resolveUrl)(this.opts.uriResolver,n,o.$ref);c=k.call(this,a,m)}var b=this.opts.schemaId;return(c=c||new v({schema:o,schemaId:b,root:a,baseId:n})).schema!==c.root.schema?c:void 0}}},1418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6287),o={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=o},7835:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},i(e)}function a(e,t,r){return a=s()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&u(o,r.prototype),o},a.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(5381),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(a,e);var t,r,n,i=(t=a,r=s(),function(){var e,n=c(t);if(r){var i=c(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return o(this,e)});function a(e,t,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,n||"can't resolve reference ".concat(r," from id ").concat(t))).missingRef=(0,l.resolveUrl)(e,t,r),o.missingSchema=(0,l.normalizeId)((0,l.getFullPath)(e,o.missingRef)),o}return n=a,Object.defineProperty(n,"prototype",{writable:!1}),n}(i(Error));t.default=f},5381:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;var o=r(2523),i=r(3094),a=r(4929),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};var u=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(var t in e){if(u.has(t))return!0;var r=e[t];if(Array.isArray(r)&&r.some(c))return!0;if("object"==n(r)&&c(r))return!0}return!1}function l(e){var t=0;for(var r in e){if("$ref"===r)return 1/0;if(t++,!s.has(r)&&("object"==n(e[r])&&(0,o.eachItem)(e[r],(function(e){return t+=l(e)})),t===1/0))return 1/0}return t}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;!1!==r&&(t=d(t));var n=e.parse(t);return p(e,n)}function p(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=f,t._getFullPath=p;var h=/#\/?$/;function d(e){return e?e.replace(h,""):""}t.normalizeId=d,t.resolveUrl=function(e,t,r){return r=d(r),e.resolve(t,r)};var y=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){var r=this;if("boolean"==typeof e)return{};var o=this.opts,s=o.schemaId,u=o.uriResolver,c=d(e[s]||t),l={"":c},p=f(u,c,!1),h={},m=new Set;return a(e,{allKeys:!0},(function(e,t,o,i){if(void 0!==i){var a=p+t,u=l[i];"string"==typeof e[s]&&(u=c.call(r,e[s])),f.call(r,e.$anchor),f.call(r,e.$dynamicAnchor),l[t]=u}function c(t){var r=this.opts.uriResolver.resolve;if(t=d(u?r(u,t):t),m.has(t))throw b(t);m.add(t);var o=this.refs[t];return"string"==typeof o&&(o=this.refs[o]),"object"==n(o)?v(e,o.schema,t):t!==d(a)&&("#"===t[0]?(v(e,h[t],t),h[t]=e):this.refs[t]=a),t}function f(e){if("string"==typeof e){if(!y.test(e))throw new Error('invalid anchor "'.concat(e,'"'));c.call(this,"#".concat(e))}}})),h;function v(e,t,r){if(void 0!==t&&!i(e,t))throw b(r)}function b(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}}},9583:(e,t)=>{"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;var i=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&i.has(e)},t.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:n(n({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},2523:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_,g;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;var x=r(6287),E=r(2279);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.opts,n=e.self;if(r.strictSchema&&"boolean"!=typeof t){var o=n.RULES.keywords;for(var i in t)o[i]||B(e,'unknown keyword: "'.concat(i,'"'))}}function C(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0;return!1}function R(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function A(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function D(e){var t=e.mergeNames,r=e.mergeToName,n=e.mergeValues,o=e.resultToName;return function(e,i,a,s){var u=void 0===a?i:a instanceof x.Name?(i instanceof x.Name?t(e,i,a):r(e,i,a),a):i instanceof x.Name?(r(e,a,i),i):n(i,a);return s!==x.Name||u instanceof x.Name?u:o(e,u)}}function M(e,t){if(!0===t)return e.var("props",!0);var r=e.var("props",(0,x._)(y||(y=O(["{}"]))));return void 0!==t&&N(e,r,t),r}function N(e,t,r){Object.keys(r).forEach((function(r){return e.assign((0,x._)(m||(m=O(["","",""])),t,(0,x.getProperty)(r)),!0)}))}t.toHash=function(e){var t,r={},n=P(e);try{for(n.s();!(t=n.n()).done;)r[t.value]=!0}catch(e){n.e(e)}finally{n.f()}return r},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(T(e,t),!C(t,e.self.RULES.all))},t.checkUnknownRules=T,t.schemaHasRules=C,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function(e,t,r,i){var a=e.topSchemaRef,s=e.schemaPath;if(!i){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return(0,x._)(n||(n=O(["",""])),t)}return(0,x._)(o||(o=O(["","","",""])),a,s,(0,x.getProperty)(r))},t.unescapeFragment=function(e){return A(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(R(e))},t.escapeJsonPointer=R,t.unescapeJsonPointer=A,t.eachItem=function(e,t){if(Array.isArray(e)){var r,n=P(e);try{for(n.s();!(r=n.n()).done;)t(r.value)}catch(e){n.e(e)}finally{n.f()}}else t(e)},t.mergeEvaluated={props:D({mergeNames:function(e,t,r){return e.if((0,x._)(i||(i=O([""," !== true && "," !== undefined"])),r,t),(function(){e.if((0,x._)(a||(a=O([""," === true"])),t),(function(){return e.assign(r,!0)}),(function(){return e.assign(r,(0,x._)(s||(s=O([""," || {}"])),r)).code((0,x._)(u||(u=O(["Object.assign(",", ",")"])),r,t))}))}))},mergeToName:function(e,t,r){return e.if((0,x._)(c||(c=O([""," !== true"])),r),(function(){!0===t?e.assign(r,!0):(e.assign(r,(0,x._)(l||(l=O([""," || {}"])),r)),N(e,r,t))}))},mergeValues:function(e,t){return!0===e||k(k({},e),t)},resultToName:M}),items:D({mergeNames:function(e,t,r){return e.if((0,x._)(f||(f=O([""," !== true && "," !== undefined"])),r,t),(function(){return e.assign(r,(0,x._)(p||(p=O([""," === true ? true : "," > "," ? "," : ",""])),t,r,t,r,t))}))},mergeToName:function(e,t,r){return e.if((0,x._)(h||(h=O([""," !== true"])),r),(function(){return e.assign(r,!0===t||(0,x._)(d||(d=O([""," > "," ? "," : ",""])),r,t,r,t))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},t.evaluatedPropsToName=M,t.setEvaluated=N;var I,L={};function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(r){if(t="strict mode: ".concat(t),!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:L[t.code]||(L[t.code]=new E._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(I=t.Type||(t.Type={})),t.getErrorPath=function(e,t,r){if(e instanceof x.Name){var n=t===I.Num;return r?n?(0,x._)(v||(v=O(['"[" + ',' + "]"'])),e):(0,x._)(b||(b=O(['"[\'" + ',' + "\']"'])),e):n?(0,x._)(_||(_=O(['"/" + ',""])),e):(0,x._)(g||(g=O(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),e)}return r?(0,x.getProperty)(e).toString():"/"+R(e)},t.checkStrictMode=B},7298:(e,t)=>{"use strict";function r(e,t){return t.rules.some((function(t){return n(e,t)}))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((function(t){return void 0!==e[t]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function(e,t){var n=e.schema,o=e.self.RULES.types[t];return o&&!0!==o&&r(n,o)},t.shouldUseGroup=r,t.shouldUseRule=n},232:(e,t,r)=>{"use strict";var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;var i=r(388),a=r(6287),s=r(1418),u={message:"boolean schema is false"};function c(e,t){var r={gen:e.gen,keyword:"false schema",data:e.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,i.reportError)(r,u,void 0,t)}t.topBoolOrEmptySchema=function(e){var t,r,i=e.gen,u=e.schema,l=e.validateName;!1===u?c(e,!1):"object"==o(u)&&!0===u.$async?i.return(s.default.data):(i.assign((0,a._)(n||(t=["",".errors"],r||(r=t.slice(0)),n=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),l),null),i.return(!0))},t.boolOrEmptySchema=function(e,t){var r=e.gen;!1===e.schema?(r.var(t,!1),c(e)):r.var(t,!0)}},4771:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_,g,w,k,S,O,P,j,x,E,T,C,R,A,D,M,N;function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;var B,$=r(9583),V=r(7298),z=r(388),U=r(6287),F=r(2523);function q(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every($.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(B=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){var t=q(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=q,t.coerceAndCheckDataType=function(e,t){var r=e.gen,P=e.data,j=e.opts,x=function(e,t){return t?e.filter((function(e){return H.has(e)||"array"===t&&"array"===e})):[]}(t,j.coerceTypes),E=t.length>0&&!(0===x.length&&1===t.length&&(0,V.schemaHasRulesForType)(e,t[0]));if(E){var T=K(t,P,j.strictNumbers,B.Wrong);r.if(T,(function(){x.length?function(e,t,r){var P=e.gen,j=e.data,x=e.opts,E=P.let("dataType",(0,U._)(n||(n=L(["typeof ",""])),j)),T=P.let("coerced",(0,U._)(o||(o=L(["undefined"]))));"array"===x.coerceTypes&&P.if((0,U._)(i||(i=L([""," == 'object' && Array.isArray(",") && ",".length == 1"])),E,j,j),(function(){return P.assign(j,(0,U._)(a||(a=L(["","[0]"])),j)).assign(E,(0,U._)(s||(s=L(["typeof ",""])),j)).if(K(t,j,x.strictNumbers),(function(){return P.assign(T,j)}))})),P.if((0,U._)(u||(u=L([""," !== undefined"])),T));var C,R=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(r);try{for(R.s();!(C=R.n()).done;){var A=C.value;(H.has(A)||"array"===A&&"array"===x.coerceTypes)&&D(A)}}catch(e){R.e(e)}finally{R.f()}function D(e){switch(e){case"string":return void P.elseIf((0,U._)(l||(l=L(["",' == "number" || ',' == "boolean"'])),E,E)).assign(T,(0,U._)(f||(f=L(['"" + ',""])),j)).elseIf((0,U._)(p||(p=L([""," === null"])),j)).assign(T,(0,U._)(h||(h=L(['""']))));case"number":return void P.elseIf((0,U._)(d||(d=L(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"])),E,j,E,j,j,j)).assign(T,(0,U._)(y||(y=L(["+",""])),j));case"integer":return void P.elseIf((0,U._)(m||(m=L(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"])),E,j,E,j,j,j,j)).assign(T,(0,U._)(v||(v=L(["+",""])),j));case"boolean":return void P.elseIf((0,U._)(b||(b=L(["",' === "false" || '," === 0 || "," === null"])),j,j,j)).assign(T,!1).elseIf((0,U._)(_||(_=L(["",' === "true" || '," === 1"])),j,j)).assign(T,!0);case"null":return P.elseIf((0,U._)(g||(g=L(["",' === "" || '," === 0 || "," === false"])),j,j,j)),void P.assign(T,null);case"array":P.elseIf((0,U._)(w||(w=L(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"])),E,E,E,j)).assign(T,(0,U._)(k||(k=L(["[","]"])),j))}}P.else(),W(e),P.endIf(),P.if((0,U._)(c||(c=L([""," !== undefined"])),T),(function(){P.assign(j,T),function(e,t){var r=e.gen,n=e.parentData,o=e.parentDataProperty;r.if((0,U._)(S||(S=L([""," !== undefined"])),n),(function(){return r.assign((0,U._)(O||(O=L(["","[","]"])),n,o),t)}))}(e,T)}))}(e,t,x):W(e)}))}return E};var H=new Set(["string","number","integer","boolean","null"]);function G(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.Correct,i=o===B.Correct?U.operators.EQ:U.operators.NEQ;switch(e){case"null":return(0,U._)(P||(P=L([""," "," null"])),t,i);case"array":n=(0,U._)(j||(j=L(["Array.isArray(",")"])),t);break;case"object":n=(0,U._)(x||(x=L([""," && typeof ",' == "object" && !Array.isArray(',")"])),t,t,t);break;case"integer":n=a((0,U._)(E||(E=L(["!("," % 1) && !isNaN(",")"])),t,t));break;case"number":n=a();break;default:return(0,U._)(T||(T=L(["typeof "," "," ",""])),t,i,e)}return o===B.Correct?n:(0,U.not)(n);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.nil;return(0,U.and)((0,U._)(C||(C=L(["typeof ",' == "number"'])),t),e,r?(0,U._)(R||(R=L(["isFinite(",")"])),t):U.nil)}}function K(e,t,r,n){if(1===e.length)return G(e[0],t,r,n);var o,i=(0,F.toHash)(e);if(i.array&&i.object){var a=(0,U._)(A||(A=L(["typeof ",' != "object"'])),t);o=i.null?a:(0,U._)(D||(D=L(["!"," || ",""])),t,a),delete i.null,delete i.array,delete i.object}else o=U.nil;for(var s in i.number&&delete i.integer,i)o=(0,U.and)(o,G(s,t,r,n));return o}t.checkDataType=G,t.checkDataTypes=K;var X={message:function(e){var t=e.schema;return"must be ".concat(t)},params:function(e){var t=e.schema,r=e.schemaValue;return"string"==typeof t?(0,U._)(M||(M=L(["{type: ","}"])),t):(0,U._)(N||(N=L(["{type: ","}"])),r)}};function W(e){var t=function(e){var t=e.gen,r=e.data,n=e.schema,o=(0,F.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:o,schemaValue:o,parentSchema:n,params:{},it:e}}(e);(0,z.reportError)(t,X)}t.reportTypeError=W},9199:(e,t,r)=>{"use strict";var n,o,i,a;function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;var u=r(6287),c=r(2523);function l(e,t,r){var l=e.gen,f=e.compositeRule,p=e.data,h=e.opts;if(void 0!==r){var d=(0,u._)(n||(n=s(["","",""])),p,(0,u.getProperty)(t));if(f)(0,c.checkStrictMode)(e,"default is ignored for: ".concat(d));else{var y=(0,u._)(o||(o=s([""," === undefined"])),d);"empty"===h.useDefaults&&(y=(0,u._)(i||(i=s([""," || "," === null || ",' === ""'])),y,d,d)),l.if(y,(0,u._)(a||(a=s([""," = ",""])),d,(0,u.stringify)(r)))}}}t.assignDefaults=function(e,t){var r=e.schema,n=r.properties,o=r.items;if("object"===t&&n)for(var i in n)l(e,i,n[i].default);else"array"===t&&Array.isArray(o)&&o.forEach((function(t,r){return l(e,r,t.default)}))}},8612:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_,g,w,k,S,O,P,j,x,E,T,C,R,A,D,M,N,I,L,B,$,V,z;function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function W(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;var Y=r(232),J=r(4771),Q=r(7298),Z=r(4771),ee=r(9199),te=r(1277),re=r(8436),ne=r(6287),oe=r(1418),ie=r(5381),ae=r(2523),se=r(388);function ue(e,t){var r=e.gen,v=e.validateName,b=e.schema,_=e.schemaEnv,g=e.opts;g.code.es5?r.func(v,(0,ne._)(n||(n=W(["",", ",""])),oe.default.data,oe.default.valCxt),_.$async,(function(){r.code((0,ne._)(o||(o=W(['"use strict"; ',""])),ce(b,g))),function(e,t){e.if(oe.default.valCxt,(function(){e.var(oe.default.instancePath,(0,ne._)(u||(u=W(["",".",""])),oe.default.valCxt,oe.default.instancePath)),e.var(oe.default.parentData,(0,ne._)(c||(c=W(["",".",""])),oe.default.valCxt,oe.default.parentData)),e.var(oe.default.parentDataProperty,(0,ne._)(l||(l=W(["",".",""])),oe.default.valCxt,oe.default.parentDataProperty)),e.var(oe.default.rootData,(0,ne._)(f||(f=W(["",".",""])),oe.default.valCxt,oe.default.rootData)),t.dynamicRef&&e.var(oe.default.dynamicAnchors,(0,ne._)(p||(p=W(["",".",""])),oe.default.valCxt,oe.default.dynamicAnchors))}),(function(){e.var(oe.default.instancePath,(0,ne._)(h||(h=W(['""'])))),e.var(oe.default.parentData,(0,ne._)(d||(d=W(["undefined"])))),e.var(oe.default.parentDataProperty,(0,ne._)(y||(y=W(["undefined"])))),e.var(oe.default.rootData,oe.default.data),t.dynamicRef&&e.var(oe.default.dynamicAnchors,(0,ne._)(m||(m=W(["{}"]))))}))}(r,g),r.code(t)})):r.func(v,(0,ne._)(i||(i=W(["",", ",""])),oe.default.data,function(e){return(0,ne._)(a||(a=W(["{",'="", ',", ",", ","=","","}={}"])),oe.default.instancePath,oe.default.parentData,oe.default.parentDataProperty,oe.default.rootData,oe.default.data,e.dynamicRef?(0,ne._)(s||(s=W([", ","={}"])),oe.default.dynamicAnchors):ne.nil)}(g)),_.$async,(function(){return r.code(ce(b,g)).code(t)}))}function ce(e,t){var r="object"==X(e)&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,ne._)(O||(O=W(["/*# sourceURL="," */"])),r):ne.nil}function le(e){var t=e.schema,r=e.self;if("boolean"==typeof t)return!t;for(var n in t)if(r.RULES.all[n])return!0;return!1}function fe(e){return"boolean"!=typeof e.schema}function pe(e){(0,ae.checkUnknownRules)(e),function(e){var t=e.schema,r=e.errSchemaPath,n=e.opts,o=e.self;t.$ref&&n.ignoreKeywordsWithRef&&(0,ae.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn('$ref: keywords ignored in schema at path "'.concat(r,'"'))}(e)}function he(e,t){if(e.opts.jtd)return ye(e,[],!1,t);var r=(0,J.getSchemaTypes)(e.schema);ye(e,r,!(0,J.coerceAndCheckDataType)(e,r),t)}function de(e){var t=e.gen,r=e.schemaEnv,n=e.schema,o=e.errSchemaPath,i=e.opts,a=n.$comment;if(!0===i.$comment)t.code((0,ne._)(j||(j=W(["",".logger.log(",")"])),oe.default.self,a));else if("function"==typeof i.$comment){var s=(0,ne.str)(x||(x=W(["","/$comment"])),o),u=t.scopeValue("root",{ref:r.root});t.code((0,ne._)(E||(E=W(["",".opts.$comment(",", ",", ",".schema)"])),oe.default.self,a,s,u))}}function ye(e,t,r,n){var o=e.gen,i=e.schema,a=e.data,s=e.allErrors,u=e.opts,c=e.self.RULES;function l(c){(0,Q.shouldUseGroup)(i,c)&&(c.type?(o.if((0,Z.checkDataType)(c.type,a,u.strictNumbers)),me(e,c),1===t.length&&t[0]===c.type&&r&&(o.else(),(0,Z.reportTypeError)(e)),o.endIf()):me(e,c),s||o.if((0,ne._)(N||(N=W([""," === ",""])),oe.default.errors,n||0)))}!i.$ref||!u.ignoreKeywordsWithRef&&(0,ae.schemaHasRulesButRef)(i,c)?(u.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((function(t){ve(e.dataTypes,t)||be(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))})),e.dataTypes=e.dataTypes.filter((function(e){return ve(t,e)}))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&be(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){var r=e.self.RULES.all;for(var n in r){var o=r[n];if("object"==X(o)&&(0,Q.shouldUseRule)(e.schema,o)){var i=o.definition.type;i.length&&!i.some((function(e){return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n}))&&be(e,'missing type "'.concat(i.join(","),'" for keyword "').concat(n,'"'))}}}(e,e.dataTypes))}(e,t),o.block((function(){var e,t=G(c.rules);try{for(t.s();!(e=t.n()).done;)l(e.value)}catch(e){t.e(e)}finally{t.f()}l(c.post)}))):o.block((function(){return ge(e,"$ref",c.all.$ref.definition)}))}function me(e,t){var r=e.gen,n=e.schema;e.opts.useDefaults&&(0,ee.assignDefaults)(e,t.type),r.block((function(){var r,o=G(t.rules);try{for(o.s();!(r=o.n()).done;){var i=r.value;(0,Q.shouldUseRule)(n,i)&&ge(e,i.keyword,i.definition,t.type)}}catch(e){o.e(e)}finally{o.f()}}))}function ve(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function be(e,t){var r=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(r,'" (strictTypes)'),(0,ae.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){fe(e)&&(pe(e),le(e))?function(e){var t=e.schema,r=e.opts,n=e.gen;ue(e,(function(){r.$comment&&t.$comment&&de(e),function(e){var t=e.schema,r=e.opts;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,ae.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(oe.default.vErrors,null),n.let(oe.default.errors,0),r.unevaluated&&function(e){var t=e.gen,r=e.validateName;e.evaluated=t.const("evaluated",(0,ne._)(v||(v=W(["",".evaluated"])),r)),t.if((0,ne._)(b||(b=W(["",".dynamicProps"])),e.evaluated),(function(){return t.assign((0,ne._)(_||(_=W(["",".props"])),e.evaluated),(0,ne._)(g||(g=W(["undefined"]))))})),t.if((0,ne._)(w||(w=W(["",".dynamicItems"])),e.evaluated),(function(){return t.assign((0,ne._)(k||(k=W(["",".items"])),e.evaluated),(0,ne._)(S||(S=W(["undefined"]))))}))}(e),he(e),function(e){var t=e.gen,r=e.schemaEnv,n=e.validateName,o=e.ValidationError,i=e.opts;r.$async?t.if((0,ne._)(T||(T=W([""," === 0"])),oe.default.errors),(function(){return t.return(oe.default.data)}),(function(){return t.throw((0,ne._)(C||(C=W(["new ","(",")"])),o,oe.default.vErrors))})):(t.assign((0,ne._)(R||(R=W(["",".errors"])),n),oe.default.vErrors),i.unevaluated&&function(e){var t=e.gen,r=e.evaluated,n=e.props,o=e.items;n instanceof ne.Name&&t.assign((0,ne._)(D||(D=W(["",".props"])),r),n),o instanceof ne.Name&&t.assign((0,ne._)(M||(M=W(["",".items"])),r),o)}(e),t.return((0,ne._)(A||(A=W([""," === 0"])),oe.default.errors)))}(e)}))}(e):ue(e,(function(){return(0,Y.topBoolOrEmptySchema)(e)}))};var _e=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,te.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ae.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Se(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,te.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error("".concat(n," value must be ").concat(JSON.stringify(r.schemaType)));("code"in r?r.trackErrors:!1!==r.errors)&&(this.errsCount=t.gen.const("_errs",oe.default.errors))}var t,r;return t=e,r=[{key:"result",value:function(e,t,r){this.failResult((0,ne.not)(e),t,r)}},{key:"failResult",value:function(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.failResult((0,ne.not)(e),void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail((0,ne._)(I||(I=W([""," !== undefined && (",")"])),t,(0,ne.or)(this.invalid$data(),e)))}},{key:"error",value:function(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}},{key:"_error",value:function(e,t){(e?se.reportExtraError:se.reportError)(this,this.def.error,t)}},{key:"$dataError",value:function(){(0,se.reportError)(this,this.def.$dataError||se.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,se.resetErrorsCount)(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?Object.assign(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne.nil;this.gen.block((function(){r.check$data(e,n),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.nil;if(this.$data){var r=this.gen,n=this.schemaCode,o=this.schemaType,i=this.def;r.if((0,ne.or)((0,ne._)(L||(L=W([""," === undefined"])),n),t)),e!==ne.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==ne.nil&&r.assign(e,!1)),r.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,r=this.schemaType,n=this.def,o=this.it;return(0,ne.or)(function(){if(r.length){if(!(t instanceof ne.Name))throw new Error("ajv implementation error");var e=Array.isArray(r)?r:[r];return(0,ne._)(B||(B=W(["",""])),(0,Z.checkDataTypes)(e,t,o.opts.strictNumbers,Z.DataType.Wrong))}return ne.nil}(),function(){if(n.validateSchema){var r=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,ne._)($||($=W(["!","(",")"])),r,t)}return ne.nil}())}},{key:"subschema",value:function(e,t){var r=(0,re.getSubschema)(this.it,e);(0,re.extendSubschemaData)(r,this.it,e),(0,re.extendSubschemaMode)(r,e);var n=F(F(F({},this.it),r),{},{items:void 0,props:void 0});return function(e,t){fe(e)&&(pe(e),le(e))?function(e,t){var r=e.schema,n=e.gen;e.opts.$comment&&r.$comment&&de(e),function(e){var t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,ie.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);var o=n.const("_errs",oe.default.errors);he(e,o),n.var(t,(0,ne._)(P||(P=W([""," === ",""])),o,oe.default.errors))}(e,t):(0,Y.boolOrEmptySchema)(e,t)}(n,t),n}},{key:"mergeEvaluated",value:function(e,t){var r=this.it,n=this.gen;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=ae.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=ae.mergeEvaluated.items(n,e.items,r.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var r=this,n=this.it,o=this.gen;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return o.if(t,(function(){return r.mergeEvaluated(e,ne.Name)})),!0}}],r&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e,t,r,n){var o=new _e(e,r,t);"code"in r?r.code(o,n):o.$data&&r.validate?(0,te.funcKeywordCode)(o,r):"macro"in r?(0,te.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,te.funcKeywordCode)(o,r)}t.KeywordCxt=_e;var we=/^\/(?:[^~]|~0|~1)*$/,ke=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Se(e,t){var r,n,o=t.dataLevel,i=t.dataNames,a=t.dataPathArr;if(""===e)return oe.default.rootData;if("/"===e[0]){if(!we.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));r=e,n=oe.default.rootData}else{var s=ke.exec(e);if(!s)throw new Error("Invalid JSON-pointer: ".concat(e));var u=+s[1];if("#"===(r=s[2])){if(u>=o)throw new Error(h("property/index",u));return a[o-u]}if(u>o)throw new Error(h("data",u));if(n=i[o-u],!r)return n}var c,l=n,f=G(r.split("/"));try{for(f.s();!(c=f.n()).done;){var p=c.value;p&&(n=(0,ne._)(V||(V=W(["","",""])),n,(0,ne.getProperty)((0,ae.unescapeJsonPointer)(p))),l=(0,ne._)(z||(z=W([""," && ",""])),l,n))}}catch(e){f.e(e)}finally{f.f()}return l;function h(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(o)}}t.getData=Se},1277:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;var y=r(6287),m=r(1418),v=r(1301),b=r(388);function _(e){var t=e.gen,r=e.data,n=e.it;t.if(n.parentData,(function(){return t.assign(r,(0,y._)(c||(c=d(["","[","]"])),n.parentData,n.parentDataProperty))}))}function g(e,t,r){if(void 0===r)throw new Error('keyword "'.concat(t,'" failed to compile'));return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,y.stringify)(r)})}t.macroKeywordCode=function(e,t){var r=e.gen,n=e.keyword,o=e.schema,i=e.parentSchema,a=e.it,s=t.macro.call(a.self,o,i,a),u=g(r,n,s);!1!==a.opts.validateSchema&&a.self.validateSchema(s,!0);var c=r.name("valid");e.subschema({schema:s,schemaPath:y.nil,errSchemaPath:"".concat(a.errSchemaPath,"/").concat(n),topSchemaRef:u,compositeRule:!0},c),e.pass(c,(function(){return e.error(!0)}))},t.funcKeywordCode=function(e,t){var r,c=e.gen,h=e.keyword,w=e.schema,k=e.parentSchema,S=e.$data,O=e.it;!function(e,t){var r=e.schemaEnv;if(t.async&&!r.$async)throw new Error("async keyword in sync schema")}(O,t);var P=!S&&t.compile?t.compile.call(O.self,w,k,O):t.validate,j=g(c,h,P),x=c.let("valid");function E(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?(0,y._)(s||(s=d(["await "]))):y.nil,n=O.opts.passContext?m.default.this:m.default.self,o=!("compile"in t&&!S||!1===t.schema);c.assign(x,(0,y._)(u||(u=d(["","",""])),r,(0,v.callValidateCode)(e,j,n,o)),t.modifying)}function T(e){var r;c.if((0,y.not)(null!==(r=t.valid)&&void 0!==r?r:x),e)}e.block$data(x,(function(){if(!1===t.errors)E(),t.modifying&&_(e),T((function(){return e.error()}));else{var r=t.async?function(){var e=c.let("ruleErrs",null);return c.try((function(){return E((0,y._)(n||(n=d(["await "]))))}),(function(t){return c.assign(x,!1).if((0,y._)(o||(o=d([""," instanceof ",""])),t,O.ValidationError),(function(){return c.assign(e,(0,y._)(i||(i=d(["",".errors"])),t))}),(function(){return c.throw(t)}))})),e}():(s=(0,y._)(a||(a=d(["",".errors"])),j),c.assign(s,null),E(y.nil),s);t.modifying&&_(e),T((function(){return function(e,t){var r=e.gen;r.if((0,y._)(l||(l=d(["Array.isArray(",")"])),t),(function(){r.assign(m.default.vErrors,(0,y._)(f||(f=d([""," === null ? "," : ",".concat(",")"])),m.default.vErrors,t,m.default.vErrors,t)).assign(m.default.errors,(0,y._)(p||(p=d(["",".length"])),m.default.vErrors)),(0,b.extendErrors)(e)}),(function(){return e.error()}))}(e,r)}))}var s})),e.ok(null!==(r=t.valid)&&void 0!==r?r:x)},t.validSchemaType=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==h(e)&&!Array.isArray(e):h(e)==t||r&&void 0===e}))},t.validateKeywordUsage=function(e,t,r){var n=e.schema,o=e.opts,i=e.self,a=e.errSchemaPath;if(Array.isArray(t.keyword)?!t.keyword.includes(r):t.keyword!==r)throw new Error("ajv implementation error");var s=t.dependencies;if(null==s?void 0:s.some((function(e){return!Object.prototype.hasOwnProperty.call(n,e)})))throw new Error("parent schema must have dependencies of ".concat(r,": ").concat(s.join(",")));if(t.validateSchema&&!t.validateSchema(n[r])){var u='keyword "'.concat(r,'" value is invalid at path "').concat(a,'": ')+i.errorsText(t.validateSchema.errors);if("log"!==o.validateSchema)throw new Error(u);i.logger.error(u)}}},8436:(e,t,r)=>{"use strict";var n,o,i,a,s;function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;var f=r(6287),p=r(2523);t.getSubschema=function(e,t){var r=t.keyword,i=t.schemaProp,a=t.schema,s=t.schemaPath,u=t.errSchemaPath,c=t.topSchemaRef;if(void 0!==r&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){var h=e.schema[r];return void 0===i?{schema:h,schemaPath:(0,f._)(n||(n=l(["","",""])),e.schemaPath,(0,f.getProperty)(r)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(r)}:{schema:h[i],schemaPath:(0,f._)(o||(o=l(["","","",""])),e.schemaPath,(0,f.getProperty)(r),(0,f.getProperty)(i)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(r,"/").concat((0,p.escapeFragment)(i))}}if(void 0!==a){if(void 0===s||void 0===u||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:s,topSchemaRef:c,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,r){var n=r.dataProp,o=r.dataPropType,c=r.data,h=r.dataTypes,d=r.propertyName;if(void 0!==c&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');var y=t.gen;if(void 0!==n){var m=t.errorPath,v=t.dataPathArr,b=t.opts;_(y.let("data",(0,f._)(i||(i=l(["","",""])),t.data,(0,f.getProperty)(n)),!0)),e.errorPath=(0,f.str)(a||(a=l(["","",""])),m,(0,p.getErrorPath)(n,o,b.jsPropertySyntax)),e.parentDataProperty=(0,f._)(s||(s=l(["",""])),n),e.dataPathArr=[].concat(u(v),[e.parentDataProperty])}function _(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[].concat(u(t.dataNames),[r])}void 0!==c&&(_(c instanceof f.Name?c:y.let("data",c,!0)),void 0!==d&&(e.propertyName=d)),h&&(e.dataTypes=h)},t.extendSubschemaMode=function(e,t){var r=t.jtdDiscriminator,n=t.jtdMetadata,o=t.compositeRule,i=t.createErrors,a=t.allErrors;void 0!==o&&(e.compositeRule=o),void 0!==i&&(e.createErrors=i),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=r,e.jtdMetadata=n}},501:(e,t,r)=>{"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var h=r(8612);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return h.KeywordCxt}});var d=r(6287);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var y=r(7355),m=r(7835),v=r(9583),b=r(6678),_=r(6287),g=r(5381),w=r(4771),k=r(2523),S=r(4775),O=r(6097),P=function(e,t){return new RegExp(e,t)};P.code="new RegExp";var j=["removeAdditional","useDefaults","coerceTypes"],x=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},T={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function C(e){var t,r,n,o,i,a,s,u,c,l,p,h,d,y,m,v,b,_,g,w,k,S,j,x,E,T=e.strict,C=null===(t=e.code)||void 0===t?void 0:t.optimize,R=!0===C||void 0===C?1:C||0,A=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:P,D=null!==(o=e.uriResolver)&&void 0!==o?o:O.default;return{strictSchema:null===(a=null!==(i=e.strictSchema)&&void 0!==i?i:T)||void 0===a||a,strictNumbers:null===(u=null!==(s=e.strictNumbers)&&void 0!==s?s:T)||void 0===u||u,strictTypes:null!==(l=null!==(c=e.strictTypes)&&void 0!==c?c:T)&&void 0!==l?l:"log",strictTuples:null!==(h=null!==(p=e.strictTuples)&&void 0!==p?p:T)&&void 0!==h?h:"log",strictRequired:null!==(y=null!==(d=e.strictRequired)&&void 0!==d?d:T)&&void 0!==y&&y,code:e.code?f(f({},e.code),{},{optimize:R,regExp:A}):{optimize:R,regExp:A},loopRequired:null!==(m=e.loopRequired)&&void 0!==m?m:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(_=e.messages)||void 0===_||_,inlineRefs:null===(g=e.inlineRefs)||void 0===g||g,schemaId:null!==(w=e.schemaId)&&void 0!==w?w:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(S=e.validateSchema)||void 0===S||S,validateFormats:null===(j=e.validateFormats)||void 0===j||j,unicodeRegExp:null===(x=e.unicodeRegExp)||void 0===x||x,int32range:null===(E=e.int32range)||void 0===E||E,uriResolver:D}}var R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=f(f({},t),C(t));var r=this.opts.code,n=r.es5,o=r.lines;this.scope=new _.ValueScope({scope:{},prefixes:x,es5:n,lines:o}),this.logger=$(t.logger);var i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,v.getRules)(),A.call(this,E,t,"NOT SUPPORTED"),A.call(this,T,t,"DEPRECATED","warn"),this._metaOpts=L.call(this),t.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&I.call(this,t.keywords),"object"==s(t.meta)&&this.addMetaSchema(t.meta),M.call(this),t.validateFormats=i}var t,r;return t=e,r=[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data,r=e.meta,n=e.schemaId,o=S;"id"===n&&((o=f({},S)).id=o.$id,delete o.$id),r&&t&&this.addMetaSchema(o,o[n],!1)}},{key:"defaultMeta",value:function(){var e=this.opts,t=e.meta,r=e.schemaId;return this.opts.defaultMeta="object"==s(t)?t[r]||t:void 0}},{key:"validate",value:function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'.concat(e,'"'))}else r=this.compile(e);var n=r(t);return"$async"in r||(this.errors=r.errors),n}},{key:"compile",value:function(e,t){var r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}},{key:"compileAsync",value:function(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var r=this.opts.loadSchema;return n.call(this,e,t);function n(e,t){return o.apply(this,arguments)}function o(){return(o=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.call(this,t.$schema);case 2:return n=this._addSchema(t,r),e.abrupt("return",n.validate||u.call(this,n));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function i(e){return s.apply(this,arguments)}function s(){return(s=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.getSchema(t)){e.next=3;break}return e.next=3,n.call(this,{$ref:t},!0);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return(c=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof m.default){e.next=8;break}throw e.t0;case 8:return l.call(this,e.t0),e.next=11,f.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",u.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])})))).apply(this,arguments)}function l(e){var t=e.missingSchema,r=e.missingRef;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(r," cannot be resolved"))}function f(e){return p.apply(this,arguments)}function p(){return(p=a(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.call(this,r);case 2:if(n=e.sent,this.refs[r]){e.next=6;break}return e.next=6,i.call(this,n.$schema);case 6:this.refs[r]||this.addSchema(n,r,t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._loading[t])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,this._loading[t]=r(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])})))).apply(this,arguments)}}},{key:"addSchema",value:function(e,t,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var a,u=n(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;this.addSchema(c,void 0,r,i)}}catch(e){u.e(e)}finally{u.f()}return this}if("object"===s(e)){var l=this.opts.schemaId;if(void 0!==(o=e[l])&&"string"!=typeof o)throw new Error("schema ".concat(l," must be string"))}return t=(0,g.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,i,!0),this}},{key:"addMetaSchema",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,r),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var r;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(o);this.logger.error(o)}return n}},{key:"getSchema",value:function(e){for(var t;"string"==typeof(t=D.call(this,e));)e=t;if(void 0===t){var r=this.opts.schemaId,n=new b.SchemaEnv({schema:{},schemaId:r});if(!(t=b.resolveSchema.call(this,n,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(s(e)){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=D.call(this,e);return"object"==s(t)&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var r=e;this._cache.delete(r);var n=e[this.opts.schemaId];return n&&(n=(0,g.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t,r=n(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;this.addKeyword(o)}}catch(e){r.e(e)}finally{r.f()}return this}},{key:"addKeyword",value:function(e,t){var r,n=this;if("string"==typeof e)r=e,"object"==s(t)&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=s(e)||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(z.call(this,r,t),!t)return(0,k.eachItem)(r,(function(e){return U.call(n,e)})),this;q.call(this,t);var o=f(f({},t),{},{type:(0,w.getJSONTypes)(t.type),schemaType:(0,w.getJSONTypes)(t.schemaType)});return(0,k.eachItem)(r,0===o.type.length?function(e){return U.call(n,e,o)}:function(e){return o.type.forEach((function(t){return U.call(n,e,o,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==s(t)?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var r,o=n(t.rules);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.rules.findIndex((function(t){return t.keyword===e}));a>=0&&i.rules.splice(a,1)}}catch(e){o.e(e)}finally{o.f()}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.separator,n=void 0===r?", ":r,o=t.dataVar,i=void 0===o?"data":o;return e&&0!==e.length?e.map((function(e){return"".concat(i).concat(e.instancePath," ").concat(e.message)})).reduce((function(e,t){return e+n+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var r=this.RULES.all;e=JSON.parse(JSON.stringify(e));var o,i=n(t);try{for(i.s();!(o=i.n()).done;){var a,u=o.value.split("/").slice(1),c=e,l=n(u);try{for(l.s();!(a=l.n()).done;)c=c[a.value]}catch(e){l.e(e)}finally{l.f()}for(var f in r){var p=r[f];if("object"==s(p)){var h=p.definition.$data,d=c[f];h&&d&&(c[f]=G(d))}}}}catch(e){i.e(e)}finally{i.f()}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var r in e){var n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}},{key:"_addSchema",value:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema,a=this.opts.schemaId;if("object"==s(e))n=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var u=this._cache.get(e);if(void 0!==u)return u;r=(0,g.normalizeId)(n||r);var c=g.getSchemaRefs.call(this,e,r);return u=new b.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:r,localRefs:c}),this._cache.set(u.schema,u),i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=u),o&&this.validateSchema(e,!0),u}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):b.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{b.compileSchema.call(this,e)}finally{this.opts=t}}}],r&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var o in e){var i=o;i in t&&this.logger[n]("".concat(r,": option ").concat(o,". ").concat(e[i]))}}function D(e){return e=(0,g.normalizeId)(e),this.schemas[e]||this.refs[e]}function M(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function N(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function I(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function L(){var e,t=f({},this.opts),r=n(j);try{for(r.s();!(e=r.n()).done;)delete t[e.value]}catch(e){r.e(e)}finally{r.f()}return t}t.default=R,R.ValidationError=y.default,R.MissingRefError=m.default;var B={log:function(){},warn:function(){},error:function(){}};function $(e){if(!1===e)return B;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var V=/^[a-z_$][a-z0-9_$:-]*$/i;function z(e,t){var r=this.RULES;if((0,k.eachItem)(e,(function(e){if(r.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!V.test(e))throw new Error("Keyword ".concat(e," has invalid name"))})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function U(e,t,r){var n,o=this,i=null==t?void 0:t.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');var a=this.RULES,s=i?a.post:a.rules.find((function(e){return e.type===r}));if(s||(s={type:r,rules:[]},a.rules.push(s)),a.keywords[e]=!0,t){var u={keyword:e,definition:f(f({},t),{},{type:(0,w.getJSONTypes)(t.type),schemaType:(0,w.getJSONTypes)(t.schemaType)})};t.before?F.call(this,s,u,t.before):s.rules.push(u),a.all[e]=u,null===(n=t.implements)||void 0===n||n.forEach((function(e){return o.addKeyword(e)}))}}function F(e,t,r){var n=e.rules.findIndex((function(e){return e.keyword===r}));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(r," is not defined")))}function q(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=G(t)),e.validateSchema=this.compile(t,!0))}var H={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(e){return{anyOf:[e,H]}}},4555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3094);n.code='require("ajv/dist/runtime/equal").default',t.default=n},6380:(e,t)=>{"use strict";function r(e){for(var t,r=e.length,n=0,o=0;o<r;)n++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},6097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(574);n.code='require("ajv/dist/runtime/uri").default',t.default=n},7355:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){var t="function"==typeof Map?new Map:void 0;return o=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)},o(e)}function i(e,t,r){return i=a()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&s(o,r.prototype),o},i.apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,o,i=(t=c,r=a(),function(){var e,o=u(t);if(r){var i=u(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return n(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,"validation failed")).errors=e,t.ajv=t.validation=!0,t}return o=c,Object.defineProperty(o,"prototype",{writable:!1}),o}(o(Error));t.default=c},5461:(e,t,r)=>{"use strict";var n,o,i,a,s;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;var l=r(6287),f=r(2523),p={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:function(e){var t=e.params.len;return(0,l.str)(n||(n=c(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,l._)(o||(o=c(["{limit: ","}"])),t)}},code:function(e){var t=e.parentSchema,r=e.it,n=t.items;Array.isArray(n)?h(e,n):(0,f.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function h(e,t){var r=e.gen,n=e.schema,o=e.data,p=e.keyword,h=e.it;h.items=!0;var d=r.const("len",(0,l._)(i||(i=c(["",".length"])),o));if(!1===n)e.setParams({len:t.length}),e.pass((0,l._)(a||(a=c([""," <= ",""])),d,t.length));else if("object"==u(n)&&!(0,f.alwaysValidSchema)(h,n)){var y=r.var("valid",(0,l._)(s||(s=c([""," <= ",""])),d,t.length));r.if((0,l.not)(y),(function(){return function(n){r.forRange("i",t.length,d,(function(t){e.subschema({keyword:p,dataProp:t,dataPropType:f.Type.Num},n),h.allErrors||r.if((0,l.not)(n),(function(){return r.break()}))}))}(y)})),e.ok(y)}}t.validateAdditionalItems=h,t.default=p},1366:(e,t,r)=>{"use strict";var n,o,i,a,s;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var p=r(1301),h=r(6287),d=r(1418),y=r(2523),m={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:function(e){var t=e.params;return(0,h._)(n||(n=f(["{additionalProperty: ","}"])),t.additionalProperty)}},code:function(e){var t=e.gen,r=e.schema,n=e.parentSchema,l=e.data,m=e.errsCount,v=e.it;if(!m)throw new Error("ajv implementation error");var b=v.allErrors,_=v.opts;if(v.props=!0,"all"===_.removeAdditional||!(0,y.alwaysValidSchema)(v,r)){var g=(0,p.allSchemaProperties)(n.properties),w=(0,p.allSchemaProperties)(n.patternProperties);t.forIn("key",l,(function(r){g.length||w.length?t.if(function(r){var o;if(g.length>8){var s=(0,y.schemaRefOrVal)(v,n.properties,"properties");o=(0,p.isOwnProperty)(t,s,r)}else o=g.length?h.or.apply(void 0,c(g.map((function(e){return(0,h._)(i||(i=f([""," === ",""])),r,e)})))):h.nil;return w.length&&(o=h.or.apply(void 0,[o].concat(c(w.map((function(t){return(0,h._)(a||(a=f(["",".test(",")"])),(0,p.usePattern)(e,t),r)})))))),(0,h.not)(o)}(r),(function(){return S(r)})):S(r)})),e.ok((0,h._)(o||(o=f([""," === ",""])),m,d.default.errors))}function k(e){t.code((0,h._)(s||(s=f(["delete ","[","]"])),l,e))}function S(n){if("all"===_.removeAdditional||_.removeAdditional&&!1===r)k(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(b||t.break());if("object"==u(r)&&!(0,y.alwaysValidSchema)(v,r)){var o=t.name("valid");"failing"===_.removeAdditional?(O(n,o,!1),t.if((0,h.not)(o),(function(){e.reset(),k(n)}))):(O(n,o),b||t.if((0,h.not)(o),(function(){return t.break()})))}}}function O(t,r,n){var o={keyword:"additionalProperties",dataProp:t,dataPropType:y.Type.Str};!1===n&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}}};t.default=m},2698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2523),o={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,r=e.schema,o=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");var i=t.name("valid");r.forEach((function(t,r){if(!(0,n.alwaysValidSchema)(o,t)){var a=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(a)}}))}};t.default=o},9152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(1301).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},7688:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d;function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var m=r(6287),v=r(2523),b={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:function(e){var t=e.params,r=t.min,i=t.max;return void 0===i?(0,m.str)(n||(n=y(["must contain at least "," valid item(s)"])),r):(0,m.str)(o||(o=y(["must contain at least "," and no more than "," valid item(s)"])),r,i)},params:function(e){var t=e.params,r=t.min,n=t.max;return void 0===n?(0,m._)(i||(i=y(["{minContains: ","}"])),r):(0,m._)(a||(a=y(["{minContains: ",", maxContains: ","}"])),r,n)}},code:function(e){var t,r,n=e.gen,o=e.schema,i=e.parentSchema,a=e.data,b=e.it,_=i.minContains,g=i.maxContains;b.opts.next?(t=void 0===_?1:_,r=g):t=1;var w=n.const("len",(0,m._)(s||(s=y(["",".length"])),a));if(e.setParams({min:t,max:r}),void 0!==r||0!==t){if(void 0!==r&&t>r)return(0,v.checkStrictMode)(b,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,v.alwaysValidSchema)(b,o)){var k=(0,m._)(u||(u=y([""," >= ",""])),w,t);return void 0!==r&&(k=(0,m._)(c||(c=y([""," && "," <= ",""])),k,w,r)),void e.pass(k)}b.items=!0;var S=n.name("valid");void 0===r&&1===t?P(S,(function(){return n.if(S,(function(){return n.break()}))})):0===t?(n.let(S,!0),void 0!==r&&n.if((0,m._)(l||(l=y(["",".length > 0"])),a),O)):(n.let(S,!1),O()),e.result(S,(function(){return e.reset()}))}else(0,v.checkStrictMode)(b,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function O(){var e=n.name("_valid"),o=n.let("count",0);P(e,(function(){return n.if(e,(function(){return function(e){n.code((0,m._)(f||(f=y(["","++"])),e)),void 0===r?n.if((0,m._)(p||(p=y([""," >= ",""])),e,t),(function(){return n.assign(S,!0).break()})):(n.if((0,m._)(h||(h=y([""," > ",""])),e,r),(function(){return n.assign(S,!1).break()})),1===t?n.assign(S,!0):n.if((0,m._)(d||(d=y([""," >= ",""])),e,t),(function(){return n.assign(S,!0)})))}(o)}))}))}function P(t,r){n.forRange("i",0,w,(function(n){e.subschema({keyword:"contains",dataProp:n,dataPropType:v.Type.Num,compositeRule:!0},t),r()}))}}};t.default=b},7015:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;var l=r(6287),f=r(2523),p=r(1301);t.error={message:function(e){var t=e.params,r=t.property,o=t.depsCount,i=t.deps,a=1===o?"property":"properties";return(0,l.str)(n||(n=c(["must have "," "," when property "," is present"])),a,i,r)},params:function(e){var t=e.params,r=t.property,n=t.depsCount,i=t.deps,a=t.missingProperty;return(0,l._)(o||(o=c(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),r,a,n,i)}};var h={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code:function(e){var t,r,n=(t=function(e){var t=e.schema,r={},n={};for(var o in t)"__proto__"!==o&&((Array.isArray(t[o])?r:n)[o]=t[o]);return[r,n]}(e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,r)||s(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];d(e,o),y(e,i)}};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.gen,n=e.data,o=e.it;if(0!==Object.keys(t).length){var s=r.let("missing"),u=function(u){var f=t[u];if(0===f.length)return"continue";var h=(0,p.propertyInData)(r,n,u,o.opts.ownProperties);e.setParams({property:u,depsCount:f.length,deps:f.join(", ")}),o.allErrors?r.if(h,(function(){var t,r=a(f);try{for(r.s();!(t=r.n()).done;){var n=t.value;(0,p.checkReportMissingProp)(e,n)}}catch(e){r.e(e)}finally{r.f()}})):(r.if((0,l._)(i||(i=c([""," && (",")"])),h,(0,p.checkMissingProp)(e,f,s))),(0,p.reportMissingProp)(e,s),r.else())};for(var f in t)u(f)}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.gen,n=e.data,o=e.keyword,i=e.it,a=r.name("valid"),s=function(s){if((0,f.alwaysValidSchema)(i,t[s]))return"continue";r.if((0,p.propertyInData)(r,n,s,i.opts.ownProperties),(function(){var t=e.subschema({keyword:o,schemaProp:s},a);e.mergeValidEvaluated(t,a)}),(function(){return r.var(a,!0)})),e.ok(a)};for(var u in t)s(u)}t.validatePropertyDeps=d,t.validateSchemaDeps=y,t.default=h},6868:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6287),u=r(2523),c={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:function(e){var t=e.params;return(0,s.str)(n||(n=a(['must match "','" schema'])),t.ifClause)},params:function(e){var t=e.params;return(0,s._)(o||(o=a(["{failingKeyword: ","}"])),t.ifClause)}},code:function(e){var t=e.gen,r=e.parentSchema,n=e.it;void 0===r.then&&void 0===r.else&&(0,u.checkStrictMode)(n,'"if" without "then" and "else" is ignored');var o=l(n,"then"),c=l(n,"else");if(o||c){var f,p=t.let("valid",!0),h=t.name("_valid");if(f=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h),e.mergeEvaluated(f),e.reset(),o&&c){var d=t.let("ifClause");e.setParams({ifClause:d}),t.if(h,y("then",d),y("else",d))}else o?t.if(h,y("then")):t.if((0,s.not)(h),y("else"));e.pass(p,(function(){return e.error(!0)}))}function y(r,n){return function(){var o=e.subschema({keyword:r},h);t.assign(p,h),e.mergeValidEvaluated(o,p),n?t.assign(n,(0,s._)(i||(i=a(["",""])),r)):e.setParams({ifClause:r})}}}};function l(e,t){var r=e.schema[t];return void 0!==r&&!(0,u.alwaysValidSchema)(e,r)}t.default=c},2964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5461),o=r(4491),i=r(6691),a=r(1257),s=r(7688),u=r(7015),c=r(1638),l=r(1366),f=r(3847),p=r(9335),h=r(2883),d=r(9152),y=r(3370),m=r(2698),v=r(6868),b=r(9976);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[h.default,d.default,y.default,m.default,v.default,b.default,c.default,l.default,u.default,f.default,p.default];return e?t.push(o.default,a.default):t.push(n.default,i.default),t.push(s.default),t}},6691:(e,t,r)=>{"use strict";var n,o;function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;var a=r(6287),s=r(2523),u=r(1301),c={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t=e.schema,r=e.it;if(Array.isArray(t))return l(e,"additionalItems",t);r.items=!0,(0,s.alwaysValidSchema)(r,t)||e.ok((0,u.validateArray)(e))}};function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema,u=e.gen,c=e.parentSchema,l=e.data,f=e.keyword,p=e.it;y(c),p.opts.unevaluated&&r.length&&!0!==p.items&&(p.items=s.mergeEvaluated.items(u,r.length,p.items));var h=u.name("valid"),d=u.const("len",(0,a._)(n||(n=i(["",".length"])),l));function y(e){var n=p.opts,o=p.errSchemaPath,i=r.length,a=i===e.minItems&&(i===e.maxItems||!1===e[t]);if(n.strictTuples&&!a){var u='"'.concat(f,'" is ').concat(i,"-tuple, but minItems or maxItems/").concat(t,' are not specified or different at path "').concat(o,'"');(0,s.checkStrictMode)(p,u,n.strictTuples)}}r.forEach((function(t,r){(0,s.alwaysValidSchema)(p,t)||(u.if((0,a._)(o||(o=i([""," > ",""])),d,r),(function(){return e.subschema({keyword:f,schemaProp:r,dataProp:r},h)})),e.ok(h))}))}t.validateTuple=l,t.default=c},1257:(e,t,r)=>{"use strict";var n,o;function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6287),s=r(2523),u=r(1301),c=r(5461),l={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:function(e){var t=e.params.len;return(0,a.str)(n||(n=i(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,a._)(o||(o=i(["{limit: ","}"])),t)}},code:function(e){var t=e.schema,r=e.parentSchema,n=e.it,o=r.prefixItems;n.items=!0,(0,s.alwaysValidSchema)(n,t)||(o?(0,c.validateAdditionalItems)(e,o):e.ok((0,u.validateArray)(e)))}};t.default=l},2883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2523),o={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,r=e.schema,o=e.it;if((0,n.alwaysValidSchema)(o,r))e.fail();else{var i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,(function(){return e.reset()}),(function(){return e.error()}))}},error:{message:"must NOT be valid"}};t.default=o},3370:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6287),u=r(2523),c={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:function(e){var t=e.params;return(0,s._)(n||(n=a(["{passingSchemas: ","}"])),t.passing)}},code:function(e){var t=e.gen,r=e.schema,n=e.parentSchema,c=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!c.opts.discriminator||!n.discriminator){var l=r,f=t.let("valid",!1),p=t.let("passing",null),h=t.name("_valid");e.setParams({passing:p}),t.block((function(){l.forEach((function(r,n){var l;(0,u.alwaysValidSchema)(c,r)?t.var(h,!0):l=e.subschema({keyword:"oneOf",schemaProp:n,compositeRule:!0},h),n>0&&t.if((0,s._)(o||(o=a([""," && ",""])),h,f)).assign(f,!1).assign(p,(0,s._)(i||(i=a(["[",", ","]"])),p,n)).else(),t.if(h,(function(){t.assign(f,!0),t.assign(p,n),l&&e.mergeEvaluated(l,s.Name)}))}))})),e.result(f,(function(){return e.reset()}),(function(){return e.error(!0)}))}}};t.default=c},9335:(e,t,r)=>{"use strict";var n,o;function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var s=r(1301),u=r(6287),c=r(2523),l=r(2523),f={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,f=e.data,p=e.parentSchema,h=e.it,d=h.opts,y=(0,s.allSchemaProperties)(r),m=y.filter((function(e){return(0,c.alwaysValidSchema)(h,r[e])}));if(0!==y.length&&(m.length!==y.length||h.opts.unevaluated&&!0!==h.props)){var v=d.strictSchema&&!d.allowMatchingProperties&&p.properties,b=t.name("valid");!0===h.props||h.props instanceof u.Name||(h.props=(0,l.evaluatedPropsToName)(t,h.props));var _=h.props;!function(){var e,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(y);try{for(r.s();!(e=r.n()).done;){var n=e.value;v&&g(n),h.allErrors?w(n):(t.var(b,!0),w(n),t.if(b))}}catch(e){r.e(e)}finally{r.f()}}()}function g(e){for(var t in v)new RegExp(e).test(t)&&(0,c.checkStrictMode)(h,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function w(r){t.forIn("key",f,(function(a){t.if((0,u._)(n||(n=i(["",".test(",")"])),(0,s.usePattern)(e,r),a),(function(){var n=m.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:a,dataPropType:l.Type.Str},b),h.opts.unevaluated&&!0!==_?t.assign((0,u._)(o||(o=i(["","[","]"])),_,a),!0):n||h.allErrors||t.if((0,u.not)(b),(function(){return t.break()}))}))}))}}};t.default=f},4491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6691),o={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function(e){return(0,n.validateTuple)(e,"items")}};t.default=o},3847:(e,t,r)=>{"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(8612),a=r(1301),s=r(2523),u=r(1366),c={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,o=e.parentSchema,c=e.data,l=e.it;"all"===l.opts.removeAdditional&&void 0===o.additionalProperties&&u.default.code(new i.KeywordCxt(l,u.default,"additionalProperties"));var f,p=(0,a.allSchemaProperties)(r),h=n(p);try{for(h.s();!(f=h.n()).done;){var d=f.value;l.definedProperties.add(d)}}catch(e){h.e(e)}finally{h.f()}l.opts.unevaluated&&p.length&&!0!==l.props&&(l.props=s.mergeEvaluated.props(t,(0,s.toHash)(p),l.props));var y=p.filter((function(e){return!(0,s.alwaysValidSchema)(l,r[e])}));if(0!==y.length){var m,v=t.name("valid"),b=n(y);try{for(b.s();!(m=b.n()).done;){var _=m.value;g(_)?w(_):(t.if((0,a.propertyInData)(t,c,_,l.opts.ownProperties)),w(_),l.allErrors||t.else().var(v,!0),t.endIf()),e.it.definedProperties.add(_),e.ok(v)}}catch(e){b.e(e)}finally{b.f()}}function g(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==r[e].default}function w(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},v)}}};t.default=c},1638:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(6287),i=r(2523),a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:function(e){var t,r,i=e.params;return(0,o._)(n||(t=["{propertyName: ","}"],r||(r=t.slice(0)),n=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),i.propertyName)}},code:function(e){var t=e.gen,r=e.schema,n=e.data,a=e.it;if(!(0,i.alwaysValidSchema)(a,r)){var s=t.name("valid");t.forIn("key",n,(function(r){e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},s),t.if((0,o.not)(s),(function(){e.error(!0),a.allErrors||t.break()}))})),e.ok(s)}}};t.default=a},9976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2523),o={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,r=e.parentSchema,o=e.it;void 0===r.if&&(0,n.checkStrictMode)(o,'"'.concat(t,'" without "if" is ignored'))}};t.default=o},1301:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v;function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;var g=r(6287),w=r(2523),k=r(1418),S=r(2523);function O(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,g._)(i||(i=_(["Object.prototype.hasOwnProperty"])))})}function P(e,t,r){return(0,g._)(a||(a=_(["",".call(",", ",")"])),O(e),t,r)}function j(e,t,r,n){var o=(0,g._)(c||(c=_(["",""," === undefined"])),t,(0,g.getProperty)(r));return n?(0,g.or)(o,(0,g.not)(P(e,t,r))):o}function x(e){return e?Object.keys(e).filter((function(e){return"__proto__"!==e})):[]}t.checkReportMissingProp=function(e,t){var r=e.gen,o=e.data,i=e.it;r.if(j(r,o,t,i.opts.ownProperties),(function(){e.setParams({missingProperty:(0,g._)(n||(n=_(["",""])),t)},!0),e.error()}))},t.checkMissingProp=function(e,t,r){var n,i=e.gen,a=e.data,s=e.it.opts;return g.or.apply(void 0,function(e){if(Array.isArray(e))return b(e)}(n=t.map((function(e){return(0,g.and)(j(i,a,e,s.ownProperties),(0,g._)(o||(o=_([""," = ",""])),r,e))})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=O,t.isOwnProperty=P,t.propertyInData=function(e,t,r,n){var o=(0,g._)(s||(s=_(["",""," !== undefined"])),t,(0,g.getProperty)(r));return n?(0,g._)(u||(u=_([""," && ",""])),o,P(e,t,r)):o},t.noPropertyInData=j,t.allSchemaProperties=x,t.schemaProperties=function(e,t){return x(t).filter((function(r){return!(0,w.alwaysValidSchema)(e,t[r])}))},t.callValidateCode=function(e,t,r,n){var o=e.schemaCode,i=e.data,a=e.it,s=a.gen,u=a.topSchemaRef,c=a.schemaPath,d=a.errorPath,y=e.it,m=n?(0,g._)(l||(l=_(["",", ",", ","",""])),o,i,u,c):i,v=[[k.default.instancePath,(0,g.strConcat)(k.default.instancePath,d)],[k.default.parentData,y.parentData],[k.default.parentDataProperty,y.parentDataProperty],[k.default.rootData,k.default.rootData]];y.opts.dynamicRef&&v.push([k.default.dynamicAnchors,k.default.dynamicAnchors]);var b=(0,g._)(f||(f=_(["",", ",""])),m,s.object.apply(s,v));return r!==g.nil?(0,g._)(p||(p=_(["",".call(",", ",")"])),t,r,b):(0,g._)(h||(h=_(["","(",")"])),t,b)};var E=(0,g._)(d||(d=_(["new RegExp"])));t.usePattern=function(e,t){var r=e.gen,n=e.it.opts,o=n.unicodeRegExp?"u":"",i=n.code.regExp,a=i(t,o);return r.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,g._)(y||(y=_(["","(",", ",")"])),"new RegExp"===i.code?E:(0,S.useFunc)(r,i),t,o)})},t.validateArray=function(e){var t=e.gen,r=e.data,n=e.keyword,o=e.it,i=t.name("valid");if(o.allErrors){var a=t.let("valid",!0);return s((function(){return t.assign(a,!1)})),a}return t.var(i,!0),s((function(){return t.break()})),i;function s(o){var a=t.const("len",(0,g._)(m||(m=_(["",".length"])),r));t.forRange("i",0,a,(function(r){e.subschema({keyword:n,dataProp:r,dataPropType:w.Type.Num},i),t.if((0,g.not)(i),o)}))}},t.validateUnion=function(e){var t=e.gen,r=e.schema,n=e.keyword,o=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!r.some((function(e){return(0,w.alwaysValidSchema)(o,e)}))||o.opts.unevaluated){var i=t.let("valid",!1),a=t.name("_valid");t.block((function(){return r.forEach((function(r,o){var s=e.subschema({keyword:n,schemaProp:o,compositeRule:!0},a);t.assign(i,(0,g._)(v||(v=_([""," || ",""])),i,a)),e.mergeValidEvaluated(s,a)||t.if((0,g.not)(i))}))})),e.result(i,(function(){return e.reset()}),(function(){return e.error(!0)}))}}},2905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},6909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2905),o=r(3512),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,o.default];t.default=i},3512:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f;function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;var h=r(7835),d=r(1301),y=r(6287),m=r(1418),v=r(6678),b=r(2523),_={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,r=e.schema,o=e.it,i=o.baseId,a=o.schemaEnv,s=o.validateName,u=o.opts,c=o.self,l=a.root;if(("#"===r||"#/"===r)&&i===l.baseId)return function(){if(a===l)return w(e,s,a,a.$async);var r=t.scopeValue("root",{ref:l});return w(e,(0,y._)(n||(n=p(["",".validate"])),r),l,l.$async)}();var f,d,m=v.resolveRef.call(c,l,i,r);if(void 0===m)throw new h.default(o.opts.uriResolver,i,r);return m instanceof v.SchemaEnv?(d=g(e,f=m),void w(e,d,f,f.$async)):function(n){var o=t.scopeValue("schema",!0===u.code.source?{ref:n,code:(0,y.stringify)(n)}:{ref:n}),i=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:y.nil,topSchemaRef:o,errSchemaPath:r},i);e.mergeEvaluated(a),e.ok(i)}(m)}};function g(e,t){var r=e.gen;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,y._)(o||(o=p(["",".validate"])),r.scopeValue("wrapper",{ref:t}))}function w(e,t,r,n){var o=e.gen,h=e.it,v=h.allErrors,_=h.schemaEnv,g=h.opts.passContext?m.default.this:y.nil;function w(e){var t=(0,y._)(s||(s=p(["",".errors"])),e);o.assign(m.default.vErrors,(0,y._)(u||(u=p([""," === null ? "," : ",".concat(",")"])),m.default.vErrors,t,m.default.vErrors,t)),o.assign(m.default.errors,(0,y._)(c||(c=p(["",".length"])),m.default.vErrors))}function k(e){var t;if(h.opts.unevaluated){var n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==h.props)if(n&&!n.dynamicProps)void 0!==n.props&&(h.props=b.mergeEvaluated.props(o,n.props,h.props));else{var i=o.var("props",(0,y._)(l||(l=p(["",".evaluated.props"])),e));h.props=b.mergeEvaluated.props(o,i,h.props,y.Name)}if(!0!==h.items)if(n&&!n.dynamicItems)void 0!==n.items&&(h.items=b.mergeEvaluated.items(o,n.items,h.items));else{var a=o.var("items",(0,y._)(f||(f=p(["",".evaluated.items"])),e));h.items=b.mergeEvaluated.items(o,a,h.items,y.Name)}}}n?function(){if(!_.$async)throw new Error("async schema referenced by sync schema");var r=o.let("valid");o.try((function(){o.code((0,y._)(i||(i=p(["await ",""])),(0,d.callValidateCode)(e,t,g))),k(t),v||o.assign(r,!0)}),(function(e){o.if((0,y._)(a||(a=p(["!("," instanceof ",")"])),e,h.ValidationError),(function(){return o.throw(e)})),w(e),v||o.assign(r,!1)})),e.ok(r)}():e.result((0,d.callValidateCode)(e,t,g),(function(){return k(t)}),(function(){return w(t)}))}t.getValidate=g,t.callRef=w,t.default=_},3933:(e,t,r)=>{"use strict";var n,o,i,a;function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=r(6287),f=r(7067),p=r(6678),h=r(2523),d={keyword:"discriminator",type:"object",schemaType:"object",error:{message:function(e){var t=e.params,r=t.discrError,n=t.tagName;return r===f.DiscrError.Tag?'tag "'.concat(n,'" must be string'):'value of tag "'.concat(n,'" must be in oneOf')},params:function(e){var t=e.params,r=t.discrError,o=t.tag,i=t.tagName;return(0,l._)(n||(n=c(["{error: ",", tag: ",", tagValue: ","}"])),r,i,o)}},code:function(e){var t=e.gen,r=e.data,n=e.schema,d=e.parentSchema,y=e.it,m=d.oneOf;if(!y.opts.discriminator)throw new Error("discriminator: requires discriminator option");var v=n.propertyName;if("string"!=typeof v)throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!m)throw new Error("discriminator: requires oneOf keyword");var b=t.let("valid",!1),_=t.const("tag",(0,l._)(o||(o=c(["","",""])),r,(0,l.getProperty)(v)));t.if((0,l._)(i||(i=c(["typeof ",' == "string"'])),_),(function(){return function(){var r,n,o,i=function(){for(var e,t={},r=c(d),n=!0,o=0;o<m.length;o++){var i=m[o];(null==i?void 0:i.$ref)&&!(0,h.schemaHasRulesButRef)(i,y.self.RULES)&&(i=p.resolveRef.call(y.self,y.schemaEnv.root,y.baseId,null==i?void 0:i.$ref))instanceof p.SchemaEnv&&(i=i.schema);var a=null===(e=null==i?void 0:i.properties)||void 0===e?void 0:e[v];if("object"!=u(a))throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(v,'"'));n=n&&(r||c(i)),l(a,o)}if(!n)throw new Error('discriminator: "'.concat(v,'" must be required'));return t;function c(e){var t=e.required;return Array.isArray(t)&&t.includes(v)}function l(e,t){if(e.const)f(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'.concat(v,'" must have "const" or "enum"'));var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e.enum);try{for(n.s();!(r=n.n()).done;)f(r.value,t)}catch(e){n.e(e)}finally{n.f()}}}function f(e,r){if("string"!=typeof e||e in t)throw new Error('discriminator: "'.concat(v,'" values must be unique strings'));t[e]=r}}();for(var g in t.if(!1),i)t.elseIf((0,l._)(a||(a=c([""," === ",""])),_,g)),t.assign(b,(r=i[g],n=void 0,o=void 0,n=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:r},n),e.mergeEvaluated(o,l.Name),n));t.else(),e.error(!1,{discrError:f.DiscrError.Mapping,tag:_,tagName:v}),t.endIf()}()}),(function(){return e.error(!1,{discrError:f.DiscrError.Tag,tag:_,tagName:v})})),e.ok(b)}};t.default=d},7067:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,(r=t.DiscrError||(t.DiscrError={})).Tag="tag",r.Mapping="mapping"},3501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6909),o=r(6735),i=r(2964),a=r(3781),s=r(7884),u=[n.default,o.default,(0,i.default)(),a.default,s.metadataVocabulary,s.contentVocabulary];t.default=u},6510:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var S=r(6287),O={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,S.str)(n||(n=k(['must match format "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,S._)(o||(o=k(["{format: ","}"])),t)}},code:function(e,t){var r,n,o,O,P,j,x=e.gen,E=e.data,T=e.$data,C=e.schema,R=e.schemaCode,A=e.it,D=A.opts,M=A.errSchemaPath,N=A.schemaEnv,I=A.self;D.validateFormats&&(T?(r=x.scopeValue("formats",{ref:I.formats,code:D.code.formats}),n=x.const("fDef",(0,S._)(i||(i=k(["","[","]"])),r,R)),o=x.let("fType"),O=x.let("format"),x.if((0,S._)(a||(a=k(["typeof ",' == "object" && !('," instanceof RegExp)"])),n,n),(function(){return x.assign(o,(0,S._)(s||(s=k(["",'.type || "string"'])),n)).assign(O,(0,S._)(u||(u=k(["",".validate"])),n))}),(function(){return x.assign(o,(0,S._)(c||(c=k(['"string"'])))).assign(O,n)})),e.fail$data((0,S.or)(!1===D.strictSchema?S.nil:(0,S._)(l||(l=k([""," && !",""])),R,O),(P=N.$async?(0,S._)(f||(f=k(["(",".async ? await ","(",") : ","(","))"])),n,O,E,O,E):(0,S._)(p||(p=k(["","(",")"])),O,E),j=(0,S._)(h||(h=k(["(typeof ",' == "function" ? '," : ",".test(","))"])),O,P,O,E),(0,S._)(d||(d=k([""," && "," !== true && "," === "," && !",""])),O,O,o,t,j))))):function(){var r=I.formats[C];if(r){if(!0!==r){var n,o,i,a,s,u=(a=(i=r)instanceof RegExp?(0,S.regexpCode)(i):D.code.formats?(0,S._)(y||(y=k(["","",""])),D.code.formats,(0,S.getProperty)(C)):void 0,s=x.scopeValue("formats",{key:C,ref:i,code:a}),n="object"!=g(i)||i instanceof RegExp?["string",i,s]:[i.type||"string",i.validate,(0,S._)(m||(m=k(["",".validate"])),s)],o=3,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(n,o)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1],f=u[2];c===t&&e.pass(function(){if("object"==g(r)&&!(r instanceof RegExp)&&r.async){if(!N.$async)throw new Error("async format in sync schema");return(0,S._)(v||(v=k(["await ","(",")"])),f,E)}return"function"==typeof l?(0,S._)(b||(b=k(["","(",")"])),f,E):(0,S._)(_||(_=k(["",".test(",")"])),f,E)}())}}else!function(){if(!1!==D.strictSchema)throw new Error(e());function e(){return'unknown format "'.concat(C,'" ignored in schema at path "').concat(M,'"')}I.logger.warn(e())}()}())}};t.default=O},3781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[r(6510).default];t.default=n},7884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},2560:(e,t,r)=>{"use strict";var n,o,i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),c=r(2523),l=r(4555),f={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:function(e){var t=e.schemaCode;return(0,u._)(n||(n=s(["{allowedValue: ","}"])),t)}},code:function(e){var t=e.gen,r=e.data,n=e.$data,f=e.schemaCode,p=e.schema;n||p&&"object"==a(p)?e.fail$data((0,u._)(o||(o=s(["!","(",", ",")"])),(0,c.useFunc)(t,l.default),r,f)):e.fail((0,u._)(i||(i=s([""," !== ",""])),p,r))}};t.default=f},274:(e,t,r)=>{"use strict";var n,o,i,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=r(6287),f=r(2523),p=r(4555),h={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return(0,l._)(n||(n=c(["{allowedValues: ","}"])),t)}},code:function(e){var t=e.gen,r=e.data,n=e.$data,h=e.schema,d=e.schemaCode,y=e.it;if(!n&&0===h.length)throw new Error("enum must have non-empty array");var m,v,b,_=h.length>=y.opts.loopEnum,g=function(){return null!=m?m:m=(0,f.useFunc)(t,p.default)};if(_||n)v=t.let("valid"),e.block$data(v,(function(){t.assign(v,!1),t.forOf("v",d,(function(e){return t.if((0,l._)(o||(o=c(["","(",", ",")"])),g(),r,e),(function(){return t.assign(v,!0).break()}))}))}));else{if(!Array.isArray(h))throw new Error("ajv implementation error");var w=t.const("vSchema",d);v=l.or.apply(void 0,(b=h.map((function(e,t){return function(e,t){var n=h[t];return"object"===s(n)&&null!==n?(0,l._)(i||(i=c(["","(",", ","[","])"])),g(),r,e,t):(0,l._)(a||(a=c([""," === ",""])),r,n)}(w,t)})),function(e){if(Array.isArray(e))return u(e)}(b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(b)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}e.pass(v)}};t.default=h},6735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2982),o=r(4316),i=r(6961),a=r(6081),s=r(6087),u=r(3823),c=r(9109),l=r(7808),f=r(2560),p=r(274),h=[n.default,o.default,i.default,a.default,s.default,u.default,c.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},f.default,p.default];t.default=h},9109:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6287),u={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,o="maxItems"===t?"more":"fewer";return(0,s.str)(n||(n=a(["must NOT have "," than "," items"])),o,r)},params:function(e){var t=e.schemaCode;return(0,s._)(o||(o=a(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,r=e.data,n=e.schemaCode,o="maxItems"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)(i||(i=a(["",".length "," ",""])),r,o,n))}};t.default=u},6961:(e,t,r)=>{"use strict";var n,o,i,a,s;function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var c=r(6287),l=r(2523),f=r(6380),p={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,o="maxLength"===t?"more":"fewer";return(0,c.str)(n||(n=u(["must NOT have "," than "," characters"])),o,r)},params:function(e){var t=e.schemaCode;return(0,c._)(o||(o=u(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,r=e.data,n=e.schemaCode,o=e.it,p="maxLength"===t?c.operators.GT:c.operators.LT,h=!1===o.opts.unicode?(0,c._)(i||(i=u(["",".length"])),r):(0,c._)(a||(a=u(["","(",")"])),(0,l.useFunc)(e.gen,f.default),r);e.fail$data((0,c._)(s||(s=u([""," "," ",""])),h,p,n))}};t.default=p},2982:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6287),u=s.operators,c={maximum:{okStr:"<=",ok:u.LTE,fail:u.GT},minimum:{okStr:">=",ok:u.GTE,fail:u.LT},exclusiveMaximum:{okStr:"<",ok:u.LT,fail:u.GTE},exclusiveMinimum:{okStr:">",ok:u.GT,fail:u.LTE}},l={message:function(e){var t=e.keyword,r=e.schemaCode;return(0,s.str)(n||(n=a(["must be "," ",""])),c[t].okStr,r)},params:function(e){var t=e.keyword,r=e.schemaCode;return(0,s._)(o||(o=a(["{comparison: ",", limit: ","}"])),c[t].okStr,r)}},f={keyword:Object.keys(c),type:"number",schemaType:"number",$data:!0,error:l,code:function(e){var t=e.keyword,r=e.data,n=e.schemaCode;e.fail$data((0,s._)(i||(i=a([""," "," "," || isNaN(",")"])),r,c[t].fail,n,r))}};t.default=f},6087:(e,t,r)=>{"use strict";var n,o,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6287),u={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,o="maxProperties"===t?"more":"fewer";return(0,s.str)(n||(n=a(["must NOT have "," than "," properties"])),o,r)},params:function(e){var t=e.schemaCode;return(0,s._)(o||(o=a(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,r=e.data,n=e.schemaCode,o="maxProperties"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)(i||(i=a(["Object.keys(",").length "," ",""])),r,o,n))}};t.default=u},4316:(e,t,r)=>{"use strict";var n,o,i,a,s;function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var c=r(6287),l={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,c.str)(n||(n=u(["must be multiple of ",""])),t)},params:function(e){var t=e.schemaCode;return(0,c._)(o||(o=u(["{multipleOf: ","}"])),t)}},code:function(e){var t=e.gen,r=e.data,n=e.schemaCode,o=e.it.opts.multipleOfPrecision,l=t.let("res"),f=o?(0,c._)(i||(i=u(["Math.abs(Math.round(",") - ",") > 1e-",""])),l,l,o):(0,c._)(a||(a=u([""," !== parseInt(",")"])),l,l);e.fail$data((0,c._)(s||(s=u(["("," === 0 || ("," = ","/",", ","))"])),n,l,r,n,f))}};t.default=l},6081:(e,t,r)=>{"use strict";var n,o,i,a;function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1301),c=r(6287),l={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,c.str)(n||(n=s(['must match pattern "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,c._)(o||(o=s(["{pattern: ","}"])),t)}},code:function(e){var t=e.data,r=e.$data,n=e.schema,o=e.schemaCode,l=e.it.opts.unicodeRegExp?"u":"",f=r?(0,c._)(i||(i=s(["(new RegExp(",", ","))"])),o,l):(0,u.usePattern)(e,n);e.fail$data((0,c._)(a||(a=s(["!",".test(",")"])),f,t))}};t.default=l},3823:(e,t,r)=>{"use strict";var n,o;function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1301),c=r(6287),l=r(2523),f={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:function(e){var t=e.params.missingProperty;return(0,c.str)(n||(n=s(["must have required property '","'"])),t)},params:function(e){var t=e.params.missingProperty;return(0,c._)(o||(o=s(["{missingProperty: ","}"])),t)}},code:function(e){var t=e.gen,r=e.schema,n=e.schemaCode,o=e.data,a=e.$data,s=e.it,f=s.opts;if(a||0!==r.length){var p=r.length>=f.loopRequired;if(s.allErrors?function(){if(p||a)e.block$data(c.nil,g);else{var t,n=i(r);try{for(n.s();!(t=n.n()).done;){var o=t.value;(0,u.checkReportMissingProp)(e,o)}}catch(e){n.e(e)}finally{n.f()}}}():function(){var i=t.let("missing");if(p||a){var s=t.let("valid",!0);e.block$data(s,(function(){return function(r,i){e.setParams({missingProperty:r}),t.forOf(r,n,(function(){t.assign(i,(0,u.propertyInData)(t,o,r,f.ownProperties)),t.if((0,c.not)(i),(function(){e.error(),t.break()}))}),c.nil)}(i,s)})),e.ok(s)}else t.if((0,u.checkMissingProp)(e,r,i)),(0,u.reportMissingProp)(e,i),t.else()}(),f.strictRequired){var h,d=e.parentSchema.properties,y=e.it.definedProperties,m=i(r);try{for(m.s();!(h=m.n()).done;){var v=h.value;if(void 0===(null==d?void 0:d[v])&&!y.has(v)){var b=s.schemaEnv.baseId+s.errSchemaPath,_='required property "'.concat(v,'" is not defined at "').concat(b,'" (strictRequired)');(0,l.checkStrictMode)(s,_,s.opts.strictRequired)}}}catch(e){m.e(e)}finally{m.f()}}}function g(){t.forOf("prop",n,(function(r){e.setParams({missingProperty:r}),t.if((0,u.noPropertyInData)(t,o,r,f.ownProperties),(function(){return e.error()}))}))}}};t.default=f},7808:(e,t,r)=>{"use strict";var n,o,i,a,s,u,c,l,f,p,h,d,y,m,v,b,_;function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var w=r(4771),k=r(6287),S=r(2523),O=r(4555),P={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:function(e){var t=e.params,r=t.i,o=t.j;return(0,k.str)(n||(n=g(["must NOT have duplicate items (items ## "," and "," are identical)"])),o,r)},params:function(e){var t=e.params,r=t.i,n=t.j;return(0,k._)(o||(o=g(["{i: ",", j: ","}"])),r,n)}},code:function(e){var t=e.gen,r=e.data,n=e.$data,o=e.schema,P=e.parentSchema,j=e.schemaCode,x=e.it;if(n||o){var E=t.let("valid"),T=P.items?(0,w.getSchemaTypes)(P.items):[];e.block$data(E,(function(){var n=t.let("i",(0,k._)(a||(a=g(["",".length"])),r)),o=t.let("j");e.setParams({i:n,j:o}),t.assign(E,!0),t.if((0,k._)(s||(s=g([""," > 1"])),n),(function(){return(T.length>0&&!T.some((function(e){return"object"===e||"array"===e}))?C:R)(n,o)}))}),(0,k._)(i||(i=g([""," === false"])),j)),e.ok(E)}function C(n,o){var i=t.name("item"),a=(0,w.checkDataTypes)(T,i,x.opts.strictNumbers,w.DataType.Wrong),s=t.const("indices",(0,k._)(u||(u=g(["{}"]))));t.for((0,k._)(c||(c=g([";","--;"])),n),(function(){t.let(i,(0,k._)(l||(l=g(["","[","]"])),r,n)),t.if(a,(0,k._)(f||(f=g(["continue"])))),T.length>1&&t.if((0,k._)(p||(p=g(["typeof ",' == "string"'])),i),(0,k._)(h||(h=g(["",' += "_"'])),i)),t.if((0,k._)(d||(d=g(["typeof ","[",'] == "number"'])),s,i),(function(){t.assign(o,(0,k._)(y||(y=g(["","[","]"])),s,i)),e.error(),t.assign(E,!1).break()})).code((0,k._)(m||(m=g(["","[","] = ",""])),s,i,n))}))}function R(n,o){var i=(0,S.useFunc)(t,O.default),a=t.name("outer");t.label(a).for((0,k._)(v||(v=g([";","--;"])),n),(function(){return t.for((0,k._)(b||(b=g([""," = ","; ","--;"])),o,n,o),(function(){return t.if((0,k._)(_||(_=g(["","(","[","], ","[","])"])),i,r,n,r,o),(function(){e.error(),t.assign(E,!1).break(a)}))}))}))}}};t.default=P},3094:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function e(r,n){if(r===n)return!0;if(r&&n&&"object"==t(r)&&"object"==t(n)){if(r.constructor!==n.constructor)return!1;var o,i,a;if(Array.isArray(r)){if((o=r.length)!=n.length)return!1;for(i=o;0!=i--;)if(!e(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if((o=(a=Object.keys(r)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=o;0!=i--;){var s=a[i];if(!e(r[s],n[s]))return!1}return!0}return r!=r&&n!=n}},4929:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,o,i,a,s,u,c,l,f,p){if(a&&"object"==t(a)&&!Array.isArray(a)){for(var h in o(a,s,u,c,l,f,p),a){var d=a[h];if(Array.isArray(d)){if(h in r.arrayKeywords)for(var y=0;y<d.length;y++)n(e,o,i,d[y],s+"/"+h+"/"+y,u,s,h,a,y)}else if(h in r.propsKeywords){if(d&&"object"==t(d))for(var m in d)n(e,o,i,d[m],s+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),u,s,h,a,m)}else(h in r.keywords||e.allKeys&&!(h in r.skipKeywords))&&n(e,o,i,d,s+"/"+h,u,s,h,a)}i(a,s,u,c,l,f,p)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},9095:function(e,t,r){var n,o;!function(i,a){"use strict";void 0===(o="function"==typeof(n=function(){var e={};function t(e,t){this.x=e||0,this.y=t||0}function r(e,r){this.pos=e||new t,this.r=r||0,this.offset=new t}function n(e,r){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(r||[])}function o(e,r,n){this.pos=e||new t,this.w=r||0,this.h=n||0}function i(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}e.Vector=t,e.V=t,t.prototype.copy=t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var e=this.x;return this.x=this.y,this.y=-e,this},t.prototype.rotate=t.prototype.rotate=function(e){var t=this.x,r=this.y;return this.x=t*Math.cos(e)-r*Math.sin(e),this.y=t*Math.sin(e)+r*Math.cos(e),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var e=this.len();return e>0&&(this.x=this.x/e,this.y=this.y/e),this},t.prototype.add=t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.sub=t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.scale=t.prototype.scale=function(e,t){return this.x*=e,this.y*=void 0!==t?t:e,this},t.prototype.project=t.prototype.project=function(e){var t=this.dot(e)/e.len2();return this.x=t*e.x,this.y=t*e.y,this},t.prototype.projectN=t.prototype.projectN=function(e){var t=this.dot(e);return this.x=t*e.x,this.y=t*e.y,this},t.prototype.reflect=t.prototype.reflect=function(e){var t=this.x,r=this.y;return this.project(e).scale(2),this.x-=t,this.y-=r,this},t.prototype.reflectN=t.prototype.reflectN=function(e){var t=this.x,r=this.y;return this.projectN(e).scale(2),this.x-=t,this.y-=r,this},t.prototype.dot=t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},e.Circle=r,r.prototype.getAABBAsBox=r.prototype.getAABBAsBox=function(){var e=this.r;return new o(this.pos.clone().add(this.offset).sub(new t(e,e)),2*e,2*e)},r.prototype.getAABB=r.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},r.prototype.setOffset=r.prototype.setOffset=function(e){return this.offset=e,this},e.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(e){if(!this.points||this.points.length!==e.length){var r,n=this.calcPoints=[],o=this.edges=[],i=this.normals=[];for(r=0;r<e.length;r++){var a=e[r],s=r<e.length-1?e[r+1]:e[0];a===s||a.x!==s.x||a.y!==s.y?(n.push(new t),o.push(new t),i.push(new t)):(e.splice(r,1),r-=1)}}return this.points=e,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(e){return this.angle=e,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(e){return this.offset=e,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].rotate(e);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(e,t){for(var r=this.points,n=r.length,o=0;o<n;o++)r[o].x+=e,r[o].y+=t;return this._recalc(),this},n.prototype._recalc=function(){var e,t=this.calcPoints,r=this.edges,n=this.normals,o=this.points,i=this.offset,a=this.angle,s=o.length;for(e=0;e<s;e++){var u=t[e].copy(o[e]);u.x+=i.x,u.y+=i.y,0!==a&&u.rotate(a)}for(e=0;e<s;e++){var c=t[e],l=e<s-1?t[e+1]:t[0],f=r[e].copy(l).sub(c);n[e].copy(f).perp().normalize()}return this},n.prototype.getAABBAsBox=n.prototype.getAABBAsBox=function(){for(var e=this.calcPoints,r=e.length,n=e[0].x,i=e[0].y,a=e[0].x,s=e[0].y,u=1;u<r;u++){var c=e[u];c.x<n?n=c.x:c.x>a&&(a=c.x),c.y<i?i=c.y:c.y>s&&(s=c.y)}return new o(this.pos.clone().add(new t(n,i)),a-n,s-i)},n.prototype.getAABB=n.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},n.prototype.getCentroid=n.prototype.getCentroid=function(){for(var e=this.calcPoints,r=e.length,n=0,o=0,i=0,a=0;a<r;a++){var s=e[a],u=a===r-1?e[0]:e[a+1],c=s.x*u.y-u.x*s.y;n+=(s.x+u.x)*c,o+=(s.y+u.y)*c,i+=c}return new t(n/=i*=3,o/=i)},e.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var e=this.pos,r=this.w,o=this.h;return new n(new t(e.x,e.y),[new t,new t(r,0),new t(r,o),new t(0,o)])},e.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var a=[],s=0;s<10;s++)a.push(new t);var u=[];for(s=0;s<5;s++)u.push([]);var c=new i,l=new o(new t,1e-6,1e-6).toPolygon();function f(e,t,r){for(var n=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=e.length,a=0;a<i;a++){var s=e[a].dot(t);s<n&&(n=s),s>o&&(o=s)}r[0]=n,r[1]=o}function p(e,t,r,n,o,i){var s=u.pop(),c=u.pop(),l=a.pop().copy(t).sub(e),p=l.dot(o);if(f(r,o,s),f(n,o,c),c[0]+=p,c[1]+=p,s[0]>c[1]||c[0]>s[1])return a.push(l),u.push(s),u.push(c),!0;if(i){var h,d,y=0;s[0]<c[0]?(i.aInB=!1,s[1]<c[1]?(y=s[1]-c[0],i.bInA=!1):y=(h=s[1]-c[0])<(d=c[1]-s[0])?h:-d):(i.bInA=!1,s[1]>c[1]?(y=s[0]-c[1],i.aInB=!1):y=(h=s[1]-c[0])<(d=c[1]-s[0])?h:-d);var m=Math.abs(y);m<i.overlap&&(i.overlap=m,i.overlapN.copy(o),y<0&&i.overlapN.reverse())}return a.push(l),u.push(s),u.push(c),!1}function h(e,t){var r=e.len2(),n=t.dot(e);return n<0?d:n>r?m:y}e.isSeparatingAxis=p;var d=-1,y=0,m=1;function v(e,t,r){for(var n=a.pop().copy(t.pos).add(t.offset).sub(e.pos),o=t.r,i=o*o,s=e.calcPoints,u=s.length,c=a.pop(),l=a.pop(),f=0;f<u;f++){var p=f===u-1?0:f+1,y=0===f?u-1:f-1,v=0,b=null;c.copy(e.edges[f]),l.copy(n).sub(s[f]),r&&l.len2()>i&&(r.aInB=!1);var _=h(c,l);if(_===d){c.copy(e.edges[y]);var g=a.pop().copy(n).sub(s[y]);if((_=h(c,g))===m){if((k=l.len())>o)return a.push(n),a.push(c),a.push(l),a.push(g),!1;r&&(r.bInA=!1,b=l.normalize(),v=o-k)}a.push(g)}else if(_===m){if(c.copy(e.edges[p]),l.copy(n).sub(s[p]),(_=h(c,l))===d){if((k=l.len())>o)return a.push(n),a.push(c),a.push(l),!1;r&&(r.bInA=!1,b=l.normalize(),v=o-k)}}else{var w=c.perp().normalize(),k=l.dot(w),S=Math.abs(k);if(k>0&&S>o)return a.push(n),a.push(w),a.push(l),!1;r&&(b=w,v=o-k,(k>=0||v<2*o)&&(r.bInA=!1))}b&&r&&Math.abs(v)<Math.abs(r.overlap)&&(r.overlap=v,r.overlapN.copy(b))}return r&&(r.a=e,r.b=t,r.overlapV.copy(r.overlapN).scale(r.overlap)),a.push(n),a.push(c),a.push(l),!0}function b(e,t,r){for(var n=e.calcPoints,o=n.length,i=t.calcPoints,a=i.length,s=0;s<o;s++)if(p(e.pos,t.pos,n,i,e.normals[s],r))return!1;for(s=0;s<a;s++)if(p(e.pos,t.pos,n,i,t.normals[s],r))return!1;return r&&(r.a=e,r.b=t,r.overlapV.copy(r.overlapN).scale(r.overlap)),!0}return e.pointInCircle=function(e,t){var r=a.pop().copy(e).sub(t.pos).sub(t.offset),n=t.r*t.r,o=r.len2();return a.push(r),o<=n},e.pointInPolygon=function(e,t){l.pos.copy(e),c.clear();var r=b(l,t,c);return r&&(r=c.aInB),r},e.testCircleCircle=function(e,t,r){var n=a.pop().copy(t.pos).add(t.offset).sub(e.pos).sub(e.offset),o=e.r+t.r,i=o*o,s=n.len2();if(s>i)return a.push(n),!1;if(r){var u=Math.sqrt(s);r.a=e,r.b=t,r.overlap=o-u,r.overlapN.copy(n.normalize()),r.overlapV.copy(n).scale(r.overlap),r.aInB=e.r<=t.r&&u<=t.r-e.r,r.bInA=t.r<=e.r&&u<=e.r-t.r}return a.push(n),!0},e.testPolygonCircle=v,e.testCirclePolygon=function(e,t,r){var n=v(t,e,r);if(n&&r){var o=r.a,i=r.aInB;r.overlapN.reverse(),r.overlapV.reverse(),r.a=r.b,r.b=o,r.aInB=r.bInA,r.bInA=i}return n},e.testPolygonPolygon=b,e})?n.call(t,r,t,e):n)||(e.exports=o)}()},3841:(e,t,r)=>{var n=r(1374),o=r(7963),i=r(7121),a=r(2799),s=r(8930),u=r(1841),c=r(1805);c.alea=n,c.xor128=o,c.xorwow=i,c.xorshift7=a,c.xor4096=s,c.tychei=u,e.exports=c},1374:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,i,a){function s(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var r=new s(e),n=t&&t.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==o(n)&&u(n,r),i.state=function(){return u(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.alea=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},1841:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,i,a){function s(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var r=new s(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&u(n,r),i.state=function(){return u(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.tychei=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},7963:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,i,a){function s(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var r=new s(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&u(n,r),i.state=function(){return u(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.xor128=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},8930:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,o,i){function a(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,i=t.i;return t.w=n=n+1640531527|0,r=o[i+34&127],e=o[i=i+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[i]=r^e,t.i=i,r+(n^n>>>16)|0},function(e,t){var r,n,o,i,a,s=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(n^=t.charCodeAt((i+32)%t.length)),0===i&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(a=a+1640531527|0,o=0==(r=s[127&i]^=n+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)n=s[o+34&127],r=s[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,s[o]=n^r;e.w=a,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.X&&s(n,r),o.state=function(){return s(r,{})}),o}o&&o.exports?o.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,o))||(o.exports=n):this.xor4096=u}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},2799:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,o,i){function a(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.x&&s(n,r),o.state=function(){return s(r,{})}),o}o&&o.exports?o.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,o))||(o.exports=n):this.xorshift7=u}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},7121:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e,i,a){function s(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var r=new s(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&u(n,r),i.state=function(){return u(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.xorwow=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},1805:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e=r.nmd(e),function(i,a,s){var u,c=256,l=s.pow(c,6),f=s.pow(2,52),p=2*f,h=255;function d(e,t,r){var n=[],o=b(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,_(a)]:null==e?function(){try{var e;return u&&(e=u.randomBytes)?e=e(c):(e=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(e)),_(e)}catch(e){var t=i.navigator,r=t&&t.plugins;return[+new Date,i,r,i.screen,_(a)]}}():e,3),n),h=new y(n),d=function(){for(var e=h.g(6),t=l,r=0;e<f;)e=(e+r)*c,t*=c,r=h.g(1);for(;e>=p;)e/=2,t/=2,r>>>=1;return(e+r)/t};return d.int32=function(){return 0|h.g(4)},d.quick=function(){return h.g(4)/4294967296},d.double=d,b(_(h.S),a),(t.pass||r||function(e,t,r,n){return n&&(n.S&&m(n,h),e.state=function(){return m(h,{})}),r?(s.random=e,t):e})(d,o,"global"in t?t.global:this==s,t.state)}function y(e){var t,r=e.length,n=this,o=0,i=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);o<c;)a[o]=o++;for(o=0;o<c;o++)a[o]=a[i=h&i+e[o%r]+(t=a[o])],a[i]=t;(n.g=function(e){for(var t,r=0,o=n.i,i=n.j,a=n.S;e--;)t=a[o=h&o+1],r=r*c+a[h&(a[o]=a[i=h&i+t])+(a[i]=t)];return n.i=o,n.j=i,r})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var r,n=[],i=o(e);if(t&&"object"==i)for(r in e)try{n.push(v(e[r],t-1))}catch(e){}return n.length?n:"string"==i?e:e+"\0"}function b(e,t){for(var r,n=e+"",o=0;o<n.length;)t[h&o]=h&(r^=19*t[h&o])+n.charCodeAt(o++);return _(t)}function _(e){return String.fromCharCode.apply(0,e)}if(b(s.random(),a),"object"==o(e)&&e.exports){e.exports=d;try{u=r(5042)}catch(e){}}else void 0===(n=function(){return d}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},574:function(e,t){var r,n,o,i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}i=function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){var n="[A-Za-z]",o="[0-9]",i=t(o,"[A-Fa-f]"),a=r(r("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+r("%[89A-Fa-f]"+i+"%"+i+i)+"|"+r("%"+i+i)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",l=t(n,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),f=r(n+t(n,o,"[\\+\\-\\.]")+"*"),p=r(r(a+"|"+t(l,s,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|"+o),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?"+o)),d=r(h+"\\."+h+"\\."+h+"\\."+h),y=r(i+"{1,4}"),m=r(r(y+"\\:"+y)+"|"+d),v=r(r(y+"\\:")+"{6}"+m),b=r("\\:\\:"+r(y+"\\:")+"{5}"+m),_=r(r(y)+"?\\:\\:"+r(y+"\\:")+"{4}"+m),g=r(r(r(y+"\\:")+"{0,1}"+y)+"?\\:\\:"+r(y+"\\:")+"{3}"+m),w=r(r(r(y+"\\:")+"{0,2}"+y)+"?\\:\\:"+r(y+"\\:")+"{2}"+m),k=r(r(r(y+"\\:")+"{0,3}"+y)+"?\\:\\:"+y+"\\:"+m),S=r(r(r(y+"\\:")+"{0,4}"+y)+"?\\:\\:"+m),O=r(r(r(y+"\\:")+"{0,5}"+y)+"?\\:\\:"+y),P=r(r(r(y+"\\:")+"{0,6}"+y)+"?\\:\\:"),j=r([v,b,_,g,w,k,S,O,P].join("|")),x=r(r(l+"|"+a)+"+"),E=(r(j+"\\%25"+x),r(j+r("\\%25|\\%(?!"+i+"{2})")+x)),T=r("[vV]"+i+"+\\."+t(l,s,"[\\:]")+"+"),C=r("\\["+r(E+"|"+j+"|"+T)+"\\]"),R=r(r(a+"|"+t(l,s))+"*"),A=r(C+"|"+d+"(?!"+R+")|"+R),D=r("[0-9]*"),M=r(r(p+"@")+"?"+A+r("\\:"+D)+"?"),N=r(a+"|"+t(l,s,"[\\:\\@]")),I=r(N+"*"),L=r(N+"+"),B=r(r(a+"|"+t(l,s,"[\\@]"))+"+"),$=r(r("\\/"+I)+"*"),V=r("\\/"+r(L+$)+"?"),z=r(B+$),U=r(L+$),F="(?!"+N+")",q=(r($+"|"+V+"|"+z+"|"+U+"|"+F),r(r(N+"|"+t("[\\/\\?]",c))+"*")),H=r(r(N+"|[\\/\\?]")+"*"),G=r(r("\\/\\/"+M+$)+"|"+V+"|"+U+"|"+F),K=r(f+"\\:"+G+r("\\?"+q)+"?"+r("\\#"+H)+"?"),X=r(r("\\/\\/"+M+$)+"|"+V+"|"+z+"|"+F),W=r(X+r("\\?"+q)+"?"+r("\\#"+H)+"?");return r(K+"|"+W),r(f+"\\:"+G+r("\\?"+q)+"?"),r(r("\\/\\/("+r("("+p+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+$+"|"+V+"|"+U+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+$+"|"+V+"|"+z+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+$+"|"+V+"|"+U+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r("("+p+")@"),r("\\:("+D+")"),{NOT_SCHEME:new RegExp(t("[^]",n,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,s),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,u),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+j+")"+r(r("\\%25|\\%(?!"+i+"{2})")+"("+x+")")+"?\\]?$")}}var a=i(!1),s=i(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=36,f=/^xn--/,p=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(d[e])}function b(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(h,".")).split("."),t).join(".");return n+o}var _=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},g=function(e,t,r){var n=0;for(e=r?y(e/700):e>>1,e+=y(e/t);e>455;n+=l)e=y(e/35);return y(n+36*e/(e+38))},w=function(e){return b(e,(function(e){return p.test(e)?"xn--"+function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,n=128,o=0,i=72,a=!0,s=!1,u=void 0;try{for(var f,p=e[Symbol.iterator]();!(a=(f=p.next()).done);a=!0){var h=f.value;h<128&&t.push(m(h))}}catch(e){s=!0,u=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw u}}var d=t.length,b=d;for(d&&t.push("-");b<r;){var w=c,k=!0,S=!1,O=void 0;try{for(var P,j=e[Symbol.iterator]();!(k=(P=j.next()).done);k=!0){var x=P.value;x>=n&&x<w&&(w=x)}}catch(e){S=!0,O=e}finally{try{!k&&j.return&&j.return()}finally{if(S)throw O}}var E=b+1;w-n>y((c-o)/E)&&v("overflow"),o+=(w-n)*E,n=w;var T=!0,C=!1,R=void 0;try{for(var A,D=e[Symbol.iterator]();!(T=(A=D.next()).done);T=!0){var M=A.value;if(M<n&&++o>c&&v("overflow"),M==n){for(var N=o,I=l;;I+=l){var L=I<=i?1:I>=i+26?26:I-i;if(N<L)break;var B=N-L,$=l-L;t.push(m(_(L+B%$,0))),N=y(B/$)}t.push(m(_(N,0))),i=g(o,E,b==d),o=0,++b}}}catch(e){C=!0,R=e}finally{try{!T&&D.return&&D.return()}finally{if(C)throw R}}++o,++n}return t.join("")}(e):e}))},k=function(e){return b(e,(function(e){return f.test(e)?function(e){var t,r=[],n=e.length,o=0,i=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&v("not-basic"),r.push(e.charCodeAt(u));for(var f=s>0?s+1:0;f<n;){for(var p=o,h=1,d=l;;d+=l){f>=n&&v("invalid-input");var m=(t=e.charCodeAt(f++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l;(m>=l||m>y((c-o)/h))&&v("overflow"),o+=m*h;var b=d<=a?1:d>=a+26?26:d-a;if(m<b)break;var _=l-b;h>y(c/_)&&v("overflow"),h*=_}var w=r.length+1;a=g(o-p,w,0==p),y(o/w)>c-i&&v("overflow"),i+=y(o/w),o%=w,r.splice(o++,0,i)}return String.fromCodePoint.apply(String,r)}(e.slice(4).toLowerCase()):e}))},S={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&a)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function j(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,o)),e}function x(e){return e.replace(/^0*(.*)/,"$1")||"0"}function E(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(x).join("."):e}function T(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),o=n[1],i=n[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),s=u(a,2),c=s[0],l=s[1],f=l?l.split(":").map(x):[],p=c.split(":").map(x),h=t.IPV4ADDRESS.test(p[p.length-1]),d=h?7:8,y=p.length-d,m=Array(d),v=0;v<d;++v)m[v]=f[v]||p[y+v]||"";h&&(m[d-1]=E(m[d-1],t));var b=m.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(b&&b.length>1){var g=m.slice(0,b.index),w=m.slice(b.index+b.length);_=g.join(":")+"::"+w.join(":")}else _=m.join(":");return i&&(_+="%"+i),_}return e}var C=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R=void 0==="".match(/(){0}/)[1];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(C);if(o){R?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=T(E(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)j(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=w(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}j(r,a)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function D(e,t){var r=!1!==t.iri?s:a,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(T(E(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var M=/^\.\.?\//,N=/^\/\.(\/|$)/,I=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function B(e){for(var t=[];e.length;)if(e.match(M))e=e.replace(M,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(I))e=e.replace(I,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:a,n=[],o=S[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?k(e.host):w(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}j(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=D(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||o&&o.absolutePath||(u=B(u)),void 0===i&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=A($(e,r),r),t=A($(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=B(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=B(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function z(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,P)}var U={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},F={scheme:"https",domainHost:U.domainHost,parse:U.parse,serialize:U.serialize};function q(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var H={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=q(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(q(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=u(r,2),o=n[0],i=n[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},G={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},K={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",Y=r(r("%[EFef][0-9A-Fa-f]%"+W+W+"%"+W+W)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+W+W)+"|"+r("%"+W+W)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Q=new RegExp(X,"g"),Z=new RegExp(Y,"g"),ee=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),te=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),re=te;function ne(e){var t=P(e);return t.match(Q)?t:e}var oe={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,i={},a=r.query.split("&"),s=0,u=a.length;s<u;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),f=0,p=l.length;f<p;++f)n.push(l[f]);break;case"subject":r.subject=z(c[1],t);break;case"body":r.body=z(c[1],t);break;default:o=!0,i[z(c[0],t)]=z(c[1],t)}}o&&(r.headers=i)}r.query=void 0;for(var h=0,d=n.length;h<d;++h){var y=n[h].split("@");if(y[0]=z(y[0]),t.unicodeSupport)y[1]=z(y[1],t).toLowerCase();else try{y[1]=w(z(y[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=y.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var a=0,s=i.length;a<s;++a){var u=String(i[a]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(Z,ne).replace(Z,o).replace(ee,O),f=u.slice(c+1);try{f=t.iri?k(f):w(z(f,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[a]=l+"@"+f}n.path=i.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var h=[];for(var d in p)p[d]!==K[d]&&h.push(d.replace(Z,ne).replace(Z,o).replace(te,O)+"="+p[d].replace(Z,ne).replace(Z,o).replace(re,O));return h.length&&(n.query=h.join("&")),n}},ie=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ie),n=e;if(r){var o=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),a=r[2],s=o+":"+(t.nid||i),u=S[s];n.nid=i,n.nss=a,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),i=S[o];i&&(e=i.serialize(e,t));var a=e,s=e.nss;return a.path=(n||t.nid)+":"+s,a}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(se)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[U.scheme]=U,S[F.scheme]=F,S[H.scheme]=H,S[G.scheme]=G,S[oe.scheme]=oe,S[ae.scheme]=ae,S[ue.scheme]=ue,e.SCHEMES=S,e.pctEncChar=O,e.pctDecChars=P,e.parse=A,e.removeDotSegments=B,e.serialize=$,e.resolveComponents=V,e.resolve=function(e,t,r){var n=function(e,t){var r={scheme:"null"};if(t)for(var n in t)r[n]=t[n];return r}(0,r);return $(V(A(e,n),A(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=$(A(e,t),t):"object"===n(e)&&(e=A($(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=$(A(e,r),r):"object"===n(e)&&(e=$(e,r)),"string"==typeof t?t=$(A(t,r),r):"object"===n(t)&&(t=$(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,O)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},425:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var extendedMath=__webpack_require__(6238),TankController=function(){function e(){_classCallCheck(this,e),this._initCallback=function(){},this._loopCallback=function(){}}return _createClass(e,[{key:"loop",value:function(e){this._loopCallback=e}},{key:"init",value:function(e){this._initCallback=e}}]),e}(),EvalWorker=function(){function EvalWorker(){_classCallCheck(this,EvalWorker),this.onmessage=function(e){},this._callStackLimit=100,this._callStackCount=0,this._tankController=new TankController}return _createClass(EvalWorker,[{key:"postMessage",value:function postMessage(inputData){var _this=this,response=null;if("init"==inputData.command){if(!inputData.code)throw"The code is required!";var settings=inputData.settings,info=inputData.info,Math=extendedMath(),tank=this._tankController;eval(inputData.code),tank._initCallback(settings,info),response={data:{type:"init",settings}}}else if("update"==inputData.command){var state=inputData.state,control=inputData.control;this._tankController._loopCallback?(this._tankController._loopCallback(state,control),response={data:control}):response={data:control}}this._callStackCount<this._callStackLimit?(this._callStackCount++,this.onmessage(response)):(this._callStackCount=0,setTimeout((function(){_this.onmessage(response)}),1))}},{key:"terminate",value:function(){}}]),EvalWorker}();const __WEBPACK_DEFAULT_EXPORT__=EvalWorker},6238:e=>{e.exports=function(){var e={},t=["LN10","PI","E","LOG10E","SQRT2","LOG2E","SQRT1_2","LN2","cos","pow","log","tan","sqrt","ceil","asin","abs","max","exp","atan2","random","round","floor","acos","atan","min","sin"];for(var r in t)e[t[r]]=Math[t[r]];return e.deg={},e.rad={},e.deg.normalize=function(e){for(e=Number(e);e>180;)e-=360;for(;e<=-180;)e+=360;return e},e.rad.normalize=function(t){for(t=Number(t);t>e.PI;)t-=2*e.PI;for(;t<=-e.PI;)t+=2*e.PI;return t},e.deg2rad=function(t){return e.rad.normalize(t*(e.PI/180))},e.rad2deg=function(t){return e.deg.normalize(t*(180/e.PI))},e.rad.atan2=e.atan2,e.deg.atan2=function(t,r){return e.rad2deg(e.rad.atan2(t,r))},e.distance=function(t,r,n,o){var i=n-t,a=o-r;return e.sqrt(i*i+a*a)},e.randomRange=function(t,r){if(t>r)throw"The range is incorrect. First number must be lower than second";return t+e.random()*(r-t)},e}},5042:()=>{},4775:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},98:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(3841),t=__webpack_require__.n(e);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){for(;e>180;)e-=360;for(;e<-180;)e+=360;return e}const i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!=r(t))throw"AI definition must be an object";this._id=n,this._name=t.name,this._team=null,this._maxEnergy=100,this._energy=this._maxEnergy,this._x=0,this._y=0,this._lastX=0,this._lastY=0,this._angle=0,this._gunAngle=0,this._radarAngle=0,this._throttle=0,this._actualThrottle=0,this._speed=0,this._turn=0,this._gunTurn=0,this._radarTurn=0,this._wallHit=!1,this._enemyHit=!1,this._allyHit=!1,this._beingRammed=!1,this._radarRange=300,this._radarFocal=6,this._enemySpot=null,this._allySpot=null,this._bulletsSpot=[],this._gunReloadTime=70,this._gunTimer=0,this._shootingPower=0,this._targetingAlarmTimer=0,this._debugData={},this._score=0,this._state=null,this._hasBoost=!1,this._maxBoost=400,this._boost=this._maxBoost,this._wallDistance=null,this._skin="zebra"}var i,a;return i=e,(a=[{key:"id",get:function(){return this._id}},{key:"skin",get:function(){return this._skin}},{key:"state",get:function(){return this._state}},{key:"energy",get:function(){return this._energy}},{key:"score",get:function(){return this._score}},{key:"onEnemyHitScore",value:function(e){this._score+=e}},{key:"onEnemyKillScore",value:function(){this._score+=20}},{key:"onSurviveScore",value:function(){this._score+=10}},{key:"maxEnergy",get:function(){return this._maxEnergy}},{key:"radarRange",get:function(){return this._radarRange}},{key:"radarFocal",get:function(){return this._radarFocal}},{key:"name",get:function(){return this._name}},{key:"fullName",get:function(){return this._name+" #"+this._id}},{key:"team",get:function(){return this._team}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"speed",get:function(){return this._speed}},{key:"gunLength",get:function(){return 25}},{key:"angle",get:function(){return this._angle}},{key:"throttle",get:function(){return this._throttle}},{key:"hasBoost",get:function(){return this._hasBoost&&this._boost>0}},{key:"boost",get:function(){return this._boost}},{key:"maxBoost",get:function(){return this._maxBoost}},{key:"gunAngle",get:function(){return this._gunAngle}},{key:"radarAngle",get:function(){return this._radarAngle}},{key:"enemySpot",get:function(){return this._enemySpot}},{key:"allySpot",get:function(){return this._allySpot}},{key:"setThrottle",value:function(e){this._throttle=Math.min(1,Math.max(-1,e))}},{key:"setTurn",value:function(e){this._turn=Math.min(1,Math.max(-1,e))}},{key:"setGunTurn",value:function(e){this._gunTurn=Math.min(1,Math.max(-1,e))}},{key:"setRadarTurn",value:function(e){this._radarTurn=Math.min(1,Math.max(-1,e))}},{key:"setBoost",value:function(e){this._hasBoost=!!e}},{key:"setDebugData",value:function(e){this._debugData=e}},{key:"onWallHit",value:function(){this._wallHit=!0,this.onDamage(.2)}},{key:"onEnemyHit",value:function(){this._enemyHit=!0,this.onDamage(.2)}},{key:"onAllyHit",value:function(){this._allyHit=!0,this.onDamage(.2)}},{key:"onBeingRam",value:function(e){this._beingRammed=!0,this.onDamage(.1+.1*Math.round(4*e))}},{key:"onEnemySpot",value:function(e){this._enemySpot=e}},{key:"onAllySpot",value:function(e){this._allySpot=e}},{key:"onBulletSpot",value:function(e){this._bulletsSpot.push(e)}},{key:"onWallSpot",value:function(e){this._wallDistance=e}},{key:"onTargetingAlarm",value:function(){this._targetingAlarmTimer=3}},{key:"isAlly",value:function(e){return!!this._team&&!!e.team&&this._team.name==e.team.name}},{key:"targetingAlarm",get:function(){return this._targetingAlarmTimer>0}},{key:"onDamage",value:function(e){this._energy=Math.max(0,this._energy-e)}},{key:"moveTo",value:function(e,t,r){this._x=e,this._y=t,this._lastX=e,this._lastY=t,void 0!==r&&(this._angle=r)}},{key:"debugData",get:function(){return this._debugData}},{key:"isShooting",get:function(){return this._shootingPower>0}},{key:"shootingPower",get:function(){return this._shootingPower}},{key:"handleShoot",value:function(){var e=this._shootingPower;return this._shootingPower=0,e}},{key:"isReloading",get:function(){return this._gunTimer>0}},{key:"shoot",value:function(e){e=Math.max(.1,Math.min(1,e)),this.isReloading||(this._gunTimer=Math.round(e*this._gunReloadTime),this._shootingPower=e)}},{key:"randomize",value:function(e){void 0===e&&(e=(new Date).getTime()+Math.round(1e6*Math.random()));var r=t()(e);this._angle=Math.round(360*r())-180}},{key:"init",value:function(e){e&&e.SKIN&&(this._skin=e.SKIN)}},{key:"simulationStep",value:function(e){var t=this;if(0!=t._energy){t._hasBoost&&t._boost>0&&t._boost--;var r=t._x,n=t._y,i=t._throttle*(t.hasBoost?4:2),a=t.hasBoost?10:20;t._actualThrottle+=(i-t._actualThrottle)/a;var s=t._actualThrottle,u=t._angle*(Math.PI/180);t._x+=s*Math.cos(u),t._y+=s*Math.sin(u),t._wallHit=!1,t._enemyHit=!1,t._allyHit=!1,!e.checkTank(t)&&(t._x=r,t._y=n,t._actualThrottle=0),this._beingRammed&&(t._enemyHit=!0,this._beingRammed=!1),t._angle+=2*t._turn,t._radarAngle+=6*t._radarTurn,t._gunAngle+=3*t._gunTurn,t._angle=o(t._angle),t._radarAngle=o(t._radarAngle),t._gunAngle=o(t._gunAngle),e.updateTank(t),t._enemySpot=null,t._allySpot=null,t._wallDistance=null,t._targetingAlarmTimer=Math.max(0,t._targetingAlarmTimer-1),e.scanTanks(t),e.scanBullets(t),e.scanWalls(t),t._gunTimer>0&&t._gunTimer--;for(var c=null,l=null,f=[];t._bulletsSpot.length;){var p=t._bulletsSpot.shift();f.push({id:p.id,x:p.x,y:p.y,angle:p.angle,speed:p.speed,damage:p.damage})}t._enemySpot&&(c={id:t._enemySpot.id,x:t._enemySpot.x,y:t._enemySpot.y,angle:t._enemySpot.angle,speed:t._enemySpot.speed*(t._enemySpot.throttle<0?-1:1),energy:t._enemySpot.energy}),t._allySpot&&(l={id:t._allySpot.id,x:t._allySpot.x,y:t._allySpot.y,angle:t._allySpot.angle,speed:t._allySpot.speed,energy:t._allySpot.energy});var h=t._x-t._lastX,d=t._y-t._lastY;t._speed=Math.sqrt(h*h+d*d),t._lastX=t._x,t._lastY=t._y,t._state={x:t._x,y:t._y,angle:t._angle,energy:t._energy,boost:t._boost,collisions:{wall:t._wallHit,enemy:t._enemyHit,ally:t._allyHit},radar:{angle:t._radarAngle,targetingAlarm:t.targetingAlarm,wallDistance:t._wallDistance,enemy:c,ally:l,bullets:f},gun:{angle:t._gunAngle,reloading:t.isReloading},radio:{inbox:t.team?t.team.getMessages(t.id):[]}}}}}])&&n(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._index=r,this._name=t,this._members=[],this._inboxMap=[],this._outboxMap=[]}var t,r;return t=e,(r=[{key:"addTank",value:function(e){if(e.team)throw"Tank "+e.fullName+" is already assigned to team "+e.team.name;for(var t in this._members)if(this._members[t].id==e.id)return;this._members.push(e),e._team=this,this._inboxMap[e.id]=[],this._outboxMap[e.id]=[]}},{key:"size",get:function(){return this._members.length}},{key:"index",get:function(){return this._index}},{key:"name",get:function(){return this._name}},{key:"aliveCount",get:function(){for(var e=0,t=0;t<this._members.length;t++)this._members[t].energy>0&&e++;return e}},{key:"score",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].score;return e}},{key:"energy",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].energy;return e}},{key:"maxEnergy",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].maxEnergy;return e}},{key:"isAlive",get:function(){return this.aliveCount>0}},{key:"members",get:function(){return this._members}},{key:"getMessages",value:function(e){return this._outboxMap[e]}},{key:"sendMessages",value:function(e,t){for(var r in this._inboxMap)r!=e&&(this._inboxMap[r]=this._inboxMap[r].concat(t))}},{key:"processMessages",value:function(){var e;for(e in this._inboxMap)this._outboxMap[e]=this._inboxMap[e],this._inboxMap[e]=[]}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r,n){for(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=r,this._owner=t,this._angle=t.angle+t.gunAngle;this._angle>180;)this._angle-=360;for(;this._angle<-180;)this._angle+=360;this._x=t.x+t.gunLength*Math.cos(this._angle*(Math.PI/180)),this._y=t.y+t.gunLength*Math.sin(this._angle*(Math.PI/180)),this._speed=4,this._power=n,this._damage=.01*Math.round(1e3*n+300*n*n),this._exploded=!1}var t,r;return t=e,(r=[{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"angle",get:function(){return this._angle}},{key:"speed",get:function(){return this._speed}},{key:"damage",get:function(){return this._damage}},{key:"power",get:function(){return this._power}},{key:"owner",get:function(){return this._owner}},{key:"exploded",get:function(){return this._exploded}},{key:"onWallHit",value:function(){this._exploded=!0}},{key:"onEnemyHit",value:function(e){this._exploded=!0,e.onDamage(this._damage)}},{key:"simulationStep",value:function(){this._x+=this._speed*Math.cos(this._angle*(Math.PI/180)),this._y+=this._speed*Math.sin(this._angle*(Math.PI/180))}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=null,this._height=null,this._startSlotList=[],this._offsetX=0,this._offsetY=0}var r,n;return r=e,(n=[{key:"setSize",value:function(e,t){this._width=e-2*this.margin,this._height=t-2*this.margin}},{key:"randomize",value:function(e){void 0===e&&(e=(new Date).getTime()+Math.round(1e6*Math.random()));var r=t()(e);this._offsetX=Math.round(1e4*r()-5e3),this._offsetY=Math.round(1e4*r()-5e3),this._startSlotList=[];for(var n=90,o=this.minX+n;o<this.maxX-n;o+=n)for(var i=this.minY+n;i<this.maxY-n;i+=n)this._startSlotList.push({x:o,y:i});for(var a,s,u=this._startSlotList.length;0!==u;)s=Math.floor(r()*u),u-=1,a=this._startSlotList[u],this._startSlotList[u]=this._startSlotList[s],this._startSlotList[s]=a}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"margin",get:function(){return 25}},{key:"minX",get:function(){return this._offsetX+this.margin}},{key:"minY",get:function(){return this._offsetY+this.margin}},{key:"maxX",get:function(){return this._offsetX+this._width+this.margin}},{key:"maxY",get:function(){return this._offsetY+this._height+this.margin}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"getStartSlot",value:function(){return this._startSlotList.length?this._startSlotList.pop():null}}])&&l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=[]}var t,r;return t=e,(r=[{key:"add",value:function(e,t){this._data[e]||(this._data[e]=[]),this._data[e].push(t)}},{key:"get",value:function(e){return this._data[e]||(this._data[e]=[]),this._data[e]}},{key:"clear",value:function(e){this._data=[]}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=__webpack_require__(9095),y=__webpack_require__.n(d);function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._wallList=[],this._tankMap=[],this._bulletMap=[],this._radarBeamMap=[],this._battlefield=null}var t,r;return t=e,(r=[{key:"updateBattlefield",value:function(e){var t;this._battlefield={minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY},t=new(y().Box)(new(y().Vector)(e.minX-10,e.minY),10,e.height).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.minX,e.minY-10),e.width,10).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.maxX,e.minY),10,e.height).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.minX,e.maxY),e.width,10).toPolygon(),this._wallList.push(t)}},{key:"updateTank",value:function(e){var t=this._getTankShape(e);t.pos.x=e.x,t.pos.y=e.y}},{key:"removeBullet",value:function(e){this._bulletMap[e.id]=null}},{key:"removeTank",value:function(e){this._tankMap[e.id]=null,this._radarBeamMap[e.id]=null}},{key:"hitTestBullet",value:function(e){var t,r,n,o=this._getBulletShape(e),i=e.owner.energy?this._getTankShape(e.owner):null;for(t in o.pos.x=e.x,o.pos.y=e.y,this._wallList)if(r=this._wallList[t],y().testCirclePolygon(o,r))return e.onWallHit(),!0;for(t in this._tankMap)if((n=this._tankMap[t])&&n!=i&&y().testCircleCircle(o,n)){var a=n.tank.energy;return e.onEnemyHit(n.tank),e.owner.isAlly(n.tank)||e.owner.onEnemyHitScore(a-n.tank.energy),0==n.tank.energy&&e.owner.onEnemyKillScore(),!0}return!1}},{key:"checkTank",value:function(e){var t,r,n,o,i=this._getTankShape(e);for(t in i.pos.x=e.x,i.pos.y=e.y,this._wallList)if(n=this._wallList[t],r=y().testCirclePolygon(i,n))return e.onWallHit(),!1;for(t in this._tankMap)if((o=this._tankMap[t])&&o!=i){r=y().testCircleCircle(i,o);var a=e.isAlly(o.tank);if(r){if(a)return e.onAllyHit(),!1;var s=o.tank.energy;return e.onEnemyHit(),o.tank.onBeingRam(e.speed),e.onEnemyHitScore(s-o.tank.energy),!1}}return!0}},{key:"scanTanks",value:function(e){var t,r,n=this._getRadarBeamShape(e),o=this._getTankShape(e);n.setAngle((e.angle+e.radarAngle)*Math.PI/180),n.pos.x=e.x,n.pos.y=e.y;var i=[];for(t in this._tankMap)(r=this._tankMap[t])&&r!=o&&y().testPolygonCircle(n,r)&&i.push(r.tank);if(0==i.length)return!1;var a,s,u,c,l=null,f=e.radarRange,p=null,h=e.radarRange;for(t in i)s=i[t].x-e.x,u=i[t].y-e.y,a=Math.sqrt(s*s+u*u),(c=i[t].isAlly(e))||l&&!(a<f)?c&&(!p||a<h)&&(p=i[t],h=a):(l=i[t],f=a);return p&&e.onAllySpot(p),l&&(e.onEnemySpot(l),l.onTargetingAlarm()),!0}},{key:"scanBullets",value:function(e){var t,r,n=this._getRadarBeamShape(e);n.setAngle((e.angle+e.radarAngle)*Math.PI/180),n.pos.x=e.x,n.pos.y=e.y;var o=!1;for(t in this._bulletMap)(r=this._bulletMap[t])&&r.bullet.owner!=e&&y().testCirclePolygon(r,n)&&(e.onBulletSpot(r.bullet),o=!0);return o}},{key:"scanWalls",value:function(e){var t=this._getWallDistance(e);return t<e.radarRange&&(e.onWallSpot(t),!0)}},{key:"_getWallDistance",value:function(e){for(var t=e.angle+e.radarAngle;t>180;)t-=360;for(;t<-180;)t+=360;var r,n,o=e.y-this._battlefield.minY,i=this._battlefield.maxY-e.y,a=e.x-this._battlefield.minX,s=this._battlefield.maxX-e.x;return-180==t||180==t?a:0==t?s:-90==t?o:90==t?i:(t>-180&&t<-90?(r=a/Math.cos((t+180)*(Math.PI/180)),n=o/Math.sin((t+180)*(Math.PI/180))):t>-90&&t<0?(r=s/Math.cos(-t*(Math.PI/180)),n=o/Math.sin(-t*(Math.PI/180))):t>0&&t<90?(r=s/Math.cos(t*(Math.PI/180)),n=i/Math.sin(t*(Math.PI/180))):(r=a/Math.cos((180-t)*(Math.PI/180)),n=i/Math.sin((180-t)*(Math.PI/180))),Math.min(r,n))}},{key:"_getTankShape",value:function(e){if(!this._tankMap[e.id]){if(0==e.energy)throw"Cannot create shape for destroyed tank";var t=new(y().Circle)(new(y().Vector)(e.x,e.y),18);this._tankMap[e.id]=t,t.tank=e}return this._tankMap[e.id]}},{key:"_getBulletShape",value:function(e){if(!this._bulletMap[e.id]){if(e.exploded)throw"Cannot create shape for exploded bullet";var t=new(y().Circle)(new(y().Vector)(e.x,e.y),3);this._bulletMap[e.id]=t,t.bullet=e}return this._bulletMap[e.id]}},{key:"_getRadarBeamShape",value:function(e){if(!this._radarBeamMap[e.id]){if(0==e.energy)throw"Cannot create radar beam shape for destroyed tank";var t=e.radarRange*Math.tan(e.radarFocal*(Math.PI/180))/2,r=new(y().Polygon)(new(y().Vector)(e.x,e.y),[new(y().Vector)(0,3),new(y().Vector)(0,-3),new(y().Vector)(e.radarRange,-t),new(y().Vector)(e.radarRange,t)]);this._radarBeamMap[e.id]=r,r.tank=e}return this._radarBeamMap[e.id]}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b=__webpack_require__(425);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw"Tank is required";if(!r)throw"AiDefinition is required";this._tank=t,this._aiWorker=null,this._aiProcessingStart=0,this._aiProcessingCheckInterval=null,this._aiProcessingResolveCallback=null,this._aiProcessingRejectCallback=null,this._slowAiChances=10,this._onActivationCallback=[],this._onDectivationCallback=[],this._aiProcessingTimeLimit=3e3,this._aiDefinition=r,this._isReady=!1,this._controlData={THROTTLE:0,BOOST:0,TURN:0,RADAR_TURN:0,GUN_TURN:0,SHOOT:0,OUTBOX:[],DEBUG:{}}}var t,r;return t=e,(r=[{key:"setProcessingLimit",value:function(e){this._aiProcessingTimeLimit=e}},{key:"tank",get:function(){return this._tank}},{key:"worker",get:function(){return this._aiWorker}},{key:"onActivation",value:function(e){this._onActivationCallback.push(e)}},{key:"onDectivation",value:function(e){this._onDeactivationCallback.push(e)}},{key:"_formatError",value:function(e){if(!e.message)return"unknown";var t=e.message;return e.lineno&&(t="Line #"+e.lineno+": "+t),t}},{key:"activate",value:function(e,t,r){if("number"!=typeof e)throw"seed must be a number, '"+_(e)+"' given";if("function"!=typeof t)throw"resolve callback must be a function, '"+_(t)+"' given";if("function"!=typeof r)throw"reject callback must be a function, '"+_(r)+"' given";var n=this;n._aiWorker=n._createWorker(this._aiDefinition),n._aiWorker.onerror=function(e){console.error(e),n._aiProcessingRejectCallback&&(n._aiProcessingRejectCallback({message:"Web Worker of '"+n._tank.fullName+"' returned an error: "+n._formatError(e),performanceIssues:!1,tankName:n._tank.name,tankId:n._tank.id}),n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null)},n._aiProcessingCheckInterval&&(clearInterval(n._aiProcessingCheckInterval),n._aiProcessingCheckInterval=null),n._aiProcessingCheckInterval=setInterval((function(){n._aiProcessingRejectCallback&&(new Date).getTime()-n._aiProcessingStart>n._aiProcessingTimeLimit&&(clearInterval(n._aiProcessingCheckInterval),n._aiProcessingCheckInterval=null,n._aiProcessingRejectCallback({message:"Simulation cannot be continued because "+n._tank.name+" #"+n._tank.id+" does not respond",performanceIssues:!0,tankName:n._tank.name,tankId:n._tank.id}))}),Math.max(n._aiDefinition.executionLimit,Math.round(n._aiProcessingTimeLimit/2))),n._aiWorker.onmessage=function(e){var t=e.data;if(n._aiProcessingResolveCallback){if("init"==t.type){n._configureTank(t.settings?t.settings:{}),n._isReady=!0;for(var r=0;r<n._onActivationCallback.length;r++)n._onActivationCallback[r].bind(n)()}else n._controlTank(t);var o,i=(new Date).getTime()-n._aiProcessingStart;if(i>n._aiDefinition.executionLimit&&"init"!=t.type&&(n._slowAiChances--,console.warn("Execution of AI for tank "+n._tank.name+" #"+n._tank.id+" takes too long ("+i+"ms). If problem repeats, AI will be terminated."),n._slowAiChances<=0))return o=n._aiProcessingRejectCallback,n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null,void o({message:"Simulation cannot be continued because "+n._tank.name+" #"+n._tank.id+" has performance issues",performanceIssues:!0,tankName:n._tank.name,tankId:n._tank.id});o=n._aiProcessingResolveCallback,n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null,o()}};var o;o=n._tank.team&&n._tank.team.size>1?{name:n._tank.team.name,mates:n._tank.team.members.map((function(e){return e.id}))}:{name:n._tank.fullName,mates:[n._tank.id]};var i={id:n._tank.id,team:o};n._aiDefinition.initData&&(i.initData=n._aiDefinition.initData),n._aiProcessingStart=(new Date).getTime(),n._aiProcessingResolveCallback=t,n._aiProcessingRejectCallback=r,n._aiWorker.postMessage({command:"init",seed:e+":"+n._tank.id,settings:{SKIN:"zebra"},info:i,code:n._aiDefinition.code})}},{key:"deactivate",value:function(){this._aiWorker&&(this._aiWorker.terminate(),this._aiWorker=null),this._aiProcessingCheckInterval&&(clearInterval(this._aiProcessingCheckInterval),this._aiProcessingCheckInterval=null);for(var e=0;e<this._onDectivationCallback.length;e++)this._onDectivationCallback[e].bind(this)()}},{key:"simulationStep",value:function(e,t){if("function"!=typeof e)throw"resolve callback must be a function, '"+_(e)+"' given";if("function"!=typeof t)throw"reject callback must be a function, '"+_(t)+"' given";if(!this._isReady)throw"AI of "+this._tank.fullName+" not initliazed";var r=this;if(r._aiWorker&&0==r._tank.energy)return r._aiWorker.terminate(),r._aiWorker=null,void e();r._aiProcessingStart=(new Date).getTime(),r._aiProcessingResolveCallback=e,r._aiProcessingRejectCallback=t,r._aiWorker.postMessage({command:"update",state:r._tank.state,control:r._controlData})}},{key:"_configureTank",value:function(e){var t={};-1!=["zebra","forest","black","tiger","desert","lava","ocean"].indexOf(e.SKIN)&&(t.SKIN=e.SKIN),this._tank.init(t)}},{key:"_controlTank",value:function(e){var t=this;t._controlData.THROTTLE=Number(e.THROTTLE),t._controlData.TURN=Number(e.TURN),t._controlData.GUN_TURN=Number(e.GUN_TURN),t._controlData.RADAR_TURN=Number(e.RADAR_TURN),t._controlData.SHOOT=Number(e.SHOOT),t._controlData.DEBUG=e.DEBUG,t._controlData.BOOST=e.BOOST?1:0,t._controlData.THROTTLE=isNaN(t._controlData.THROTTLE)?0:t._controlData.THROTTLE,t._controlData.TURN=isNaN(t._controlData.TURN)?0:t._controlData.TURN,t._controlData.GUN_TURN=isNaN(t._controlData.GUN_TURN)?0:t._controlData.GUN_TURN,t._controlData.RADAR_TURN=isNaN(t._controlData.RADAR_TURN)?0:t._controlData.RADAR_TURN,t._controlData.SHOOT=isNaN(t._controlData.SHOOT)?0:t._controlData.SHOOT,t._controlData.THROTTLE=Math.min(1,Math.max(-1,Number(t._controlData.THROTTLE))),t._controlData.TURN=Math.min(1,Math.max(-1,Number(t._controlData.TURN))),t._controlData.GUN_TURN=Math.min(1,Math.max(-1,Number(t._controlData.GUN_TURN))),t._controlData.RADAR_TURN=Math.min(1,Math.max(-1,Number(t._controlData.RADAR_TURN))),t._controlData.SHOOT=Math.min(1,Math.max(0,Number(t._controlData.SHOOT))),t._tank.setThrottle(t._controlData.THROTTLE),t._tank.setBoost(t._controlData.BOOST),t._tank.setTurn(t._controlData.TURN),t._tank.setRadarTurn(t._controlData.RADAR_TURN),t._tank.setGunTurn(t._controlData.GUN_TURN),t._tank.setDebugData(t._controlData.DEBUG),t._controlData.SHOOT&&t._tank.shoot(t._controlData.SHOOT),t._controlData.SHOOT=0;var r=[];for(var n in e.OUTBOX)r.push(JSON.parse(JSON.stringify(e.OUTBOX[n])));t._tank.team&&t._tank.team.sendMessages(t._tank.id,r),t._controlData.OUTBOX=[]}},{key:"_createWorker",value:function(e){return e.useSandbox?new Worker(e.filePath):new b.Z}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._simulationStepDuration=30,this._stepCounter=0,this._checkLoop=0,this._started=!1,this._desiredPerfomance=Math.floor(1e3/this._simulationStepDuration),this._actualPerfomance=this._desiredPerfomance,this._perfomanceIndex=1,this._desiredQuality=1,this._quality=this._desiredQuality,this._checkInterval=500}var t,r;return t=e,(r=[{key:"started",get:function(){return this._started}},{key:"desiredPerfomance",get:function(){return this._desiredPerfomance}},{key:"actualPerfomance",get:function(){return this._actualPerfomance}},{key:"start",value:function(){this._started=!0;var e=this;this._checkLoop=setInterval((function(){e._check()}),this._checkInterval)}},{key:"stop",value:function(){this._started=!1,this._checkLoop&&(clearInterval(this._checkLoop),this._checkLoop=null)}},{key:"setSimulationStepDuration",value:function(e){e!=this._simulationStepDuration&&(this._quality=this._desiredQuality),this._simulationStepDuration=e,this._desiredPerfomance=Math.floor(1e3/e)}},{key:"onSimulationStep",value:function(){this._started&&this._stepCounter++}},{key:"qualityLevel",get:function(){return this._quality}},{key:"_check",value:function(){this._actualPerfomance=Math.ceil(this._stepCounter*(1e3/this._checkInterval)),this._stepCounter=0;var e=this._desiredPerfomance?this._actualPerfomance/this._desiredPerfomance:1;this._perfomanceIndex=(this._perfomanceIndex+e)/2,this._updateQuality()}},{key:"_updateQuality",value:function(){var e=2.5*this._perfomanceIndex-1.25;e=Math.max(0,Math.min(1,e));var t=-.5*this._perfomanceIndex+.45;this._perfomanceIndex>1?this._desiredQuality+=.1:this._desiredQuality-=t,this._desiredQuality=Math.max(0,Math.min(1,this._desiredQuality));var r=Math.max(e,this._desiredQuality);this._desiredQuality=(this._desiredQuality+r)/2,this._desiredQuality<this._quality?this._quality=this._desiredQuality:this._quality=(this._desiredQuality+9*this._quality)/10}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var P=!1;const j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=(new Date).getTime().toString();t=t.substr(t.length-6,6)+""+Math.round(1e7*Math.random()),t=(t=Number(t)).toString(35),this._name="",this._team=t,this._code=null,this._initData=null,this._useSandbox=!0,this._executionLimit=100}var t,r;return t=e,(r=[{key:"toJSON",value:function(){return{name:this._name,team:this._team,code:this._code,initData:this._initData,useSandbox:this._useSandbox,executionLimit:this.executionLimit}}},{key:"fromJSON",value:function(e){this._name=e.name,this._team=e.team,this._code=e.code?e.code.replace(/importScripts\w*\([^\)]*\)/g,""):e.code,this._initData=e.initData,this._useSandbox=e.useSandbox,this._executionLimit=e.executionLimit}},{key:"clone",value:function(){var t=new e;return t.fromJSON(this.toJSON()),t}},{key:"name",get:function(){return this._name}},{key:"teamName",get:function(){return this._team}},{key:"executionLimit",get:function(){return this._executionLimit},set:function(e){this._executionLimit=e}},{key:"filePath",get:function(){return this._useSandbox?null!==this._code?"tanks/lib/codeWorker.js":"tanks/".concat(this._name,".tank.js"):null}},{key:"code",get:function(){return this._code}},{key:"initData",get:function(){return this._initData}},{key:"useSandbox",get:function(){return this._useSandbox}},{key:"fromFile",value:function(e,t){if(!e)throw new Error("tankName is required");this._name=e,this._code=null,this._initData=void 0!==t?t:null}},{key:"fromCode",value:function(e,t,r){if(!e)throw new Error("tankName is required");if(!t)throw new Error("Code is required");if("string"!=typeof e)throw new Error("tankName must be a string");if("string"!=typeof t)throw new Error("code must be a string");t=t.replace(/importScripts\w*\([^\)]*\)/g,""),this._name=e,this._code=t,this._initData=void 0!==r?r:null}},{key:"assignToTeam",value:function(e){this._team=e}},{key:"disableSandbox",value:function(){if(null===this._code)throw new Error("Sandbox can be disabled for AI created from code only (AI name: '"+this._name+"')");P||(console.warn("Disabling sandbox for AI! It could be dangerous."),P=!0),this._useSandbox=!1}}])&&O(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var x=__webpack_require__(8056),E=__webpack_require__.n(x);const T=JSON.parse('{"definitions":{},"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://jsbattle.jmrlab.com/schema/ubd-schema-v4.json","type":"object","title":"The Ultimate Battle Descriptor Schema","required":["version","rngSeed","timeLimit","teamMode","aiList"],"properties":{"version":{"$id":"#/properties/version","enum":[4],"title":"Version of the schema"},"rngSeed":{"$id":"#/properties/rngSeed","type":"number","title":"Battle RNG seed","default":0,"examples":[0.850067584253805]},"timeLimit":{"$id":"#/properties/timeLimit","type":"number","title":"Duration of the battle in ms (or zero if no limit defined","default":0,"examples":[0,20000]},"teamMode":{"$id":"#/properties/teamMode","type":"boolean","title":"Team death match","default":false,"examples":[false]},"aiList":{"$id":"#/properties/aiList","type":"array","minItems":2,"maxItems":40,"title":"List of AIs that joins the battle","items":{"$id":"#/properties/aiList/items","type":"object","title":"Tank AI","required":["name","team","code","initData","useSandbox","executionLimit"],"properties":{"name":{"$id":"#/properties/aiList/items/properties/name","type":"string","title":"Name of tank","default":"","examples":["User Created Tank"],"pattern":"^(.*)$"},"team":{"$id":"#/properties/aiList/items/properties/team","type":"string","title":"Team of the tank","default":"","examples":["10i42s2ca"],"pattern":"^(.*)$"},"code":{"$id":"#/properties/aiList/items/properties/code","anyOf":[{"type":"string"},{"type":"null"}],"title":"Code of the AI","default":"","examples":["var a = 1;"]},"initData":{"$id":"#/properties/aiList/items/properties/initData","default":null,"title":"Initial data of AI","anyOf":[{"type":"object"},{"type":"null"}],"examples":[null]},"useSandbox":{"$id":"#/properties/aiList/items/properties/useSandbox","type":"boolean","title":"Use sandbox for AI execution","default":true,"examples":[true]},"executionLimit":{"$id":"#/properties/aiList/items/properties/executionLimit","type":"integer","title":"AI code execution time limit in ms","default":100,"examples":[100]},"count":{"$id":"#/properties/aiList/items/properties/count","type":"integer","title":"count of AIs to added","default":1,"examples":[3]}}}}}}');function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version=4,this._aiList=[],this._rngSeed=(new Date).getTime(),this._teamMode=!1,this._timeLimit=0}var t,r;return t=e,(r=[{key:"addAiDefinition",value:function(e){this._aiList.push(e)}},{key:"setTeamMode",value:function(e){this._teamMode=e}},{key:"getTeamMode",value:function(){return this._teamMode}},{key:"setRngSeed",value:function(e){this._rngSeed=e}},{key:"getVersion",value:function(){return this._version}},{key:"getAiList",value:function(){return this._aiList}},{key:"setTimeLimit",value:function(e){this._timeLimit=e}},{key:"getTimeLimit",value:function(){return this._timeLimit}},{key:"getRngSeed",value:function(){return this._rngSeed}},{key:"encode",value:function(){var e,t,r={version:this._version,rngSeed:this._rngSeed,teamMode:this._teamMode,timeLimit:this._timeLimit,aiList:[]},n=C(this._aiList);try{for(n.s();!(t=n.n()).done;){var o=t.value;e=o.count||1;for(var i=0;i<e;i++)r.aiList.push(o.toJSON())}}catch(e){n.e(e)}finally{n.f()}return JSON.stringify(r)}},{key:"decode",value:function(e,t){var r,n;try{r=JSON.parse(e)}catch(e){throw new Error("Cannot parse UBD file! ".concat(e))}if(this._version!=r.version)throw new Error("Version of UBD does not match. Version ".concat(r.version," is not supported. Please convert to version ").concat(this._version));this.validateJsonData(r),this._rngSeed=r.rngSeed,this._teamMode=r.teamMode,this._timeLimit=r.timeLimit;var o,i=C(r.aiList);try{for(i.s();!(o=i.n()).done;){var a=o.value;n=new j,t||(a.useSandbox=!0,a.executionLimit=100,a.initData=null),n.fromJSON(a),this._aiList.push(n)}}catch(e){i.e(e)}finally{i.f()}}},{key:"validateJsonData",value:function(e){var t=(new(E())).compile(T);if(!t(e))throw new Error("UBD validation failed - "+t.errors[0].message)}},{key:"clone",value:function(){var t=new e;t.setRngSeed(this.getRngSeed()),t.setTeamMode(this.getTeamMode()),t.setTimeLimit(this.getTimeLimit());var r,n,o=C(this.getAiList());try{for(o.s();!(n=o.n()).done;)r=n.value.clone(),t.addAiDefinition(r)}catch(e){o.e(e)}finally{o.f()}return t}}])&&A(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=function(e){var t=0;for(var r in e._teamMap)e._teamMap[r].isAlive&&t++;return t<=1};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const L=function(){function e(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._debug=n,this._aiList=[],this._allTankList=[],this._tankList=[],this._bulletList=[],this._explodedTankList=[],this._explodedBulletList=[],this._battlefield=null,this._simulationTimeout=null,this._renderInterval=null,this._simulationStepDuration=17,this._renderStepDuration=30,this._renderer=r,this._isRunning=!1,this._collisionResolver=new v,this._rngSeed=(new Date).getTime()+Math.round(1e6*Math.random()),this._rng=t()(this._rngSeed),this._speedMultiplier=1,this._onSimulationStepCallback=[],this._onRenderStepCallback=[],this._onFinishCallback=[],this._onErrorCallback=[],this._onStartCallback=[],this._timeElapsed=0,this._timeLimit=3e4,this._finishCondition=M,this._customFinishCondition=!1,this._eventStore=new h,this._nextTankId=1,this._nextBulletId=1,this._rendererQuality="auto",this._perfMon=new S,this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier),this._callStackLimit=Number.MAX_VALUE,this._callStackCount=0,this._teamMap=[],this._teamList=[],this._nextTeamIdndex=1,this._ultimateBattleDescriptor=new D,this.log("Contructing Simulation")}var r,n;return r=e,n=[{key:"setRngSeed",value:function(e){this.log("Set renderer RNG Seed to '".concat(e,"'")),this._rngSeed=e,this._ultimateBattleDescriptor.setRngSeed(e),this._rng=t()(this._rngSeed)}},{key:"getRngSeed",value:function(){return this._rngSeed}},{key:"getRandom",value:function(){return this._rng()}},{key:"log",value:function(e){this._debug&&console.log("[SIM] "+e)}},{key:"setFinishCondition",value:function(e){this.log("Setting custom finish conditioins"),this._customFinishCondition=!0,this._finishCondition=e}},{key:"init",value:function(e,t){this.log("Initialize the battlefield (width=".concat(e,", height=").concat(t,")")),this._battlefield=new f,this._battlefield.setSize(e,t),this._battlefield.randomize(this._rng()),this._renderer.initBatlefield(this._battlefield),this._collisionResolver.updateBattlefield(this._battlefield),this.log("The battlefiield initialized. Done.")}},{key:"tankList",get:function(){return this._allTankList}},{key:"teamList",get:function(){return this._teamList}},{key:"renderer",get:function(){return this._renderer}},{key:"battlefield",get:function(){return this._battlefield}},{key:"timeElapsed",get:function(){return this._timeElapsed}},{key:"timeLimit",get:function(){return this._timeLimit},set:function(e){this.log("Set time limit to '".concat(e,"'")),this._ultimateBattleDescriptor.setTimeLimit(e),this._timeLimit=e}},{key:"start",value:function(){if(this.log("Starting the simulation"),0==this._tankList.length)throw new Error("To start simulation, the tank list cannot be empty!");var e;this._isRunning=!0;var t=this;this._renderInterval&&(this.log("Clearing existing render interval"),clearInterval(this._renderInterval),this._renderInterval=null),this.log("Activating AIs..."),this._activateAi((function(){for(t._renderInterval=setInterval((function(){t._updateView()}),t._renderStepDuration),t._simulationTimeout&&clearTimeout(t._simulationTimeout),t._perfMon.start(),t.log("Notify onStartCallback"),e=0;e<t._onStartCallback.length;e++)t._onStartCallback[e]();t.log("Run first simulation step"),t._simulationStep()}),(function(r){for(console.error(r),e=0;e<t._onErrorCallback.length;e++)t._onErrorCallback[e](r.message?r.message:"Error during simulation")}))}},{key:"_simulationStep",value:function(){this._perfMon.onSimulationStep();var e,t=(new Date).getTime(),r=this;this._updateModel(),this._updateAi((function(){if(r._simulationTimeout&&(clearTimeout(r._simulationTimeout),r._simulationTimeout=null),r._timeLimit>0&&r._timeElapsed==r._timeLimit||r._finishCondition(r))for(r.stop(),r._updateModel(),r._updateView(),e=0;e<r._onFinishCallback.length;e++)r._onFinishCallback[e]();if(r._isRunning){var n=(new Date).getTime()-t,o=r._simulationStepDuration/r._speedMultiplier-n;for(o=Math.round(o),e=0;e<r._onSimulationStepCallback.length;e++)r._onSimulationStepCallback[e]();r._timeElapsed+=r._simulationStepDuration,r._timeLimit>0&&(r._timeElapsed=Math.min(r._timeElapsed,r._timeLimit)),o>0?(r._callStackCount=0,r._simulationTimeout=setTimeout(r._simulationStep.bind(r),o)):r._callStackCount>=r._callStackLimit?r._simulationTimeout=setTimeout(r._simulationStep.bind(r),1):(r._callStackCount++,r._simulationStep())}}),(function(t){for(console.error(t),e=0;e<r._onErrorCallback.length;e++)r._onErrorCallback[e](t.message?t.message:"Error during simulation")}))}},{key:"addTank",value:function(e){if(this.log("Adding tank..."),"object"!=N(e))throw"AI definition must be an object";if(!this._battlefield)throw"Simulation not initialized";if(!e.teamName)throw"Team name cannot be empty!";var t=this._battlefield.getStartSlot();if(!t)throw"No free space in the battlefield";this._ultimateBattleDescriptor.addAiDefinition(e),this._ultimateBattleDescriptor.setTeamMode(this.hasTeams());var r=this._createTank(e);r.randomize(this.getRandom()),r.moveTo(t.x,t.y),this._tankList.push(r),this._allTankList.push(r),this._timeLimit>0&&this._allTankList.length>2&&(this._timeLimit+=2e3),this._teamMap[e.teamName]||(this._teamMap[e.teamName]=new s(e.teamName,this._nextTeamIdndex),this._nextTeamIdndex+=1,this._teamList.push(this._teamMap[e.teamName])),this._teamMap[e.teamName].addTank(r);var n=this._createAiWrapper(r,e);return this._aiList.push(n),n}},{key:"setSpeed",value:function(e){this.log("Set speed to '".concat(e,"'")),this._speedMultiplier=Math.max(.01,Number(e)),this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier),this._renderer.setSpeed(e)}},{key:"setRendererQuality",value:function(e){this.log("Set rederer quality to '".concat(e,"'")),isNaN(e)&&"auto"!=e||(isNaN(e)||(e=Math.min(1,Math.max(0,e))),this._rendererQuality=e)}},{key:"stop",value:function(){var e,t;for(this.log("stopping the simulation"),this._isRunning=!1,this._perfMon.stop(),this._renderer.stop(),this._simulationTimeout&&(clearTimeout(this._simulationTimeout),this._simulationTimeout=null),this._renderInterval&&(clearInterval(this._renderInterval),this._renderInterval=null),t=0;t<this._aiList.length;t++)(e=this._aiList[t])&&e.deactivate();this._aiList=[]}},{key:"onStep",value:function(e){this._onSimulationStepCallback.push(e)}},{key:"onRender",value:function(e){this._onRenderStepCallback.push(e)}},{key:"onStart",value:function(e){this._onStartCallback.push(e)}},{key:"onFinish",value:function(e){this._onFinishCallback.push(e)}},{key:"onError",value:function(e){this._onErrorCallback.push(e)}},{key:"createUltimateBattleDescriptor",value:function(){if(this._customFinishCondition)throw new Error("Cannot create UBD for battles with custom battle finish condition!");return this._ultimateBattleDescriptor.clone()}},{key:"hasTeams",value:function(){return this._teamList.length!=this._tankList.length}},{key:"_activateAi",value:function(e,t){this._runInSequence(this._aiList,"activate",this._rng(),e,t)}},{key:"_updateAi",value:function(e,t){this._runInSequence(this._aiList,"simulationStep",null,e,t)}},{key:"_runInSequence",value:function(e,t,r,n,o){if(0==e.length)return n();function i(){for(var e=[],t=arguments[1],r=arguments[0],n=2;n<arguments.length;n++)e.push(arguments[n]);return function(n){t.apply(r,e.concat(n))}}var a,s=i(null,n),u=i(null,o);a=r?i(e[e.length-1],e[e.length-1][t],r,s,u):i(e[e.length-1],e[e.length-1][t],s,u);for(var c=e.length-2;c>=0;c--)a=r?i(e[c],e[c][t],r,a,u):i(e[c],e[c][t],a,u);a()}},{key:"_updateModel",value:function(){var e,t,r,n;for(e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&t.simulationStep(this._collisionResolver);var o=0;for(e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&t.energy<=0&&(o++,this._tankList[e]=null,this._explodedTankList.push(t),this._collisionResolver.removeTank(t),this._eventStore.add("tank_"+t.id,{type:"destroy",tank:t}));var i=[];for(e=0;e<this._aiList.length;e++)(n=this._aiList[e])&&(n.tank.energy<=0?(this._aiList[e]=null,n.deactivate()):i.push(n));for(this._aiList=i,e=0;e<this._tankList.length;e++)if((t=this._tankList[e])&&t.isShooting){var a=t.handleShoot();r=this._createBullet(t,a),this._bulletList.push(r),this._eventStore.add("tank_"+t.id,{type:"shoot",tank:t,bullet:r})}for(e=0;e<this._tankList.length;e++)if(t=this._tankList[e])for(var s=0;s<o;s++)t.onSurviveScore();for(e=0;e<this._bulletList.length;e++)(r=this._bulletList[e])&&(r.simulationStep(),this._collisionResolver.hitTestBullet(r)&&(this._bulletList[e]=null,this._explodedBulletList.push(r),this._collisionResolver.removeBullet(r),this._eventStore.add("bullet_"+r.id,{type:"explode",bullet:r})));for(e in this._teamMap)this._teamMap[e].processMessages()}},{key:"_updateView",value:function(){var e,t,r;for("auto"==this._rendererQuality?this._renderer.quality=this._perfMon.qualityLevel:this._renderer.quality=this._rendererQuality,this._renderer.preRender(),this._renderer.renderClock(this._timeElapsed,this._timeLimit),e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&this._renderer.renderTank(t,this._eventStore.get("tank_"+t.id));for(e=0;e<this._bulletList.length;e++)(r=this._bulletList[e])&&this._renderer.renderBullet(r,this._eventStore.get("bullet_"+r.id));for(;this._explodedTankList.length;)t=this._explodedTankList.pop(),this._renderer.renderTank(t,this._eventStore.get("tank_"+t.id));for(;this._explodedBulletList.length;)r=this._explodedBulletList.pop(),this._renderer.renderBullet(r,this._eventStore.get("bullet_"+r.id));for(this._renderer.renderTankStats(this._allTankList),this._renderer.postRender(),e=0;e<this._onRenderStepCallback.length;e++)this._onRenderStepCallback[e]();this._eventStore.clear()}},{key:"_createAiWrapper",value:function(e,t){return new w(e,t)}},{key:"_createTank",value:function(e){return new i(e,this._nextTankId++)}},{key:"_createBullet",value:function(e,t){return new c(e,this._nextBulletId++,t)}}],n&&I(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"initBatlefield",value:function(e){}},{key:"quality",get:function(){return 1},set:function(e){}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderTank",value:function(e,t){}},{key:"renderClock",value:function(e,t){}},{key:"renderTankStats",value:function(e){}},{key:"renderBullet",value:function(e,t){}},{key:"setSpeed",value:function(e){}},{key:"stop",value:function(){}},{key:"dispose",value:function(){}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),V=PIXI;function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._model=t,this._view=null,this._isAlive=!0}var t,r;return t=e,(r=[{key:"isAlive",get:function(){return this._isAlive}},{key:"destroy",value:function(){this._isAlive=!1}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"update",value:function(e){}}])&&z(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H(e,t)}function G(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(n);if(o){var r=K(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return G(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this))._debug=e,t._tankMap=[],t._bulletMap=[],t._offsetX=0,t._offsetY=0,t._speedMultiplier=1,t}return t=a,(r=[{key:"log",value:function(e){this._debug&&console.log("[RENDERER] "+e)}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"speedMultiplier",get:function(){return this._speedMultiplier}},{key:"initBatlefield",value:function(e){this._offsetX=e.offsetX,this._offsetY=e.offsetY}},{key:"renderTank",value:function(e,t){this._renderModel(e,t,this._tankMap,this._createTankView)}},{key:"renderBullet",value:function(e,t){this._renderModel(e,t,this._bulletMap,this._createBulletView)}},{key:"getBulletView",value:function(e){return this._bulletMap[e]}},{key:"getTankView",value:function(e){return this._tankMap[e]}},{key:"setSpeed",value:function(e){this._speedMultiplier=e}},{key:"_renderModel",value:function(e,t,r,n){var o=null;return r[e.id]?o=r[e.id]:(o=n(e),r[e.id]=o),o.update(t),o}},{key:"_createTankView",value:function(e){return new U(e)}},{key:"_createBulletView",value:function(e){return new U(e)}},{key:"dispose",value:function(){}}])&&q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}($);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Q(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},J.apply(this,arguments)}function Q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}function ee(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=te(n);if(o){var r=te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ee(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._model=e,t._view=new V.Container,t._create(t._view),t}return t=a,(r=[{key:"update",value:function(e){J(te(a.prototype),"update",this).call(this,e),void 0!==this._model.x&&(this._view.x=this._model.x),void 0!==this._model.y&&(this._view.y=this._model.y),void 0!==this._model.angle&&(this._view.rotation=this._model.angle*(Math.PI/180))}},{key:"destroy",value:function(){J(te(a.prototype),"destroy",this).call(this),this.view.parent&&this.view.parent.removeChild(this.view)}},{key:"_create",value:function(e){}}])&&Y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(U);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=ae(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ie.apply(this,arguments)}function ae(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}function ue(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(n);if(o){var r=ce(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._hudView=new V.Container,t._createHud(t._hudView),t}return t=a,(r=[{key:"body",get:function(){return this._body}},{key:"hudView",get:function(){return this._hudView}},{key:"gun",get:function(){return this._gun}},{key:"radar",get:function(){return this._radar}},{key:"label",get:function(){return this._label}},{key:"energyBar",get:function(){return this._energyBar}},{key:"update",value:function(e){ie(ce(a.prototype),"update",this).call(this,e),this.view.rotation=0,this.body.rotation=this.model.angle*(Math.PI/180),this.gun.rotation=(this.model.angle+this.model.gunAngle)*(Math.PI/180),this.radar.rotation=(this.model.angle+this.model.radarAngle)*(Math.PI/180),this.energyBar.scale.x=this.model.energy/this.model.maxEnergy,this.label.text=this.model.fullName,this.hudView.x=this.view.x,this.hudView.y=this.view.y;for(var t=0;t<e.length;t++)this._onEvent(e[t])}},{key:"_onEvent",value:function(e){switch(e.type){case"shoot":this._onShoot(e);break;case"destroy":this._onDestroy(e)}}},{key:"_onShoot",value:function(e){}},{key:"_onDestroy",value:function(e){this.destroy()}},{key:"_create",value:function(e){ie(ce(a.prototype),"_create",this).call(this,e),this._body=this._createBody(),this._gun=this._createGun(),this._radar=this._createRadar(),e.addChild(this._body),e.addChild(this._gun),e.addChild(this._radar)}},{key:"_createHud",value:function(e){this._label=this._createLabel(),this._energyBar=this._createEnergyBar(),e.addChild(this._createHudBackground()),e.addChild(this._energyBar),e.addChild(this._label)}},{key:"_createBody",value:function(){return new V.Sprite}},{key:"_createGun",value:function(){return new V.Sprite}},{key:"_createRadar",value:function(){return new V.Sprite}},{key:"_createHudBackground",value:function(){return new V.Sprite}},{key:"_createEnergyBar",value:function(){return new V.Sprite}},{key:"_createLabel",value:function(){return new V.Text}},{key:"destroy",value:function(){ie(ce(a.prototype),"destroy",this).call(this),this.hudView.parent&&this.hudView.parent.removeChild(this.hudView)}}])&&oe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"construct",value:function(){this._msElapsed=0,this._msLimit=0}},{key:"update",value:function(e,t){this._msElapsed=e,this._msLimit=t}},{key:"msElapsed",get:function(){return this._msElapsed}},{key:"msLimit",get:function(){return this._msLimit}},{key:"text",get:function(){var e=Math.max(0,this._msLimit-this._msElapsed),t=Math.floor(e/1e3),r=e%1e3;for(t=t.toString();t.length<2;)t="0"+t;for(r=r.toString();r.length<3;)r="0"+r;return"0:"+t+"."+r}}])&&fe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ye(){return ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=me(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ye.apply(this,arguments)}function me(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}function ve(e,t){return ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ve(e,t)}function be(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(n);if(o){var r=_e(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return be(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._name=e,r._isDisposed=!1,V.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,r._masterContainer=new V.Container,r._tankContainer=new V.Container,r._bulletContainer=new V.Container,r._hudContainer=new V.Container,r._masterContainer.addChild(r._tankContainer),r._masterContainer.addChild(r._bulletContainer),r._masterContainer.addChild(r._hudContainer),r._renderer=null,r._stage=null,r._clockModel=new pe,r._clockView=null,r._battlefieldView=null,window.devicePixelRatio>=2?r._rendererScale=2:r._rendererScale=1,r.log("Contructing Renderer"),r}return t=a,(r=[{key:"stage",get:function(){return this._stage}},{key:"battlefieldView",get:function(){return this._battlefieldView}},{key:"masterContainer",get:function(){return this._masterContainer}},{key:"initBatlefield",value:function(e){this.log("initializing the battlefield"),ye(_e(a.prototype),"initBatlefield",this).call(this,e),this._masterContainer.x=-this.offsetX,this._masterContainer.y=-this.offsetY,this.log("battlefield offset: x=".concat(this._masterContainer.x,", y=").concat(this._masterContainer.y));var t={view:this._canvas,antialias:!1,backgroundColor:16777215,resolution:this._rendererScale,width:e.width+2*e.margin,height:e.height+2*e.margin};this.log("renderer settings: width=".concat(t.width,", height=").concat(t.width)),this._renderer=new V.autoDetectRenderer(t),this._stage=new V.Container,this._battlefieldView=this._createBattlefieldView(e),this._clockView=this._createClockView(this._clockModel),this._stage.addChild(this._battlefieldView.view),this._stage.addChild(this._masterContainer),this._stage.addChild(this._clockView.view),this._renderer.render(this._stage),this.log("battlefield initialized")}},{key:"init",value:function(e){this._canvas=e}},{key:"loadAssets",value:function(e,t){var r=this;if(this.log("loading assets, urlPrefix: '".concat(t,"'")),t=t||"",!this._name)return this.log("No assets to load for that renderer. Done."),void e();var n=new V.Loader,o=[];for(var i in n.resources)this.log("adding resource to load '".concat(i,"'")),o.push(i);this._getSpritesheetUrls(this._name,this._rendererScale).filter((function(e){return-1==o.indexOf(e)})).forEach((function(e){n.add(t+e)})),this.log("loading assets..."),n.load((function(t,n){if(r._isDisposed)return r.log("Renderer disposed: Clearing texture cache"),V.utils.clearTextureCache(),void r.log("Renderer disposed: Skipping onAssetsLoaded handler");r.log("onAssetsLoaded()"),r.onAssetsLoaded(),r.log("Assets loaded"),e()}))}},{key:"onAssetsLoaded",value:function(){}},{key:"preRender",value:function(){this._battlefieldView.update()}},{key:"renderTank",value:function(e,t){ye(_e(a.prototype),"renderTank",this).call(this,e,t);var r=this.getTankView(e.id);!r.parent&&r.isAlive&&(this._tankContainer.addChild(r.view),this._hudContainer.addChild(r.hudView))}},{key:"renderBullet",value:function(e,t){ye(_e(a.prototype),"renderBullet",this).call(this,e,t);var r=this.getBulletView(e.id);!r.parent&&r.isAlive&&this._bulletContainer.addChild(r.view)}},{key:"renderClock",value:function(e,t){this._clockModel.update(e,t),this._clockView.update()}},{key:"postRender",value:function(){ye(_e(a.prototype),"postRender",this).call(this),this._renderer.render(this._stage)}},{key:"_getSpritesheetUrls",value:function(e,t){var r=2==t?"retina@2x":"web";return["img/spritesheets/".concat(e,"/").concat(r,"/jsbattle.json")]}},{key:"_createTankView",value:function(e){return new le(e)}},{key:"_createBulletView",value:function(e){return new re(e)}},{key:"_createBattlefieldView",value:function(e){return new re(e)}},{key:"_createClockView",value:function(e){return new re(e)}},{key:"dispose",value:function(){this.log("Disposing..."),this._isDisposed=!0,this._renderer?(this._renderer.context.gl.getExtension("WEBGL_lose_context").loseContext(),this._renderer.destroy(),this._renderer=null):this.log("Already disposed"),this._canvas=null,this._stage=null,this.log("Clearing texture cache"),V.utils.clearTextureCache()}}])&&de(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(X);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Oe(e,t)}function Pe(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(n);if(o){var r=je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pe(this,e)});function a(){return ke(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.Graphics;t.beginFill(0),t.lineStyle(1,16776960,.8),t.drawRect(0,0,this.model.width+2*this.model.margin,this.model.height+2*this.model.margin),t.endFill(),e.addChild(t),(t=new V.Graphics).beginFill(0),t.lineStyle(1,16776960,.8),t.drawRect(this.model.margin,this.model.margin,this.model.width,this.model.height),t.endFill(),e.addChild(t)}},{key:"update",value:function(e){}}])&&Se(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function Re(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(n);if(o){var r=Ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Re(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"});this._label=new V.Text("clock",t),this._label.x=5,this._label.y=5,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&Te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(){return Ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Le(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ie.apply(this,arguments)}function Le(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ve(e)););return e}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function $e(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ve(n);if(o){var r=Ve(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $e(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"update",value:function(e){Ie(Ve(a.prototype),"update",this).call(this,e),this.view.scale.x=this.view.scale.y=.7*this.model.power+.3,this.model.exploded&&this.destroy()}}])&&Ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e,t){return qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qe(e,t)}function He(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ge(n);if(o){var r=Ge(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return He(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.Graphics;t.beginFill(65280,.5),t.drawCircle(0,0,5),t.endFill(),e.addChild(t)}}])&&Fe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ze);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ye(e,t){return Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ye(e,t)}function Je(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qe(n);if(o){var r=Qe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Je(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_createBody",value:function(){var e=new V.Graphics;return e.lineStyle(1,16776960,.8),e.beginFill(65280,.5),e.drawRect(-15,-15,30,30),e.endFill(),e}},{key:"_createGun",value:function(){var e=new V.Graphics;return e.beginFill(65280,.5),e.lineStyle(1,16776960,.8),e.drawCircle(0,0,10),e.drawRect(0,-3,30,6),e.endFill(),e}},{key:"_createRadar",value:function(){var e=new V.Graphics;e.beginFill(65280,.5),e.lineStyle(1,16776960,.8),e.drawRect(-3,-10,6,20),e.endFill(),e.lineStyle(),e.beginFill(11206570,.1),e.moveTo(0,-3);var t=300*Math.tan(Math.PI/180*6)/2;return e.lineTo(300,-t),e.lineTo(300,t),e.lineTo(0,3),e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:65280}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.lineStyle(1,16776960,.8),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(65280,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&We(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(le);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(){return rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=nt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},rt.apply(this,arguments)}function nt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=at(e)););return e}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=at(n);if(o){var r=at(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return it(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,void 0,e))._frameCounter=0,t._fpsLabel=null,t._scoreBoard=null,t}return t=a,(r=[{key:"initBatlefield",value:function(e){rt(at(a.prototype),"initBatlefield",this).call(this,e);var t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"});this._fpsLabel=new V.Text("FPS",t),this._fpsLabel.x=100,this._fpsLabel.y=5,this.stage.addChild(this._fpsLabel);var r=this;setInterval((function(){r._fpsLabel.text="FPS: "+r._frameCounter,r._frameCounter=0}),1e3),t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"}),this._scoreBoard=new V.Text("scores",t),this._scoreBoard.x=e.margin+2,this._scoreBoard.y=e.margin+2,this._scoreBoard.alpha=.5,this.stage.addChild(this._scoreBoard)}},{key:"renderTankStats",value:function(e){rt(at(a.prototype),"renderTankStats",this).call(this,e);var t,r=[];for(t=0;t<e.length;t++)r.push({name:e[t].fullName,energy:e[t].energy,value:e[t].score});r.sort((function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}));var n="";for(t=0;t<r.length;t++)n+=r[t].value.toFixed(3)+" - "+r[t].name+(0==r[t].energy?" [X]":"")+"\n";this._scoreBoard.text=n}},{key:"postRender",value:function(){rt(at(a.prototype),"postRender",this).call(this),this._frameCounter++}},{key:"_createBattlefieldView",value:function(e){return new xe(e)}},{key:"_createClockView",value:function(e){return new De(e)}},{key:"_createBulletView",value:function(e){return new Ke(e)}},{key:"_createTankView",value:function(e){return new Ze(e)}}])&&tt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}var dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ht(n);if(o){var r=ht(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return pt(this,e)});function a(){return ct(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"_create",value:function(e){var t=V.Sprite.from("battlefield");e.addChild(t)}},{key:"update",value:function(e){}}])&&lt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e,t){return vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vt(e,t)}function bt(e,t){if(t&&("object"===yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(n);if(o){var r=_t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bt(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:15,fill:"#000000"});this._label=new V.Text("clock",t),this._label.x=10,this._label.y=580,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t){return St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},St(e,t)}function Ot(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}var jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pt(n);if(o){var r=Pt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ot(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=V.Sprite.from("bullet");t.anchor.set(.5),e.addChild(t)}}])&&kt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ze);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tt(){return Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Ct(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Tt.apply(this,arguments)}function Ct(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dt(e)););return e}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}function At(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(o){var r=Dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return At(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"update",value:function(e){Tt(Dt(a.prototype),"update",this).call(this,e),this._shoot.alpha=this.model.isShooting?1:.7*this._shoot.alpha}},{key:"_createBody",value:function(){var e=V.Sprite.from("tank_body");return e.anchor.set(.5),e}},{key:"_createGun",value:function(){var e=new V.Container,t=V.Sprite.from("tank_gun");return t.anchor.set(.3,.5),e.addChild(t),this._shoot=V.Sprite.from("tank_shoot"),this._shoot.anchor.set(-1.2,.5),this._shoot.alpha=0,e.addChild(this._shoot),e}},{key:"_createRadar",value:function(){var e=V.Sprite.from("tank_radar");return e.anchor.set(.5),e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:0}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(16711680,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&Et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(le);function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(){return Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Bt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Lt.apply(this,arguments)}function Bt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zt(e)););return e}function $t(e,t){return $t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$t(e,t)}function Vt(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}var Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$t(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(n);if(o){var r=zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,"bw",e))._bigBoomAnim=[],t._smallBoomAnim=[],t._shakeTimer=0,t}return t=a,(r=[{key:"onAssetsLoaded",value:function(){for(var e=0;e<=9;e++)this._bigBoomAnim.push(V.Texture.from("big_boom_00"+e)),this._smallBoomAnim.push(V.Texture.from("small_boom_00"+e))}},{key:"initBatlefield",value:function(e){Lt(zt(a.prototype),"initBatlefield",this).call(this,e)}},{key:"renderTank",value:function(e,t){Lt(zt(a.prototype),"renderTank",this).call(this,e,t),0==e.energy&&(this._shakeTimer=10,this._addExplosion(e.x,e.y,this._bigBoomAnim))}},{key:"renderBullet",value:function(e,t){Lt(zt(a.prototype),"renderBullet",this).call(this,e,t),e.exploded&&this._addExplosion(e.x,e.y,this._smallBoomAnim)}},{key:"postRender",value:function(){Lt(zt(a.prototype),"postRender",this).call(this),this._shakeTimer>0?(this._shakeTimer--,this.masterContainer.x=10*Math.random()-5-this.offsetX,this.masterContainer.y=10*Math.random()-5-this.offsetY):(this.masterContainer.x=-this.offsetX,this.masterContainer.y=-this.offsetY)}},{key:"_createBattlefieldView",value:function(e){return new dt(e)}},{key:"_createClockView",value:function(e){return new gt(e)}},{key:"_createBulletView",value:function(e){return new jt(e)}},{key:"_createTankView",value:function(e){return new Mt(e)}},{key:"_addExplosion",value:function(e,t,r){var n=new V.AnimatedSprite(r);n.anchor.set(.5),this.masterContainer.addChild(n),n.x=e,n.y=t,n.loop=!1,n.onComplete=function(){this.stop(),this.parent.removeChild(this)},n.play()}}])&&It(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(){return Ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Gt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ht.apply(this,arguments)}function Gt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wt(e)););return e}function Kt(e,t){return Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kt(e,t)}function Xt(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}var Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wt(n);if(o){var r=Wt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Xt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._holeList=[],t._settings=null,t}return t=a,(r=[{key:"configure",value:function(e){this._settings=e}},{key:"_create",value:function(e){var t=V.Sprite.from("battlefield");e.addChild(t);var r=new V.Graphics;r.beginFill(255,1),r.moveTo(25,25),r.lineTo(875,25),r.lineTo(875,575),r.lineTo(90,575),r.lineTo(90,565),r.lineTo(25,565),r.lineTo(25,25),r.endFill(),this._craterContainer=new V.Container,this._craterContainer.mask=r,e.addChild(this._craterContainer),e.addChild(r);var n=new V.Graphics;n.beginFill(255,.4),n.moveTo(15,15),n.lineTo(885,15),n.lineTo(885,585),n.lineTo(80,585),n.lineTo(80,575),n.lineTo(15,575),n.lineTo(15,15),n.lineTo(25,25),n.lineTo(25,575),n.lineTo(80,575),n.lineTo(80,575),n.lineTo(875,575),n.lineTo(875,25),n.lineTo(25,25),n.endFill(),this._holesContainer=new V.Container,this._holesContainer.mask=n,e.addChild(this._holesContainer),e.addChild(n)}},{key:"addCrater",value:function(e,t){var r=V.Sprite.from("crater");r.anchor.set(.5),r.x=e-this.model.offsetX,r.y=t-this.model.offsetY,r.blendMode=V.BLEND_MODES.MULTIPLY,r.alpha=.8,this._craterContainer.addChild(r)}},{key:"update",value:function(){Ht(Wt(a.prototype),"update",this).call(this),this._holesContainer.visible=this._settings.skratchLimit>0,this._craterContainer.visible=this._settings.showCraters}},{key:"addBulletHole",value:function(e,t,r){var n=0;if(Math.abs(t-this.model.maxY)<10)t=this.model.maxY+3+3*Math.random();else if(Math.abs(t-this.model.minY)<10)t=this.model.minY-3-3*Math.random();else if(Math.abs(e-this.model.maxX)<10)e=this.model.maxX+3+3*Math.random(),n=Math.PI/2;else{if(!(Math.abs(e-this.model.minX)<10))return;e=this.model.minX-3-3*Math.random(),n=Math.PI/2}var o=V.Sprite.from("hole");o.anchor.set(.5),o.x=e-this.model.offsetX,o.y=t-this.model.offsetY,o.rotation=n,o.scale.x=o.scale.y=.7+.5*r,this._holesContainer.addChild(o),this._holeList.push(o);for(var i=this._settings?this._settings.skratchLimit:20;this._holeList.length>i;)(o=this._holeList.shift()).parent.removeChild(o)}}])&&qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zt(e,t){return Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zt(e,t)}function er(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tr(e){return tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(e)}var rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tr(n);if(o){var r=tr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return er(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:15,fill:"#000000"});this._label=new V.Text("clock",t),this._label.x=10,this._label.y=580,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&Qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(re);function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=ar(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ir.apply(this,arguments)}function ar(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cr(e)););return e}function sr(e,t){return sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sr(e,t)}function ur(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}var lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cr(n);if(o){var r=cr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ur(this,e)});function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"configure",value:function(e){this._settings=e}},{key:"update",value:function(e){ir(cr(a.prototype),"update",this).call(this,e),this._glow.visible=this._settings&&this._settings.showGlow}},{key:"_create",value:function(e){var t=V.Sprite.from("bullet");t.anchor.set(.5);var r=V.Sprite.from("glow");r.anchor.set(.5),r.blendMode=V.BLEND_MODES.ADD,r.alpha=.1,this._glow=r,e.addChild(r),e.addChild(t)}}])&&or(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ze);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(){return hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=dr(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},hr.apply(this,arguments)}function dr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vr(e)););return e}function yr(e,t){return yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yr(e,t)}function mr(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vr(e){return vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vr(e)}var br=[16777215,16751001,11184895,16777113,3407667],_r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vr(n);if(o){var r=vr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return mr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._lightTimer=0,t}return t=a,(r=[{key:"color",get:function(){return br[this.model.team.index%br.length]}},{key:"update",value:function(e){hr(vr(a.prototype),"update",this).call(this,e),console.log(this.model.team.index),this._shoot.alpha=.8*this._shoot.alpha,this._tankGun.x=.8*this._tankGun.x,this.radar.rotation=(-this.model.gunAngle+this._model.radarAngle)*(Math.PI/180),this._lightTimer=this.model.enemySpot?this._lightTimer+1:0,this._light.alpha=.5*-Math.cos(.25*this._lightTimer)+.5}},{key:"_onShoot",value:function(e){hr(vr(a.prototype),"_onShoot",this).call(this,e),this._tankGun.x=-1-3*e.bullet.power,this._shoot.alpha=1}},{key:"_create",value:function(e){hr(vr(a.prototype),"_create",this).call(this,e),this._tankGun.addChild(this.radar)}},{key:"_createBody",value:function(){var e=V.Sprite.from("tank_body_"+this.model.skin);return e.anchor.set(.3,.5),e}},{key:"_createGun",value:function(){var e=new V.Container,t=V.Sprite.from("tank_gun_"+this.model.skin);return t.anchor.set(.3,.5),e.addChild(t),this._tankGun=t,this._shoot=V.Sprite.from("tank_shoot"),this._shoot.anchor.set(.3,.5),this._shoot.alpha=0,this._light=V.Sprite.from("tank_light"),this._light.anchor.set(.3,.5),this._light.alpha=0,e.addChild(this._shoot),e.addChild(this._light),e}},{key:"_createRadar",value:function(){var e=V.Sprite.from("tank_radar_"+this.model.skin);return e.anchor.set(.2,.5),e.x=-5,e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:10,stroke:0,strokeThickness:2,fill:this.color}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(this.color,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&pr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(le);function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._particleLimit=1e3,this._skratchLimit=100,this._showDirt=!0,this._showGlow=!0,this._showCraters=!0,this._dropFrames=1,this._quality=1,this.quality=this._quality}var t,r;return t=e,(r=[{key:"dropFrames",get:function(){return this._dropFrames}},{key:"particleLimit",get:function(){return this._particleLimit}},{key:"skratchLimit",get:function(){return this._skratchLimit}},{key:"showDirt",get:function(){return this._showDirt}},{key:"showGlow",get:function(){return this._showGlow}},{key:"showCraters",get:function(){return this._showCraters}},{key:"quality",get:function(){return this._quality},set:function(e){e=Math.min(1,Math.max(0,e)),this._quality=e,this._particleLimit=Math.round(1e3*e*e),this._skratchLimit=Math.round(100*e),this._showDirt=e>.2,this._showGlow=e>.5,this._showCraters=e>.1,this._dropFrames=e>.3?1:e>.2?2:e>.1?3:4,this._quality=e}}])&&gr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Or(){return Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Pr(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Or.apply(this,arguments)}function Pr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Er(e)););return e}function jr(e,t){return jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jr(e,t)}function xr(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Er(e){return Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Er(e)}var Tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Er(n);if(o){var r=Er(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,"brody",e))._bigBoomAnim=[],t._shakeTimer=0,t._particleContainer=null,t._particleList=[],t._explosionList=[],t._settings=new wr,t._masterContainer.addChild(t._bulletContainer),t._frameTimer=0,t._frameCounter=0,t._fpsInterval=null,t._fps=30,t}return t=a,(r=[{key:"onAssetsLoaded",value:function(){var e;for(e=0;e<=22;e++)this._bigBoomAnim.push(V.Texture.from("big_boom_0"+(e<10?"0"+e:e)))}},{key:"quality",get:function(){return this._settings.quality},set:function(e){this._settings.quality=e}},{key:"initBatlefield",value:function(e){Or(Er(a.prototype),"initBatlefield",this).call(this,e),this.battlefieldView.configure(this._settings),this._particleContainer=new V.ParticleContainer(1e3,{position:!0,rotation:!0,alpha:!0}),this._masterContainer.addChild(this._particleContainer),this._masterContainer.addChild(this._hudContainer);var t=this;this._fpsInterval=setInterval((function(){t._fps=t._frameCounter,t._frameCounter=0}),1e3)}},{key:"renderTank",value:function(e,t){var r;for(r in Or(Er(a.prototype),"renderTank",this).call(this,e,t),t)if("destroy"==t[r].type){this._shakeTimer=10,this._addTankExplosion(e);break}var n=e.throttle>0?180:0,o=(e.angle+n)*(Math.PI/180);if(e.speed>1){var i=e.x+20*Math.cos(o-Math.PI/4)+7*Math.cos(o),s=e.y+20*Math.sin(o-Math.PI/4)+7*Math.sin(o),u=e.x+20*Math.cos(o+Math.PI/4)+7*Math.cos(o),c=e.y+20*Math.sin(o+Math.PI/4)+7*Math.sin(o);Math.random()<this.speedMultiplier&&(this._addDirt(i,s),this._addDirt(u,c))}}},{key:"renderBullet",value:function(e,t){Or(Er(a.prototype),"renderBullet",this).call(this,e,t),this.getBulletView(e.id).configure(this._settings),e.exploded&&(this._addBulletExplosion(e),this.battlefieldView.addBulletHole(e.x,e.y,e.power))}},{key:"preRender",value:function(){var e;Or(Er(a.prototype),"preRender",this).call(this);var t,r=0;for(t=this._particleList.length-1;t>=0;t--)(e=this._particleList[t])&&(e.x+=this.speedMultiplier*e.speed*e.rotation*Math.cos(e.rotation),e.y+=this.speedMultiplier*e.speed*e.rotation*Math.sin(e.rotation),e.alpha=Math.max(0,e.alpha-this.speedMultiplier*e.alphaSpeed),e.lifetime-=this.speedMultiplier,e.lifetime<=0||r>this._settings.particleLimit?(e.parent.removeChild(e),this._particleList[t]=null):r++);for(t=0;t<this._explosionList.length;t++)this._explosionList[t]&&(this._explosionList[t].alpha=this._explosionList[t].alpha-.12*this.speedMultiplier,this._explosionList[t].alpha<.01&&(this._explosionList[t].parent.removeChild(this._explosionList[t]),this._explosionList[t]=null))}},{key:"postRender",value:function(){this._frameTimer++,this._frameCounter++,this._frameTimer%this._settings.dropFrames==0&&Or(Er(a.prototype),"postRender",this).call(this),this._shakeTimer>0?(this._shakeTimer--,this.masterContainer.x=10*Math.random()-5-this.offsetX,this.masterContainer.y=10*Math.random()-5-this.offsetY,this._battlefieldView.view.x=10*Math.random()-5,this._battlefieldView.view.y=10*Math.random()-5):(this.masterContainer.x=-this.offsetX,this.masterContainer.y=-this.offsetY,this._battlefieldView.view.x=0,this._battlefieldView.view.y=0)}},{key:"stop",value:function(){this._fpsInterval&&clearInterval(this._fpsInterval)}},{key:"_getSpritesheetUrls",value:function(e,t){return t>=2?["img/spritesheets/".concat(e,"/retina@2x/jsbattle_0.json"),"img/spritesheets/".concat(e,"/retina@2x/jsbattle_1.json")]:["img/spritesheets/".concat(e,"/web/jsbattle.json")]}},{key:"_addTankExplosion",value:function(e){this._addExplosion(e.x,e.y,this._bigBoomAnim),this.battlefieldView.addCrater(e.x,e.y),this._addSparks(e.x,e.y,300)}},{key:"_addBulletExplosion",value:function(e){this._addGlow(e.x,e.y,.3+.6*e.power);var t=5+40*e.power;this._addSparks(e.x,e.y,t)}},{key:"_createBattlefieldView",value:function(e){return new Yt(e)}},{key:"_createClockView",value:function(e){return new rr(e)}},{key:"_createBulletView",value:function(e){return new lr(e)}},{key:"_createTankView",value:function(e){return new _r(e)}},{key:"_addExplosion",value:function(e,t,r){this._addGlow(e,t,5);var n=new V.AnimatedSprite(r);n.animationSpeed=this.speedMultiplier,n.anchor.set(.5),this.masterContainer.addChild(n),n.x=e,n.y=t,n.loop=!1,n.blendMode=V.BLEND_MODES.ADD,n.onComplete=function(){this.stop(),this.parent.removeChild(this)},n.play()}},{key:"_addGlow",value:function(e,t,r){if(this._settings.showGlow){var n=V.Sprite.from("glow");n.anchor.set(.5),n.scale.x=n.scale.y=r,n.alpha=.4,n.blendMode=V.BLEND_MODES.ADD,n.x=e,n.y=t,this.masterContainer.addChild(n),this._explosionList.push(n)}}},{key:"_addSparks",value:function(e,t,r){r=Math.ceil(r*this._settings.quality);for(var n=0;n<r;n++){var o=V.Sprite.from("spark");o.x=e,o.y=t,o.alphaSpeed=0,o.anchor.set(.5),o.speed=1+2*Math.random(),o.rotation=2*Math.random()*Math.PI,o.lifetime=5+5*Math.random(),this._particleContainer.addChild(o),this._particleList.push(o)}}},{key:"_addDirt",value:function(e,t){if(this._settings.showDirt)for(var r=0;r<5;r++){var n=Math.floor(3*Math.random()),o=V.Sprite.from("dirt_"+n);o.x=e+4*Math.random()-2,o.y=t+4*Math.random()-2,o.anchor.set(.5),o.speed=0,o.alphaSpeed=.02+.02*Math.random(),o.rotation=0,o.alpha=.1+.4*Math.random(),o.lifetime=25,o.scale.x=o.scale.y=.5+2*Math.random(),this._particleContainer.addChild(o),this._particleList.push(o)}}}])&&Sr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dr(e,t){return Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dr(e,t)}function Mr(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}var Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nr(n);if(o){var r=Nr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Mr(this,e)});function a(){return Rr(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"renderTank",value:function(e,t){}},{key:"renderBullet",value:function(e,t){}},{key:"loadAssets",value:function(e){e()}},{key:"init",value:function(){}}])&&Ar(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}($);const Lr={createSimulation:function(e,t){return e=e||new $(t),new L(e,t)},createAiDefinition:function(){return new j},createUBD:function(){return new D},createRenderer:function(e,t){switch(e){case"debug":return new st(t);case"bw":return new Ut(t);case"brody":return new Tr(t);case"void":return new Ir(t);default:throw"Unknown renderer "+e}}};!function(e){e?e.JsBattle=Lr:console.warn("self is not defined")}(window)})()})();
//# sourceMappingURL=jsbattle.min.js.map